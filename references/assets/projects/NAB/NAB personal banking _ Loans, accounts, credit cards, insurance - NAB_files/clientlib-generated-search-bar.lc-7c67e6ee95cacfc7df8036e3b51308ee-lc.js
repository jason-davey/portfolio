!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["nab-aem-frontend"]=t():e["nab-aem-frontend"]=t()}(self,(()=>(()=>{"use strict";var e,t={8949:(e,t,n)=>{class s{}var i;s.HEADER_HEIGHT_UPDATE_EVENT="set-header-height-update-rate",s.HEADER_MENU_OR_LOGO_FOCUS_EVENT="header-menu-or-logo-focus-event",s.HEADER_BAR_SELECTOR=".nab-header-bar",s.HEADER_BAR_LOGO_SELECTOR=".nab-header-bar__logo > a",s.HEADER_BAR_INNER_SELECTOR=".nab-header-bar--inner",function(e){e[e.null=0]="null",e[e.passive=1]="passive",e[e.aggressive=2]="aggressive"}(i||(i={}));var r=n(685),a=n(8972),o=n.n(a);class c{}c.ARIA_EXPANDED="aria-expanded",c.ARIA_LABEL="aria-label",c.ARIA_LABELLEDBY="aria-labelledby",c.ARIA_HIDDEN="aria-hidden",c.ARIA_SELECTED="aria-selected",c.ARIA_ACTIVEDESCENDANT="aria-activedescendant",c.ARIA_DISABLED="aria-disabled",c.TAB_INDEX="tabindex",c.ALLOW_IN_TAB_ORDER_FOCUS="0",c.ALLOW_SCRIPT_ONLY_FOCUS="-1",c.ARIA_LIVE_DIV_SELECTOR=".nab-accessibility-aria-live",c.ARIA_DESCRIBEDBY="aria-describedby",c.ARIA_CURRENT="aria-current";var u=n(6974),h=function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};let l,d,E;const A=document.getElementsByTagName("nab-search-config")[0];A&&(l=A.dataset.tokenurl,d=A.dataset.clientid,E=A.dataset.scope);const _={Accept:"application/json","Content-Type":"application/json"};let m;const p=()=>h(void 0,void 0,void 0,(function*(){if(!m||Date.now()+2e3>=m.expires){const e=yield b(),t=yield I(e),n=Date.now()+1e3*t.expires_in;m={tokenValue:t.access_token,expires:n}}return m})),b=()=>h(void 0,void 0,void 0,(function*(){if(!d||!E||!l)throw new Error("Missing configuration for token retrieval");const e={client_id:d,grant_type:"nab:anonymous",scope:E},t=yield fetch(l,{method:"POST",body:JSON.stringify(e),headers:_});if(!t.ok)throw new Error("Failed to retrieve anonymous token");return yield t.json()})),I=e=>h(void 0,void 0,void 0,(function*(){if(!d||!E||!l)throw new Error("Missing configuration for token retrieval");const t={client_id:d,scope:E,actor_token:e.access_token,actor_token_type:"urn:ietf:params:oauth:token-type:access_token",grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",requested_token_type:"urn:ietf:params:oauth:token-type:access_token",subject_token:d,subject_token_type:"nab:oauth:token-type:client_id"},n=yield fetch(l,{method:"POST",body:JSON.stringify(t),headers:_});if(!n.ok)throw new Error("Failed to upgrade DAF token");return yield n.json()})),v=10;let f;const S=document.getElementsByTagName("nab-search-config")[0];S&&(f=S.dataset.searchurl);class L{}L.GRID_CONTENT_WIDTH=parseInt(u.Ar,v),L.LG_BREAKPOINT_MAX=parseInt(u.Vx,v),L.LG_BREAKPOINT_MIN=parseInt(u.nV,v),L.MD_BREAKPOINT_MAX=parseInt(u.Rf,v),L.MD_BREAKPOINT_MIN=parseInt(u.zv,v),L.SM_BREAKPOINT_MAX=parseInt(u.WS,v),L.SM_BREAKPOINT_MIN=parseInt(u.Ac,v),L.XS_BREAKPOINT_MAX=parseInt(u.tv,v),L.XS_BREAKPOINT_MIN=parseInt(u.L3,v),L.RADIX={BIN:2,DEC:v,HEX:16,OCT:8},L.FRAMERATE={30:33,60:16},L.TYPES={BIGINT:"bigint",BOOLEAN:"boolean",FUNCTION:"function",NUMBER:"number",OBJECT:"object",STRING:"string",SYMBOL:"symbol",UNDEFINED:"undefined"},L.MOBILE_OS_TYPES={ANDROID_DEVICE:"Android",IOS_DEVICE:"iOS",UNKNOWN:"unknown"};class N{}var O;N.MAIN_ELEMENT="main",N.OPEN_CLASS="open",N.ACTIVE_CLASS="active",N.HIDDEN_CLASS="hidden",N.HEADER_ID="header-container",N.MENU_SELECTOR="#menu",N.MAIN_NAVIGATION_SELECTOR="#main-navigation",N.SHOW_MAIN_NAVIGATION_CLASS="show-main-nav",N.FOCUS_ELEMENT_WHEN_OPENED_SELECTOR_NAV="#navigation a",N.ARIA_LABEL_MENU_WHEN_OPEN="Close menu",N.ARIA_LABEL_MENU_WHEN_CLOSED="Open menu",N.LEGACY_WRAPPER_SELECTOR="#wrapper",N.NAVIGATION_DRAWER_OPENED_EVENT="navigation-drawer-opened-event",N.NAVIGATION_DRAWER_CLOSED_EVENT="navigation-drawer-closed-event",N.ID_SELECTOR="#",function(e){e[e.XS=0]="XS",e[e.SM=1]="SM",e[e.MD=2]="MD",e[e.LG=3]="LG"}(O||(O={}));class D{static isAuthorMode(){return!!window.Granite||!!window.CQ}static isTouchDevice(){return"ontouchstart"in window}static isSafari(){const e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")&&-1===e.indexOf("android")||/iphone|ipad|ipod/.test(e)&&-1===e.indexOf("chrome")}static resolvePositiveInt(e,t=0){const n=Math.abs("number"==typeof e?e:parseInt(e,10));return"number"==typeof n&&n>=0?n:t}static hide(...e){e.forEach((e=>{e&&(e.classList.add(N.HIDDEN_CLASS),e.setAttribute(c.ARIA_HIDDEN,"true"))}))}static show(...e){e.forEach((e=>{e&&(e.classList.remove(N.HIDDEN_CLASS),e.setAttribute(c.ARIA_HIDDEN,"false"))}))}static getKeyCode(e){return e.key||e.which}static getMobileOSNameFromUserAgent(){const e=navigator.userAgent;return e.includes("Windows Phone")?"Windows Phone":e.includes("Android")?L.MOBILE_OS_TYPES.ANDROID_DEVICE:e.includes("iPhone")?L.MOBILE_OS_TYPES.IOS_DEVICE:L.MOBILE_OS_TYPES.UNKNOWN}static getWindowSize(){return window.innerWidth>L.MD_BREAKPOINT_MAX?O.LG:window.innerWidth>L.SM_BREAKPOINT_MAX?O.MD:window.innerWidth>L.XS_BREAKPOINT_MAX?O.SM:O.XS}}D.extendQueryString=(e,t)=>{const[n,s]=e.split("?");let i=Object.fromEntries(new URLSearchParams(s));return i=Object.assign(Object.assign({},i),t),`${n}?${new URLSearchParams(i).toString()}`},D.isOutOfViewport=e=>{const t=e>L.GRID_CONTENT_WIDTH,n=e>window.innerWidth||e>document.documentElement.clientWidth;return t||n},D.getFocusableElements=e=>{const t=["a[href]","area[href]","input:not([disabled])",'input[type="radio"]',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]","*[tabindex]"].join(",");return Array.from(e.querySelectorAll(t)).filter((e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility}))};class g{constructor(e,t){this.code=e,this.codeIE=t}}new g("ArrowDown","Down"),new g("Enter"),new g("Escape","Esc"),new g("ArrowLeft","Left"),new g("ArrowRight","Right"),new g(" ","Spacebar");const w=new g("Tab");new g("ArrowUp","Up"),new g("Home"),new g("End");const R=".nab-header-search__form",T="#nab-header-search__input",y="term",M="search-active",C=/^\/search$/i;class B{constructor(){this.megaMenu=document.querySelector(".nab-header-bar__mega-menu--desktop"),this.searchForm=document.querySelector(R),this.searchLabel=document.querySelector(".nab-header-search__label"),this.searchInput=document.querySelector(T),this.searchButton=document.querySelector(".nab-header-search__search-button"),this.closeSearchButton=document.querySelector(".nab-header-search__close-button"),this.helpButton=document.querySelector(".nab-header-bar__help"),this.searchInputMobile=document.querySelector("#side-menu-search"),this.resultList=document.querySelector(".nab-header-search__results"),this.searchOpen=!1,this.searchLabelMobile=document.querySelector(".animate-label"),this.searchFormMobile=document.querySelector(".search-form-mobile"),this.searchButtonMobile=document.querySelector(".nab-header-search__search-button-mobile"),this.mobileSearchOpen=!1,this.ariaLiveDiv=document.querySelector(c.ARIA_LIVE_DIV_SELECTOR),this.bindEvents(),requestAnimationFrame((()=>{if(this.searchInput&&window.location.pathname.match(C)){const e=new URLSearchParams(window.location.search);e.has(y)&&(this.searchInput.value=e.get(y)),this.showSearch()}}))}static init(){return new B}bindEvents(){this.searchButton&&this.searchButton.addEventListener("click",(e=>{e.preventDefault(),this.showSearch()})),this.searchForm&&this.searchForm.addEventListener("submit",(e=>this.submitSearchForm(e,this.searchInput))),this.closeSearchButton&&this.closeSearchButton.addEventListener("click",this.closeSearch.bind(this)),this.searchInputMobile&&(this.searchButtonMobile&&this.searchButtonMobile.addEventListener("click",(e=>{this.submitSearchForm(e,this.searchInputMobile),e.defaultPrevented||this.searchFormMobile.submit()})),this.searchFormMobile&&this.searchFormMobile.addEventListener("submit",(e=>this.submitSearchForm(e,this.searchInputMobile))),this.searchInputMobile.addEventListener("focus",(()=>{this.mobileSearchOpen=!0,D.hide(this.searchLabelMobile)})),this.searchInputMobile.addEventListener("blur",(e=>{const t=e.target;this.mobileSearchOpen=!1,t&&!t.value.length&&D.show(this.searchLabelMobile)}))),document.addEventListener("click",(e=>{e.target&&!e.target.closest(".nab-header-search__input-container")&&this.searchOpen&&this.clearAutoCompleteResultList()})),this.searchInput&&(this.searchInput.addEventListener("keydown",(e=>{D.getKeyCode(e)===w.code&&this.clearAutoCompleteResultList()})),this.initAutoComplete(T,this.searchInput,this.resultList))}submitSearchForm(e,t){this.isValidInput(t.value)||e.preventDefault(),this.searchInput.value=this.searchInput.value.trim()}isValidInput(e){return e.trim().length>0}clearAutoCompleteResultList(){this.resultList&&this.searchOpen&&this.resultList.childNodes.forEach((e=>e.innerHTML=""))}showSearch(){this.searchForm&&(this.searchOpen&&this.isValidInput(this.searchInput.value)?this.searchForm.submit():(this.searchForm.classList.add(M),D.show(this.closeSearchButton),D.hide(this.helpButton),this.searchLabel.classList.add("fade-in"),this.megaMenu.classList.add("hidden"),this.searchInput.setAttribute(c.TAB_INDEX,c.ALLOW_IN_TAB_ORDER_FOCUS),this.searchInput.setAttribute(c.ARIA_HIDDEN,"false"),this.searchInput.setAttribute(c.ARIA_EXPANDED,"false"),requestAnimationFrame((()=>{this.searchInput.focus(),this.searchOpen=!0}))))}closeSearch(e){e.preventDefault(),this.clearAutoCompleteResultList(),this.searchForm.classList.remove(M),D.hide(this.closeSearchButton),D.show(this.helpButton),this.searchLabel.classList.remove("fade-in"),this.megaMenu.classList.remove("hidden"),this.searchInput.setAttribute(c.TAB_INDEX,c.ALLOW_SCRIPT_ONLY_FOCUS),this.searchInput.setAttribute(c.ARIA_HIDDEN,"true"),this.searchInput.setAttribute(c.ARIA_EXPANDED,"false"),this.searchButton.focus(),this.searchOpen=!1}initAutoComplete(e,t,n){const s="data-id",i="autoComplete_selected",a=(e,t,n,i,r,a)=>{i({event:e,matches:r.matches,query:t instanceof HTMLInputElement?t.value:t.innerHTML,results:r.list.map((e=>e.value)),selection:r.list.find((t=>e instanceof KeyboardEvent&&13===e.keyCode?Number(t.index)===Number(a.getAttribute(s)):"mousedown"===e.type?Number(t.index)===Number(e.currentTarget.getAttribute(s)):void 0))}),this.clearAutoCompleteResultList()};let u;const h=document.getElementsByTagName("nab-search-config")[0];h&&(u=h.dataset.searchurl);const l={endPoint:{autocomplete:u+"/suggestions"},authenticate:p,profile:"nabcq5_semantic",channel:"NAB"},d=new r._t(l),E=e=>{window.clearTimeout(this.messageTimeoutID),window.clearTimeout(this.clearMessageTimeoutID),this.messageTimeoutID=window.setTimeout((()=>{this.ariaLiveDiv.textContent=e}),1e3),this.clearMessageTimeoutID=window.setTimeout((()=>{this.ariaLiveDiv.textContent=null}),2e3)};return new(o())({data:{cache:!1,src:()=>{return e=this,n=void 0,i=function*(){if(t.value.length<3)return this.searchInput.setAttribute(c.ARIA_EXPANDED,"false"),[];const e={numberofsuggestions:10,channel:"NAB",profile:"nabcq5_semantic",searchquery:t.value.replace(/\//g,""),sort:!0},n=yield d.autocomplete(e),s=(null==n?void 0:n.suggestions)?null==n?void 0:n.suggestions:[];return this.ariaLiveDiv&&requestAnimationFrame((()=>{const e=1===s.length?"1 result is":`${s.length} results are`;E(`${e} available, use up and down arrow keys to navigate.`)})),this.searchInput.setAttribute(c.ARIA_EXPANDED,"true"),s},new((s=void 0)||(s=Promise))((function(t,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,o)}c((i=i.apply(e,n||[])).next())}));var e,n,s,i}},debounce:0,highlight:!0,maxResults:10,noResults:()=>{this.ariaLiveDiv&&requestAnimationFrame((()=>{E("No search results.")}))},onSelection:e=>{const n=e.selection.value;t.value=n,requestAnimationFrame((()=>{t.focus()}))},resultItem:{content:(e,t)=>{t.innerHTML=e.match,t.setAttribute("id",`autoComplete_list_${e.index}`),t.setAttribute("role","option")},element:"li"},resultsList:{container:e=>{e.setAttribute("role","listbox"),e.setAttribute("aria-labelledby",T)},destination:n,element:"ul",navigation:(e,t,n,s,r)=>{const o=n.childNodes,u=o.length-1;let h,l;const d=e=>{h.classList.remove(i),h.removeAttribute(c.ARIA_SELECTED),l=1===e?h.nextSibling:h.previousSibling},E=e=>{h=e,h.classList.add(i),h.setAttribute(c.ARIA_SELECTED,"true"),t.setAttribute(c.ARIA_ACTIVEDESCENDANT,h.getAttribute("id")),t.value=h.innerText};t.onkeydown=n=>{if(o.length>0)switch(n.keyCode){case 38:h?(d(0),E(l||o[u])):E(o[u]),n.preventDefault();break;case 40:h?(d(1),E(l||o[0])):E(o[0]),n.preventDefault();break;case 13:h&&a(e,t,0,s,r,h)}},o.forEach((e=>{e.onmousedown=n=>a(n,t,0,s,r,e)}))},position:"beforeend",render:!0},searchEngine:"strict",selector:e,threshold:0})}static isSearchBarEnabled(){return!!document.querySelector(R)}}addEventListener("HeaderBarInitialised",(()=>{B.isSearchBarEnabled()&&B.init()}))}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,n,i,r)=>{if(!n){var a=1/0;for(h=0;h<e.length;h++){for(var[n,i,r]=e[h],o=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(o=!1,r<a&&(a=r));if(o){e.splice(h--,1);var u=i();void 0!==u&&(t=u)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[n,i,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.j=946,(()=>{var e={946:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[a,o,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var h=c(s)}for(t&&t(n);u<a.length;u++)r=a[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(h)},n=self.wpJsonpNabAemFrontend=self.wpJsonpNabAemFrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[96],(()=>s(8949)));return s.O(i)})()));
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["nab-aem-frontend"]=e():t["nab-aem-frontend"]=e()}(self,(()=>(()=>{"use strict";var t,e={3936:(t,e,s)=>{s.r(e),s.d(e,{Search:()=>O});var n=s(685),i=s(8323),r=s(6974),a=function(t,e,s,n){return new(s||(s=Promise))((function(i,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function o(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}c((n=n.apply(t,e||[])).next())}))};let o,c,l;const h=document.getElementsByTagName("nab-search-config")[0];h&&(o=h.dataset.tokenurl,c=h.dataset.clientid,l=h.dataset.scope);const u={Accept:"application/json","Content-Type":"application/json"};let d;const p=10;let g;const _=document.getElementsByTagName("nab-search-config")[0];_&&(g=_.dataset.searchurl);const m={endPoint:{autocomplete:g+"/suggestions",search:g},authenticate:()=>a(void 0,void 0,void 0,(function*(){if(!d||Date.now()+2e3>=d.expires){const e=yield a(void 0,void 0,void 0,(function*(){if(!c||!l||!o)throw new Error("Missing configuration for token retrieval");const t={client_id:c,grant_type:"nab:anonymous",scope:l},e=yield fetch(o,{method:"POST",body:JSON.stringify(t),headers:u});if(!e.ok)throw new Error("Failed to retrieve anonymous token");return yield e.json()})),s=yield(t=e,a(void 0,void 0,void 0,(function*(){if(!c||!l||!o)throw new Error("Missing configuration for token retrieval");const e={client_id:c,scope:l,actor_token:t.access_token,actor_token_type:"urn:ietf:params:oauth:token-type:access_token",grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",requested_token_type:"urn:ietf:params:oauth:token-type:access_token",subject_token:c,subject_token_type:"nab:oauth:token-type:client_id"},s=yield fetch(o,{method:"POST",body:JSON.stringify(e),headers:u});if(!s.ok)throw new Error("Failed to upgrade DAF token");return yield s.json()}))),n=Date.now()+1e3*s.expires_in;d={tokenValue:s.access_token,expires:n}}var t;return d})),profile:"nabcq5_semantic",channel:"NAB"};class b{}let E,f;function v(t,e="polite",s="status"){E||(E=document.querySelector(".nab-accessibility-aria-live"),E)?(E.setAttribute("aria-live",e),E.setAttribute("role",s),window.clearTimeout(f),E.textContent=t,f=window.setTimeout((()=>{E.textContent=null}),5e3)):console.debug("Document must contain an ARIA live region element in order to make screen reader announcements")}function y(t,e){if(!window.ADRUM)return;const s=(e?`${e}: `:"")+(t instanceof Error?t.toString():t),n=new window.ADRUM.events.Error({line:0,msg:s});window.ADRUM.report(n)}b.GRID_CONTENT_WIDTH=parseInt(r.Ar,p),b.LG_BREAKPOINT_MAX=parseInt(r.Vx,p),b.LG_BREAKPOINT_MIN=parseInt(r.nV,p),b.MD_BREAKPOINT_MAX=parseInt(r.Rf,p),b.MD_BREAKPOINT_MIN=parseInt(r.zv,p),b.SM_BREAKPOINT_MAX=parseInt(r.WS,p),b.SM_BREAKPOINT_MIN=parseInt(r.Ac,p),b.XS_BREAKPOINT_MAX=parseInt(r.tv,p),b.XS_BREAKPOINT_MIN=parseInt(r.L3,p),b.RADIX={BIN:2,DEC:p,HEX:16,OCT:8},b.FRAMERATE={30:33,60:16},b.TYPES={BIGINT:"bigint",BOOLEAN:"boolean",FUNCTION:"function",NUMBER:"number",OBJECT:"object",STRING:"string",SYMBOL:"symbol",UNDEFINED:"undefined"},b.MOBILE_OS_TYPES={ANDROID_DEVICE:"Android",IOS_DEVICE:"iOS",UNKNOWN:"unknown"};var S,w,A,T=s(9418),I=s(68);class C{constructor(t,e){this.type=t,this.detail=e}send(){const t=document.createEvent("CustomEvent");t.initCustomEvent(this.type,!0,!0,this.detail),document.dispatchEvent(t)}}!function(t){t.BREADCRUMB_CLICK="breadcrumb-clicked",t.SCROLL_ACTION="scroll-action",t.CLICK_TO_CALL="click-to-call",t.CTA_CLICK="cta-click",t.NAVIGATION_CLICK="mega-menu-click",t.BANNER_CLICK="banner-click",t.MASTHEAD_CLICK="masthead-click",t.LINK_CARD_CLICK="link-card-click",t.FEATURE_CONTENT_CLICK="feature-content-click",t.EXPAND_ACCORDION="expand-accordion",t.SHOW_SEGMENTED_CONTENT="user-action",t.SHOW_USER_QUESTION="user-question",t.USER_ACTION="user-action",t.SEARCH="search",t.INTERNAL_AD_CLICK="internal-ad-click",t.INTERNAL_AD_DISMISSED="internal-ad-dismissed",t.INTERNAL_AD_LOAD="internal-ad-load"}(S||(S={})),function(t){t.BANNER="banner",t.LINK_CARD="linkCard",t.FEATURE_CONTENT="featureContent",t.INTERNAL_AD="internalAd"}(w||(w={})),function(t){t.CTA_CLICK="cta-click",t.SCROLL_HORIZONTAL_START="horizontal-start",t.SCROLL_HORIZONTAL_MIDPOINT="horizontal-midpoint",t.SCROLL_HORIZONTAL_COMPLETE="horizontal-complete",t.LINK_CARD_CLICK="link-card-click",t.FEATURE_CONTENT_CLICK="feature-content-click",t.BANNER_CLICK="banner-click",t.MASTHEAD_CLICK="masthead-click",t.INTERNAL_AD_CLICK="internal-ad-click",t.INTERNAL_AD_LOAD="internal-ad-load",t.INTERNAL_AD_DISMISSED="internal-ad-dismissed",t.SEARCH="search",t.SHOW_MORE="show-more"}(A||(A={}));class N{static triggerAnalytics(t,e){if(window.digitalData){const s={data:e,eventType:t};window.digitalData.event.push(s),new C(t).send()}}static triggerComponentAnalytics(t,e){window.digitalData&&(window.digitalData.components[t]||(window.digitalData.components[t]=[]),window.digitalData.components[t].push(e))}}class L{constructor(t,e){this.root=t,this.searchMgr=e,this.searchMgr.searchResults=this,this.hasError=!1,this.results=[],this.page=0,this.searchClient=new n._t(m),this.queryPredicate=this.searchMgr.searchTagTitles}search(){return t=this,e=arguments,n=function*(t=this.query,e=!0){var s;this.query=t,this.hasError=!1,this.isLoading=!0,v("Loading, please wait"),e?(this.page+=1,this.render()):(this.results=[],this.page=1);try{const t=yield this.searchClient.search({page:this.page,pageSize:L.pageSize,profile:"nabcq5_semantic",searchQuery:this.query,searchType:"USER",tags:this.queryPredicate});if(this.results=this.results.concat(null!==(s=t.searchResult)&&void 0!==s?s:[]),this.response=t,this.isLoading=!1,this.render(),e){const t=Array.from(this.root.querySelectorAll(".nab-search__item-separator")).pop(),e=16,{top:s}=function(t){const e=t.getBoundingClientRect(),s=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+n,left:e.left+s}}(t);window.scroll({top:s-64-e,behavior:"smooth"}),v(t.textContent),t.nextElementSibling.firstElementChild.focus({preventScroll:!0})}else this.root.querySelector(".nab-search__title").focus();this.trackEvent(e)}catch(t){this.hasError=!0,this.isLoading=!1,this.render(),this.root.querySelector(".nab-search__title").focus(),y(t,"Search component")}finally{this.searchMgr.onLoad()}},new((s=void 0)||(s=Promise))((function(i,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function o(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}c((n=n.apply(t,e||[])).next())}));var t,e,s,n}render(){(0,i.XX)(i.qy`
				<div class="nab-search-results-wrapper">
					<div class="nab-search-results">${this.resultsTemplate()}</div>
				</div>
			`,this.root)}resultsTemplate(){return this.hasError?i.qy`
				<h2
					class="nab-search__title"
					data-testid="search-results-title"
					tabindex="0"
				>
					Sorry, we couldn't perform a search right now. Please try again later.
				</h2>
			`:this.results.length||this.isLoading?this.response?i.qy`
				<h2
					class="nab-search__title"
					data-testid="search-results-title"
					tabindex="0"
				>
					Top results for
					<mark class="nab-search__title-highlight">${this.query}</mark>
				</h2>
				<ul class="nab-search__list">
					${this.itemsTemplate()}
				</ul>
				<div class="nab-search__button-container">
					${this.page*L.pageSize<Math.min(L.maxResultCount,this.response.resultsCount)||this.isLoading?i.qy`
								<div
									class="button nab-button--large nab-button--secondary nab-search__show-more-button-wrapper"
								>
									<button
										class="nab-button nab-search__show-more-button ${this.isLoading?"nab-search__show-more-button--loading":""}"
										type="button"
										data-testid="search-show-more-button"
										@click=${()=>{this.isLoading||this.search()}}
									>
										<span class="nab-search__show-more-button-text">
											Show more
										</span>
									</button>
								</div>
						  `:i.s6}
					<button
						@click=${()=>{this.searchMgr.setQuery(""),this.searchMgr.focusInput()}}
						class="nab-search__new-search-button"
						type="button"
						data-testid="new-search-button"
					>
						<svg
							aria-hidden="true"
							focusable="false"
							class="nab-search__new-search-button-icon"
						>
							<use xlink:href="#icon-search" />
						</svg>
						Start new search
					</button>
				</div>
			`:void 0:i.qy`
				<h2
					class="nab-search__title"
					data-testid="search-results-title"
					tabindex="0"
				>
					No results found for
					<mark class="nab-search__title-highlight">${this.query}</mark>
				</h2>
				${this.searchSuggestionsTemplate()}
			`}itemsTemplate(){return this.results.map(((t,e)=>i.qy`
					${e%L.pageSize==0?i.qy`
								<li role="separator" class="nab-search__item-separator">
									Results ${e+1} to
									${Math.min(e+L.pageSize,this.response.resultsCount)}
									of
									${Math.min(L.maxResultCount,this.response.resultsCount)}
								</li>
						  `:i.s6}
					<li class="nab-search__item">
						<a
							class="nab-search__item-link"
							href="${t.url}"
							target="_blank"
							rel="noopener"
							data-testid="search-result-link"
						>
							<div>
								<h3 class="nab-search__item-title">${t.title}</h3>
								<span class="sr-only">, opens in a new window</span>
								<p class="nab-search__item-body">
									${(0,I._)(T.A.sanitize(t.matchedTextExcerpt,{ALLOWED_TAGS:["b"]}))}
								</p>
							</div>
							<svg
								aria-hidden="true"
								focusable="false"
								class="nab-search__item-icon"
							>
								<use xlink:href="#icon-chevron-right" />
							</svg>
						</a>
					</li>
				`))}searchSuggestionsTemplate(){var t,e;const s=null!==(e=null===(t=this.response)||void 0===t?void 0:t.didYouMean)&&void 0!==e?e:[];return s.length?i.qy`
			<p class="nab-search__suggestions">
				Would you like to search
				${s.map(((t,e)=>[i.qy`
						<button
							@click=${()=>{this.searchMgr.setQuery(t),this.searchMgr.search()}}
							data-testid="search-suggestion"
							class="nab-search__suggestion"
						>
							${t}
							<span class="sr-only">(Select to search this term.)</span>
						</button>
					`,e<s.length-1?",":i.s6]))}
				?
			</p>
		`:i.s6}trackEvent(t){var e;N.triggerAnalytics(S.SEARCH,{action:t?A.SHOW_MORE:A.SEARCH,numberSearchResults:null!==(e=this.response.resultsCount)&&void 0!==e?e:0,searchTerm:this.query})}}L.maxResultCount=50,L.pageSize=10;class O{constructor(t){this.suggestions=[],this.cursor=-1,this.rootEl=t,this.inputEl=t.querySelector(".nab-search__input"),this.autocompleteEl=t.querySelector(".nab-search-autocomplete__list"),this.clearButtonEl=t.querySelector(".nab-search__clear-button"),this.searchButtonEl=t.querySelector(".nab-search__button"),this.errorMessageEl=t.querySelector(".nab-search__error"),this.showSuggestions=!1,this.searchTagTitles="searchTagTitles"in this.inputEl.dataset?this.inputEl.dataset.searchTagTitles.split(","):[],this.searchClient=new n._t(m),t.addEventListener("submit",this.onSubmit.bind(this)),this.inputEl.addEventListener("focus",this.onFocus.bind(this)),this.inputEl.addEventListener("keydown",this.onKeyDown.bind(this)),this.inputEl.addEventListener("input",this.onInput.bind(this)),this.inputEl.addEventListener("blur",this.onBlur.bind(this)),this.clearButtonEl.addEventListener("click",this.clearInput.bind(this))}static init(){const t=document.querySelector(".nab-search"),e=document.querySelector(".nab-search-results-root");t&&e&&new L(e,new O(t))}autocompleteTemplate(){return this.showSuggestions&&this.suggestions.length?i.qy`
			${this.suggestions.map(((t,e)=>i.qy`
					<div
						role="option"
						tabindex="-1"
						class="nab-search-autocomplete__item ${this.cursor===e?"nab-search-autocomplete__item--active":""}"
						id="nab-search-autocomplete__item-${e}"
						aria-selected="${this.cursor===e}"
						data-testid="search-autocomplete-option"
						@mousedown=${e=>{e.preventDefault(),this.inputEl.value=t,this.hideSuggestions()}}
					>
						${this.itemTemplate(t)}
					</div>
				`))}
		`:i.s6}itemTemplate(t){const e=new RegExp(`\\b${this.inputEl.value}`,"i"),s=t.match(e);if(!s)return i.qy` ${t} `;const n=t.slice(0,s.index),r=t.slice(s.index+s[0].length);return i.qy`
			${n}<span class="nab-search-autocomplete__item-highlight"
				>${s[0]}</span
			>${r}
		`}onInput(){this.inputEl.value.length&&this.toggleErrorMessage(!1),this.autocomplete(this.inputEl.value)}onFocus(){this.showSuggestions=!0}onBlur(){this.showSuggestions=!1,this.hideSuggestions()}onSubmit(t){return t.preventDefault(),this.search(),!1}clearInput(t){t.preventDefault(),this.inputEl.value="",this.hideSuggestions(),this.inputEl.focus()}search(){""===this.inputEl.value.trim()?this.toggleErrorMessage(!0):(this.toggleErrorMessage(!1),this.hideSuggestions(),this.searchButtonEl.classList.add("nab-search__button--loading"),this.searchResults.search(this.inputEl.value,!1))}toggleErrorMessage(t){t?(this.inputEl.classList.add("nab-search__input--error"),this.inputEl.setAttribute("aria-describedby","nab-search__error-message"),this.errorMessageEl.classList.remove("hidden"),this.inputEl.focus()):(this.inputEl.removeAttribute("aria-describedby"),this.inputEl.classList.remove("nab-search__input--error"),this.errorMessageEl.classList.add("hidden"))}onLoad(){this.searchButtonEl.classList.remove("nab-search__button--loading")}setQuery(t){this.inputEl.value=t}focusInput(){this.inputEl.focus()}renderSuggestions(){(0,i.XX)(this.autocompleteTemplate(),this.autocompleteEl)}onKeyDown(t){if(this.suggestions.length)switch(t.key){case"Up":case"ArrowUp":t.preventDefault(),this.prevSuggestion(),this.onArrowNav();break;case"Down":case"ArrowDown":t.preventDefault(),this.nextSuggestion(),this.onArrowNav();break;case"Enter":{const e=this.suggestions[this.cursor];e&&(this.inputEl.value=e,t.preventDefault()),this.hideSuggestions();break}case"Esc":case"Escape":t.preventDefault(),this.hideSuggestions()}}onArrowNav(){-1===this.cursor?this.inputEl.removeAttribute("aria-activedescendant"):this.inputEl.setAttribute("aria-activedescendant",`nab-search-autocomplete__item-${this.cursor}`),this.renderSuggestions(),this.scrollSuggestionIntoView()}scrollSuggestionIntoView(){-1!==this.cursor&&this.rootEl.querySelector(".nab-search-autocomplete__item--active").scrollIntoView(!1)}prevSuggestion(){-1===this.cursor?this.cursor=this.suggestions.length-1:this.cursor-=1}nextSuggestion(){this.cursor===this.suggestions.length-1?this.cursor=-1:this.cursor+=1}hideSuggestions(){this.suggestions=[],this.cursor=-1,this.inputEl.removeAttribute("aria-activedescendant"),this.renderSuggestions()}autocomplete(t){return e=this,s=void 0,i=function*(){var e;if(!t.trim()||t.length<3)this.hideSuggestions();else try{const s=yield this.searchClient.autocomplete({numberofsuggestions:10,channel:"NAB",searchquery:t,profile:"nabcq5_semantic",sort:!0}),n=null!==(e=null==s?void 0:s.suggestions)&&void 0!==e?e:[];if(t!==this.inputEl.value)return;(this.suggestions.length!==n.length||!n.every(((t,e)=>t===this.suggestions[e])))&&(0===n.length?v("No suggestions found"):v(`${n.length} suggestion${n.length?"s":""} displayed, use up and down arrows to review and enter to select.`)),this.suggestions=n,this.renderSuggestions()}catch(t){this.hideSuggestions(),y(t,"Search autocomplete")}},new((n=void 0)||(n=Promise))((function(t,r){function a(t){try{c(i.next(t))}catch(t){r(t)}}function o(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var s;e.done?t(e.value):(s=e.value,s instanceof n?s:new n((function(t){t(s)}))).then(a,o)}c((i=i.apply(e,s||[])).next())}));var e,s,n,i}}O.init()}},s={};function n(t){var i=s[t];if(void 0!==i)return i.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,s,i,r)=>{if(!s){var a=1/0;for(h=0;h<t.length;h++){for(var[s,i,r]=t[h],o=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((t=>n.O[t](s[c])))?s.splice(c--,1):(o=!1,r<a&&(a=r));if(o){t.splice(h--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var h=t.length;h>0&&t[h-1][2]>r;h--)t[h]=t[h-1];t[h]=[s,i,r]},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.j=544,(()=>{var t={544:0};n.O.j=e=>0===t[e];var e=(e,s)=>{var i,r,[a,o,c]=s,l=0;if(a.some((e=>0!==t[e]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(c)var h=c(n)}for(e&&e(s);l<a.length;l++)r=a[l],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(h)},s=self.wpJsonpNabAemFrontend=self.wpJsonpNabAemFrontend||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var i=n.O(void 0,[96],(()=>n(3936)));return n.O(i)})()));