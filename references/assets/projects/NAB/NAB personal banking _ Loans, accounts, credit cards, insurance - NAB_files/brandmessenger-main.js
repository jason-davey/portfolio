(()=>{var e,t,r={6185:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new I(n||[]);return i._invoke=function(e,t,r){var n=p;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw i;return M()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=l(e,t,r);if("normal"===u.type){if(n=r.done?f:d,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",y={};function g(){}function m(){}function v(){}var b={};u(b,i,(function(){return this}));var D=Object.getPrototypeOf,w=D&&D(D(F([])));w&&w!==r&&n.call(w,i)&&(b=w);var E=v.prototype=g.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,i,a,s){var u=l(e[o],e,i);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function F(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return m.prototype=v,u(E,"constructor",v),u(v,"constructor",m),m.displayName=u(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},C(S.prototype),u(S.prototype,a,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),u(E,s,"Generator"),u(E,i,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=F,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:F(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},2207:(e,t,r)=>{e.exports=r(6185)},5914:function(e,t,r){var n;e=r.nmd(e),function(o){var i=t,a=(e&&e.exports,"object"==typeof r.g&&r.g);a.global!==a&&a.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var u=function(e){throw new s(e)},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,p={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,i=e.length%3,a="",s=-1,l=e.length-i;++s<l;)t=e.charCodeAt(s)<<16,r=e.charCodeAt(++s)<<8,n=e.charCodeAt(++s),a+=c.charAt((o=t+r+n)>>18&63)+c.charAt(o>>12&63)+c.charAt(o>>6&63)+c.charAt(63&o);return 2==i?(t=e.charCodeAt(s)<<8,r=e.charCodeAt(++s),a+=c.charAt((o=t+r)>>10)+c.charAt(o>>4&63)+c.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(s),a+=c.charAt(o>>2)+c.charAt(o<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,i="",a=-1;++a<t;)n=c.indexOf(e.charAt(a)),r=o%4?64*r+n:n,o++%4&&(i+=String.fromCharCode(255&r>>(-2*o&6)));return i},version:"1.0.0"};void 0===(n=function(){return p}.call(t,r,t,e))||(e.exports=n)}()},5971:e=>{function t(e){if(e)return function(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},41:(e,t,r)=>{"use strict";var n=r(655),o=r(8068),i=r(9675),a=r(5795);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new i("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],p=!!a&&a(e,t);if(n)n(e,t,{configurable:null===c&&p?p.configurable:!c,enumerable:null===s&&p?p.enumerable:!s,value:r,writable:null===u&&p?p.writable:!u});else{if(!l&&(s||u||c))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},3371:e=>{"use strict";e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},655:(e,t,r)=>{"use strict";var n=r(7239)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch(e){n=!1}e.exports=n},8059:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},6389:(e,t,r)=>{"use strict";var n=r(8059);e.exports=Function.prototype.bind||n},7239:(e,t,r)=>{"use strict";var n,o=r(9383),i=r(1237),a=r(9290),s=r(9538),u=r(8068),c=r(9675),l=r(5345),p=Function,d=function(e){try{return p('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var f=function(){throw new c},y=h?function(){try{return f}catch(e){try{return h(arguments,"callee").get}catch(e){return f}}}():f,g=r(957)(),m=r(24)(),v=Object.getPrototypeOf||(m?function(e){return e.__proto__}:null),b={},D="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":D,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var E=v(v(e));w["%Error.prototype%"]=E}var C=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(r=v(o.prototype))}return w[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=r(6389),A=r(9957),T=k.call(Function.call,Array.prototype.concat),I=k.call(Function.apply,Array.prototype.splice),F=k.call(Function.call,String.prototype.replace),M=k.call(Function.call,String.prototype.slice),N=k.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,R=function(e,t){var r,n=e;if(A(S,n)&&(n="%"+(r=S[n])[0]+"%"),A(w,n)){var o=w[n];if(o===b&&(o=C(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return F(e,P,(function(e,t,r,o){n[n.length]=r?F(o,O,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=R("%"+n+"%",t),i=o.name,a=o.value,s=!1,l=o.alias;l&&(n=l[0],I(r,T([0,1],l)));for(var p=1,d=!0;p<r.length;p+=1){var f=r[p],y=M(f,0,1),g=M(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==f&&d||(s=!0),A(w,i="%"+(n+="."+f)+"%"))a=w[i];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&p+1>=r.length){var m=h(a,f);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[f]}else d=A(a,f),a=a[f];d&&!s&&(w[i]=a)}}return a}},957:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(5279);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},5279:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},1237:e=>{"use strict";e.exports=EvalError},9383:e=>{"use strict";e.exports=Error},9290:e=>{"use strict";e.exports=RangeError},9538:e=>{"use strict";e.exports=ReferenceError},8068:e=>{"use strict";e.exports=SyntaxError},9675:e=>{"use strict";e.exports=TypeError},5345:e=>{"use strict";e.exports=URIError},8463:e=>{e.exports=a,a.default=a,a.stable=l,a.stableStringify=l;var t="[...]",r="[Circular]",n=[],o=[];function i(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function a(e,t,r,a){var s;void 0===a&&(a=i()),u(e,"",0,[],void 0,0,a);try{s=0===o.length?JSON.stringify(e,t,r):JSON.stringify(e,d(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return s}function s(e,t,r,i){var a=Object.getOwnPropertyDescriptor(i,r);void 0!==a.get?a.configurable?(Object.defineProperty(i,r,{value:e}),n.push([i,r,t,a])):o.push([t,r,e]):(i[r]=e,n.push([i,r,t]))}function u(e,n,o,i,a,c,l){var p;if(c+=1,"object"==typeof e&&null!==e){for(p=0;p<i.length;p++)if(i[p]===e)return void s(r,e,n,a);if(void 0!==l.depthLimit&&c>l.depthLimit)return void s(t,e,n,a);if(void 0!==l.edgesLimit&&o+1>l.edgesLimit)return void s(t,e,n,a);if(i.push(e),Array.isArray(e))for(p=0;p<e.length;p++)u(e[p],p,p,i,e,c,l);else{var d=Object.keys(e);for(p=0;p<d.length;p++){var h=d[p];u(e[h],h,p,i,e,c,l)}}i.pop()}}function c(e,t){return e<t?-1:e>t?1:0}function l(e,t,r,a){void 0===a&&(a=i());var s,u=p(e,"",0,[],void 0,0,a)||e;try{s=0===o.length?JSON.stringify(u,t,r):JSON.stringify(u,d(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==n.length;){var c=n.pop();4===c.length?Object.defineProperty(c[0],c[1],c[3]):c[0][c[1]]=c[2]}}return s}function p(e,o,i,a,u,l,d){var h;if(l+=1,"object"==typeof e&&null!==e){for(h=0;h<a.length;h++)if(a[h]===e)return void s(r,e,o,u);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==d.depthLimit&&l>d.depthLimit)return void s(t,e,o,u);if(void 0!==d.edgesLimit&&i+1>d.edgesLimit)return void s(t,e,o,u);if(a.push(e),Array.isArray(e))for(h=0;h<e.length;h++)p(e[h],h,h,a,e,l,d);else{var f={},y=Object.keys(e).sort(c);for(h=0;h<y.length;h++){var g=y[h];p(e[g],g,h,a,e,l,d),f[g]=e[g]}if(void 0===u)return f;n.push([u,o,e]),u[o]=f}a.pop()}}function d(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(o.length>0)for(var n=0;n<o.length;n++){var i=o[n];if(i[1]===t&&i[0]===r){r=i[2],o.splice(n,1);break}}return e.call(this,t,r)}}},5795:(e,t,r)=>{"use strict";var n=r(1219)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},3063:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},5601:(e,t,r)=>{"use strict";var n=r(3063);e.exports=Function.prototype.bind||n},1219:(e,t,r)=>{"use strict";var n,o=r(9383),i=r(1237),a=r(9290),s=r(9538),u=r(8068),c=r(9675),l=r(5345),p=Function,d=function(e){try{return p('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var f=function(){throw new c},y=h?function(){try{return f}catch(e){try{return h(arguments,"callee").get}catch(e){return f}}}():f,g=r(3009)(),m=r(24)(),v=Object.getPrototypeOf||(m?function(e){return e.__proto__}:null),b={},D="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":D,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var E=v(v(e));w["%Error.prototype%"]=E}var C=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(r=v(o.prototype))}return w[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=r(5601),A=r(9957),T=k.call(Function.call,Array.prototype.concat),I=k.call(Function.apply,Array.prototype.splice),F=k.call(Function.call,String.prototype.replace),M=k.call(Function.call,String.prototype.slice),N=k.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,R=function(e,t){var r,n=e;if(A(S,n)&&(n="%"+(r=S[n])[0]+"%"),A(w,n)){var o=w[n];if(o===b&&(o=C(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return F(e,P,(function(e,t,r,o){n[n.length]=r?F(o,O,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=R("%"+n+"%",t),i=o.name,a=o.value,s=!1,l=o.alias;l&&(n=l[0],I(r,T([0,1],l)));for(var p=1,d=!0;p<r.length;p+=1){var f=r[p],y=M(f,0,1),g=M(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==f&&d||(s=!0),A(w,i="%"+(n+="."+f)+"%"))a=w[i];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&p+1>=r.length){var m=h(a,f);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[f]}else d=A(a,f),a=a[f];d&&!s&&(w[i]=a)}}return a}},3009:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(8547);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},8547:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},24:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof r)}},9957:(e,t,r)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty,i=r(3639);e.exports=i.call(n,o)},4921:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},3639:(e,t,r)=>{"use strict";var n=r(4921);e.exports=Function.prototype.bind||n},182:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Null]",l="[object Object]",p="[object Proxy]",d="[object Undefined]",h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[i]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[s]=y["[object Map]"]=y["[object Number]"]=y[l]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var g="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,m="object"==typeof self&&self&&self.Object===Object&&self,v=g||m||Function("return this")(),b=t&&!t.nodeType&&t,D=b&&e&&!e.nodeType&&e,w=D&&D.exports===b,E=w&&g.process,C=function(){try{var e=D&&D.require&&D.require("util").types;return e||E&&E.binding&&E.binding("util")}catch(e){}}(),S=C&&C.isTypedArray;var k,A,T,I=Array.prototype,F=Function.prototype,M=Object.prototype,N=v["__core-js_shared__"],P=F.toString,O=M.hasOwnProperty,R=(k=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",j=M.toString,x=P.call(Object),_=RegExp("^"+P.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=w?v.Buffer:void 0,L=v.Symbol,U=v.Uint8Array,z=B?B.allocUnsafe:void 0,W=(A=Object.getPrototypeOf,T=Object,function(e){return A(T(e))}),H=Object.create,G=M.propertyIsEnumerable,V=I.splice,K=L?L.toStringTag:void 0,q=function(){try{var e=be(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Y=B?B.isBuffer:void 0,J=Math.max,Q=Date.now,$=be(v,"Map"),Z=be(Object,"create"),X=function(){function e(){}return function(t){if(!Ne(t))return{};if(H)return H(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ne(e){var t=this.__data__=new te(e);this.size=t.size}function oe(e,t){var r=Ae(e),n=!r&&ke(e),o=!r&&!n&&Ie(e),i=!r&&!n&&!o&&Oe(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var c in e)!t&&!O.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||De(c,u))||s.push(c);return s}function ie(e,t,r){(void 0!==r&&!Se(e[t],r)||void 0===r&&!(t in e))&&ue(e,t,r)}function ae(e,t,r){var n=e[t];O.call(e,t)&&Se(n,r)&&(void 0!==r||t in e)||ue(e,t,r)}function se(e,t){for(var r=e.length;r--;)if(Se(e[r][0],t))return r;return-1}function ue(e,t,r){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}ee.prototype.clear=function(){this.__data__=Z?Z(null):{},this.size=0},ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ee.prototype.get=function(e){var t=this.__data__;if(Z){var r=t[e];return r===n?void 0:r}return O.call(t,e)?t[e]:void 0},ee.prototype.has=function(e){var t=this.__data__;return Z?void 0!==t[e]:O.call(t,e)},ee.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Z&&void 0===t?n:t,this},te.prototype.clear=function(){this.__data__=[],this.size=0},te.prototype.delete=function(e){var t=this.__data__,r=se(t,e);return!(r<0)&&(r==t.length-1?t.pop():V.call(t,r,1),--this.size,!0)},te.prototype.get=function(e){var t=this.__data__,r=se(t,e);return r<0?void 0:t[r][1]},te.prototype.has=function(e){return se(this.__data__,e)>-1},te.prototype.set=function(e,t){var r=this.__data__,n=se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},re.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new($||te),string:new ee}},re.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return ve(this,e).get(e)},re.prototype.has=function(e){return ve(this,e).has(e)},re.prototype.set=function(e,t){var r=ve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ne.prototype.clear=function(){this.__data__=new te,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var r=this.__data__;if(r instanceof te){var n=r.__data__;if(!$||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new re(n)}return r.set(e,t),this.size=r.size,this};var ce,le=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[ce?a:++n];if(!1===t(o[s],s,o))break}return e};function pe(e){return null==e?void 0===e?d:c:K&&K in Object(e)?function(e){var t=O.call(e,K),r=e[K];try{e[K]=void 0;var n=!0}catch(e){}var o=j.call(e);n&&(t?e[K]=r:delete e[K]);return o}(e):function(e){return j.call(e)}(e)}function de(e){return Pe(e)&&pe(e)==i}function he(e){return!(!Ne(e)||function(e){return!!R&&R in e}(e))&&(Fe(e)?_:h).test(function(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function fe(e){if(!Ne(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=we(e),r=[];for(var n in e)("constructor"!=n||!t&&O.call(e,n))&&r.push(n);return r}function ye(e,t,r,n,o){e!==t&&le(t,(function(i,a){if(o||(o=new ne),Ne(i))!function(e,t,r,n,o,i,a){var s=Ee(e,r),u=Ee(t,r),c=a.get(u);if(c)return void ie(e,r,c);var p=i?i(s,u,r+"",e,t,a):void 0,d=void 0===p;if(d){var h=Ae(u),f=!h&&Ie(u),y=!h&&!f&&Oe(u);p=u,h||f||y?Ae(s)?p=s:Pe(D=s)&&Te(D)?p=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(s):f?(d=!1,p=function(e,t){if(t)return e.slice();var r=e.length,n=z?z(r):new e.constructor(r);return e.copy(n),n}(u,!0)):y?(d=!1,g=u,m=!0?(v=g.buffer,b=new v.constructor(v.byteLength),new U(b).set(new U(v)),b):g.buffer,p=new g.constructor(m,g.byteOffset,g.length)):p=[]:function(e){if(!Pe(e)||pe(e)!=l)return!1;var t=W(e);if(null===t)return!0;var r=O.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&P.call(r)==x}(u)||ke(u)?(p=s,ke(s)?p=function(e){return function(e,t,r,n){var o=!r;r||(r={});var i=-1,a=t.length;for(;++i<a;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?ue(r,s,u):ae(r,s,u)}return r}(e,Re(e))}(s):Ne(s)&&!Fe(s)||(p=function(e){return"function"!=typeof e.constructor||we(e)?{}:X(W(e))}(u))):d=!1}var g,m,v,b;var D;d&&(a.set(u,p),o(p,u,n,i,a),a.delete(u));ie(e,r,p)}(e,t,a,r,ye,n,o);else{var s=n?n(Ee(e,a),i,a+"",e,t,o):void 0;void 0===s&&(s=i),ie(e,a,s)}}),Re)}function ge(e,t){return Ce(function(e,t,r){return t=J(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=J(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,_e),e+"")}var me=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:_e;function ve(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return he(r)?r:void 0}function De(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&f.test(e))&&e>-1&&e%1==0&&e<t}function we(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||M)}function Ee(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ce=function(e){var t=0,r=0;return function(){var n=Q(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(me);function Se(e,t){return e===t||e!=e&&t!=t}var ke=de(function(){return arguments}())?de:function(e){return Pe(e)&&O.call(e,"callee")&&!G.call(e,"callee")},Ae=Array.isArray;function Te(e){return null!=e&&Me(e.length)&&!Fe(e)}var Ie=Y||function(){return!1};function Fe(e){if(!Ne(e))return!1;var t=pe(e);return t==s||t==u||t==a||t==p}function Me(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Ne(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Pe(e){return null!=e&&"object"==typeof e}var Oe=S?function(e){return function(t){return e(t)}}(S):function(e){return Pe(e)&&Me(e.length)&&!!y[pe(e)]};function Re(e){return Te(e)?oe(e,!0):fe(e)}var je,xe=(je=function(e,t,r){ye(e,t,r)},ge((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=je.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!Ne(r))return!1;var n=typeof t;return!!("number"==n?Te(r)&&De(t,r.length):"string"==n&&t in r)&&Se(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&je(e,a,r,o)}return e})));function _e(e){return e}e.exports=xe},7389:()=>{Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),r=t.length>>>0,n=arguments[1],o=void 0,i=0;i<r;i++)if(o=t[i],e.call(n,o,i,t))return o})},1626:()=>{Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var r,n;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(r=t),n=0;n<i;){var a;n in o&&(a=o[n],e.call(r,a,n,o)),n++}})},9907:()=>{Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),r=parseInt(t.length,10)||0;if(0===r)return!1;var n,o,i=parseInt(arguments[1],10)||0;for(0<=i?n=i:(n=r+i)<0&&(n=0);n<r;){if(e===(o=t[n])||e!=e&&o!=o)return!0;n++}return!1})},14:()=>{!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}()},145:()=>{Number.isNaN=Number.isNaN||function(e){return e!=e}},1137:()=>{"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t})},6068:()=>{var e,t,r,n,o;o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if("function"!=typeof i&&("object"!==(void 0===i?"undefined":o(i))||null===i))throw new TypeError("Object.keys called on non-object");var a,s,u=[];for(a in i)e.call(i,a)&&u.push(a);if(t)for(s=0;s<n;s++)e.call(i,r[s])&&u.push(r[s]);return u}))},3366:()=>{"function"!=typeof Object.values&&(Object.values=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=e[t[r]];return n})},4660:()=>{String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return t<this.length?t|=0:t=this.length,this.substr(t-e.length,e.length)===e})},3951:()=>{String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})},8719:()=>{String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e})},1836:function(e,t,r){!function(){"use strict";function e(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){return t.reject(r)}))}))}var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function o(){}function i(e,t){return function(){e.apply(t,arguments)}}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,n)}else(1===e._state?u:c)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var r=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void d(i(r,t),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)s(e,e._deferreds[t]);e._deferreds=null}function p(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function d(e,t){var r=!1;try{e((function(e){r||(r=!0,u(t,e))}),(function(e){r||(r=!0,c(t,e))}))}catch(e){if(r)return;r=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var r=new this.constructor(o);return s(this,new p(e,t,r)),r},a.prototype.finally=e,a.all=function(e){return new a((function(t,r){if(!n(e))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function a(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,(function(t){a(e,t)}),r)}o[e]=n,0==--i&&t(o)}catch(e){r(e)}}for(var s=0;s<o.length;s++)a(s,o[s])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,r){r(e)}))},a.race=function(e){return new a((function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)a.resolve(e[o]).then(t,r)}))},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype.finally||(h.Promise.prototype.finally=e):h.Promise=a}()},6897:(e,t,r)=>{"use strict";var n=r(3273),o=r(41),i=r(1548)(),a=r(5795),s=r(9675),u=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||u(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,c=!0;if("length"in e&&a){var l=a(e,"length");l&&!l.configurable&&(n=!1),l&&!l.writable&&(c=!1)}return(n||c||!r)&&(i?o(e,"length",t,!0,!0):o(e,"length",t)),e}},6653:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},75:(e,t,r)=>{"use strict";var n=r(6653);e.exports=Function.prototype.bind||n},3273:(e,t,r)=>{"use strict";var n,o=r(9383),i=r(1237),a=r(9290),s=r(9538),u=r(8068),c=r(9675),l=r(5345),p=Function,d=function(e){try{return p('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var f=function(){throw new c},y=h?function(){try{return f}catch(e){try{return h(arguments,"callee").get}catch(e){return f}}}():f,g=r(1203)(),m=r(24)(),v=Object.getPrototypeOf||(m?function(e){return e.__proto__}:null),b={},D="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":D,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var E=v(v(e));w["%Error.prototype%"]=E}var C=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(r=v(o.prototype))}return w[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=r(75),A=r(9957),T=k.call(Function.call,Array.prototype.concat),I=k.call(Function.apply,Array.prototype.splice),F=k.call(Function.call,String.prototype.replace),M=k.call(Function.call,String.prototype.slice),N=k.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,R=function(e,t){var r,n=e;if(A(S,n)&&(n="%"+(r=S[n])[0]+"%"),A(w,n)){var o=w[n];if(o===b&&(o=C(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return F(e,P,(function(e,t,r,o){n[n.length]=r?F(o,O,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=R("%"+n+"%",t),i=o.name,a=o.value,s=!1,l=o.alias;l&&(n=l[0],I(r,T([0,1],l)));for(var p=1,d=!0;p<r.length;p+=1){var f=r[p],y=M(f,0,1),g=M(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==f&&d||(s=!0),A(w,i="%"+(n+="."+f)+"%"))a=w[i];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&p+1>=r.length){var m=h(a,f);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[f]}else d=A(a,f),a=a[f];d&&!s&&(w[i]=a)}}return a}},1548:(e,t,r)=>{"use strict";var n=r(655),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},1203:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(5825);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},5825:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},1380:e=>{"use strict";function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(e){n.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this._defaults.push({fn:e,args:r}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(r){e[r.fn].apply(e,t(r.args))}))},e.exports=n},5734:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o;"undefined"!=typeof window?o=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),o=void 0):o=self;var i=r(5971),a=r(8463),s=r(7149),u=r(1948),c=r(5125),l=r(9450),p=r(1380);function d(){}e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1===arguments.length?new t.Request("GET",e):new t.Request(e,r)};var h=t=e.exports;t.Request=D,h.getXHR=function(){if(o.XMLHttpRequest&&(!o.location||"file:"!==o.location.protocol||!o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("Browser-only version of superagent could not find XHR")};var f="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function y(e){if(!c(e))return e;var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&g(t,r,e[r]);return t.join("&")}function g(e,t,r){if(void 0!==r)if(null!==r)if(Array.isArray(r))r.forEach((function(r){g(e,t,r)}));else if(c(r))for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&g(e,"".concat(t,"[").concat(n,"]"),r[n]);else e.push(encodeURI(t)+"="+encodeURIComponent(r));else e.push(encodeURI(t))}function m(e){for(var t,r,n={},o=e.split("&"),i=0,a=o.length;i<a;++i)-1===(r=(t=o[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function v(e){return/[/+]json($|[^-\w])/i.test(e)}function b(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.headers=function(e){for(var t,r,n,o,i=e.split(/\r?\n/),a={},s=0,u=i.length;s<u;++s)-1!==(t=(r=i[s]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),o=f(r.slice(t+1)),a[n]=o);return a}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function D(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new b(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||n.text||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)}))}function w(e,t,r){var n=h("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}h.serializeObject=y,h.parseString=m,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":s.stringify,"application/json":a},h.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},l(b.prototype),b.prototype._parseBody=function(e){var t=h.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&v(this.type)&&(t=h.parse["application/json"]),t&&e&&(e.length>0||e instanceof Object)?t(e):null)},b.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot ".concat(t," ").concat(r," (").concat(this.status,")"),o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=b,i(D.prototype),u(D.prototype),D.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},D.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},D.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"===n(t)&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,r,(function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")}))},D.prototype.query=function(e){return"string"!=typeof e&&(e=y(e)),e&&this._query.push(e),this},D.prototype.attach=function(e,t,r){if(t){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},D.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},D.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},D.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},D.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},D.prototype.ca=D.prototype.agent,D.prototype.buffer=D.prototype.ca,D.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},D.prototype.pipe=D.prototype.write,D.prototype._isHost=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},D.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||d,this._finalizeQueryString(),this._end()},D.prototype._setUploadTimeout=function(){var e=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){e._timeoutError("Upload timeout of ",e._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},D.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var e=this;this.xhr=h.getXHR();var t=this.xhr,r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4===r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100,100===r.percent&&clearTimeout(e._uploadTimeoutTimer)),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.addEventListener("progress",n.bind(null,"download")),t.upload&&t.upload.addEventListener("progress",n.bind(null,"upload"))}catch(e){}t.upload&&this._setUploadTimeout();try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||h.serialize[o?o.split(";")[0]:""];!i&&v(o)&&(i=h.serialize["application/json"]),i&&(r=i(r))}for(var a in this.header)null!==this.header[a]&&Object.prototype.hasOwnProperty.call(this.header,a)&&t.setRequestHeader(a,this.header[a]);this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0===r?null:r)},h.agent=function(){return new p},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){p.prototype[e.toLowerCase()]=function(t,r){var n=new h.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}})),p.prototype.del=p.prototype.delete,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.options=function(e,t,r){var n=h("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=w,h.delete=w,h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},5125:e=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return null!==e&&"object"===t(e)}},1948:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=r(5125);function i(e){if(e)return function(e){for(var t in i.prototype)Object.prototype.hasOwnProperty.call(i.prototype,t)&&(e[t]=i.prototype[t]);return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!==n(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var a=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),s=new Set([408,413,429,500,502,503,504,521,522,524]);i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&s.has(t.status))return!0;if(e){if(e.code&&a.has(e.code))return!0;if(e.timeout&&"ECONNABORTED"===e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},i.prototype.then=function(e,t){var r=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.on("abort",(function(){if(!(r._maxRetries&&r._maxRetries>r._retries))if(r.timedout&&r.timedoutError)t(r.timedoutError);else{var e=new Error("Aborted");e.code="ABORTED",e.status=r.status,e.method=r.method,e.url=r.url,t(e)}})),n.end((function(r,n){r?t(r):e(n)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(o(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(o(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.field(r,e[r]);return this}if(Array.isArray(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},i.prototype.withCredentials=function(e){return void 0===e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw new TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=o(e),r=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&o(this._data))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._data[n]=e[n]);else"string"==typeof e?(r||this.type("form"),(r=this._header["content-type"])&&(r=r.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===r?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||r||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.includes("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.slice(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,t)+"?"+r.join("&")}}},i.prototype._appendQueryString=function(){console.warn("Unsupported")},i.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error("".concat(e+t,"ms exceeded"));n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},9450:(e,t,r)=>{"use strict";var n=r(3048);function o(e){if(e)return function(e){for(var t in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,t)&&(e[t]=o.prototype[t]);return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(this[o]=r[o]);this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.statusCode=e,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===e,this.accepted=202===e,this.noContent=204===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.forbidden=403===e,this.notFound=404===e,this.unprocessableEntity=422===e}},3048:(e,t)=>{"use strict";function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){var t,n={},o=r(e.split(/ *; */));try{for(o.s();!(t=o.n()).done;){var i=t.value.split(/ *= */),a=i.shift(),s=i.shift();a&&s&&(n[a]=s)}}catch(e){o.e(e)}finally{o.f()}return n},t.parseLinks=function(e){var t,n={},o=r(e.split(/ *, */));try{for(o.s();!(t=o.n()).done;){var i=t.value.split(/ *; */),a=i[0].slice(1,-1);n[i[1].split(/ *= */)[1].slice(1,-1)]=a}}catch(e){o.e(e)}finally{o.f()}return n},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},7435:(e,t,r)=>{"use strict";var n=r(6242),o=r(4375),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},4375:(e,t,r)=>{"use strict";var n=r(3047),o=r(6242),i=r(6897),a=r(9675),s=o("%Function.prototype.apply%"),u=o("%Function.prototype.call%"),c=o("%Reflect.apply%",!0)||n.call(u,s),l=r(655),p=o("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new a("a function is required");var t=c(n,u,arguments);return i(t,1+p(0,e.length-(arguments.length-1)),!0)};var d=function(){return c(n,s,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},5017:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};e.exports=function(e){var o=this;if("function"!=typeof o||"[object Function]"!==t.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,a=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),s=r(0,o.length-a.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=o.apply(this,n(a,arguments));return Object(t)===t?t:this}return o.apply(e,n(a,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i}},3047:(e,t,r)=>{"use strict";var n=r(5017);e.exports=Function.prototype.bind||n},6242:(e,t,r)=>{"use strict";var n,o=r(9383),i=r(1237),a=r(9290),s=r(9538),u=r(8068),c=r(9675),l=r(5345),p=Function,d=function(e){try{return p('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var f=function(){throw new c},y=h?function(){try{return f}catch(e){try{return h(arguments,"callee").get}catch(e){return f}}}():f,g=r(7127)(),m=r(24)(),v=Object.getPrototypeOf||(m?function(e){return e.__proto__}:null),b={},D="undefined"!=typeof Uint8Array&&v?v(Uint8Array):n,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&v?v([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&v?v(v([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&v?v((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&v?v((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&v?v(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":y,"%TypedArray%":D,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(v)try{null.error}catch(e){var E=v(v(e));w["%Error.prototype%"]=E}var C=function e(t){var r;if("%AsyncFunction%"===t)r=d("async function () {}");else if("%GeneratorFunction%"===t)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=d("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&v&&(r=v(o.prototype))}return w[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},k=r(3047),A=r(9957),T=k.call(Function.call,Array.prototype.concat),I=k.call(Function.apply,Array.prototype.splice),F=k.call(Function.call,String.prototype.replace),M=k.call(Function.call,String.prototype.slice),N=k.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,R=function(e,t){var r,n=e;if(A(S,n)&&(n="%"+(r=S[n])[0]+"%"),A(w,n)){var o=w[n];if(o===b&&(o=C(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===N(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=M(e,0,1),r=M(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return F(e,P,(function(e,t,r,o){n[n.length]=r?F(o,O,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=R("%"+n+"%",t),i=o.name,a=o.value,s=!1,l=o.alias;l&&(n=l[0],I(r,T([0,1],l)));for(var p=1,d=!0;p<r.length;p+=1){var f=r[p],y=M(f,0,1),g=M(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===g||"'"===g||"`"===g)&&y!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==f&&d||(s=!0),A(w,i="%"+(n+="."+f)+"%"))a=w[i];else if(null!=a){if(!(f in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&p+1>=r.length){var m=h(a,f);a=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:a[f]}else d=A(a,f),a=a[f];d&&!s&&(w[i]=a)}}return a}},7127:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(4197);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},4197:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},2443:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,y=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,D=String.prototype.toUpperCase,w=String.prototype.toLowerCase,E=RegExp.prototype.test,C=Array.prototype.concat,S=Array.prototype.join,k=Array.prototype.slice,A=Math.floor,T="function"==typeof BigInt?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,M="function"==typeof Symbol&&"object"==typeof Symbol.iterator,N="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===M||"symbol")?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,O=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||E.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-A(-e):A(e);if(n!==e){var o=String(n),i=v.call(t,o.length+1);return b.call(o,r,"$&_")+"."+b.call(b.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var j=r(5886),x=j.custom,_=W(x)?x:null;function B(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function L(e){return b.call(String(e),/"/g,"&quot;")}function U(e){return!("[object Array]"!==V(e)||N&&"object"==typeof e&&N in e)}function z(e){return!("[object RegExp]"!==V(e)||N&&"object"==typeof e&&N in e)}function W(e){if(M)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!F)return!1;try{return F.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,o,s){var u=n||{};if(G(u,"quoteStyle")&&"single"!==u.quoteStyle&&"double"!==u.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(u,"maxStringLength")&&("number"==typeof u.maxStringLength?u.maxStringLength<0&&u.maxStringLength!==1/0:null!==u.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var y=!G(u,"customInspect")||u.customInspect;if("boolean"!=typeof y&&"symbol"!==y)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(u,"indent")&&null!==u.indent&&"\t"!==u.indent&&!(parseInt(u.indent,10)===u.indent&&u.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(u,"numericSeparator")&&"boolean"!=typeof u.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var D=u.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return q(t,u);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var E=String(t);return D?R(t,E):E}if("bigint"==typeof t){var A=String(t)+"n";return D?R(t,A):A}var I=void 0===u.depth?5:u.depth;if(void 0===o&&(o=0),o>=I&&I>0&&"object"==typeof t)return U(t)?"[Array]":"[Object]";var x=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=S.call(Array(e.indent+1)," ")}return{base:r,prev:S.call(Array(t+1),r)}}(u,o);if(void 0===s)s=[];else if(K(s,t)>=0)return"[Circular]";function H(t,r,n){if(r&&(s=k.call(s)).push(r),n){var i={depth:u.depth};return G(u,"quoteStyle")&&(i.quoteStyle=u.quoteStyle),e(t,i,o+1,s)}return e(t,u,o+1,s)}if("function"==typeof t&&!z(t)){var Y=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=X(t,H);return"[Function"+(Y?": "+Y:" (anonymous)")+"]"+(ee.length>0?" { "+S.call(ee,", ")+" }":"")}if(W(t)){var te=M?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):F.call(t);return"object"!=typeof t||M?te:J(te)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var re="<"+w.call(String(t.nodeName)),ne=t.attributes||[],oe=0;oe<ne.length;oe++)re+=" "+ne[oe].name+"="+B(L(ne[oe].value),"double",u);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+="</"+w.call(String(t.nodeName))+">"}if(U(t)){if(0===t.length)return"[]";var ie=X(t,H);return x&&!function(e){for(var t=0;t<e.length;t++)if(K(e[t],"\n")>=0)return!1;return!0}(ie)?"["+Z(ie,x)+"]":"[ "+S.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==V(e)||N&&"object"==typeof e&&N in e)}(t)){var ae=X(t,H);return"cause"in Error.prototype||!("cause"in t)||P.call(t,"cause")?0===ae.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(ae,", ")+" }":"{ ["+String(t)+"] "+S.call(C.call("[cause]: "+H(t.cause),ae),", ")+" }"}if("object"==typeof t&&y){if(_&&"function"==typeof t[_]&&j)return j(t,{depth:I-o});if("symbol"!==y&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var se=[];return a&&a.call(t,(function(e,r){se.push(H(r,t,!0)+" => "+H(e,t))})),$("Map",i.call(t),se,x)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ue=[];return l&&l.call(t,(function(e){ue.push(H(e,t))})),$("Set",c.call(t),ue,x)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if(function(e){return!("[object Number]"!==V(e)||N&&"object"==typeof e&&N in e)}(t))return J(H(Number(t)));if(function(e){if(!e||"object"!=typeof e||!T)return!1;try{return T.call(e),!0}catch(e){}return!1}(t))return J(H(T.call(t)));if(function(e){return!("[object Boolean]"!==V(e)||N&&"object"==typeof e&&N in e)}(t))return J(f.call(t));if(function(e){return!("[object String]"!==V(e)||N&&"object"==typeof e&&N in e)}(t))return J(H(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if(t===r.g)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==V(e)||N&&"object"==typeof e&&N in e)}(t)&&!z(t)){var ce=X(t,H),le=O?O(t)===Object.prototype:t instanceof Object||t.constructor===Object,pe=t instanceof Object?"":"null prototype",de=!le&&N&&Object(t)===t&&N in t?v.call(V(t),8,-1):pe?"Object":"",he=(le||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||pe?"["+S.call(C.call([],de||[],pe||[]),": ")+"] ":"");return 0===ce.length?he+"{}":x?he+"{"+Z(ce,x)+"}":he+"{ "+S.call(ce,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return H.call(e,t)}function V(e){return y.call(e)}function K(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function q(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return q(v.call(e,0,t.maxStringLength),t)+n}return B(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Y),"single",t)}function Y(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+D.call(t.toString(16))}function J(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function $(e,t,r,n){return e+" ("+t+") {"+(n?Z(r,n):S.call(r,", "))+"}"}function Z(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+S.call(e,","+r)+"\n"+t.prev}function X(e,t){var r=U(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=G(e,o)?t(e[o],e):""}var i,a="function"==typeof I?I(e):[];if(M){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in e)G(e,u)&&(r&&String(Number(u))===u&&u<e.length||M&&i["$"+u]instanceof Symbol||(E.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"==typeof I)for(var c=0;c<a.length;c++)P.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}},3981:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC1738",o="RFC3986";e.exports={default:o,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:n,RFC3986:o}},7149:(e,t,r)=>{"use strict";var n=r(4092),o=r(9010),i=r(3981);e.exports={formats:i,parse:o,stringify:n}},9010:(e,t,r)=>{"use strict";var n=r(5384),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,l=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var p=0;r.depth>0&&null!==(s=a.exec(i))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:u(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=r.allowEmptyArrays&&""===o?[]:[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,p=parseInt(l,10);r.parseArrays||""!==l?!isNaN(p)&&s!==l&&String(p)===l&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(a=[])[p]=o:"__proto__"!==l&&(a[l]=o):a={0:o}}o=a}return o}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset,r=void 0===e.duplicates?a.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||a.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:a.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,c={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,p),h=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?f="utf-8":"utf8=%26%2310003%3B"===d[r]&&(f="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var y,g,m=d[r],v=m.indexOf("]="),b=-1===v?m.indexOf("="):v+1;-1===b?(y=t.decoder(m,a.decoder,f,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,b),a.decoder,f,"key"),g=n.maybeMap(u(m.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g);var D=o.call(c,y);D&&"combine"===t.duplicates?c[y]=n.combine(c[y],g):D&&"last"!==t.duplicates||(c[y]=g)}return c}(e,r):e,p=r.plainObjects?Object.create(null):{},d=Object.keys(l),h=0;h<d.length;++h){var f=d[h],y=c(f,l[f],r,"string"==typeof e);p=n.merge(p,y,r)}return!0===r.allowSparse?p:n.compact(p)}},4092:(e,t,r)=>{"use strict";var n=r(2520),o=r(5384),i=r(3981),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,u(t)?t:[t])},p=Date.prototype.toISOString,d=i.default,h={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},f={},y=function e(t,r,i,a,s,c,p,d,y,g,m,v,b,D,w,E,C,S){for(var k,A=t,T=S,I=0,F=!1;void 0!==(T=T.get(f))&&!F;){var M=T.get(t);if(I+=1,void 0!==M){if(M===I)throw new RangeError("Cyclic object value");F=!0}void 0===T.get(f)&&(I=0)}if("function"==typeof g?A=g(r,A):A instanceof Date?A=b(A):"comma"===i&&u(A)&&(A=o.maybeMap(A,(function(e){return e instanceof Date?b(e):e}))),null===A){if(c)return y&&!E?y(r,h.encoder,C,"key",D):r;A=""}if("string"==typeof(k=A)||"number"==typeof k||"boolean"==typeof k||"symbol"==typeof k||"bigint"==typeof k||o.isBuffer(A))return y?[w(E?r:y(r,h.encoder,C,"key",D))+"="+w(y(A,h.encoder,C,"value",D))]:[w(r)+"="+w(String(A))];var N,P=[];if(void 0===A)return P;if("comma"===i&&u(A))E&&y&&(A=o.maybeMap(A,y)),N=[{value:A.length>0?A.join(",")||null:void 0}];else if(u(g))N=g;else{var O=Object.keys(A);N=m?O.sort(m):O}var R=d?r.replace(/\./g,"%2E"):r,j=a&&u(A)&&1===A.length?R+"[]":R;if(s&&u(A)&&0===A.length)return j+"[]";for(var x=0;x<N.length;++x){var _=N[x],B="object"==typeof _&&void 0!==_.value?_.value:A[_];if(!p||null!==B){var L=v&&d?_.replace(/\./g,"%2E"):_,U=u(A)?"function"==typeof i?i(j,L):j:j+(v?"."+L:"["+L+"]");S.set(t,I);var z=n();z.set(f,S),l(P,e(B,U,i,a,s,c,p,d,"comma"===i&&E&&u(A)?null:y,g,m,v,b,D,w,E,C,z))}}return P};e.exports=function(e,t){var r,o=e,c=function(e){if(!e)return h;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,o=i.formatters[r],c=h.filter;if(("function"==typeof e.filter||u(e.filter))&&(c=e.filter),n=e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":h.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=void 0===e.allowDots?!0===e.encodeDotInKeys||h.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:l,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:h.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:h.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:c,format:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof c.filter?o=(0,c.filter)("",o):u(c.filter)&&(r=c.filter);var p=[];if("object"!=typeof o||null===o)return"";var d=s[c.arrayFormat],f="comma"===d&&c.commaRoundTrip;r||(r=Object.keys(o)),c.sort&&r.sort(c.sort);for(var g=n(),m=0;m<r.length;++m){var v=r[m];c.skipNulls&&null===o[v]||l(p,y(o[v],v,d,f,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var b=p.join(c.delimiter),D=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?D+="utf8=%26%2310003%3B&":D+="utf8=%E2%9C%93&"),b.length>0?D+b:""}},5384:(e,t,r)=>{"use strict";var n=r(3981),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},u=1024;e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:a,prop:c}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",l=0;l<s.length;l+=u){for(var p=s.length>=u?s.slice(l,l+u):s,d=[],h=0;h<p.length;++h){var f=p.charCodeAt(h);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===n.RFC1738&&(40===f||41===f)?d[d.length]=p.charAt(h):f<128?d[d.length]=a[f]:f<2048?d[d.length]=a[192|f>>6]+a[128|63&f]:f<55296||f>=57344?d[d.length]=a[224|f>>12]+a[128|f>>6&63]+a[128|63&f]:(h+=1,f=65536+((1023&f)<<10|1023&p.charCodeAt(h)),d[d.length]=a[240|f>>18]+a[128|f>>12&63]+a[128|f>>6&63]+a[128|63&f])}c+=d.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},2520:(e,t,r)=>{"use strict";var n=r(6242),o=r(7435),i=r(2443),a=r(9675),s=n("%WeakMap%",!0),u=n("%Map%",!0),c=o("WeakMap.prototype.get",!0),l=o("WeakMap.prototype.set",!0),p=o("WeakMap.prototype.has",!0),d=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),f=o("Map.prototype.has",!0),y=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return c(e,n)}else if(u){if(t)return d(t,n)}else if(r)return function(e,t){var r=y(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return p(e,n)}else if(u){if(t)return f(t,n)}else if(r)return function(e,t){return!!y(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),l(e,n,o)):u?(t||(t=new u),h(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=y(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},5886:()=>{}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=r,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>"brandmessenger-0d096d30b5e1c723c0a7.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="proactive-chat-widget:",o.l=(r,n,i,a)=>{if(e[r])e[r].push(n);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var p=c[l];if(p.getAttribute("src")==r||p.getAttribute("data-webpack")==t+i){s=p;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[n];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={159:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,(r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,a=r[0],s=r[1],u=r[2],c=0;if(a.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(u)u(o)}for(t&&t(r);c<a.length;c++)i=a[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkproactive_chat_widget=self.webpackChunkproactive_chat_widget||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0,(()=>{"use strict";o(1836),o(1137),o(6068),o(3366),o(9907),o(7389),o(3951),o(1626),o(145),o(14),o(8719),o(4660);function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=function(){function e(){t(this,e)}return n(e,[{key:"getURL",value:function(){return window.location.href}},{key:"getURLHost",value:function(){return window.location.hostname}},{key:"getURLPath",value:function(){return window.location.pathname}},{key:"getURLParameters",value:function(){return window.location.search}},{key:"getMainLanguageCode",value:function(){return window.navigator.language.substring(0,2)}},{key:"getLanguage",value:function(){return window.navigator.language}},{key:"getPageTitle",value:function(){return document.title}},{key:"getReferrer",value:function(){return document.referrer}},{key:"getUserAgent",value:function(){return navigator.userAgent}},{key:"getCookieString",value:function(){return document.cookie}},{key:"getScrollHeight",value:function(){var e;return null!==(e=document.documentElement.scrollHeight)&&void 0!==e?e:0}},{key:"getScrollTop",value:function(){var e;return null!==(e=document.documentElement.scrollTop)&&void 0!==e?e:0}},{key:"getClientHeight",value:function(){var e;return null!==(e=document.documentElement.clientHeight)&&void 0!==e?e:0}},{key:"getScrollPercentage",value:function(){var e=this.getScrollHeight()-this.getClientHeight();return e>0?this.getScrollTop()/e*100:100}},{key:"registerHistoryChangeListener",value:function(e){window.addEventListener("popstate",(function(t){e()}))}}]),e}(),a="urlHost",s="urlPath",u="urlParameters",c="siteStartTime",l="pageStartTime",p="pageVisits",d="siteVisits",h="currentSiteVisit",f="lastSiteVisit",y="recentPages",g="previousPage",m="browser",v="browserVersion",b="operatingSystem",D="operatingSystemVersion",w="isMobile",E="cookie",C="authenticationStatus",S="scrollPercentage",k="customConditionsResults",A="businessHoursResults",T="siteReferrer",I="browserLanguageCode";function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){if(e){if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}function N(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P="web-messenger-container",O=!1,R=!1;function j(e){O&&console.group(e)}function x(){O&&console.groupEnd()}function _(){var e;O&&(e=console).log.apply(e,arguments)}function B(){O=!0}function L(e,t,r){var n=new Date,o=t?"(id:".concat(t,")"):"";!function(e){(R||window.networkLoggingEnabled)&&console.log(e)}("".concat(n.toLocaleString()," - ").concat(e).concat(o," - ").concat(r))}function U(){R=!0;var e=document.getElementById(P);e&&(e.contentWindow.networkLoggingEnabled=!0)}var z=function(){function e(r,n){var o;t(this,e),this.urlFetcher=r,this.browserPageAdapter=n||new i,this.logErrorURL=null===(o=this.urlFetcher)||void 0===o?void 0:o.getLogErrorURL()}return n(e,[{key:"logError",value:function(e,t,r,n){console.error(r+": ",n);var o=this.browserPageAdapter.getURL();if((null==o||!o.toLowerCase().includes("dev-lswcore-jenkins-master.dev.aws.lcloud.com"))&&null!=n&&n.stack&&null!=n&&n.message){var i,a=JSON.stringify({companyKey:e,widgetId:t,url:o,logMessage:r+", "+n.toString()+", "+n.stack}).replace(/\\n/g," ");null===(i=this.urlFetcher)||void 0===i||i.postURL(this.logErrorURL,a,(function(){}),!0)}}}]),e}();const W=o.p+"6bbb422bbaa252a83fa4.mp3";var H="SOUND_ENABLED",G=function(){function e(r){t(this,e),this.sessionDataManager=r,this.soundPlaying=!1;try{this.audio=new Audio(W),this.audio.addEventListener("playing",this.onSoundPlaying.bind(this)),this.audio.addEventListener("pause",this.onSoundPause.bind(this)),this.audio.addEventListener("ended",this.onSoundEnded.bind(this))}catch(e){this.setSoundEnabled(!1)}}return n(e,[{key:"onSoundPlaying",value:function(){this.soundPlaying=!0}},{key:"onSoundPause",value:function(){this.soundPlaying=!1}},{key:"onSoundEnded",value:function(){this.soundPlaying=!1}},{key:"play",value:function(){if(this.getSoundEnabled()&&!this.soundPlaying&&this.audio)try{this.audio.play()}catch(e){}}},{key:"getSoundEnabled",value:function(){return"true"===this.sessionDataManager.get(H,"true")}},{key:"setSoundEnabled",value:function(e){this.sessionDataManager.set(H,"".concat(!!e))}},{key:"toggleSoundEnabled",value:function(){this.setSoundEnabled(!this.getSoundEnabled())}}]),e}();function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var K="pageVisitsSinceLastMessage",q=function(){function r(e,n,o){var i=this;t(this,r),this.sessionDataManager=e,this.browserPageAdapter=n,this.enableWebHistory=o.enableWebHistory,this.browserPageAdapter.registerHistoryChangeListener((function(){return i.trackCurrentPageVisitOrClear()}))}return n(r,[{key:"readPageVisitsFromStorage",value:function(){if(!this.enableWebHistory)return[];var e=this.sessionDataManager.get(K,"");if(!e||!e.startsWith("["))return[];try{var t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){console.warn(e,"Unable to load page visits array")}return[]}},{key:"getPageVisitsMetadataThenFlush",value:function(){var t=this.readPageVisitsFromStorage();return this.sessionDataManager.set(K,"[]"),e({},"".concat("KHOROS_INTERNAL",":").concat(K),JSON.stringify(t))}},{key:"trackCurrentPageVisitOrClear",value:function(){if(this.enableWebHistory){var e=(new Date).getTime(),t=this.browserPageAdapter.getPageTitle(),r=this.browserPageAdapter.getURL(),n=this.truncateCurrentPageVisit(e,t,r),o=this.readPageVisitsFromStorage(),i=this.appendAndDedupePageVisits(o,n);this.sessionDataManager.set(K,JSON.stringify(i))}else this.sessionDataManager.remove(K,!0)}},{key:"appendAndDedupePageVisits",value:function(e,t){var r=e.sort((function(e,t){return e.timestamp-t.timestamp}));try{var n=V(r.slice(-1),1)[0];if(n&&n.url===t.url&&n.title===t.title)return r;for(var o=[].concat(N(r),[t]);JSON.stringify(o).length>1536;)o.shift();return o}catch(t){return console.warn(t,"Unable to dedupe page visits, continuing"),e}}},{key:"truncateCurrentPageVisit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=r.length>128?"...":"",o=t.length>64?"...":"";return{url:r.substring(0,128)+n,title:t.substring(0,64)+o,timestamp:e}}},{key:"resetPageVisitsForTest",value:function(){this.sessionDataManager.set(K,null)}}]),r}(),Y="LOCATION_CITY",J="LOCATION_STATE",Q="LOCATION_COUNTRY",$="IP",Z="SHOW_INVITATION",X="OPERATOR",ee="EQ",te="IN",re="WITHIN",ne="OUTSIDE",oe="CONVERSATION_STATE",ie="CONVERSATION_STATE_OPENED",ae="CONVERSATION_STATE_ACTIVE",se="CONVERSATION_STATE_ENDED",ue="CONVERSATION_STATE_NEVER",ce="FIRST_USER_MESSAGE_STATE",le="FIRST_USER_MESSAGE_STATE_SENT",pe="FIRST_USER_MESSAGE_STATE_NEVER",de="WELCOME_SCREEN_MESSAGE_STATE_KEY",he="WELCOME_SCREEN_NONE",fe="WELCOME_SCREEN_DISPLAYED",ye="WELCOME_SCREEN_CLICKED",ge="BRAND_STYLE_ID",me="DYNAMIC_VARIABLES",ve="GEO_IP",be="THROTTLE_PERCENTAGE",De="ENGAGED_IN_SESSION_WITH_RULE",we="ipWhitelist",Ee="ipBlacklist";function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}var Se="prod";function ke(){return["qa","stage","prod"].includes(Se)?Se:"qa"}var Ae="live",Te="https://brand-messenger.qa.aws.lcloud.com",Ie={dev:Te,qa:Te,stage:"https://brand-messenger.stage.aws.lcloud.com",prod:"https://brand-messenger.app.khoros.com"};function Fe(){var e,t,r=(null===(e=window.KHOROS_CONFIG)||void 0===e?void 0:e.universeOverride)||(null===(t=window.parent.KHOROS_CONFIG)||void 0===t?void 0:t.universeOverride)||ke();return Ie[r]||Te}var Me="https://proactive-chat-server.dev.aws.lcloud.com",Ne="https://proactive-chat-server-us.prod.aws.lcloud.com",Pe={dev:Me,qa:"https://proactive-chat-server.qa.aws.lcloud.com",stage:"https://proactive-chat-server.stage.aws.lcloud.com",prod:Ne,"prod-us-west-2":Ne,"prod-eu-west-1":"https://proactive-chat-server-eu.prod.aws.lcloud.com","prod-ap-southeast-2":"https://proactive-chat-server-ap.prod.aws.lcloud.com"};var Oe="https://messaging-auth-us-west-2.qa.aws.lcloud.com",Re={dev:Oe,qa:Oe,stage:"https://messaging-auth-us-west-2.stage.aws.lcloud.com","prod-us-west-2":"https://messaging-auth-us-west-2.prod.aws.lcloud.com","prod-eu-west-1":"https://messaging-auth-eu-west-1.prod.aws.lcloud.com","prod-ap-southeast-2":"https://messaging-auth-ap-southeast-2.prod.aws.lcloud.com"};var je="https://brandmessenger-backend.qa.aws.lcloud.com",xe={dev:je,qa:je,stage:"https://brandmessenger-backend.stage.aws.lcloud.com",prod:"https://brandmessenger.usw2.khoros.com","prod-us-west-2":"https://brandmessenger.usw2.khoros.com","prod-eu-west-1":"https://brandmessenger.euw1.khoros.com","prod-ap-southeast-2":"https://brandmessenger.apse2.khoros.com"};var _e=/^([0-9a-f]{3}|[0-9a-f]{6})$/i,Be=["jpg","jpeg","gif","jfif","svg","tif","tiff","png","webp"],Le={BUTTON:"button",TAB:"tab",EMBED:"embed"},Ue=function(e){if(e){var t=e.replace("#","");return _e.test(t)?t:void 0}},ze=function(e){var t=e.supportedFileExtensions;return(t?t.split(","):[]).filter((function(t){var r=We(t);return e.imageUploadEnabled&&r||e.fileUploadEnabled&&!r})).join(",")},We=function(e){return Be.includes(e.toLowerCase())};function He(e){return"string"==typeof e||e instanceof String}function Ge(e){return"function"==typeof e||e instanceof Function}var Ve=function(e){var t=e.prechatCaptureGreetingText,r=e.prechatCaptureConfirmationText,n={config:{enabled:e.enabled,enableEmailLinking:e.enableEmailLinking,fields:e.fields},customText:{}};return t&&(n.customText.prechatCaptureGreetingText=t),r&&(n.customText.prechatCaptureConfirmationText=r),n};function Ke(e){return e&&e.customColors&&e.customColors.brandColor}function qe(){var e=Fe(),t="v2.105.0";return t?"".concat(e,"/branches/").concat(t,"/brandmessenger-frame.js"):"public/brandmessenger-frame.js"}var Ye=function(e){return null==e?0:function(e){if(null==e)return 0;for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)&4294967295;return t}(JSON.stringify(e))};function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function $e(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var Xe="LT",et="LEQ",tt=ee,rt="NEQ",nt="GEQ",ot="GT",it="CONTAINS",at="STARTS_WITH",st="DOES_NOT_CONTAIN",ut="REGEX",ct="IS",lt="IS_NOT",pt=te,dt=function(){function e(r,n,o){t(this,e),this.operator=r,this.valueFromRule=n,this.variableName=o}return n(e,[{key:"getDisplayName",value:function(){throw new Error("Not implemented")}},{key:"debugResult",value:function(e,t){_(this.getDisplayName(),":  ",e," ",this.operator," ",this.valueFromRule,"  = ",t)}},{key:"isString",value:function(e){return He(e)}},{key:"convertMillisecondsToSeconds",value:function(e){return!!this.isNumber(e)&&e/1e3}},{key:"coerceNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";try{return function(e,t){if("number"==typeof e||null==e)return e;t=t||".";try{var r=new RegExp("[^0-9-"+t+"]","g"),n=parseFloat((""+e).replace(r,"").replace(t,"."));return isNaN(n)?null:n}catch(e){return null}}(e,t||".")}catch(e){return null}}},{key:"isNumber",value:function(e){return"number"==typeof e&&isFinite(e)}},{key:"evaluateString",value:function(e){return!!this.isString(e)&&(!!this.isString(this.valueFromRule)&&this.evaluateStringCondition(this.operator,e,this.valueFromRule))}},{key:"evaluateNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",r=this.coerceNumber(e,t),n=this.coerceNumber(this.valueFromRule);return!!this.isNumber(r)&&(!!this.isNumber(n)&&this.evaluateNumberCondition(this.operator,r,n))}},{key:"evaluateNumberCondition",value:function(e,t,r){switch(e){case Xe:return t<r;case et:return t<=r;case tt:return t===r;case rt:return t!==r;case ot:return t>r;case nt:return t>=r}return!1}},{key:"evaluateStringCondition",value:function(e,t,r){switch(e){case Xe:return t<r;case et:return t<=r;case ot:return t>r;case nt:return t>=r;case tt:case ct:return t.toUpperCase()===r.toUpperCase();case rt:case lt:return t.toUpperCase()!==r.toUpperCase();case it:return-1!==t.toUpperCase().indexOf(r.toUpperCase());case st:return-1===t.toUpperCase().indexOf(r.toUpperCase());case at:return 0===t.toUpperCase().indexOf(r.toUpperCase());case pt:return-1!==r.toUpperCase().indexOf(t.toUpperCase());case ut:return new RegExp(r).test(t)}return!1}},{key:"containsCriteria",value:function(){return!1}}]),e}();function ht(e){var t=ft();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ft=function(){return!!e})()}var yt=function(e){Qe(o,e);var r=ht(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"GeoLocation field: "+this.variableName}},{key:"evaluate",value:function(e){var t,r,n=this.getGeoIPData(e);if(this.variableName===$)r=n.ip,t=this.evaluateIPAddressRange(r);else if(n.geoIp)switch(this.variableName){case Q:r=this.getCountryNames(n.geoIp),t=this.evaluateValues(r);break;case J:r=this.getStateNames(n.geoIp),t=this.evaluateValues(r);break;case Y:r=this.getCityName(n.geoIp),t=this.evaluateString(r)}else t=!1;return this.debugResult(r,t),t}},{key:"getCityName",value:function(e){try{return e.city.names.en}catch(e){return null}}},{key:"getStateNames",value:function(e){var t=e.subdivisions&&e.subdivisions[0];if(!t||!t.names&&!t.iso_code)return[];var r=[];return t.names&&t.names.en&&r.push(t.names.en),t.iso_code&&r.push(t.iso_code),r}},{key:"getCountryNames",value:function(e){var t=e.country;if(!t||!t.names&&!t.iso_code)return[];var r=[];return t.names&&t.names.en&&r.push(t.names.en),t.iso_code&&r.push(t.iso_code),r}},{key:"evaluateValues",value:function(e){var t=this;return e.some((function(e){return t.evaluateString(e)}))}},{key:"getGeoIPData",value:function(e){return JSON.parse(e.storageAdapter.get(ve,"{}"))}},{key:"evaluateIPAddressRange",value:function(e){if(!this.isString(this.valueFromRule))return!1;if(!this.valueFromRule.includes("*"))return this.evaluateString(e);var t=this.valueFromRule.split("*",1)[0].split("."),r=e.split(".");return!(t.length>4)&&this.evaluateIPParts(r,t)}},{key:"evaluateIPParts",value:function(e,t){var r=e.slice(0,t.length-1).join("."),n=t.slice(0,t.length-1).join(".");return this.evaluateStringCondition(this.operator,r,n)}},{key:"containsCriteria",value:function(e){return e===ve}}]),o}(dt),gt=function(){function e(r){t(this,e),this.subcriteria=r||[]}return n(e,[{key:"getDisplayName",value:function(){throw new Error("Not Implemented")}},{key:"evaluate",value:function(e){j(this.getDisplayName());var t=this.evaluateSubCriteria(e);return _(this.getDisplayName()," = ",t),x(),t}},{key:"addToSubCriteria",value:function(e){this.subcriteria.push(e)}},{key:"containsCriteria",value:function(e){return!!Array.isArray(this.subcriteria)&&void 0!==this.subcriteria.find((function(t){return t.containsCriteria(e)}))}}]),e}();function mt(e){var t=vt();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vt=function(){return!!e})()}var bt=function(e){Qe(o,e);var r=mt(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"OR"}},{key:"evaluateSubCriteria",value:function(e){if(!Array.isArray(this.subcriteria))return!1;var t=!1;return this.subcriteria.forEach((function(r){return t=t||r&&r.evaluate(e)})),t}}]),o}(gt);function Dt(e){var t=wt();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}var Et,Ct=function(e){Qe(o,e);var r=Dt(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"AND"}},{key:"evaluateSubCriteria",value:function(e){if(!Array.isArray(this.subcriteria))return!1;var t=!0;return this.subcriteria.forEach((function(r){return t=t&&r&&r.evaluate(e)})),t}}]),o}(gt),St="EVALUATION_NOT_REQUIRED",kt="EVALUATION_PENDING",At="EVALUATED_ALLOWED",Tt="EVALUATED_NOT_ALLOWED",It=(e(Et={},St,!0),e(Et,kt,!1),e(Et,At,!0),e(Et,Tt,!1),Et),Ft=function(){function e(r,n){t(this,e),this.ipListEnabled=r&&r[n]&&r[n].enabled&&(0!==r[n].ipAddresses.length||r[n].countries&&0!==r[n].countries.length)||!1,this.key=n,this.evaluationStatus=this.ipListEnabled?kt:St,this.ipListCriteria=this.ipListEnabled?this.createIPListCriteria(r[n]):[]}return n(e,[{key:"isIPListEnabled",value:function(){return this.ipListEnabled}},{key:"createIPListCriteria",value:function(e){_("".concat(this.key," Display Conditions enabled"));var t=this.key===we?new Ct:new bt,r=new bt,n=new bt;return e.ipAddresses.length>0&&(e.ipAddresses.forEach((function(e){r.addToSubCriteria(new yt(ee,e,$))})),t.addToSubCriteria(r)),e.countries&&e.countries.length>0&&(e.countries.forEach((function(e){n.addToSubCriteria(new yt(ee,e,Q))})),t.addToSubCriteria(n)),t}},{key:"evaluate",value:function(e){if(this.evaluationStatus===kt){_("Evaluating ".concat(this.key," display conditions"));var t=this.ipListCriteria.evaluate(e),r=this.key===we?t:!t;this.evaluationStatus=r?At:Tt}return this.shouldDisplayWidget()}},{key:"shouldDisplayWidget",value:function(){return It[this.evaluationStatus]}}]),e}(),Mt=function(){function e(r,n){var o;t(this,e),this.shouldThrottleResult=void 0,this.throttlePercentage=0,r&&r.throttle&&(o=r.throttle),this.enabled=!(!o||!o.enabled),this.throttlePercentageStorageKey=n&&n.id?"".concat(be,"_").concat(n.id):be,this.enabled?this.throttlePercentage=o.percentage:this.shouldThrottleResult=!1}return n(e,[{key:"shouldThrottle",value:function(e){if(null!=this.shouldThrottleResult)return this.shouldThrottleResult;if(void 0===this.throttlePercentage)return!1;var t=e.get(this.throttlePercentageStorageKey);return t||(t=Math.floor(Math.random()*Math.floor(99))+1,e.set(this.throttlePercentageStorageKey,t)),this.throttlePercentage<t}}]),e}();const Nt=JSON.parse('{"actionPostbackError":"     ,   ","allow":"","clickToRetry":"        ","clickToRetryForm":"   ,         ","couldNotConnect":"   .  ","couldNotConnectInner":"    ","couldNotConnectWithRetry":"  ,       ","couldNotConnectWithRetryInner":" ","delivered":"","deny":"","documentUploaded":"  ","fetchHistory":" ","fetchingHistory":" ...","fileTooLargeError":"     ()","fileTypeError":"   ","formErrorInvalidEmail":"   ","formErrorNoLongerThan":"      () ","formErrorNoShorterThan":"     () ","formErrorUnknown":"    ","formFieldSelectPlaceholderFallback":" ","formRequested":"  ","formResponseSent":"   ","headerText":"  ","imageClickToReload":"   ","imageClickToView":"  () ","imagePreviewNotAvailable":"  ","inputPlaceholder":" ...","inputPlaceholderBlocked":"  ...","introductionText":"  ,   ","invalidFileError":"  .       (jpg, jpeg, png, gif, or bmp)","linkError":"       ,    ","locationNotSupported":"    ,         ","locationSecurityRestriction":"           ","locationSendingFailed":"   ","locationServicesDenied":"       .           ","mapPermissionErrorDescription":"   .        ","messageError":"    .    ","messageIndicatorTitlePlural":" ","messageIndicatorTitleSingular":" ","messageRelativeTimeDay":" () ","messageRelativeTimeHour":" () ","messageRelativeTimeJustNow":"","messageRelativeTimeMinute":" ()","messageSending":"...","micPermissionErrorDescription":"     ","muteNotifications":"  ","permissionError":"  ","prechatCaptureConfirmationText":" ,   ","prechatCaptureEmailLabel":" ","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":",      ","prechatCaptureNameLabel":"","prechatCaptureNamePlaceholder":" ...","printTranscript":" ","recordingAudio":"","search":"","seen":" ","sendButtonText":"","sent":" ","settingsHeaderText":"","shareLocation":" ","startConversationWith":"  ","supportRequest":" ","tapToRetry":"    .   ","tapToRetryForm":"       ","transcriptConversationWith":"  ","unmuteNotifications":"  ","unsupportedActionType":"   ","unsupportedMessageType":"   ","uploadDocument":" ","uploadingFile":" ...","uploadInvalidError":"  ","uploadPhoto":" ","uploadVirusError":"       ","youWrote":" "}'),Pt=JSON.parse('{"actionPostbackError":"Bei der Verarbeitung Ihrer Aktion ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","allow":"Erlauben","cardCarousel":"Kartenkarussell","clickToRetry":"Nachricht nicht verschickt. Klicken Sie, um es erneut zu versuchen.","clickToRetryForm":"Formular nicht bermittelt. Klicke auf eine beliebige Stelle im Formular, um es erneut zu versuchen.","couldNotConnect":"Verbindung konnte nicht hergestellt werden. Du kannst {retry}.","couldNotConnectInner":"Verbindungsherstellung erneut versuchen","couldNotConnectWithRetry":"Verbindung konnte nicht hergestellt werden. Wir versuchen es weiter oder du kannst {retry}.","couldNotConnectWithRetryInner":"jetzt versuchen","delivered":"Geliefert","deny":"Verweigern","documentUploaded":"Dokument hochgeladen","fetchHistory":"Weitere laden","fetchingHistory":"Verlauf abrufen","fileTooLargeError":"Maximale Dateigre berschritten ({size})","fileTypeError":"Nicht untersttzter Dateityp.","formErrorInvalidEmail":"E-Mail-Adresse ist ungltig","formErrorNoLongerThan":"Darf hchstens {characters} Zeichen umfassen","formErrorNoShorterThan":"Muss mindestens {characters} Zeichen enthalten","formErrorUnknown":"Hier scheint ein Fehler unterlaufen zu sein","formFieldSelectPlaceholderFallback":"Whle eine Option...","formRequested":"Formular angefordert","formResponseSent":"Formularantwort gesendet","headerText":"Wie knnen wir helfen?","imageClickToReload":"Klicke, um das Bild neu zu laden.","imageClickToView":"Klicke hier, um das Bild ({size}) anzuzeigen.","imagePreviewNotAvailable":"Vorschau nicht verfgbar.","inputPlaceholder":"Nachricht eingeben","inputPlaceholderBlocked":"Flle das Formular oben aus...","introductionText":"Wir sind hier, um deine Fragen zu beantworten!","invalidFileError":"Nur Bilder werden untersttzt. Whlen Sie eine Datei mit einer untersttzten Erweiterung (jpg, jpeg, png, gif oder bmp).","linkError":"Beim Versuch, einen Link fr diesen Kanal zu erstellen, ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","locationNotSupported":"Ihr Browser untersttzt entweder keine Standortdienste oder diese wurden deaktiviert. Bitte geben Sie stattdessen Ihren Standort ein.","locationSecurityRestriction":"Diese Website kann nicht auf Ihren Standort zugreifen. Bitte geben Sie stattdessen Ihren Standort ein.","locationSendingFailed":"Standort konnte nicht bermittelt werden","locationServicesDenied":"Diese Website kann nicht auf Ihren Standort zugreifen. Gestatten Sie den Zugriff in Ihren Einstellungen oder geben Sie stattdessen Ihren Standort ein.","mapPermissionErrorDescription":"Wir konnten Ihre Position nicht feststellen. Sie knnen weiterhin den Kartenpicker und die Suchfunktion nutzen","messageError":"Beim Senden deiner Nachricht ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut.","messageIndicatorTitlePlural":"({count}) Neue Nachrichten","messageIndicatorTitleSingular":"({count}) Neue Nachricht","messageRelativeTimeDay":"vor {value}T","messageRelativeTimeHour":"vor {value}h","messageRelativeTimeJustNow":"Gerade eben","messageRelativeTimeMinute":"Vor {value}M","messageSending":"Wird gesendet","micPermissionErrorDescription":"Bitte prfen Sie die Berechtigungen fr die Verwendung des Mikrofons","muteNotifications":"Mitteilungen stumm schalten","permissionError":"Berechtigungsfehler","prechatCaptureConfirmationText":"Vielen Dank! Wobei knnen wir dir helfen?","prechatCaptureEmailLabel":"E-Mail","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Hallo! \\nWir brauchen fr den Anfang einige Informationen ber dich:","prechatCaptureNameLabel":"Dein Name","prechatCaptureNamePlaceholder":"Gib deinen Namen ein...","printTranscript":"Transkript ausdrucken","recordingAudio":"Wird aufgezeichnet","search":"Suche","secureFormRequest":"Sichere Formularanfrage","seen":"Gesehen","sendButtonText":"Senden","sent":"Gesendet","settingsHeaderText":"Einstellungen","shareLocation":"Ort teilen","startConversationWith":"Beginnen Sie Ihre Unterhaltung mit","suggestedReplies":"Vorgeschlagene Antworten","supportRequest":"Support Request","tapToRetry":"Nachricht nicht verschickt. Tippe, um es erneut zu versuchen.","tapToRetryForm":"Formular nicht bermittelt. Tippe auf eine beliebige Stelle im Formular, um es erneut zu versuchen.","transcriptConversationWith":"Transkript der Konversation mit","unmuteNotifications":"Stummschaltung der Mitteilungen aufheben","unsupportedActionType":"Nicht untersttzter Aktionstyp","unsupportedMessageType":"Nicht untersttzter Nachrichtentyp","uploadDocument":"Dokument hochladen","uploadingFile":"Wird hochgeladen...","uploadInvalidError":"Ungltige Datei.","uploadPhoto":"Foto hochladen","uploadVirusError":"In deiner Datei wurde ein Virus gefunden und die Datei wurde abgelehnt.","youWrote":"Sie schrieben"}'),Ot=JSON.parse('{"actionPostbackError":"An error occurred while processing your action. Please try again.","allow":"Allow","cardCarousel":"Card Carousel","chatIsArchived":"This chat has been archived","clickToRetry":"Message not delivered. Click to retry.","clickToRetryForm":"Form not submitted. Click anywhere on the form to retry.","couldNotConnect":"Couldn\'t connect. You can {retry}.","couldNotConnectInner":"retry connecting now","couldNotConnectWithRetry":"Couldn\'t connect. We\'ll keep retrying, or you can {retry}.","couldNotConnectWithRetryInner":"try now","delivered":"Delivered","deny":"Deny","documentUploaded":"Document Uploaded","fetchHistory":"Load more","fetchingHistory":"Retrieving history...","fileTooLargeError":"Max file size limit exceeded ({size})","fileTypeError":"Unsupported file type.","formErrorInvalidEmail":"Email is invalid","formErrorNoLongerThan":"Must contain no more than ({characters}) characters","formErrorNoShorterThan":"Must contain at least ({characters}) characters","formErrorUnknown":"This doesn\'t look quite right","formFieldSelectPlaceholderFallback":"Choose one...","formRequested":"Form Requested","formResponseSent":"Form Response Sent","headerText":"How can we help?","imageClickToReload":"Click to reload image.","imageClickToView":"Click to view {size} image.","imagePreviewNotAvailable":"Preview not available.","inputPlaceholder":"Type a message...","inputPlaceholderBlocked":"Complete the form above...","introductionText":"We\'re here to talk, so ask us anything!","invalidFileError":"Only images are supported. Choose a file with a supported extension (jpg, jpeg, png, gif, or bmp).","linkError":"An error occurred when attempting to generate a link for this channel. Please try again.","locationNotSupported":"Your browser does not support location services or its been disabled. Please type your location instead.","locationSecurityRestriction":"This website cannot access your location. Please type your location instead.","locationSendingFailed":"Could not send location","locationServicesDenied":"This website cannot access your location. Allow access in your settings or type your location instead.","mapPermissionErrorDescription":"We could not determine your position. You can continue to use the map picker and search function","messageError":"An error occurred while sending your message. Please try again.","messageIndicatorTitlePlural":"({count}) New messages","messageIndicatorTitleSingular":"({count}) New message","messageRelativeTimeDay":"{value}d ago","messageRelativeTimeHour":"{value}h ago","messageRelativeTimeJustNow":"Just now","messageRelativeTimeMinute":"{value}m ago","messageSending":"Sending...","micPermissionErrorDescription":"Please check permissions for using the mic","muteNotifications":"Mute Notifications","permissionError":"Permission Error","pleaseChooseAnOption":"Please choose an option","prechatCaptureConfirmationText":"Thanks for that! What can we help you with?","prechatCaptureEmailLabel":"Email","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Hi there \\nTo start off, we\'d like to know a little bit more about you:","prechatCaptureNameLabel":"Your name","prechatCaptureNamePlaceholder":"Type your name...","printTranscript":"Print Transcript","recordingAudio":"Recording","search":"Search","secureFormRequest":"Secure Form Request","seen":"Seen","sendButtonText":"Send","sent":"Sent","settingsHeaderText":"Settings","shareLocation":"Share location","startConversationWith":"Start your conversation with","suggestedReplies":"Suggested Replies","supportRequest":"Support Request","tapToRetry":"Message not delivered. Tap to retry.","tapToRetryForm":"Form not submitted. Tap anywhere on the form to retry.","transcriptConversationWith":"Transcript Conversation With","unmuteNotifications":"Unmute Notifications","unsupportedActionType":"Unsupported action type.","unsupportedMessageType":"Unsupported message type.","uploadDocument":"Upload document","uploadingFile":"Uploading...","uploadInvalidError":"Invalid file.","uploadPhoto":"Upload photo","uploadVirusError":"A virus was detected in your file and it has been rejected","youWrote":"You Wrote"}'),Rt=JSON.parse('{"actionPostbackError":"Se produjo un error al procesar tu accin. Vuelve a intentarlo.","allow":"Permitir","cardCarousel":"Carrusel de tarjetas","clickToRetry":"Mensaje no entregado. Haz clic para volver a intentar.","clickToRetryForm":"No se envi el formulario. Haz clic en cualquier parte del formulario para volver a intentarlo.","couldNotConnect":"No se pudo conectar. Puedes {retry}.","couldNotConnectInner":"volver a intentar conectarte","couldNotConnectWithRetry":"No se pudo conectar. Seguiremos volvindolo a intentar. Tambin puedes {retry}.","couldNotConnectWithRetryInner":"intentarlo ahora","delivered":"Entregado","deny":"Negar","documentUploaded":"Documento subido","fetchHistory":"Cargar ms","fetchingHistory":"Recuperando la historia...","fileTooLargeError":"Se excedi el tamao mximo del archivo ({size})","fileTypeError":"Tipo de archivo no admitido.","formErrorInvalidEmail":"El correo electrnico no es vlido","formErrorNoLongerThan":"Debe tener no ms de ({characters}) caracteres","formErrorNoShorterThan":"Debe tener al menos ({characters}) caracteres","formErrorUnknown":"Comprueba que es correcto","formFieldSelectPlaceholderFallback":"Elige uno...","formRequested":"Solicitud de formulario","formResponseSent":"Respuesta de formulario enviada","headerText":"Cmo podemos ayudar?","imageClickToReload":"Haz clic para volver a cargar la imagen.","imageClickToView":"Haz clic para ver la imagen {size}.","imagePreviewNotAvailable":"La vista previa no est disponible.","inputPlaceholder":"Escribe un mensaje...","inputPlaceholderBlocked":"Completa el formulario que aparece arriba...","introductionText":"Estamos aqu para hablar, as que pregntanos!","invalidFileError":"Solo se admiten imgenes. Elige un archivo con una extensin compatible (jpg, jpeg, png, gif o bmp).","linkError":"Se produjo un error al intentar generar un enlace para este canal. Vuelve a intentarlo.","locationNotSupported":"Tu navegador no admite servicios de localizacin o est deshabilitado. Ingresa tu ubicacin en su lugar.","locationSecurityRestriction":"Este sitio web no puede acceder a tu ubicacin. Ingresa tu ubicacin en su lugar.","locationSendingFailed":"No se pudo enviar la ubicacin","locationServicesDenied":"Este sitio web no puede acceder a tu ubicacin. Debes permitir el acceso en la configuracin o ingresar tu ubicacin.","mapPermissionErrorDescription":"No pudimos determinar su posicin. Puede seguir usando el selector de mapa y la funcin de bsqueda","messageError":"Se produjo un error al enviar tu mensaje. Vuelve a intentarlo.","messageIndicatorTitlePlural":"({count}) Mensajes nuevos","messageIndicatorTitleSingular":"({count}) Mensaje nuevo","messageRelativeTimeDay":"Hace {value} d","messageRelativeTimeHour":"Hace {value} h","messageRelativeTimeJustNow":"Hace instantes","messageRelativeTimeMinute":"Hace {value} m","messageSending":"Enviando...","micPermissionErrorDescription":"Compruebe los permisos para usar el micrfono","muteNotifications":"Silenciar notificaciones","permissionError":"Error de permisos","prechatCaptureConfirmationText":"Gracias! Cmo podemos ayudar?","prechatCaptureEmailLabel":"Correo electrnico","prechatCaptureEmailPlaceholder":"nombre@empresa.com","prechatCaptureGreetingText":"Hola! \\nEn primer lugar, queremos conocerte un poco mejor:","prechatCaptureNameLabel":"Tu nombre","prechatCaptureNamePlaceholder":"Escribe tu nombre...","printTranscript":"Imprimir transcripcin","recordingAudio":"Grabando","search":"Bsqueda","secureFormRequest":"Solicitud de formulario seguro","seen":"Visto","sendButtonText":"Enviar","sent":"Enviado","settingsHeaderText":"Configuracin","shareLocation":"Compartir ubicacin","startConversationWith":"Inicie una conversacin con","suggestedReplies":"Respuestas sugeridas","supportRequest":"Solicitud de Soporte","tapToRetry":"Mensaje no entregado. Toca para volver a intentar.","tapToRetryForm":"No se envi el formulario. Toca en cualquier parte del formulario para volver a intentarlo.","transcriptConversationWith":"Transcripcin de conversacin con","unmuteNotifications":"No silenciar notificaciones","unsupportedActionType":"Tipo de accin no compatible.","unsupportedMessageType":"Tipo de mensaje no compatible.","uploadDocument":"Cargar documento","uploadingFile":"Cargando...","uploadInvalidError":"Archivo no vlido.","uploadPhoto":"Cargar foto","uploadVirusError":"Se detect un virus en tu archivo y se rechaz","youWrote":"Escribiste"}'),jt=JSON.parse('{"actionPostbackError":"Une erreur s\'est produite lors du traitement de votre action. Veuillez ressayer.","allow":"Autoriser","cardCarousel":"Carrousel de cartes","clickToRetry":"Message non distribu. Cliquez pour ressayer.","clickToRetryForm":"Formulaire non soumis. Cliquez n\'importe o sur le formulaire pour ressayer.","couldNotConnect":"Connexion impossible. Vous pouvez {retry}.","couldNotConnectInner":"ressayer de se connecter maintenant","couldNotConnectWithRetry":"Connexion impossible. Nous allons continuer  ressayer. Vous pouvez galement {retry}.","couldNotConnectWithRetryInner":"essayer maintenant","delivered":"Diffus","deny":"Refuser","documentUploaded":"Document tlcharg","fetchHistory":"Charger plus","fetchingHistory":"Rcupration de l\'historique...","fileTooLargeError":"Limite de taille maximale du fichier dpasse ({size})","fileTypeError":"Type de fichier non pris en charge.","formErrorInvalidEmail":"Adresse lectronique incorrecte","formErrorNoLongerThan":"Ne doit pas contenir plus de ({characters}) caractres","formErrorNoShorterThan":"Doit contenir au moins ({characters}) caractres","formErrorUnknown":"Cela semble incorrect","formFieldSelectPlaceholderFallback":"Choisissez un lment...","formRequested":"Formulaire demand","formResponseSent":"Rponse au formulaire envoye","headerText":"Comment pouvons-nous vous aider ?","imageClickToReload":"Cliquez pour recharger l\'image.","imageClickToView":"Cliquez pour afficher {size} image.","imagePreviewNotAvailable":"Aperu non disponible.","inputPlaceholder":"crire un message...","inputPlaceholderBlocked":"Remplissez le formulaire ci-dessus...","introductionText":"Nous sommes ravis de discuter avec vous, n\'hsitez pas  nous poser des questions.","invalidFileError":"Seules les images sont prises en charge. Slectionnez un fichier avec une extension prise en charge (jpg, jpeg, png, gif ou bmp).","linkError":"Une erreur s\'est produite lors de la tentative de gnration d\'un lien pour ce canal. Veuillez ressayer.","locationNotSupported":"Votre navigateur ne prend pas en charge les services de localisation ou il a t dsactiv. Veuillez saisir le nom de votre ville.","locationSecurityRestriction":"Ce site Web ne peut pas accder  votre emplacement. Veuillez saisir le nom de votre ville.","locationSendingFailed":"Impossible d\'envoyer vers cet emplacement","locationServicesDenied":"Ce site Web ne peut pas accder  votre emplacement. Autorisez l\'accs dans vos paramtres ou saisissez le nom de votre emplacement.","mapPermissionErrorDescription":"Nous navons pa pu dterminer votre position Vous pouvez continuer  utiliser le slecteur de carte et la fonction de recherche.","messageError":"Une erreur s\'est produite lors de l\'envoi de votre message. Veuillez ressayer.","messageIndicatorTitlePlural":"({count}) Nouveaux messages","messageIndicatorTitleSingular":"({count}) Nouveau message","messageRelativeTimeDay":"Il y a {value} j","messageRelativeTimeHour":"Il y a {value} h","messageRelativeTimeJustNow":" l\'instant","messageRelativeTimeMinute":"Il y a {value} m","messageSending":"Envoi en cours...","micPermissionErrorDescription":"Veuillez vrifier les autorisations pour l\'utilisation du micro","muteNotifications":"Notifications en sourdine","permissionError":"Erreur de permission","prechatCaptureConfirmationText":"Merci ! Comment pouvons-nous vous aider ?","prechatCaptureEmailLabel":"Adresse lectronique","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Bonjour \\nPour commencer, nous aimerions en savoir un peu plus sur vous :","prechatCaptureNameLabel":"Votre nom","prechatCaptureNamePlaceholder":"Saisissez votre nom...","printTranscript":"Imprimer le relev","recordingAudio":"Enregistrement","search":"Recherche","secureFormRequest":"Demande de formulaire scuris","seen":"Vu","sendButtonText":"Envoyer","sent":"Envoy","settingsHeaderText":"Paramtres","shareLocation":"Partager l\'emplacement","startConversationWith":"Commencez votre conversation avec","suggestedReplies":"Rponses suggres","supportRequest":"Demande de soutien","tapToRetry":"Message non distribu. Appuyez pour ressayer.","tapToRetryForm":"Formulaire non soumis. Appuyez n\'importe o sur le formulaire pour ressayer.","transcriptConversationWith":"Transcription de la conversation avec","unmuteNotifications":"Ractiver le son des notifications","unsupportedActionType":"Type d\'action non pris en charge.","unsupportedMessageType":"Type de message non pris en charge.","uploadDocument":"Tlchargez le document","uploadingFile":"Chargement en cours...","uploadInvalidError":"Fichier non valide.","uploadPhoto":"Tlchargez une photo","uploadVirusError":"Un virus a t dtect dans votre fichier et a t rejet","youWrote":"Vous avez crit"}'),xt=JSON.parse('{"actionPostbackError":"            ","allow":" ","clickToRetry":"          ","clickToRetryForm":"              ","couldNotConnect":"     {retry}   ","couldNotConnectInner":"      ","couldNotConnectWithRetry":"         ,   {retry}   ","couldNotConnectWithRetryInner":" ","delivered":"","deny":" ","documentUploaded":"     ","fetchHistory":"  ","fetchingHistory":"     ...","fileTooLargeError":"   ({size})     ","fileTypeError":"  ","formErrorInvalidEmail":"  ","formErrorNoLongerThan":"({characters})      ","formErrorNoShorterThan":"   ({characters})   ","formErrorUnknown":"     ","formFieldSelectPlaceholderFallback":" ...","formRequested":"    ","formResponseSent":"    ","headerText":"      ?","imageClickToReload":"        ","imageClickToView":"{size}      ","imagePreviewNotAvailable":"   ","inputPlaceholder":"  ...","inputPlaceholderBlocked":"   ...","introductionText":"      ,     !","invalidFileError":"      (jpg, jpeg, png, gif  bmp)   ","linkError":"                ","locationNotSupported":"                     ","locationSecurityRestriction":"               ","locationSendingFailed":"    ","locationServicesDenied":"                      ","mapPermissionErrorDescription":"                    ","messageError":"          ","messageIndicatorTitlePlural":"({count})  ","messageIndicatorTitleSingular":"({count})  ","messageRelativeTimeDay":"{value} ","messageRelativeTimeHour":"{value} ","messageRelativeTimeJustNow":"-","messageRelativeTimeMinute":"{value} ","messageSending":"   ...","micPermissionErrorDescription":"       ","muteNotifications":"  ","permissionError":" ","prechatCaptureConfirmationText":"  !       ?","prechatCaptureEmailLabel":"","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":", \\n   ,        :","prechatCaptureNameLabel":" ","prechatCaptureNamePlaceholder":"   ...","printTranscript":"  ","recordingAudio":"   ","search":"","seen":"   ","sendButtonText":"","sent":" ","settingsHeaderText":"","shareLocation":"  ","startConversationWith":"    ","supportRequest":"  ","tapToRetry":"          ","tapToRetryForm":"              ","transcriptConversationWith":"     ","unmuteNotifications":"  ","unsupportedActionType":"  ","unsupportedMessageType":"  ","uploadDocument":"  ","uploadingFile":"   ........","uploadInvalidError":" ","uploadPhoto":"  ","uploadVirusError":"              ","youWrote":" "}'),_t=JSON.parse('{"actionPostbackError":"Si  verificato un errore durante l\'elaborazione dell\'azione. Riprovare.","allow":"Consenti","cardCarousel":"Sequenza di schede","clickToRetry":"Messaggio non consegnato. Fare clic per riprovare.","clickToRetryForm":"Modulo non presentato. Cliccare in qualsiasi punto del modulo per riprovare.","couldNotConnect":"Non  stato possibile connettersi. Puoi {retry}.","couldNotConnectInner":"riprovare a connettersi ora","couldNotConnectWithRetry":"Non  stato possibile connettersi. Continueremo a provare oppure puoi {retry}.","couldNotConnectWithRetryInner":"prova ora","delivered":"Consegnato","deny":"Nega","documentUploaded":"Documento caricato","fetchHistory":"Carica altro","fetchingHistory":"Recupero cronologia in corso...","fileTooLargeError":"Superato il limite massimo di dimensioni del file ({size})","fileTypeError":"Tipo di file non supportato.","formErrorInvalidEmail":"L\'indirizzo e-mail non  valido","formErrorNoLongerThan":"Non pu contenere pi di ({characters}) caratteri","formErrorNoShorterThan":"Deve contenere almeno ({characters}) caratteri","formErrorUnknown":"Sembra che ci sia qualcosa che non va","formFieldSelectPlaceholderFallback":"Scegline uno...","formRequested":"Modulo richiesto","formResponseSent":"Risposta al modulo inviata","headerText":"Come possiamo aiutare?","imageClickToReload":"Fare clic per ricaricare l\'immagine.","imageClickToView":"Fare clic per visualizzazione l\'immagine {size}.","imagePreviewNotAvailable":"Anteprima non disponibile.","inputPlaceholder":"Digita un messaggio...","inputPlaceholderBlocked":"Completa il modulo qui sopra...","introductionText":"Siamo qui per aiutarti, chiedici qualsiasi cosa!","invalidFileError":"Sono supportate solo le immagini. Scegliere un file con un\'estensione supportata (jpg, jpeg, png, gif o bmp).","linkError":"Si  verificato un errore durante il tentativo di generazione di un collegamento per questo canale. Riprovare.","locationNotSupported":"Il browser in uso non supporta i servizi di posizione o questi sono stati disattivati. Digitare la propria posizione.","locationSecurityRestriction":"Questo sito Web non pu accedere alla posizione. Digitare la propria posizione.","locationSendingFailed":"Impossibile inviare la posizione","locationServicesDenied":"Questo sito Web non pu accedere alla posizione. Consentire l\'accesso nelle impostazioni o digitare la posizione.","mapPermissionErrorDescription":"Non siamo riusciti a determinare la tua posizione.  possibile continuare a utilizzare il selezionatore di mappe e la funzione di ricerca.","messageError":"Si  verificato un errore durante l\'invio del messaggio. Riprovare.","messageIndicatorTitlePlural":"({count}) Nuovi messaggi","messageIndicatorTitleSingular":"({count}) Nuovo messaggio","messageRelativeTimeDay":"{value} g fa","messageRelativeTimeHour":"{value} h fa","messageRelativeTimeJustNow":"Proprio ora","messageRelativeTimeMinute":"{value} m fa","messageSending":"Invio in corso...","micPermissionErrorDescription":"Verificare le autorizzazioni per l\'utilizzo del microfono","muteNotifications":"Silenziamento delle notifiche","permissionError":"Errore di autorizzazione","prechatCaptureConfirmationText":"Grazie! Come possiamo aiutarti?","prechatCaptureEmailLabel":"E-mail","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Ciao \\nPer cominciare, vorremmo sapere qualcosa di pi su di te:","prechatCaptureNameLabel":"Il tuo nome","prechatCaptureNamePlaceholder":"Inserisci il tuo nome...","printTranscript":"Stampa la trascrizione","recordingAudio":"Registrazione","search":"Cerca","secureFormRequest":"Richiesta di modulo sicuro","seen":"Visto","sendButtonText":"Invia","sent":"Inviato","settingsHeaderText":"Impostazioni","shareLocation":"Condividi la posizione","startConversationWith":"Inizia la conversazione con","suggestedReplies":"Risposte suggerite","supportRequest":"Richiesta di assistenza","tapToRetry":"Messaggio non consegnato. Toccare per riprovare.","tapToRetryForm":"Modulo non presentato. Cliccare in qualsiasi punto del modulo per riprovare.","transcriptConversationWith":"Trascrizione della conversazione con","unmuteNotifications":"Notifiche non silenziate","unsupportedActionType":"Tipo azione non supportato.","unsupportedMessageType":"Tipo messaggio non supportato.","uploadDocument":"Caricare documento","uploadingFile":"In fase di caricamento...","uploadInvalidError":"File non valido.","uploadPhoto":"Carica foto","uploadVirusError":" stato rilevato un virus nel tuo file ed  stato rifiutato","youWrote":"Hai scritto"}'),Bt=JSON.parse('{"actionPostbackError":"","allow":"","clickToRetry":"","clickToRetryForm":"","couldNotConnect":"{retry}","couldNotConnectInner":"","couldNotConnectWithRetry":"{retry}","couldNotConnectWithRetryInner":"","delivered":"","deny":"","documentUploaded":"","fetchHistory":"","fetchingHistory":"...","fileTooLargeError":"({size})","fileTypeError":"","formErrorInvalidEmail":"","formErrorNoLongerThan":"({characters}) ","formErrorNoShorterThan":" ({characters}) ","formErrorUnknown":"","formFieldSelectPlaceholderFallback":"...","formRequested":"","formResponseSent":"","headerText":"?","imageClickToReload":"","imageClickToView":"{size}","imagePreviewNotAvailable":"","inputPlaceholder":"...","inputPlaceholderBlocked":"...","introductionText":"!","invalidFileError":"(jpgjpegpnggifbmp)","linkError":"","locationNotSupported":"","locationSecurityRestriction":"","locationSendingFailed":"","locationServicesDenied":"","mapPermissionErrorDescription":"","messageError":"","messageIndicatorTitlePlural":"({count}) ","messageIndicatorTitleSingular":"({count}) ","messageRelativeTimeDay":"{value}","messageRelativeTimeHour":"{value}","messageRelativeTimeJustNow":"","messageRelativeTimeMinute":"{value}","messageSending":"....","micPermissionErrorDescription":"","muteNotifications":"","permissionError":"","prechatCaptureConfirmationText":"!?","prechatCaptureEmailLabel":"","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"\\n","prechatCaptureNameLabel":"","prechatCaptureNamePlaceholder":"...","printTranscript":"","recordingAudio":"","search":"","seen":"","sendButtonText":"","sent":"","settingsHeaderText":"","shareLocation":"","startConversationWith":"","supportRequest":"","tapToRetry":"","tapToRetryForm":"","transcriptConversationWith":"","unmuteNotifications":"","unsupportedActionType":"","unsupportedMessageType":"","uploadDocument":"","uploadingFile":"...","uploadInvalidError":"","uploadPhoto":"","uploadVirusError":"","youWrote":""}'),Lt=JSON.parse('{"actionPostbackError":"    .  .","allow":"","clickToRetry":"  .   .","clickToRetryForm":"  .      .","couldNotConnect":"  . {retry}  .","couldNotConnectInner":"   ","couldNotConnectWithRetry":"  .   {retry}  .","couldNotConnectWithRetryInner":" ","delivered":"","deny":"","documentUploaded":" ","fetchHistory":" ","fetchingHistory":"  ...","fileTooLargeError":"    ({size})","fileTypeError":"   .","formErrorInvalidEmail":" .","formErrorNoLongerThan":"({characters})    ","formErrorNoShorterThan":"({characters})    ","formErrorUnknown":"     ","formFieldSelectPlaceholderFallback":" ...","formRequested":" ","formResponseSent":"  ","headerText":"    ?","imageClickToReload":"   .","imageClickToView":"{size}   .","imagePreviewNotAvailable":"    .","inputPlaceholder":" ...","inputPlaceholderBlocked":"  ...","introductionText":"     !","invalidFileError":" .  (jpg, jpeg, png, gif  bmp)   .","linkError":"       .  .","locationNotSupported":"       .   .","locationSecurityRestriction":"      .   .","locationSendingFailed":"   .","locationServicesDenied":"      .     .","mapPermissionErrorDescription":"     .         .","messageError":"    .  .","messageIndicatorTitlePlural":"({count})  ","messageIndicatorTitleSingular":"({count})  ","messageRelativeTimeDay":"{value} ","messageRelativeTimeHour":"{value} ","messageRelativeTimeJustNow":" ","messageRelativeTimeMinute":"{value} ","messageSending":" ...","micPermissionErrorDescription":"   .","muteNotifications":" ","permissionError":" ","prechatCaptureConfirmationText":"  !  ?","prechatCaptureEmailLabel":"","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":". \\n       .","prechatCaptureNameLabel":" ","prechatCaptureNamePlaceholder":" ...","printTranscript":" ","recordingAudio":"","search":"","seen":"","sendButtonText":"","sent":"","settingsHeaderText":"","shareLocation":" ","startConversationWith":" ","supportRequest":" ","tapToRetry":"  .   ","tapToRetryForm":"  .      .","transcriptConversationWith":"  ","unmuteNotifications":"  ","unsupportedActionType":"   .","unsupportedMessageType":"   .","uploadDocument":" ","uploadingFile":" ...","uploadInvalidError":" .","uploadPhoto":" ","uploadVirusError":"   .","youWrote":" "}'),Ut=JSON.parse('{"actionPostbackError":"Er is een fout opgetreden bij het verwerken van uw actie. Probeer het opnieuw.","allow":"Toestaan","clickToRetry":"Bericht niet afgeleverd. Klik om het opnieuw te proberen.","clickToRetryForm":"Formulier niet verzonden. Klik ergens op het formulier om het opnieuw te proberen.","couldNotConnect":"Kan geen verbinding maken. U kunt {retry}.","couldNotConnectInner":"nu proberen verbinding te maken","couldNotConnectWithRetry":"Kan geen verbinding maken. We blijven proberen verbinding te maken of u kunt {retry}.","couldNotConnectWithRetryInner":"nu proberen","delivered":"Geleverd","deny":"Weigeren","documentUploaded":"Document gepload","fetchHistory":"Meer laden","fetchingHistory":"Geschiedenis ophalen...","fileTooLargeError":"Maximumgrens van bestandsgrootte overschreden ({size})","fileTypeError":"Niet-ondersteund bestandstype.","formErrorInvalidEmail":"E-mailadres is ongeldig","formErrorNoLongerThan":"Mag niet langer zijn dan ({characters}) tekens","formErrorNoShorterThan":"Moet minstens ({characters}) tekens bevatten","formErrorUnknown":"Dit is niet helemaal goed","formFieldSelectPlaceholderFallback":"Kies er n...","formRequested":"Formulier aangevraagd","formResponseSent":"Antwoordformulier verzonden","headerText":"Waar kunnen we u mee helpen?","imageClickToReload":"Klik om de afbeelding opnieuw te laden.","imageClickToView":"Klik om {size} afbeelding te bekijken.","imagePreviewNotAvailable":"Voorbeeld niet beschikbaar.","inputPlaceholder":"Bericht Typen...","inputPlaceholderBlocked":"Bovenstaande formulier invullen...","introductionText":"We zijn er voor u, dus u kunt ons alles vragen!","invalidFileError":"Alleen afbeeldingen worden ondersteund. Kies een bestand met een ondersteunde extensie (jpg, jpeg, png, gif of bmp).","linkError":"Er is een fout opgetreden bij het genereren van een link voor dit kanaal. Probeer het opnieuw.","locationNotSupported":"Uw browser ondersteunt geen locatiediensten of deze zijn uitgeschakeld. Typ in plaats daarvan uw locatie in.","locationSecurityRestriction":"Deze website kan geen toegang verkrijgen tot uw locatie. Typ in plaats daarvan uw locatie in.","locationSendingFailed":"Kan locatie niet verzenden","locationServicesDenied":"Deze website kan geen toegang verkrijgen tot uw locatie. Geef toestemming voor de toegang in uw instellingen of typ in plaats daarvan uw locatie in.","mapPermissionErrorDescription":"We konden uw positie niet bepalen U kunt de kaartkiezer en de zoekfunctie blijven gebruiken","messageError":"Er is een fout opgetreden bij het verzenden van uw bericht. Probeer het opnieuw.","messageIndicatorTitlePlural":"({count}) nieuwe berichten","messageIndicatorTitleSingular":"({count}) nieuw bericht","messageRelativeTimeDay":"{value}d geleden","messageRelativeTimeHour":"{value}h geleden","messageRelativeTimeJustNow":"Zojuist","messageRelativeTimeMinute":"{value}m geleden","messageSending":"Verzenden...","micPermissionErrorDescription":"Controleer de machtigingen voor het gebruik van de microfoon","muteNotifications":"Meldingen uitschakelen","permissionError":" Toestemmingsfout","prechatCaptureConfirmationText":"Hartelijk dank! Waar kunnen we u mee helpen?","prechatCaptureEmailLabel":"E-mailadres","prechatCaptureEmailPlaceholder":"naam@bedrijf.com","prechatCaptureGreetingText":"Hallo,  Om te beginnen zouden we graag iets meer over u willen weten:","prechatCaptureNameLabel":"Uw naam","prechatCaptureNamePlaceholder":"Voer uw naam in...","printTranscript":"Transcript afdrukken","recordingAudio":"Opnemen","search":"Zoeken","seen":"Gezien","sendButtonText":"Verzenden","sent":"Verzonden","settingsHeaderText":"Instellingen","shareLocation":"Locatie Delen","startConversationWith":"Begin uw gesprek met","supportRequest":"Ondersteuningsverzoek","tapToRetry":"Bericht niet afgeleverd. Tik om het opnieuw te proberen.","tapToRetryForm":"Formulier niet verzonden. Tik ergens op het formulier om het opnieuw te proberen.","transcriptConversationWith":"Transcriptie van gesprek met","unmuteNotifications":"Meldingen inschakelen","unsupportedActionType":"Niet-ondersteund actietype.","unsupportedMessageType":"Niet-ondersteund berichttype.","uploadDocument":"Document Uploaden","uploadingFile":"Uploaden...","uploadInvalidError":"Ongeldig bestand.","uploadPhoto":"Foto Uploaden","uploadVirusError":"Er is een virus gevonden in uw bestand, waardoor het is afgewezen","youWrote":"U schreef"}'),zt=JSON.parse('{"actionPostbackError":"Er trad een fout op bij het verwerken van uw actie. Probeer het opnieuw.","allow":"Toestaan","clickToRetry":"Bericht niet afgeleverd. Klik om het opnieuw te proberen.","clickToRetryForm":"Formulier niet ingediend. Klik ergens in het formulier om het opnieuw te proberen.","couldNotConnect":"Kan geen verbinding maken. U kunt het {retry}.","couldNotConnectInner":"probeer nu opnieuw te verbinden","couldNotConnectWithRetry":"Kan geen verbinding maken. We blijven het opnieuw proberen, of u kunt het {retry}.","couldNotConnectWithRetryInner":"nu proberen","delivered":"Geleverd","deny":"Weigeren","documentUploaded":"Document gepload","fetchHistory":"Meer laden","fetchingHistory":"Geschiedenis ophalen...","fileTooLargeError":"Maximum bestandsgrootte overschreden ({size})","fileTypeError":"Niet-ondersteund bestandstype.","formErrorInvalidEmail":"E-mailadres is ongeldig","formErrorNoLongerThan":"Mag niet meer dan ({characters}) tekens bevatten","formErrorNoShorterThan":"Moet ten minste ({characters}) tekens bevatten","formErrorUnknown":"Dit ziet er niet goed uit","formFieldSelectPlaceholderFallback":"Kies n optie...","formRequested":"Formulier aangevraagd","formResponseSent":"Reactie formulier verzonden","headerText":"Hoe kunnen we helpen?","imageClickToReload":"Klik om de afbeelding opnieuw te laden.","imageClickToView":"Klik om de afbeelding {size} te bekijken.","imagePreviewNotAvailable":"Geen voorbeeld beschikbaar","inputPlaceholder":"Bericht Typen...","inputPlaceholderBlocked":"Bovenstaande formulier invullen...","introductionText":"We zijn hier om u te helpen, dus aarzel niet uw vraag te stellen.","invalidFileError":"Alleen afbeeldingen worden ondersteund. Kies een bestand met een ondersteunde extensie (jpg, jpeg, png, gif of bmp).","linkError":"Er trad een fout op bij het genereren van een link voor dit kanaal. Probeer het opnieuw.","locationNotSupported":"Locatieservices wordt niet door uw browser ondersteund of deze optie is uitgeschakeld. Typ uw locatie.","locationSecurityRestriction":"Deze website heeft geen toegang tot uw locatie. Typ uw locatie.","locationSendingFailed":"Kan locatie niet verzenden","locationServicesDenied":"Deze website heeft geen toegang tot uw locatie. Geeft toegang via uw instellingen of typ uw locatie.","mapPermissionErrorDescription":"Wij konden uw positie niet vaststellen. U kunt doorgaan met het gebruiken van de kaartkiezer en zoekfunctie","messageError":"Er trad een fout op bij het verzenden van uw bericht. Probeer het opnieuw.","messageIndicatorTitlePlural":"({count}) nieuwe berichten","messageIndicatorTitleSingular":"({count}) nieuw bericht","messageRelativeTimeDay":"{value} dag(en) geleden","messageRelativeTimeHour":"{value} uur geleden","messageRelativeTimeJustNow":"Zojuist","messageRelativeTimeMinute":"{value} minuten geleden","messageSending":"Verzenden...","micPermissionErrorDescription":"Controleer de toestemmingen voor gebruik van de mic","muteNotifications":"Meldingen dempen","permissionError":"Toestemmingsfout","prechatCaptureConfirmationText":"Bedankt! Waarmee kunnen we u helpen?","prechatCaptureEmailLabel":"E-mailadres","prechatCaptureEmailPlaceholder":"naam@bedrijf.com","prechatCaptureGreetingText":"Hallo \\nWe zouden eerst graag iets meer over u willen weten:","prechatCaptureNameLabel":"Uw naam","prechatCaptureNamePlaceholder":"Typ uw naam...","printTranscript":"Transcript afdrukken","recordingAudio":"Opname","search":"Zoeken","seen":"Gezien","sendButtonText":"Verzenden","sent":"Verzonden","settingsHeaderText":"Instellingen","shareLocation":"Locatie Delen","startConversationWith":"Start uw gesprek met","supportRequest":"Ondersteuningsverzoek","tapToRetry":"Bericht niet afgeleverd. Tik om het opnieuw te proberen.","tapToRetryForm":"Formulier niet ingediend. Tik ergens in het formulier om het opnieuw te proberen.","transcriptConversationWith":"Gesprek transcriberen met","unmuteNotifications":"Demping meldingen ongedaan maken","unsupportedActionType":"Niet-ondersteund type actie.","unsupportedMessageType":"Niet-ondersteund berichttype.","uploadDocument":"Document Uploaden","uploadingFile":"Bezig met opladen","uploadInvalidError":"Ongeldig bestand.","uploadPhoto":"Foto Uploaden","uploadVirusError":"Er is een virus aangetroffen in uw bestand en het bestand is geweigerd.","youWrote":"U schreef"}'),Wt=JSON.parse('{"actionPostbackError":"Wystpi bd podczas przetwarzania dziaania. Sprbuj ponownie.","allow":"Zezwalaj","cardCarousel":"Karuzela kart","clickToRetry":"Nie dostarczono wiadomoci. Kliknij, aby sprbowa ponownie.","clickToRetryForm":"Nie przesano formularza. Kliknij w dowolne miejsce na formularzu, aby sprbowa ponownie.","couldNotConnect":"Nie mona si poczy. Mona {retry}.","couldNotConnectInner":"ponowi teraz prb poczenia","couldNotConnectWithRetry":"Nie mona si poczy. Bdziemy prbowa dalej. Mona rwnie {retry}.","couldNotConnectWithRetryInner":"sprbowa teraz","delivered":"Dostarczono","deny":"Odrzu","documentUploaded":"Dokument zaadowany","fetchHistory":"Zaaduj wicej","fetchingHistory":"Odzyskiwanie historii...","fileTooLargeError":"Przekroczono maksymalny limit rozmiaru pliku ({size})","fileTypeError":"Nieobsugiwany typ pliku.","formErrorInvalidEmail":"Adres e-mail jest nieprawidowy","formErrorNoLongerThan":"Nie moe zawiera wicej ni ({characters}) znakw","formErrorNoShorterThan":"Musi zawiera przynajmniej ({characters}) znakw","formErrorUnknown":"Co jest nie tak","formFieldSelectPlaceholderFallback":"Wybierz jedno...","formRequested":"Poproszono o formularz","formResponseSent":"Odpowied na formularz wysana","headerText":"Jak moemy pomc?","imageClickToReload":"Kliknij, aby ponownie zaadowa obraz.","imageClickToView":"Kliknij, aby wywietli obraz {size}.","imagePreviewNotAvailable":"Podgld niedostpny.","inputPlaceholder":"Wpisz wiadomo...","inputPlaceholderBlocked":"Wypenij powyszy formularz...","introductionText":"Pytaj nas, o co chcesz!","invalidFileError":"Obsugiwane s tylko obrazy. Wybierz plik z obsugiwanym rozszerzeniem (jpg, jpeg, png, gif lub bmp).","linkError":"Przy prbie generowania cza dla kanau wystpi bd. Sprbuj ponownie.","locationNotSupported":"Przegldarka nie obsuguje usug lokalizacji lub je wyczono. Zamiast tego wpisz lokalizacj.","locationSecurityRestriction":"Witryna nie ma dostpu do Twojej lokalizacji. Zamiast tego wpisz lokalizacj.","locationSendingFailed":"Nie mona wysa lokalizacji","locationServicesDenied":"Witryna nie ma dostpu do Twojej lokalizacji. Zamiast tego zezwl na dostp w ustawieniach lub wpisz lokalizacj.","mapPermissionErrorDescription":"Nie mona okreli Twojej pozycji. Moesz kontynuowa korzystanie z funkcji wybierania mapy i wyszukiwania","messageError":"Podczas wysyania wiadomoci wystpi bd. Sprbuj ponownie.","messageIndicatorTitlePlural":"({count}) Nowe wiadomoci","messageIndicatorTitleSingular":"({count}) Nowa wiadomo","messageRelativeTimeDay":"{value} dni temu","messageRelativeTimeHour":"{value} godz. temu","messageRelativeTimeJustNow":"Teraz","messageRelativeTimeMinute":"{value} min temu","messageSending":"Wysyanie...","micPermissionErrorDescription":"Sprawd pozwolenia na uywanie mikrofonu","muteNotifications":"Wycisz powiadomienia","permissionError":"Bd pozwolenia","prechatCaptureConfirmationText":"Dzikujemy! W czym moemy pomc?","prechatCaptureEmailLabel":"E-mail","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Witamy \\nPrzed rozpoczciem chcielibymy dowiedzie si wicej o Tobie:","prechatCaptureNameLabel":"Twoje imi i nazwisko","prechatCaptureNamePlaceholder":"Wpisz imi i nazwisko...","printTranscript":"Wydrukuj transkrypt","recordingAudio":"Nagrywanie","search":"Szukaj","secureFormRequest":"danie bezpiecznego formularza","seen":"Wywietlono","sendButtonText":"Wylij","sent":"Wysane","settingsHeaderText":"Ustawienia","shareLocation":"Udostpnij lokalizacj","startConversationWith":"Rozpocznij rozmow z","suggestedReplies":"Sugerowane odpowiedzi","supportRequest":"Proba o pomoc","tapToRetry":"Nie dostarczono wiadomoci. Dotknij, aby sprbowa ponownie.","tapToRetryForm":"Nie przesano formularza. Dotknij dowolnego miejsca na formularzu, aby sprbowa ponownie.","transcriptConversationWith":"Utwrz transkrypt rozmowy z","unmuteNotifications":"Wycz wyciszenie powiadomie","unsupportedActionType":"Nieobsugiwany typ dziaania.","unsupportedMessageType":"Nieobsugiwany typ wiadomoci.","uploadDocument":"Przelij dokument","uploadingFile":"Przesyanie...","uploadInvalidError":"Nieprawidowy plik.","uploadPhoto":"Przelij zdjcie","uploadVirusError":"W pliku wykryto wirusa i odrzucono go","youWrote":"Napisae"}'),Ht=JSON.parse('{"actionPostbackError":"Ocorreu um erro ao processar sua ao. Tente novamente.","allow":"Permitir","cardCarousel":"Carrossel de carto","clickToRetry":"A mensagem no foi entregue. Clique para tentar novamente.","clickToRetryForm":"Formulrio no enviado. Clique em qualquer lugar do formulrio para tentar novamente.","couldNotConnect":"No foi possvel conectar. Voc pode {retry}.","couldNotConnectInner":"tentar conectar novamente agora","couldNotConnectWithRetry":"No foi possvel conectar. Vamos continuar tentando, ou voc pode {retry}.","couldNotConnectWithRetryInner":"tentar agora","delivered":"Entregue","deny":"Negar","documentUploaded":"Documento carregado","fetchHistory":"Carregar mais","fetchingHistory":"Recuperando histrico...","fileTooLargeError":"Limite mximo de tamanho de arquivo excedido ({size})","fileTypeError":"Tipo de arquivo no suportado.","formErrorInvalidEmail":"O e-mail  invlido","formErrorNoLongerThan":"No deve conter mais que ({characters}) caracteres","formErrorNoShorterThan":"Deve conter no mnimo ({characters}) caracteres","formErrorUnknown":"No parece correto","formFieldSelectPlaceholderFallback":"Escolha um...","formRequested":"Formulrio solicitado","formResponseSent":"Resposta de formulrio enviada","headerText":"Como podemos ajudar?","imageClickToReload":"Clique para recarregar a imagem.","imageClickToView":"Clique para exibir a imagem {size}.","imagePreviewNotAvailable":"Visualizao no disponvel.","inputPlaceholder":"Digite uma mensagem","inputPlaceholderBlocked":"Preencha o formulrio acima...","introductionText":"Estamos aqui para conversar, pergunte-nos qualquer coisa!","invalidFileError":"Apenas imagens so permitidas. Escolha um arquivo com uma extenso compatvel (jpg, jpeg, png, gif ou bmp).","linkError":"Ocorreu um erro ao tentar gerar um link para este canal. Tente novamente.","locationNotSupported":"Seu navegador no  compatvel com os servios de localizao, ou esses servios foram desativados. Digite a sua localizao.","locationSecurityRestriction":"Este site no consegue acessar sua localizao. Digite a sua localizao.","locationSendingFailed":"No foi possvel enviar a localizao","locationServicesDenied":"Este site no consegue acessar sua localizao. Permita acesso a essas informaes em suas configuraes ou digite sua localizao.","mapPermissionErrorDescription":"No conseguimos determinar a sua posio. Voc pode continuar a usar o selecionador de mapas e a funo de pesquisa","messageError":"Ocorreu um erro ao enviar a mensagem. Tente novamente.","messageIndicatorTitlePlural":"({count}) Novas mensagens","messageIndicatorTitleSingular":"({count}) Nova mensagem","messageRelativeTimeDay":"{value}d atrs","messageRelativeTimeHour":"{value}h atrs","messageRelativeTimeJustNow":"Agora mesmo","messageRelativeTimeMinute":"{value}m atrs","messageSending":"Enviando...","micPermissionErrorDescription":"Verifique as permisses para usar o microfone","muteNotifications":"Silenciar notificaes","permissionError":"Erro de permisso","prechatCaptureConfirmationText":"Muito obrigado! Em que podemos ajud-lo?","prechatCaptureEmailLabel":"E-mail","prechatCaptureEmailPlaceholder":"nome@empresa.com","prechatCaptureGreetingText":"Ol, \\nPara comear, gostaramos de saber um pouco mais sobre voc:","prechatCaptureNameLabel":"Seu nome","prechatCaptureNamePlaceholder":"Digite o seu nome...","printTranscript":"Imprimir transcrio","recordingAudio":"Gravando","search":"Pesquisar","secureFormRequest":"Solicitao de formulrio seguro","seen":"Visto","sendButtonText":"Enviar","sent":"Enviado","settingsHeaderText":"Configuraes","shareLocation":"Compartilhar localizao","startConversationWith":"Comece a sua conversao com","suggestedReplies":"Respostas sugeridas","supportRequest":"Solicitao de suporte","tapToRetry":"A mensagem no foi entregue. Toque para tentar novamente.","tapToRetryForm":"Formulrio no enviado. Toque em qualquer lugar do formulrio para tentar novamente.","transcriptConversationWith":"Conversao de transcrio com","unmuteNotifications":"Ativar notificaes","unsupportedActionType":"Tipo de ao incompatvel.","unsupportedMessageType":"Tipo de mensagem incompatvel.","uploadDocument":"Upload de documento","uploadingFile":"Carregando...","uploadInvalidError":"Arquivo invlido.","uploadPhoto":"Upload de foto","uploadVirusError":"Um vrus foi detectado no arquivo e o arquivo foi rejeitado","youWrote":"Voc escreveu"}'),Gt=JSON.parse('{"actionPostbackError":"Etkinliiniz sisteme alnrken hata olutu. Ltfen yeniden deneyin.","allow":"zin ver","cardCarousel":"Kart Dngs","clickToRetry":"Mesaj iletilemedi. Tekrar denemek iin tklayn.","clickToRetryForm":"Form gnderilmedi. Yeniden denemek iin formun herhangi bir yerini tklayn.","couldNotConnect":"Balant kurulamad. unu yapabilirsiniz: {retry}.","couldNotConnectInner":"imdi balanmay tekrar dene","couldNotConnectWithRetry":"Balant kurulamad. Tekrar denemeye devam edeceiz ya da sen unu yapabilirsin: {retry}","couldNotConnectWithRetryInner":"imdi dene","delivered":"Teslim edildi","deny":"Reddet","documentUploaded":"Belge Karya Yklendi","fetchHistory":"Daha fazla ykle","fetchingHistory":"Gemi alnyor ...","fileTooLargeError":"Maksimum dosya boyutu snr ald ({size})","fileTypeError":"Desteklenmeyen dosya tr.","formErrorInvalidEmail":"E-posta geersiz","formErrorNoLongerThan":"ifre, ({characters}) karakterden daha uzun olmamaldr.","formErrorNoShorterThan":"ifre en az ({characters}) karakter iermelidir.","formErrorUnknown":"Bu pek doru grnmyor","formFieldSelectPlaceholderFallback":"Birini se...","formRequested":"Form Talep Edildi","formResponseSent":"Form Yant Gnderildi","headerText":"Nasl yardmc olabiliriz?","imageClickToReload":"Grnty yeniden yklemek iin tklayn. ","imageClickToView":"{size} resmini grntlemek iin tklayn.","imagePreviewNotAvailable":"nizleme kullanlamyor.","inputPlaceholder":"Mesaj yaz...","inputPlaceholderBlocked":"Yukardaki formu doldurun ...","introductionText":"Konumak iin buradayz, bu yzden bize her eyi sorabilirsin!","invalidFileError":"Yalnzca grntler desteklenir. Desteklenen bir uzantya sahip bir dosya sein (jpg, jpeg, png, gif veya bmp).","linkError":"Bu kanal iin bir balant oluturmaya alrken bir hata olutu. Ltfen yeniden deneyin.","locationNotSupported":"Taraycnz konum hizmetlerini desteklemiyor veya devre d braklm. Ltfen bunun yerine konumunuzu yazn.","locationSecurityRestriction":"Bu web sitesi konumunuza eriemiyor. Ltfen bunun yerine konumunuzu yazn.","locationSendingFailed":"Konum gnderilemiyor","locationServicesDenied":"Bu web sitesi konumunuza eriemiyor. Ayarlarnza eriime izin verin veya bunun yerine konumunuzu yazn.","mapPermissionErrorDescription":"Konumunuzu belirleyemedik. Harita seici ve arama ilevini kullanmaya devam edebilirsiniz","messageError":"Mesajnz gnderilirken bir hata olutu. Ltfen yeniden deneyin.","messageIndicatorTitlePlural":"({count}) Yeni Mesaj","messageIndicatorTitleSingular":"({count}) Yeni Mesaj","messageRelativeTimeDay":"{value} gn nce","messageRelativeTimeHour":"{value} saat nce","messageRelativeTimeJustNow":"u anda","messageRelativeTimeMinute":"{value} ay nce","messageSending":"Gnderiliyor...","micPermissionErrorDescription":"Ltfen mikrofonu kullanma izinlerini kontrol edin","muteNotifications":"Bildirimleri Sessize Al","permissionError":"zin Hatas","prechatCaptureConfirmationText":"Bunun iin teekkrler! Size nasl yardmc olabiliriz?","prechatCaptureEmailLabel":"E-posta","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"Merhaba  \\\\ nBalang olarak, sizinle ilgili biraz daha fazla bilgi edinmek istiyoruz:","prechatCaptureNameLabel":"Adnz","prechatCaptureNamePlaceholder":"Adnz yazn...","printTranscript":"Dkm Yazdr","recordingAudio":"Kaydediliyor","search":"Arama","secureFormRequest":"Gvenli Form Talebi","seen":"Grld","sendButtonText":"Gnder","sent":"Gnderilen","settingsHeaderText":"Ayarlar","shareLocation":"Konumu payla","startConversationWith":"Grmenize balang","suggestedReplies":"nerilen Yantlar","supportRequest":"Destek Talebi","tapToRetry":"Mesaj iletilemedi. Yeniden denemek iin dokunun.","tapToRetryForm":"Form gnderilmedi. Yeniden denemek iin formun herhangi bir yerini dokunun.","transcriptConversationWith":"Dkm Grmesi Yaplan","unmuteNotifications":"Bildirimleri Sessizden kar","unsupportedActionType":"Desteklenmeyen etkinlik tr.","unsupportedMessageType":"Desteklenmeyen mesaj tr.","uploadDocument":"Belgeyi ykle","uploadingFile":"Ykleniyor...","uploadInvalidError":"Geersiz dosya.","uploadPhoto":"Fotoraf ykle","uploadVirusError":"Dosyanzda bir virs tespit edildi ve reddedildi","youWrote":"Yazdnz"}'),Vt=JSON.parse('{"actionPostbackError":"","allow":"","clickToRetry":"","clickToRetryForm":"","couldNotConnect":"{retry}","couldNotConnectInner":"","couldNotConnectWithRetry":"{retry}","couldNotConnectWithRetryInner":"","delivered":"","deny":"","documentUploaded":"","fetchHistory":"","fetchingHistory":"...","fileTooLargeError":" ({size})","fileTypeError":"","formErrorInvalidEmail":"","formErrorNoLongerThan":" ({characters}) ","formErrorNoShorterThan":" ({characters}) ","formErrorUnknown":"","formFieldSelectPlaceholderFallback":"...","formRequested":"","formResponseSent":"","headerText":"","imageClickToReload":"","imageClickToView":" {size} ","imagePreviewNotAvailable":"","inputPlaceholder":"...","inputPlaceholderBlocked":"...","introductionText":"","invalidFileError":"jpgjpegpnggif  bmp","linkError":"","locationNotSupported":"","locationSecurityRestriction":"","locationSendingFailed":"","locationServicesDenied":"","mapPermissionErrorDescription":"","messageError":"","messageIndicatorTitlePlural":"({count}) ","messageIndicatorTitleSingular":"({count}) ","messageRelativeTimeDay":"{value}","messageRelativeTimeHour":"{value}","messageRelativeTimeJustNow":"","messageRelativeTimeMinute":"{value}","messageSending":"...","micPermissionErrorDescription":"","muteNotifications":"","permissionError":"","prechatCaptureConfirmationText":"","prechatCaptureEmailLabel":"","prechatCaptureEmailPlaceholder":"@company.com","prechatCaptureGreetingText":"??\\n","prechatCaptureNameLabel":"","prechatCaptureNamePlaceholder":"...","printTranscript":"","recordingAudio":"","search":"","seen":"","sendButtonText":"","sent":"","settingsHeaderText":"","shareLocation":"","startConversationWith":"","supportRequest":"","tapToRetry":"","tapToRetryForm":"","transcriptConversationWith":"","unmuteNotifications":"","unsupportedActionType":"","unsupportedMessageType":"","uploadDocument":"","uploadingFile":"...","uploadInvalidError":"","uploadPhoto":"","uploadVirusError":"","youWrote":""}');var Kt={ar:Nt,de:Pt,en:Ot,es:Rt,fr:jt,hi:xt,it:_t,ja:Bt,ko:Lt,"nl-BE":Ut,nl:zt,pl:Wt,pt:Ht,tr:Gt,"zh-CN":JSON.parse('{"actionPostbackError":"","allow":"","clickToRetry":"","clickToRetryForm":"","couldNotConnect":"{retry}","couldNotConnectInner":"","couldNotConnectWithRetry":"{retry}","couldNotConnectWithRetryInner":"","delivered":"","deny":"","documentUploaded":"","fetchHistory":"","fetchingHistory":"...","fileTooLargeError":" ({size})","fileTypeError":"","formErrorInvalidEmail":"","formErrorNoLongerThan":" ({characters}) ","formErrorNoShorterThan":" ({characters}) ","formErrorUnknown":"","formFieldSelectPlaceholderFallback":"...","formRequested":"","formResponseSent":"","headerText":"","imageClickToReload":"","imageClickToView":" {size} ","imagePreviewNotAvailable":"","inputPlaceholder":"...","inputPlaceholderBlocked":"...","introductionText":"","invalidFileError":"jpgjpegpnggif  bmp","linkError":"","locationNotSupported":"","locationSecurityRestriction":"","locationSendingFailed":"","locationServicesDenied":"","mapPermissionErrorDescription":"","messageError":"","messageIndicatorTitlePlural":"({count}) ","messageIndicatorTitleSingular":"({count}) ","messageRelativeTimeDay":"{value} ","messageRelativeTimeHour":"{value} ","messageRelativeTimeJustNow":"","messageRelativeTimeMinute":"{value} ","messageSending":"...","micPermissionErrorDescription":"","muteNotifications":"","permissionError":"","prechatCaptureConfirmationText":"","prechatCaptureEmailLabel":"","prechatCaptureEmailPlaceholder":"name@company.com","prechatCaptureGreetingText":"\\n:","prechatCaptureNameLabel":"","prechatCaptureNamePlaceholder":"...","printTranscript":"","recordingAudio":"","search":"","seen":"","sendButtonText":"","sent":"","settingsHeaderText":"","shareLocation":"","startConversationWith":"","supportRequest":"","tapToRetry":"","tapToRetryForm":"","transcriptConversationWith":"","unmuteNotifications":"","unsupportedActionType":"","unsupportedMessageType":"","uploadDocument":"","uploadingFile":"...","uploadInvalidError":"","uploadPhoto":"","uploadVirusError":"","youWrote":""}'),"zh-HK":Vt,"zh-TW":Vt};function qt(e,t){return e&&e.interfaceLanguage&&"default"!==e.interfaceLanguage?e.interfaceLanguage:t}function Yt(e){e||(e="en");var t=e.substring(0,2),r=Kt[e]?Kt[e]:Kt[t];return r||console.log("No custom messages for language ".concat(e,", defaulting to English.")),Object.assign(Kt.en,r)||Kt.en}function Jt(e,t){if(e&&t&&t.length){var r=e.toLowerCase(),n=t.findIndex((function(e){return r===e.languageCode.toLowerCase()}));if(n>=0)return n;var o=r.substr(0,2),i=t.findIndex((function(e){return o===e.languageCode.toLowerCase()}));if(i>=0)return i;var a=t.findIndex((function(e){return e.languageCode.toLowerCase().startsWith(o)}));if(a>=0)return a}return-1}var Qt=function(){function e(r){t(this,e),this.browserPageAdapter=r}return n(e,[{key:"setClassRegistry",value:function(e){this.classRegistry=e}},{key:"getMessage",value:function(e){return Yt(qt(this.classRegistry.getBrandStyleHandler().getBrandStyleSmoochConfig(),this.browserPageAdapter.getLanguage()))[e]||Yt("en")[e]}},{key:"getInterfaceLanguage",value:function(){return qt(this.classRegistry.getBrandStyleHandler().getBrandStyleSmoochConfig(),this.browserPageAdapter.getLanguage())}}]),e}(),$t=function(){function e(r,n,o){t(this,e),this.id=r.id,this.name=r.name,this.enabled=r.enabled,this.prechatForm=r.prechatForm,this.brandStyleId=r.brandStyleId,this.chatWindowOpen=r.chatWindowOpen,this.hideFirstChatMessage=r.hideFirstChatMessage,this.includeFirstMessageChatInConvo=void 0===r.includeFirstMessageChatInConvo||r.includeFirstMessageChatInConvo,this.displayConditions=r.displayConditions,this.ipWhitelist=new Ft(this.displayConditions,we),this.ipBlacklist=new Ft(this.displayConditions,Ee),this.throttleDisplayCondition=new Mt(this.displayConditions,this),this.criteria=n,this.actions=o,this.prechatFormVariants=r.prechatFormVariants,this.welcomeScreenSettings=r.welcomeScreenSettings,this.prechatSecureFormId=r.prechatSecureFormId}return n(e,[{key:"evaluate",value:function(e){var t=(new Date).getTime();j(this.getName()),_("evaluation context",e);var r=e.displayConditionEngine,n=this.criteria.evaluate(e);return n&&r&&(this.ipWhitelist.evaluate(e),this.ipBlacklist.evaluate(e),n=r.evaluateRuleDisplayConditions(this)),_("Finished rule evaluation. Elapsed Time is: ",(new Date).getTime()-t," ms"),x(),n}},{key:"isEnabled",value:function(){return this.enabled}},{key:"getName",value:function(){return this.name}},{key:"getId",value:function(){return this.id}},{key:"getCriteria",value:function(){return this.criteria}},{key:"getBrandStyleId",value:function(){return this.brandStyleId}},{key:"isChatWindowOpen",value:function(){return this.chatWindowOpen}},{key:"getActions",value:function(){return this.actions}},{key:"getPrechatForm",value:function(e){var t=function(e,t){if(e&&t){var r=Object.keys(t).map((function(e){return{languageCode:e}})),n=Jt(e,r);if(n>=0)return r[n].languageCode}return""}(e,this.prechatFormVariants);return t?Ve(this.prechatFormVariants[t]):this.prechatForm?Ve(this.prechatForm):null}},{key:"getDisplayConditions",value:function(){return this.displayConditions}},{key:"displayConditionsEnabled",value:function(){return!(!this.displayConditions||!this.displayConditions.enabled)}},{key:"shouldHideFirstChatMessage",value:function(){return this.hideFirstChatMessage}},{key:"shouldIncludeFirstMessageChatInConvo",value:function(){return this.includeFirstMessageChatInConvo}},{key:"getActionsMessage",value:function(e){var t,r;return this.processActionsMessages(e),null!==(t=null===(r=this.message)||void 0===r?void 0:r.text)&&void 0!==t?t:""}},{key:"getPrechatSecureFormId",value:function(e){var t,r;return this.processActionsMessages(e),null!==(t=null===(r=this.message)||void 0===r?void 0:r.prechatFormId)&&void 0!==t?t:this.prechatSecureFormId}},{key:"processActionsMessages",value:function(e){if(!this.lang||e!==this.lang){this.lang=e,this.message={text:""};var t=this.getActions();if(t&&t[0]&&t[0].messages){var r=this.actions[0].messages.reduce((function(t,r){return r.languageId===e?r:r.languageId&&"default"!==r.languageId||t?t:r}),null);this.message=r}}}},{key:"containsCriteria",value:function(e){return this.criteria.containsCriteria(e)}},{key:"hasGEOIpRequirement",value:function(){return this.containsCriteria(ve)||this.hasIPWhitelist()||this.hasIPBlacklist()}},{key:"hasIPWhitelist",value:function(){return this.ipWhitelist&&this.ipWhitelist.isIPListEnabled()}},{key:"hasIPBlacklist",value:function(){return this.ipBlacklist&&this.ipBlacklist.isIPListEnabled()}}]),e}(),Zt=function(){function e(r,n){t(this,e),this.json=r,this.registry=n,this.actionFactory=this.registry.getRuleActionFactory(),this.criteriaFactory=this.registry.getCriteriaFactory(),this.buildRule=this.buildRule.bind(this)}return n(e,[{key:"build",value:function(){return Array.isArray(this.json)?this.json.map(this.buildRule):this.json?[this.buildRule(this.json)]:[]}},{key:"buildRule",value:function(e){var t=this.criteriaFactory(e.criteria),r=this.actionFactory(e.actions||[]);return new $t(e,t,r)}}]),e}();const Xt={name:"applozic-config",keys:{LOGIN_RESULT:"loginResult"}};var er,tr="clientId",rr="sessionPrefix",nr=".",or="activatingRuleId",ir="authorSentMessage",ar=[tr,"appUserId","sessionToken"],sr="KHOROS_CONFIG",ur="ANON",cr="userSource",lr="mahUserId",pr="mahToken",dr="mahUserDetails",hr="mahUserMetadataHash",fr="sessionStorage",yr="companyKey",gr="appId",mr=(e(er={},oe,!0),e(er,yr,!0),e(er,gr,!0),e(er,ge,!0),e(er,ce,!0),e(er,or,!0),e(er,"jwt",!0),e(er,"userId",!0),e(er,H,!0),e(er,K,!0),e(er,lr,!0),e(er,pr,!0),e(er,cr,!0),e(er,"welcomeEventTimestamp",!0),e(er,de,!0),e(er,ir,!0),er),vr=Xt.keys.LOGIN_RESULT,br=function(){function e(r,n,o,i,a){var s,u,c;t(this,e),this.storageAdapter=r,this.companyKey=i,this.appId=a;var l=null!==(s=null==n||null===(u=n.generalConfiguration)||void 0===u?void 0:u.clientSessionCookieTimeout)&&void 0!==s?s:0;this.sessionCookieDuration=l&&l.duration?l.duration:-1,this.resetConversationFunction=o,this.cookieExpirationTimeout=null,this.onCookieExpiration.bind(this),this.jsonRules=null!==(c=null==n?void 0:n.rules)&&void 0!==c?c:[]}return n(e,[{key:"initSession",value:function(e){var t=this.storageAdapter.get(or,null),r=new Zt(this.jsonRules,e).build(),n=t?r.find((function(e){return e.getId()===t})):null;if(t&&!n)return console.warn("Unable to identify the activating rule. Clearing session"),void this.resetSession();this.storageAdapter.getUseCookies()&&(this.isResetRequired()?this.resetSession():this.restoreDataFromCookies())}},{key:"persistInstanceProperties",value:function(){this.set(yr,this.companyKey),this.set(gr,this.appId)}},{key:"isResetRequired",value:function(){var e=this.storageAdapter.getCookie(yr);if(e&&this.companyKey!==e)return console.warn("Previously used a widget for company ".concat(e,", now loading company ").concat(this.companyKey,". Clearing cookies.")),!0;var t=this.storageAdapter.getCookie(gr);return void 0!==t&&this.appId!==t&&(console.warn("Previously used a widget for appId ".concat(t,", now loading appId ").concat(this.appId,". Clearing cookies.")),!0)}},{key:"isSessionCookieExpirationActive",value:function(){return this.sessionCookieDuration>0}},{key:"persistKeyInCookie",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.storageAdapter.getUseCookies()&&(mr[e]||e===De)){if(this.isSessionCookieExpirationActive())if(this.storageAdapter.getCookie(e)===t)return;var n=this.getCookieExpirationDate();this.storageAdapter.setCookie(e,t,r,n)}}},{key:"set",value:function(e,t){this.persistKeyInCookie(e,t),this.storageAdapter.setRawKey("".concat(Dr).concat(e),t)}},{key:"get",value:function(e,t){return this.storageAdapter.getRawKey("".concat(Dr).concat(e),t)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.storageAdapter.remove(e),t&&this.storageAdapter.deleteCookie(e)}},{key:"isSessionCookieTimeoutActive",value:function(){return this.sessionCookieDuration>0}},{key:"getSmoochKeyFromStorage",value:function(e){var t=this.getSmoochSessionPrefix();try{return this.storageAdapter.getRawKey(t+nr+e)}catch(e){console.error(e,"unable to access storage")}return null}},{key:"setSmoochKeyForStorage",value:function(e,t){var r=this.getSmoochSessionPrefix();try{this.storageAdapter.setRawKey(r+nr+e,t)}catch(e){console.error(e,"unable to access storage")}}},{key:"getSmoochSessionPrefix",value:function(){var e=this;return this.smoochSessionPrefix?this.smoochSessionPrefix:(this.smoochSessionPrefix=this.storageAdapter.get(rr),this.smoochSessionPrefix||this.storageAdapter.getSessionStorageKeys().find((function(t){return!!t.endsWith(tr)&&(e.smoochSessionPrefix=t.split(nr)[0],!0)})),this.smoochSessionPrefix)}},{key:"smoochCookiesAlreadyPersisted",value:function(){return this.storageAdapter.getCookie(tr)}},{key:"persistSmoochDataInCookies",value:function(){var e=this;if(this.storageAdapter.getUseCookies()&&(!this.isSessionCookieExpirationActive()||!this.smoochCookiesAlreadyPersisted())){var t=this.getCookieExpirationDate();ar.forEach((function(r){var n=e.getSmoochKeyFromStorage(r);n&&e.storageAdapter.setCookie(r,n,!1,t)})),this.storageAdapter.setCookie(rr,this.getSmoochSessionPrefix(),!1,t)}}},{key:"resetSession",value:function(){var e=this;this.storageAdapter.deleteCookie(yr),this.storageAdapter.deleteCookie(gr),this.storageAdapter.getSessionStorageKeys().forEach((function(t){t.startsWith(Dr)&&e.storageAdapter.removeRawKey(t)}));var t=this.getSmoochSessionPrefix();ar.forEach((function(r){e.storageAdapter.removeRawKey(t+nr+r)})),this.resetConversationFunction&&this.resetConversationFunction()}},{key:"onCookieExpiration",value:function(){_("Cookie Session Expiration - Delete Session Storage"),console.warn("Session cookie expired. Clearing session data."),this.resetSession()}},{key:"resetCookieExpirationTimeout",value:function(){null!==this.cookieExpirationTimeout&&window.clearTimeout(this.cookieExpirationTimeout),this.cookieExpirationTimeout=setTimeout(this.onCookieExpiration.bind(this),this.sessionCookieDuration)}},{key:"resetCookies",value:function(){var e=this,t=[K];[rr].concat(ar,N(Object.keys(mr)),[De]).filter((function(r){return!t.includes(r)&&e.storageAdapter.getCookie(r)})).forEach((function(t){return e.storageAdapter.deleteCookie(t)}))}},{key:"restoreDataFromCookies",value:function(){var e=this;if(this.storageAdapter.getUseCookies()){var t=this.storageAdapter.getCookie(rr);t&&(this.smoochSessionPrefix=t),ar.forEach((function(t){var r=e.storageAdapter.getCookie(t);r&&e.setSmoochKeyForStorage(t,r)})),Object.keys(mr).forEach((function(t){e.restoreKeyFromCookies(t)})),this.restoreEngagedInSessionWithRule()}}},{key:"restoreKeyFromCookies",value:function(e){var t=this.storageAdapter.getCookie(e);t&&this.storageAdapter.set(e,t)}},{key:"restoreEngagedInSessionWithRule",value:function(){this.storageAdapter.get(or)&&this.restoreKeyFromCookies(De)}},{key:"getCookieExpirationDate",value:function(){if(this.sessionCookieDuration>0){var e=new Date;return new Date(e.getTime()+this.sessionCookieDuration).toUTCString()}return null}},{key:"updateCookieExpiration",value:function(){var e=this,t=this.storageAdapter.getDocumentCookie().split(";"),r=this.getCookieExpirationDate();r&&(t.forEach((function(t){var n=t.split("=");if(!(n.length<2)){var o=n[0].trim();if(o.startsWith(wr)){var i=o.replace(wr,""),a=n[1].trim();e.storageAdapter.setCookie(i,a,!1,r)}}})),this.resetCookieExpirationTimeout())}},{key:"getLoginResult",value:function(){var e=this.get(vr);return e?JSON.parse(e):null}}]),e}(),Dr="BRAND_MESSENGER:",wr="BRAND_MESSENGER_",Er="userId",Cr={browserStorage:"sessionStorage",useCookies:!0},Sr=function(){function e(r){t(this,e),this.sessionStorage=window.sessionStorage,this.localStorage=window.localStorage,this.browserStorage=null!=(null==r?void 0:r.browserStorage)?r.browserStorage:Cr.browserStorage,this.useCookies=null!=(null==r?void 0:r.useCookies)?r.useCookies:Cr.useCookies}return n(e,[{key:"getUseCookies",value:function(){return this.useCookies}},{key:"set",value:function(e,t){this.setRawKey("".concat(Dr).concat(e),t)}},{key:"setRawKey",value:function(e,t){try{return this.browserStorage===fr?this.sessionStorage.setItem(e,t):this.localStorage.setItem(e,t)}catch(e){return console.error(e,"Unable to access ".concat(this.browserStorage)),null}}},{key:"get",value:function(e,t){return this.getRawKey("".concat(Dr).concat(e),t)}},{key:"getRawKey",value:function(e,t){try{var r=this.browserStorage===fr?this.sessionStorage.getItem(e,t):this.localStorage.getItem(e,t);if(null!=r)return r}catch(e){console.error(e,"Unable to access ".concat(this.browserStorage))}return t}},{key:"remove",value:function(e){this.removeRawKey("".concat(Dr).concat(e))}},{key:"removeRawKey",value:function(e){try{this.browserStorage===fr?this.sessionStorage.removeItem(e):this.localStorage.removeItem(e)}catch(e){console.error(e,"Unable to access ".concat(this.browserStorage))}}},{key:"resetStorage",value:function(){var e=this,t=[f,p,g,y,d,T];try{Object.keys(this.localStorage).filter((function(e){return e.startsWith(Dr)&&!t.includes(e.split(Dr)[1])})).forEach((function(t){return e.localStorage.removeItem(t)})),Object.keys(this.sessionStorage).filter((function(e){return e.startsWith(Dr)&&!t.includes(e.split(Dr)[1])})).forEach((function(t){return e.sessionStorage.removeItem(t)}))}catch(e){console.error(e,"Unable to reset local and session storage")}}},{key:"deleteCookie",value:function(e){this.setCookie(e,void 0,!0,void 0)}},{key:"setCookie",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(this.useCookies||r){e=wr+e;var o=window.location.hostname,i={path:"/",domain:o.substring(o.lastIndexOf(".",o.lastIndexOf(".")-1)+1)};window.KHOROS_LOCAL_DEVELOPMENT||(i.secure=null,i.SameSite="None"),r?i.expires="Thu, 01 Jan 1970 00:00:00 UTC":n&&(i.expires=n);var a=encodeURIComponent(e)+"="+encodeURIComponent(t);Object.keys(i).forEach((function(e){a+="; "+e,i[e]&&(a+="="+i[e])})),document.cookie=a}}},{key:"getCookie",value:function(e){e=wr+e;var t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));try{return t?decodeURIComponent(t[1]):void 0}catch(e){return null}}},{key:"getDocumentCookie",value:function(){return document.cookie}},{key:"getSessionStorageKeys",value:function(){return Object.keys(this.sessionStorage)}}]),e}(),kr=function(){function e(){this.objects={}}return e.prototype.setBrowserPageAdapter=function(e){return this.objects.browserPageAdapter=e,this},e.prototype.getBrowserPageAdapter=function(){return this.objects.browserPageAdapter},e.prototype.setStorageAdapter=function(e){return this.objects.storageAdapter=e,this},e.prototype.getStorageAdapter=function(){return this.objects.storageAdapter},e.prototype.setCollectors=function(e){return this.objects.collectors=e,this},e.prototype.getCollectors=function(){return this.objects.collectors},e.prototype.setRulesFactory=function(e){return this.objects.rulesFactory=e,this},e.prototype.getRulesFactory=function(){return this.objects.rulesFactory},e.prototype.setRuleActionFactory=function(e){return this.objects.ruleActionFactory=e,this},e.prototype.getRuleActionFactory=function(){return this.objects.ruleActionFactory},e.prototype.setCriteriaFactory=function(e){return this.objects.criteriaFactory=e,this},e.prototype.getCriteriaFactory=function(){return this.objects.criteriaFactory},e.prototype.setClientSuppliedContext=function(e){return this.objects.clientSuppliedContext=e,this},e.prototype.getClientSuppliedContext=function(){return this.objects.clientSuppliedContext},e.prototype.setClientSuppliedCriteria=function(e){return this.objects.clientSuppliedCriteria=e,this},e.prototype.getClientSuppliedCriteria=function(){return this.objects.clientSuppliedCriteria},e.prototype.setClientConfig=function(e){return this.objects.clientConfig=e,this},e.prototype.getClientConfig=function(){return this.objects.clientConfig},e.prototype.setVariableFetcher=function(e){return this.objects.variableFetcher=e,this},e.prototype.getVariableFetcher=function(){return this.objects.variableFetcher},e.prototype.setBrandStyleFetcher=function(e){return this.objects.brandStyleFetcher=e,this},e.prototype.getBrandStyleFetcher=function(){return this.objects.brandStyleFetcher},e.prototype.setWidgetStateEngine=function(e){return this.objects.widgetStateEngine=e,this},e.prototype.getWidgetStateEngine=function(){return this.objects.widgetStateEngine},e.prototype.setCustomConditions=function(e){return this.objects.customConditions=e,this},e.prototype.getCustomConditions=function(){return this.objects.customConditions},e.prototype.setUrlFetcher=function(e){return this.objects.urlFetcher=e,this},e.prototype.getUrlFetcher=function(){return this.objects.urlFetcher},e.prototype.setLogger=function(e){return this.objects.logger=e,this},e.prototype.getLogger=function(){return this.objects.logger},e.prototype.setGeoIPFetcher=function(e){return this.objects.geoIPFetcher=e,this},e.prototype.getGeoIPFetcher=function(){return this.objects.geoIPFetcher},e.prototype.setIPWhitelist=function(e){return this.objects.ipWhitelist=e,this},e.prototype.getIPWhitelist=function(){return this.objects.ipWhitelist},e.prototype.setIPBlacklist=function(e){return this.objects.ipBlacklist=e,this},e.prototype.getIPBlacklist=function(){return this.objects.ipBlacklist},e.prototype.setInitParameters=function(e){return this.objects.initParameters=e,this},e.prototype.getInitParameters=function(){return this.objects.initParameters},e.prototype.setAuthenticationProvider=function(e){return this.objects.authenticationProvider=e,this},e.prototype.getAuthenticationProvider=function(){return this.objects.authenticationProvider},e.prototype.setIframeStyleHandler=function(e){return this.objects.iframeStyleHandler=e,this},e.prototype.getIframeStyleHandler=function(){return this.objects.iframeStyleHandler},e.prototype.setTriggeredRuleProvider=function(e){return this.objects.triggeredRuleProvider=e,this},e.prototype.getTriggeredRuleProvider=function(){return this.objects.triggeredRuleProvider},e.prototype.setSessionDataManager=function(e){return this.objects.sessionDataManager=e,this},e.prototype.getSessionDataManager=function(){return this.objects.sessionDataManager},e.prototype.setHeaderBarFormatter=function(e){return this.objects.headerBarFormatter=e,this},e.prototype.getHeaderBarFormatter=function(){return this.objects.headerBarFormatter},e.prototype.setSoundPlayer=function(e){return this.objects.soundPlayer=e,this},e.prototype.getSoundPlayer=function(){return this.objects.soundPlayer},e.prototype.setPageVisitsTracker=function(e){return this.objects.pageVisitsTracker=e,this},e.prototype.getPageVisitsTracker=function(){return this.objects.pageVisitsTracker},e.prototype.setI18n=function(e){return e.setClassRegistry(this),this.objects.i18n=e,this},e.prototype.getI18n=function(){return this.objects.i18n},e.prototype.setBrandStyleHandler=function(e){return e.setClassRegistry(this),this.objects.brandStyleHandler=e,this},e.prototype.getBrandStyleHandler=function(){return this.objects.brandStyleHandler},e.prototype.setAuthHandlerService=function(e){return this.objects.authHandlerService=e,this},e.prototype.getAuthHandlerService=function(){return this.objects.authHandlerService},e.prototype.setSDKProxy=function(e){return this.objects.sdkProxy=e,this},e.prototype.getSDKProxy=function(){return this.objects.sdkProxy},e.prototype.setMetadataProducer=function(e){return this.objects.metadataProducer=e,this},e.prototype.getMetadataProducer=function(){return this.objects.metadataProducer},e}();const Ar=kr;var Tr=function(){function e(r){t(this,e),this.browserPageAdapter=r.getBrowserPageAdapter(),this.storageAdapter=r.getStorageAdapter(),this.sessionDataManager=r.getSessionDataManager(),this.clientConfig=r.getClientConfig(),this.customConditions=r.getCustomConditions(),this.logger=r.getLogger()||new z(null,this.browserPageAdapter),this.init()}return n(e,[{key:"init",value:function(){}},{key:"collect",value:function(){throw new Error("Method not implemented")}}]),e}();function Ir(e){var t=Fr();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fr=function(){return!!e})()}var Mr=function(r){Qe(i,r);var o=Ir(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){var t,r=this.browserPageAdapter;return e(t={},"url",r.getURL()),e(t,a,r.getURLHost()),e(t,s,r.getURLPath()),e(t,u,r.getURLParameters()),t}}]),i}(Tr);function Nr(e){var t=Pr();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Pr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pr=function(){return!!e})()}var Or=function(r){Qe(i,r);var o=Nr(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){return e({},"referrer",this.browserPageAdapter.getReferrer())}}]),i}(Tr);function Rr(e){var t=jr();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jr=function(){return!!e})()}var xr=function(r){Qe(i,r);var o=Rr(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"init",value:function(){var e=this.storageAdapter,t=this.sessionDataManager;this.pageStartTime=(new Date).getTime(),this.pageVisits=this.tryParseInt(e.get(p)),this.siteStartTime=e.get(c),this.siteVisits=this.tryParseInt(e.get(d)),this.currentSiteVisit=e.get(h),this.lastSiteVisit=e.get(f),this.pageVisits++,t.set(p,this.pageVisits),this.siteStartTime||(this.siteStartTime=this.pageStartTime,this.lastSiteVisit=this.currentSiteVisit,this.currentSiteVisit=this.pageStartTime,this.siteVisits++,t.set(c,this.pageStartTime),e.set(f,this.lastSiteVisit),e.set(h,this.currentSiteVisit),e.set(d,this.siteVisits))}},{key:"tryParseInt",value:function(e){var t=parseInt(e);return NaN===t||Number.isNaN(t)?0:t}},{key:"collect",value:function(){var t;return e(t={},f,this.lastSiteVisit),e(t,d,this.siteVisits),e(t,p,this.pageVisits),e(t,c,this.siteStartTime),e(t,l,this.pageStartTime),t}}]),i}(Tr);function _r(e){var t=Br();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Br(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Br=function(){return!!e})()}var Lr=function(r){Qe(i,r);var o=_r(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"init",value:function(){var e=this.browserPageAdapter.getURL(),t=this.getRecentPagesList()||[];t.includes(e)||(t=this.addItemToListWithCap(t,e)),this.setRecentPages(t)}},{key:"addItemToListWithCap",value:function(e,t){return e.push(t),e.length>10&&e.shift(),e}},{key:"getRecentPagesList",value:function(){var e=this.storageAdapter.get(y);return e?JSON.parse(e):[]}},{key:"setRecentPages",value:function(e){var t=JSON.stringify(e);this.sessionDataManager.set(y,t),this.recentPagesList=e}},{key:"collect",value:function(){var t,r=this.recentPagesList,n=r&&r.length>1?r[r.length-2]:"";return e(t={},y,r),e(t,g,n),t}}]),i}(Tr),Ur=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zr=[["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["edge",/Edge\/([0-9\._]+)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["safari",/Version\/([0-9\._]+).*Safari/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/]],Wr=["Windows Phone","Android","CentOS",{name:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],Hr={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},Gr=new RegExp(["(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|","compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|","midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)","\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|","wap|windows ce|xda|xiino"].join(""),"i"),Vr=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|","ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|","avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|","cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|","ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|","g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|","hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|","i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|","kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])","|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|","mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|","n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|","op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|","po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|","raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|","se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|k\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|","so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|","tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|","veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|","w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-"].join(""),"i"),Kr=function(){function e(e,t,r){this.navigator=t,this.process=r,this.userAgent=e||(this.navigator?t.userAgent||t.vendor:"")}return e.prototype.detect=function(){if(this.process&&!this.userAgent){var e=this.process.version.slice(1).split(".").slice(0,3),t=Array.prototype.slice.call(e,1).join("")||"0";return{name:"node",version:e.join("."),versionNumber:parseFloat(e[0]+"."+t),mobile:!1,os:this.process.platform}}return this.userAgent||this.handleMissingError(),Ur({},this.checkBrowser(),this.checkMobile(),this.checkOs())},e.prototype.checkBrowser=function(){var e=this;return zr.filter((function(t){return t[1].test(e.userAgent)})).map((function(t){var r=t[1].exec(e.userAgent),n=r&&r[1].split(/[._]/).slice(0,3),o=Array.prototype.slice.call(n,1).join("")||"0";return n&&n.length<3&&Array.prototype.push.apply(n,1===n.length?[0,0]:[0]),{name:String(t[0]),version:n.join("."),versionNumber:Number(n[0]+"."+o)}})).shift()},e.prototype.checkMobile=function(){var e=this.userAgent.substr(0,4);return{mobile:Gr.test(this.userAgent)||Vr.test(e)}},e.prototype.checkOs=function(){var e=this;return Wr.map((function(t){var r=t.name||t,n=e.getOsPattern(t);return{name:r,pattern:n,value:RegExp("\\b"+n.replace(/([ -])(?!$)/g,"$1?")+"(?:x?[\\d._]+|[ \\w.]*)","i").exec(e.userAgent)}})).filter((function(e){return e.value})).map((function(e){var t,r=e.value[0]||"";return e.pattern&&e.name&&/^Win/i.test(r)&&!/^Windows Phone /i.test(r)&&(t=Hr[r.replace(/[^\d.]/g,"")])&&(r="Windows "+t),e.pattern&&e.name&&(r=r.replace(RegExp(e.pattern,"i"),e.name)),r=r.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0].trim(),{os:r=/^(?:webOS|i(?:OS|P))/.test(r)?r:r.charAt(0).toUpperCase()+r.slice(1)}})).shift()},e.prototype.getOsPattern=function(e){var t=e;return("string"==typeof e?e:void 0)||t.pattern||t.name},e.prototype.handleMissingError=function(){throw new Error("Please give user-agent.\n> browser(navigator.userAgent or res.headers['user-agent']).")},e}();function qr(e,t){return e(t={exports:{}},t.exports),t.exports}var Yr=qr((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),Jr=qr((function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)})),Qr=(Jr.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),$r=function(e){if(!Qr(e))throw TypeError(e+" is not an object!");return e},Zr=function(e){try{return!!e()}catch(e){return!0}},Xr=!Zr((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),en=Yr.document,tn=Qr(en)&&Qr(en.createElement),rn=!Xr&&!Zr((function(){return 7!=Object.defineProperty((e="div",tn?en.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),nn=Object.defineProperty,on={f:Xr?Object.defineProperty:function(e,t,r){if($r(e),t=function(e,t){if(!Qr(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!Qr(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!Qr(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!Qr(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t,!0),$r(r),rn)try{return nn(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},an=Xr?function(e,t,r){return on.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,r))}:function(e,t,r){return e[t]=r,e},sn={}.hasOwnProperty,un=function(e,t){return sn.call(e,t)},cn=0,ln=Math.random(),pn=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++cn+ln).toString(36))},dn=qr((function(e){var t=pn("src"),r="toString",n=Function[r],o=(""+n).split(r);Jr.inspectSource=function(e){return n.call(e)},(e.exports=function(e,r,n,i){var a="function"==typeof n;a&&(un(n,"name")||an(n,"name",r)),e[r]!==n&&(a&&(un(n,t)||an(n,t,e[r]?""+e[r]:o.join(String(r)))),e===Yr?e[r]=n:i?e[r]?e[r]=n:an(e,r,n):(delete e[r],an(e,r,n)))})(Function.prototype,r,(function(){return"function"==typeof this&&this[t]||n.call(this)}))})),hn=function(e,t,r){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},fn="prototype",yn=function(e,t,r){var n,o,i,a,s=e&yn.F,u=e&yn.G,c=e&yn.S,l=e&yn.P,p=e&yn.B,d=u?Yr:c?Yr[t]||(Yr[t]={}):(Yr[t]||{})[fn],h=u?Jr:Jr[t]||(Jr[t]={}),f=h[fn]||(h[fn]={});for(n in u&&(r=t),r)i=((o=!s&&d&&void 0!==d[n])?d:r)[n],a=p&&o?hn(i,Yr):l&&"function"==typeof i?hn(Function.call,i):i,d&&dn(d,n,i,e&yn.U),h[n]!=i&&an(h,n,a),l&&f[n]!=i&&(f[n]=i)};Yr.core=Jr,yn.F=1,yn.G=2,yn.S=4,yn.P=8,yn.B=16,yn.W=32,yn.U=64,yn.R=128;var gn=yn,mn={}.toString,vn=function(e){return mn.call(e).slice(8,-1)},bn=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==vn(e)?e.split(""):Object(e)},Dn=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},wn=Math.ceil,En=Math.floor,Cn=Math.min,Sn=function(e){return e>0?Cn(function(e){return isNaN(e=+e)?0:(e>0?En:wn)(e)}(e),9007199254740991):0},kn=Array.isArray||function(e){return"Array"==vn(e)},An=qr((function(e){var t="__core-js_shared__",r=Yr[t]||(Yr[t]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:Jr.version,mode:"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})})),Tn=qr((function(e){var t=An("wks"),r=Yr.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:pn)("Symbol."+e))}).store=t}))("species"),In=function(e,t){return new(function(e){var t;return kn(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!kn(t.prototype)||(t=void 0),Qr(t)&&null===(t=t[Tn])&&(t=void 0)),void 0===t?Array:t}(e))(t)},Fn=function(e,t){var r=1==e,n=2==e,o=3==e,i=4==e,a=6==e,s=5==e||a,u=t||In;return function(t,c,l){for(var p,d,h=Object(Dn(t)),f=bn(h),y=hn(c,l,3),g=Sn(f.length),m=0,v=r?u(t,g):n?u(t,0):void 0;g>m;m++)if((s||m in f)&&(d=y(p=f[m],m,h),e))if(r)v[m]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return m;case 2:v.push(p)}else if(i)return!1;return a?-1:o||i?i:v}},Mn=function(e,t){return!!e&&Zr((function(){t?e.call(null,(function(){}),1):e.call(null)}))},Nn=Fn(2);gn(gn.P+gn.F*!Mn([].filter,!0),"Array",{filter:function(e){return Nn(this,e,arguments[1])}});Jr.Array.filter;var Pn=Fn(1);gn(gn.P+gn.F*!Mn([].map,!0),"Array",{map:function(e){return Pn(this,e,arguments[1])}});Jr.Array.map;var On="\t\n\v\f\r \u2028\u2029\ufeff",Rn="["+On+"]",jn=RegExp("^"+Rn+Rn+"*"),xn=RegExp(Rn+Rn+"*$"),_n=function(e,t,r){var n={},o=Zr((function(){return!!On[e]()||""!=""[e]()})),i=n[e]=o?t(Bn):On[e];r&&(n[r]=i),gn(gn.P+gn.F*o,"String",n)},Bn=_n.trim=function(e,t){return e=String(Dn(e)),1&t&&(e=e.replace(jn,"")),2&t&&(e=e.replace(xn,"")),e};_n("trim",(function(e){return function(){return e(this,3)}}));Jr.String.trim;var Ln="undefined"!=typeof window?window.navigator:void 0,Un="undefined"!=typeof process?process:void 0;const zn=function(e){return new Kr(e,Ln,Un).detect()};function Wn(e){var t=Hn();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Hn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hn=function(){return!!e})()}var Gn={windows:"windows",macOS:"os x",iOS:"ios",linux:"linux",android:"android",unknown:"unknown"},Vn=function(r){Qe(i,r);var o=Wn(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){var t,r=this.browserPageAdapter,n=zn(r.getUserAgent());return e(t={},m,n.name),e(t,v,n.versionNumber),e(t,b,this.getOperatingSystem(n.os,n.mobile)),e(t,D,this.getOperatingSystemVersion(n.os)),e(t,w,n.mobile),e(t,"detectedOperatingSystem",n.os),e(t,I,r.getLanguage()),t}},{key:"getOperatingSystem",value:function(e,t){if(!e)return e;var r,n=e.toLowerCase();return Object.values(Gn).forEach((function(e){0===n.indexOf(e)&&(r=e)})),r===Gn.macOS&&t?Gn.iOS:(r||(r=Gn.unknown),r)}},{key:"getOperatingSystemVersion",value:function(e){return e?e.split(" ").slice(-1).pop():e}}]),i}(Tr);function Kn(e){var t=qn();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function qn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qn=function(){return!!e})()}var Yn=function(r){Qe(i,r);var o=Kn(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){var t=this.browserPageAdapter;try{return e({},E,decodeURIComponent(t.getCookieString()))}catch(e){return{}}}}]),i}(Tr);function Jn(e){var t=Qn();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Qn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qn=function(){return!!e})()}var $n=function(r){Qe(i,r);var o=Jn(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){var t=this.storageAdapter.get(me),r=t?JSON.parse(t):null,n=[];return r&&r.openBusinessHoursGroups&&Array.isArray(r.openBusinessHoursGroups)&&(n=r.openBusinessHoursGroups),e({},A,n)}}]),i}(Tr);function Zn(e){var t=Xn();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Xn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xn=function(){return!!e})()}var eo=function(r){Qe(i,r);var o=Zn(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getAuthenticationStatus",value:function(e){return e.userId?"authenticated":"anonymous"}},{key:"collect",value:function(){var t=this.clientConfig;return e({},C,this.getAuthenticationStatus(t))}}]),i}(Tr);function to(e){var t=ro();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function ro(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ro=function(){return!!e})()}function no(e){var t=oo();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function oo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oo=function(){return!!e})()}var io=[Mr,Or,xr,Lr,Vn,Yn,eo,function(r){Qe(i,r);var o=to(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(){var t=this.browserPageAdapter;return e({},S,t.getScrollPercentage())}}]),i}(Tr),function(r){Qe(i,r);var o=no(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"collect",value:function(t){var r=this,n=(this.customConditions||[]).reduce((function(e,n){return e.set(n.id,r.resolveSelector(n,t))}),new Map);return e({},k,n)}},{key:"resolveSelector",value:function(e,t){var r;try{if(!(r=document.querySelectorAll(e.targetingCode))||!r[0])throw"No element found, trying escaping the selectors now..."}catch(t){try{r=document.querySelectorAll(this.escapeSelectorSequence(e.targetingCode))}catch(t){return this.logger.logError(this.clientConfig.companyKey,this.clientConfig.widgetId,"Error querying selector = "+e.targetingCode,t),!!e.domEvent&&function(){return!1}}}return e.domEvent&&"unknown"!==e.domEvent?this.getCurrentValueFunctionAndEventListenerIfNeeded(r,e,t):r&&r[0]&&(r[0].value||r[0].innerHTML)}},{key:"getCurrentValueFunctionAndEventListenerIfNeeded",value:function(e,t,r){var n=t.eventListener?t.eventListener:this.getEventListener(r);return e&&e[0]?(e.forEach((function(e){var r="data-khoroslistenerAttached";e.getAttribute(r)||(e.addEventListener(t.domEvent,n.listener),e.setAttribute(r,!0))})),t.eventListener=n,n.hasBeenCalled):t.eventListener?t.eventListener.hasBeenCalled:function(){return!1}}},{key:"getEventListener",value:function(e){var t={called:!1,listener:function(){t.called||(t.called=!0,e())},hasBeenCalled:function(){return t.called}};return t}},{key:"escapeSelectorSequence",value:function(e){var t=this,r=e.split(" ");return r.forEach((function(e,n){r[n]=e.startsWith(".")||e.startsWith("#")?e.substr(0,1)+t.escapeSelector(e.substr(1)):t.escapeSelectorIfNotPattern(e)})),r.join(" ")}},{key:"escapeSelectorIfNotPattern",value:function(e){return e.startsWith(">")||e.startsWith("+")||e.startsWith("~")||e.startsWith(":")||e.startsWith("*")||e.startsWith("=")||e.startsWith("$")?e:this.escapeSelector(e)}},{key:"escapeSelector",value:function(e){return(e+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,(function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}))}}]),i}(Tr),$n];var ao=function(){function e(){t(this,e),this.environment={}}return n(e,[{key:"addToContext",value:function(e){e&&(this.environment=Object.assign(this.environment,e))}},{key:"getVariableFromContext",value:function(e,t){return void 0!==this.environment[e]?this.environment[e]:t}}]),e}(),so=function(){function e(r){t(this,e);var n=r.getCollectors();this.collectors=n.map((function(e){return new e(r)}))}return n(e,[{key:"collect",value:function(e){var t=new ao;return this.collectors.forEach((function(r){t.addToContext(r.collect(e))})),t}}]),e}(),uo=function(){function e(r,n){t(this,e),this.actionType=r,this.messages=n}return n(e,[{key:"getActionType",value:function(){return this.actionType}},{key:"getMessage",value:function(){return this.messages}}]),e}();function co(e){return e.map((function(e){return new uo(e.action,e.messages)}))}function lo(e){var t=po();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function po(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(po=function(){return!!e})()}var ho=function(e){Qe(o,e);var r=lo(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"Device Type"}},{key:"evaluate",value:function(e){var t,r=e.getVariableFromContext(w),n=this.valueFromRule;if(!this.isString(n))return!1;switch(n.toLowerCase()){case"mobile":t=r;break;case"desktop":t=!r;break;default:console.warn("unknown value for rule DeviceCriteria",n),t=!1}return"IS_NOT"!==this.operator&&"NEQ"!==this.operator||(t=!t),this.debugResult("is Mobile? "+r,t),t}}]),o}(dt);function fo(e){var t=yo();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function yo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yo=function(){return!!e})()}var go=function(e){Qe(o,e);var r=fo(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"Time on Page"}},{key:"evaluate",value:function(e){var t=this.coerceNumber(e.getVariableFromContext(l));if(!this.isNumber(t))return!1;var r=this.convertMillisecondsToSeconds((new Date).getTime()-t),n=this.evaluateNumber(r);return this.debugResult(r,n),n}}]),o}(dt);function mo(e){var t=vo();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function vo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vo=function(){return!!e})()}var bo=function(e){Qe(o,e);var r=mo(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"Time on Site"}},{key:"evaluate",value:function(e){var t=this.coerceNumber(e.getVariableFromContext(c));if(!this.isNumber(t))return!1;var r=this.convertMillisecondsToSeconds((new Date).getTime()-t),n=this.evaluateNumber(r);return this.debugResult(r,n),n}}]),o}(dt);function Do(e){var t=wo();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function wo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wo=function(){return!!e})()}var Eo=function(e){Qe(o,e);var r=Do(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"Days Since Last Site Visit"}},{key:"evaluate",value:function(e){var t=this.coerceNumber(e.getVariableFromContext(f)),r=(new Date).getTime()-t,n=Math.floor(r/864e5),o=this.evaluateNumber(n);return this.debugResult(n,o),o}}]),o}(dt);function Co(e){var t=So();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function So(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(So=function(){return!!e})()}var ko=re,Ao=ne,To=function(e){Qe(o,e);var r=Co(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"getDisplayName",value:function(){return"Business Hours"}},{key:"evaluate",value:function(e){var t=e.getVariableFromContext(A,[]).includes(this.valueFromRule)?this.operator===ko:this.operator===Ao;return this.debugResult(this.valueFromRule,t),t}}]),o}(dt);function Io(e){var t=Fo();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Fo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fo=function(){return!!e})()}var Mo,No=te,Po={AND:Ct,OR:bt},Oo={URL:xo("url"),URL_HOST:xo(a),URL_PATH:xo(s),URL_PARAM:xo(u),BROWSER:xo(m),BROWSER_VERSION:Ro(v),OS:xo(b),OS_VERSION:Ro(D),COOKIE:xo(E),DEVICE_TYPE:ho,AUTHENTICATION_STATUS:xo(C),USER_TIME_IN_PAGE:go,USER_TIME_IN_SITE:bo,USER_PAGE_VISITS:_o(p),USER_SITE_VISITS:_o(d),USER_DAYS_SINCE_LAST_SITE_VISIT:Eo,LOCATION_CITY:yt,LOCATION_STATE:yt,LOCATION_COUNTRY:yt,IP:yt,SCROLL_PERCENTAGE:_o(S),PREVIOUS_PAGE:xo(g),CUSTOM_CONDITION_TEXT:jo(k),CUSTOM_CONDITION_NUMBER:(Mo=k,function(e){Qe(o,e);var r=Io(o);function o(e,n,i,a){var s;return t(this,o),(s=r.call(this,e,n,i)).customConditionId=a,s.displayName=i,s}return n(o,[{key:"getDisplayName",value:function(){return this.displayName}},{key:"evaluate",value:function(e){var t=this,r=e.getVariableFromContext(Mo).get(this.customConditionId),n=this.customConditionId,o=".",i=e.customConditions||[];if(i){var a=i.find((function(e){return e.id===t.customConditionId}));if(a){n=a.targetingCode;var s=a.decimalSeparator;o=[".",","].includes(s)?s:""}}var u=this.evaluateNumber(r,o);return this.debugResult(n,u),u}}]),o}(dt)),CUSTOM_CONDITION_SELECT:jo(k),CUSTOM_CONDITION_EVENT:function(e){return function(r){Qe(i,r);var o=Io(i);function i(e,r,n,a){var s;return t(this,i),(s=o.call(this,e,r,n)).customConditionId=a,s.displayName=n,s}return n(i,[{key:"getDisplayName",value:function(){return this.displayName}},{key:"evaluate",value:function(t){var r=this,n=t.getVariableFromContext(e).get(this.customConditionId)(),o=this.customConditionId,i=t.customConditions||[];if(i){var a=i.find((function(e){return e.id===r.customConditionId}));a&&(o=a.targetingCode)}return this.debugResult(o,n),n}}]),i}(dt)}(k),BUSINESS_HOURS:To,BROWSER_LANGUAGE:function(e){return function(r){Qe(i,r);var o=Io(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getDisplayName",value:function(){return e}},{key:"evaluate",value:function(t){var r=t.getVariableFromContext(e),n=r.substring(0,2),o=this.valueFromRule.split(",").some((function(e){var t=e.trim();return 2==t.length?n==t:r==t})),i=this.operator===No?o:!o;return this.debugResult(r,i),i}}]),i}(dt)}(I)};function Ro(e){return function(r){Qe(i,r);var o=Io(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getDisplayName",value:function(){return e}},{key:"evaluate",value:function(t){var r,n=t.getVariableFromContext(e);return r=null!==this.coerceNumber(n)?this.evaluateNumber(n):this.evaluateString(n),this.debugResult(n,r),r}}]),i}(dt)}function jo(e){return function(r){Qe(i,r);var o=Io(i);function i(e,r,n,a){var s;return t(this,i),(s=o.call(this,e,r,n)).customConditionId=a,s.displayName=n,s}return n(i,[{key:"getDisplayName",value:function(){return this.displayName}},{key:"evaluate",value:function(t){var r=this,n=t.getVariableFromContext(e).get(this.customConditionId),o=this.customConditionId,i=t.customConditions||[];if(i){var a=i.find((function(e){return e.id===r.customConditionId}));a&&(o=a.targetingCode)}var s=this.evaluateString(n);return this.debugResult(o,s),s}}]),i}(dt)}function xo(e){return function(r){Qe(i,r);var o=Io(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getDisplayName",value:function(){return e}},{key:"evaluate",value:function(t){var r=t.getVariableFromContext(e),n=this.evaluateString(r);return this.debugResult(r,n),n}}]),i}(dt)}function _o(e){return function(r){Qe(i,r);var o=Io(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getDisplayName",value:function(){return e}},{key:"evaluate",value:function(t){var r=t.getVariableFromContext(e),n=this.evaluateNumber(r);return this.debugResult(r,n),n}}]),i}(dt)}var Bo=function(){function e(r){t(this,e),this.json=r,this.buildCriterion=this.buildCriterion.bind(this)}return n(e,[{key:"buildCriterion",value:function(e){return e.type===X?this.buildOperatorCriterion(e):this.buildVariableCriterion(e)}},{key:"buildOperatorCriterion",value:function(e){var t=Po[e.value.toUpperCase()];if(!t)throw new Error("Unable to find a class operator for type "+e.value);return new t(Array.isArray(e.criteria)?e.criteria.map(this.buildCriterion):[])}},{key:"buildVariableCriterion",value:function(e){var t=Oo[e.variable.toUpperCase()];if(!t)throw new Error("Unable to find a class variable for type "+e.variable);return new t(e.comparator,e.value,e.variableName||e.variable,e.customConditionId)}},{key:"build",value:function(){return this.buildCriterion(this.json)}}]),e}();function Lo(e){return new Bo(e).build()}var Uo=function(){function e(r,n,o){t(this,e),this.actionHandler=r,this.storageAdapter=n.getStorageAdapter(),this.sessionDataManager=n.getSessionDataManager(),this.ipWhitelist=n.getIPWhitelist(),this.ipBlacklist=n.getIPBlacklist(),this.displayConditions=o,this.throttleDisplayCondition=new Mt(o)}return n(e,[{key:"areDisplayConditionsMet",value:function(){var e=this.getFailedDisplayConditions();return e&&0===e.length}},{key:"resumeConversation",value:function(e,t,r){this.actionHandler.resumeConversation(e,t,r)}},{key:"getHandler",value:function(){return this.actionHandler}},{key:"evaluateRuleDisplayConditions",value:function(e){j("Rule Display Conditions");var t=!0;if(e.displayConditions&&e.displayConditions.enabled){if(!this.haveDisplayConditionsLoaded())return _("Waiting for Rule Display Conditions"),!1;this.getRuleFailedDisplayConditions(e).length&&(_("Rule Display conditions have not been met"),t=!1)}else _("Rule Display Conditions disabled");return x(),t}},{key:"getDisplayConditionsFromDynamicVariables",value:function(){var e=this.getDynamicVariables(),t=[];return e&&e.displayConditions&&(t=e.displayConditions),t}},{key:"getRuleDisplayConditionsFromDynamicVariables",value:function(e){var t=this.getDynamicVariables(),r=[];if(t&&t.ruleDisplayConditions){var n=t.ruleDisplayConditions.filter((function(t){return t.ruleId===e.id}));n&&n.length>0&&(r=n[0].displayConditions)}return r}},{key:"getRuleFailedDisplayConditions",value:function(e){var t=this.getRuleDisplayConditionsFromDynamicVariables(e);return this.addLocallyAssesedAndEvaluate(t,e)}},{key:"getFailedDisplayConditions",value:function(){var e=this.getDisplayConditionsFromDynamicVariables();return this.addLocallyAssesedAndEvaluate(e,this)}},{key:"addLocallyAssesedAndEvaluate",value:function(e,t){var r=this;return(e=this.addlocallyAssesedDisplayCondition(e,t)).filter((function(e){return!r.isDisplayConditionSatisfied(e)}))}},{key:"addlocallyAssesedDisplayCondition",value:function(e,t){if(t.ipWhitelist&&t.ipWhitelist.isIPListEnabled()){var r=t.ipWhitelist.shouldDisplayWidget();e.push({typeId:"IP1",satisfied:r})}if(t.ipBlacklist&&t.ipBlacklist.isIPListEnabled()){var n=t.ipBlacklist.shouldDisplayWidget();e.push({typeId:"IPB1",satisfied:n})}if(t.throttleDisplayCondition){var o=!t.throttleDisplayCondition.shouldThrottle(this.sessionDataManager);e.push({typeId:"TP1",satisfied:o})}return e}},{key:"shouldThrottle",value:function(){return this.throttleDisplayCondition.shouldThrottle(this.sessionDataManager)}},{key:"isDisplayConditionSatisfied",value:function(e){return _("displayCondition typeId = ",e.typeId,", satisfied = ",e.satisfied),e.satisfied}},{key:"getDynamicVariables",value:function(){return JSON.parse(this.storageAdapter.get(me,"{}"))}},{key:"haveDisplayConditionsLoaded",value:function(){var e=this.getDynamicVariables();return e&&e.displayConditions&&e.ruleDisplayConditions}}]),e}();function zo(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Wo(e){return"string"==typeof e?e:JSON.stringify(e)}var Ho=function(){function e(r,n){var o,i,a,s;t(this,e),this.universe=(null===(o=window.KHOROS_CONFIG)||void 0===o?void 0:o.universeOverride)||(null===(i=window.parent.KHOROS_CONFIG)||void 0===i?void 0:i.universeOverride)||ke(),this.region=(null===(a=window.KHOROS_CONFIG)||void 0===a?void 0:a.regionOverride)||(null===(s=window.parent.KHOROS_CONFIG)||void 0===s?void 0:s.regionOverride)||r||("prod"===this.universe?"us-west-2":""),this.companyKey=n}return n(e,[{key:"setUniverse",value:function(e){this.universe=e}},{key:"fetchURL",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new XMLHttpRequest;n.open("GET",e,r),n.onload=this.getOnload(n,t),n.send()}},{key:"postURL",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.doXHRWithMethod("POST",e,Wo(t),r,n)}},{key:"putURL",value:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.doXHRWithMethod("PUT",e,Wo(t),r,n)}},{key:"doXHRWithMethod",value:function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=new XMLHttpRequest;i.open(e,t,o),i.setRequestHeader("Content-type","application/json; charset=utf-8"),i.onload=this.getOnload(i,n),i.send(r)}},{key:"getOnload",value:function(e,t){return function(){var r=e.status;if(200===r){var n;try{n=JSON.parse(e.response)}catch(t){throw console.error(e.response," is not valid JSON"),t}t(null,n)}else t(r,e.response)}}},{key:"getGeoIpURL",value:function(){return this.getChatServerURL()+"/geo/ip"}},{key:"getFirstMessageURL",value:function(){return this.getChatServerURL()+"/geo/first"}},{key:"getLogErrorURL",value:function(){return this.getChatServerURL()+"/geo/logError"}},{key:"getChatServerURL",value:function(){return function(e,t){return Pe[e]||Pe[t]||Me}(this.getUniverseRegionLookup(),this.universe)}},{key:"getWelcomeEventURL",value:function(e){return"".concat(this.getAuthHandlerURL(),"/event/welcome/company/").concat(this.companyKey,"/app/").concat(e)}},{key:"getPrechatFormEndpoint",value:function(e){return"".concat(this.getAuthHandlerURL(),"/prechatform/company/").concat(this.companyKey,"/app/").concat(e)}},{key:"getAuthHandlerURLForMode",value:function(e,t){return"".concat(this.getAuthHandlerURL(),"/user/").concat(e,"/company/").concat(this.companyKey,"/app/").concat(t)}},{key:"getInboxChatURL",value:function(e){return"".concat(this.getAuthHandlerURL(),"/inboxchat/company/").concat(this.companyKey,"/app/").concat(e)}},{key:"getAuthHandlerURL",value:function(){return e=this.getUniverseRegionLookup(),Re[e]||Oe;var e}},{key:"getUniverseRegionLookup",value:function(){return"prod"===this.universe?"".concat(this.universe,"-").concat(this.region):this.universe}},{key:"companyScopedURL",value:function(e,t,r,n){return"".concat(e,"/").concat(t,"/").concat(r,"/").concat(n,".json")}},{key:"companyScopedURLWithCacheBusting",value:function(e,t,r,n){var o=this.companyScopedURL(e,t,r,n),i=Date.now();return"".concat(o,"?v=").concat(i)}},{key:"topLevelURL",value:function(e,t){return"".concat(e,"/").concat(t)}}]),e}(),Go=["widgetHash"],Vo=function(){function e(r,n,o){t(this,e),this.companyKey=r,this.widgetID=n,this.storageAdapter=o,this.urlFetcher=new Ho}return n(e,[{key:"fetchWidgetConfigurationHash",value:function(e,t){var r=this.urlFetcher.companyScopedURL(Fe(),this.companyKey,Ae,t);this.urlFetcher.fetchURL(r,(function(t,r){t?console.error("Unable to fetch widgetConfiguration",t):e(r)}))}},{key:"fetch",value:function(e){var t=this;if(!this.widgetID)throw new Error("No widgetID specified for configuration fetcher");if(!this.companyKey)throw new Error("No companyKey specified for configuration fetcher");var r=this.urlFetcher.companyScopedURL(Fe(),this.companyKey,Ae,this.widgetID);this.urlFetcher.fetchURL(r,(function(r,n){if(r)console.error("Error fetching widget entry point",t.companyKey,t.widgetID,r);else{var o=n.widgetHash,i=zo(n,Go);o||console.error("No widgetHash found in entry point",t.companyKey,t.widgetID,r),i&&t.storageAdapter.set(me,JSON.stringify(i)),t.fetchWidgetConfigurationHash(e,o)}}))}},{key:"setUrlFetcherForTest",value:function(e){this.urlFetcher=e}}]),e}();function Ko(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function qo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ko(i,n,o,a,s,"next",e)}function s(e){Ko(i,n,o,a,s,"throw",e)}a(void 0)}))}}var Yo=o(2207),Jo=o.n(Yo),Qo=o(182),$o=o.n(Qo);function Zo(e){return e.headerTextLanguageVariants=e.headerTextLanguageVariants||[],e.introductionTextLanguageVariants=e.introductionTextLanguageVariants||[],e.systemMessageLanguageVariants=e.systemMessageLanguageVariants||[],e.inboxChatIntroTextLanguageVariants=e.inboxChatIntroTextLanguageVariants||[],e.inboxChatRecentListTitleLanguageVariants=e.inboxChatRecentListTitleLanguageVariants||[],e.inboxChatArchivedListTitleLanguageVariants=e.inboxChatArchivedListTitleLanguageVariants||[],e.inboxChatNewConversationButtonLanguageVariants=e.inboxChatNewConversationButtonLanguageVariants||[],e.mobilePositioning=e.mobilePositioning||{right:"",bottom:""},e.desktopPositioning=e.desktopPositioning||{right:"",bottom:""},e}function Xo(e,t,r){var n=Jt(e,t);return n>=0?t[n].translation:r}function ei(e,t){var r,n={customColors:{},customText:{},displayStyle:"button",fixedIntroPane:!1};return e?(function(e,t){var r=Ue(e.brandColor),n=Ue(e.conversationColor),o=Ue(e.actionColor);r&&(t.customColors.brandColor=r);n&&(t.customColors.conversationColor=n);o&&(t.customColors.actionColor=o)}(e,n),function(e,t,r){var n=Xo(r,e.headerTextLanguageVariants,e.headerText);n&&(t.customText.headerText=n);var o=Xo(r,e.introductionTextLanguageVariants,e.introductionText);o&&(t.customText.introductionText=o)}(e,n,t),function(e,t){t.buttonHeight=e.buttonHeight,t.buttonWidth=e.buttonWidth,t.mobileButtonHeight=e.mobileButtonHeight,t.mobileButtonWidth=e.mobileButtonWidth}(e,n),function(e,t){t.businessName=e.businessName,t.buttonIconUrl=e.buttonIconUrl,t.businessIconUrl=e.businessIconUrl,t.backgroundImageUrl=e.backgroundImageUrl,e.displayStyle===Le.BUTTON&&(t.positioning={mobilePositioning:e.mobilePositioning,desktopPositioning:e.desktopPositioning});t.advancedCss=e.advancedCss,t.injectAdvancedCss=e.injectAdvancedCss,t.defaultAvatarUrl=e.defaultAvatarUrl,t.interfaceLanguage=e.interfaceLanguage}(e,n),e.embedTarget&&(n.embedTarget=e.embedTarget),n.displayStyle=(r=e.displayStyle)&&Le[r.toString().toUpperCase()]?Le[r.toUpperCase()]:Le.BUTTON,n.fixedIntroPane=!0===e.fixedIntroPane,n):n}function ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ri="FirstMessageChatInitiated",ni="ConversationInitiated",oi="WidgetConnected",ii="FrameInitialized",ai="ClientLoaded";function si(e,t,r){window.dispatchEvent(ui(e,t,r))}var ui=function(t,r,n){var o=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ti(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({sdk:r},n);return new CustomEvent(ci(t),{detail:o})};function ci(e){return"khoros".concat(e)}var li=function(){function e(){t(this,e),this.beforeDisplayHandlers=[],this.beforeSendHandlers=[],this.beforePostbackSendHandlers=[]}return n(e,[{key:"registerBeforeDisplayHandler",value:function(e){this.beforeDisplayHandlers.push(e)}},{key:"registerBeforeSendHandler",value:function(e){this.beforeSendHandlers.push(e)}},{key:"registerPostbackSendHandler",value:function(e){this.beforePostbackSendHandlers.push(e)}},{key:"beforeDisplay",value:function(e){return this.runHandlers(this.beforeDisplayHandlers,e)}},{key:"beforeSend",value:function(e){return this.runHandlers(this.beforeSendHandlers,e)}},{key:"beforePostbackSend",value:function(e){return this.runHandlers(this.beforePostbackSendHandlers,e)}},{key:"runHandlers",value:function(e,t){var r=t;return e&&e.length&&e.forEach((function(e){return r=e(r)||r})),r}}]),e}();function pi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function di(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hi="WEB";function fi(){var e,t,r,n,o,i,a=null===(e=window.KHOROS_CONFIG)||void 0===e?void 0:e.metadata,s=null!==(t=null===(r=window.Brandmessenger)||void 0===r||null===(n=r.clientConfig)||void 0===n?void 0:n.metadata)&&void 0!==t?t:{};(Ge(a)&&(a=a()),Ge(s))&&(s=null!==(o=s())&&void 0!==o?o:{});return"object"===Ce(i=a)&&null!==i?di(di({},a),s):a?{suppliedMetadata:a}:{}}function yi(e,t,r,n){return function(o){if(o){var i;o.metadata||(o.metadata={});var a=e||{},s=fi(),u=!r||r.shouldCollectIPAddress,c=null!==(i=null==t?void 0:t.getData())&&void 0!==i?i:null;o.metadata=di(di(di(di(di({},a),s),o.metadata),function(e,t){var r={};if(e)try{var n,o,i,a,s="en",u=e.geoIp,c=e.ip;r={ip:t?c:null,country:null!==(n=null===(o=u.country)||void 0===o?void 0:o.names[s])&&void 0!==n?n:"",city:null!==(i=null===(a=u.city)||void 0===a?void 0:a.names[s])&&void 0!==i?i:"",state:u.subdivisions&&u.subdivisions.length?u.subdivisions[0].names[s]:""}}catch(e){console.error("Unable to extract ip, country, city, or state from Location data",e)}return r}(c,u)),{platform:hi,siteReferrer:document.referrer,title:document.title,url:window.location.href,userAgent:window.navigator.userAgent}),n&&(o.metadata.language=n)}return o}}var gi="file.notvalid",mi="media/notvalid";function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Di=o(3371),wi=o.n(Di),Ei="PATTERN",Ci="LITERAL",Si="_khoros_messenger_client_side_filter_group_matched",ki=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&")},Ai=function(){function e(e){this.config=this.processConfig(e),this.extractText=function(e){return e.message},this.updateText=function(e,t){return e.message=t}}return e.prototype.processConfig=function(e){var t,r=this;if(!e.redactionConfiguration&&!(null===(t=e.filterConfiguration)||void 0===t?void 0:t.filterGroups))return{filterConfiguration:e.filterConfiguration,replacementToken:e.replacementToken};if(e.redactionConfiguration)return{redactionConfiguration:e.redactionConfiguration.map((function(e){var t=e.redactionGroup,n=t.matchPatterns.map((function(e){if(e.preprocessedPattern){var t=void 0;try{t=new RegExp(e.preprocessedPattern,"gmi")}catch(t){return _("Exception creating Regex object for rule pattern "+e.pattern+" of type "+e.type+" which was preprocessed to "+e.preprocessedPattern+": "+t),null}return{pattern:e.pattern,type:e.type,regex:t}}return r.updateMatchPattern(e)}));return{id:e.id,redactionGroup:{matchPatterns:n,name:t.name,enabled:t.enabled,scrubMethod:t.scrubMethod}}})),replacementToken:e.replacementToken};var n=JSON.parse(JSON.stringify(e.filterConfiguration));return this.iterateFilterEntries(n,!0,(function(e,t){var n=r.updateFilterEntry(t);t.text=n.text,t.type=n.type})),{filterConfiguration:n,replacementToken:e.replacementToken}},e.prototype.convertEmojiTypeToRegex=function(e){for(var t,r=[],n=wi()();t=n.exec(e);)r.push(t[0]);return r.join("|")},e.prototype.convertPhraseComponentToRegex=function(e){var t=ki(e).replace(/(\\\*)+/g,"\\w*").replace(/\\\?/g,"\\w");return wi()().test(e)?t:"\\b".concat(t,"\\b")},e.prototype.updateMatchPattern=function(e){var t,r="";if("SIMPLE"===e.type)r=ki(e.pattern).replace(/(\\\*)+/g,"\\w*").replace(/\\\?/g,"\\w");else if("PHRASE"===e.type){r=e.pattern.split(",").map((function(e){return e.trim()})).map(this.convertPhraseComponentToRegex).join("|")}else"EMOJI"===e.type?r=this.convertEmojiTypeToRegex(e.pattern):"REGEX"===e.type&&(r=e.pattern);if(!r)return null;try{t=new RegExp(r,"gmi")}catch(t){return _("Exception creating Regex object for rule pattern "+e.pattern+" of type "+e.type+" which was preprocessed to "+r+": "+t),null}return{pattern:e.pattern,type:e.type,regex:t}},e.prototype.updateFilterEntry=function(e){var t=JSON.parse(JSON.stringify(e));return e.type===Ci?(t.text=ki(e.text).replace(/(\\\*)+/g,"\\w*").replace(/^\\\?/g,"\\b\\w").replace(/\\\?$/g,"\\w\\b").replace(/\\\?/g,"\\w"),t.type=Ei):"WORD"===e.type&&(t.text="\\b"+ki(e.text).replace(/(\\\*)+/g,"\\w*").replace(/\\\?/g,"\\w")+"\\b",t.type=Ei),t},e.prototype.checkMessageAgainstEntry=function(e,t,r,n){try{var o=new RegExp(t.text,"gmi"),i=this.extractText(e);if(o.test(i)){var a=i.replace(o,r);this.updateText(e,a),"object"!=typeof e.metadata&&(e.metadata={}),e.metadata[Si]=n}return e}catch(r){return _("Exception creating Regex object for filter entry "+t.text+" in group "+n+": "+r),e}},e.prototype.iterateFilterEntries=function(e,t,r){var n;if(null===(n=e.filterConfiguration)||void 0===n?void 0:n.filterGroups)for(var o=0,i=e.filterConfiguration.filterGroups;o<i.length;o++){var a=i[o];if((t||a.filterInboundMessages)&&a.filterEntries)for(var s=0,u=a.filterEntries;s<u.length;s++){r(a,u[s])}}},e.prototype.generateScrubConfig=function(e){var t=this;return this.config.redactionConfiguration.filter((function(e){var t,r;return(null===(t=e.redactionGroup)||void 0===t?void 0:t.scrubMethod)&&(null===(r=e.redactionGroup)||void 0===r?void 0:r.enabled)})).map((function(r){var n=r.redactionGroup.matchPatterns;return{id:r.id,name:r.redactionGroup.name,matchPattern:n.find((function(r){var n=t.extractText(e);return r&&r.regex.test(n)})),scrubMethod:r.redactionGroup.scrubMethod}})).filter((function(e){return void 0!==e.matchPattern}))},e.prototype.scrubbedMessage=function(e,t){var r=this;return e.forEach((function(e){var n=r.extractText(t);if(e.scrubMethod.type===Ci){var o=n.replace(e.matchPattern.regex,e.scrubMethod.replacement);r.updateText(t,o)}else if("LAST_FOUR"===e.scrubMethod.type){o=n.replace(e.matchPattern.regex,(function(e){if(e.length<=4)return"*".repeat(e.length);var t=e.length-4;return"*".repeat(t)+e.substring(t,e.length)}));r.updateText(t,o)}else if("FIRST_FOUR"===e.scrubMethod.type){o=n.replace(e.matchPattern.regex,(function(e){if(e.length<=4)return"*".repeat(e.length);var t=e.length-4;return e.substring(0,4)+"*".repeat(t)}));r.updateText(t,o)}"object"!=typeof t.metadata&&(t.metadata={});var i={name:e.name,id:e.id},a=t.metadata[Si];a?((a=JSON.parse(a)).push(i),t.metadata[Si]=JSON.stringify(a)):t.metadata[Si]=JSON.stringify([i])})),t},e.prototype.scrubMessage=function(e){var t=this.generateScrubConfig(e);return t.length>0?this.scrubbedMessage(t,e):e},e.prototype.filterMessage=function(e){var t=this;return this.iterateFilterEntries(this.config,!1,(function(r,n){var o=n.replacementToken||r.replacementToken||t.config.replacementToken||"**Redacted**";e=t.checkMessageAgainstEntry(e,n,o,r.name)})),e},e}(),Ti=function(e){var t=new Ai(e);return t.config.redactionConfiguration?function(e){return t.scrubMessage(e)}:function(e){return t.filterMessage(e)}};function Ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ii(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mi=function(e){var t=e.generalConfiguration&&e.generalConfiguration.filterConfiguration&&e.generalConfiguration.filterConfiguration.enabled,r=e.redactionConfiguration&&e.redactionConfiguration.length>0&&e.redactionConfiguration.some((function(e){return e.redactionGroup.scrubMethod}));return t||r};function Ni(e,t){var r,n;e&&e.generalConfiguration&&e.generalConfiguration.fileUploadEnabled&&t.registerBeforeSendHandler((r=e.generalConfiguration.supportedFileExtensions,n=[],r&&(n=r.replace("[","").replace("]","").split(",").map((function(e){return e.trim().toLowerCase()}))),function(e){if("file"===e.type||"image"===e.type){var t=function(e,t){if(void 0!==e)return e.includes(".")?e.split(".").pop():"";if(void 0!==t){var r=t.split("/").pop();return"plain"===r&&(r="txt"),r}return"notvalid"}(e._fileName,e.mediaType);if(!n.some((function(e){return e===t.trim().toLowerCase()})))return"_fileName"in e&&(e._fileName=gi),"mediaType"in e&&(e.mediaType=mi),e}return e}))}function Pi(e,t,r){var n=r.getWidgetStateEngine(),o=r.getStorageAdapter(),i=r.getSessionDataManager(),a=r.getBrowserPageAdapter(),s=r.getPageVisitsTracker(),u=r.getTriggeredRuleProvider(),c=r.getGeoIPFetcher(),l=new li;e.delegate&&function(e,t){e.beforeSend&&t.registerBeforeSendHandler(e.beforeSend),e.beforeDisplay&&t.registerBeforeDisplayHandler(e.beforeDisplay),e.beforePostbackSend&&t.registerPostbackSendHandler(e.beforePostbackSend)}(e.delegate,l),l.registerBeforeSendHandler(function(e,t){return function(r){return r&&(r.metadata||(r.metadata={}),e.id&&(r.metadata.widgetId=e.id),t.getTriggeredRuleId()&&(r.metadata.ruleId=t.getTriggeredRuleId())),r}}(t,u));var p=(t.staticMetadata||{}).metadata,d=a.getLanguage();return l.registerBeforeSendHandler(yi(p,c,t,d)),l.registerBeforeSendHandler(function(e){return function(t){if(t){var r=e.get(T);r&&(t.metadata=bi(bi({},t.metadata),{},{siteReferrer:r}))}return t}}(o)),l.registerBeforeSendHandler(function(e,t){return function(r){if(r&&t){var n=e.getPageVisitsMetadataThenFlush();r.metadata=Fi(Fi({},r.metadata),n)}return r}}(s,t.enableWebHistory)),function(e,t){if(Mi(e)){var r=e.redactionConfiguration&&e.redactionConfiguration.length>0?e.redactionConfiguration:null,n=e.generalConfiguration.filterConfiguration;t.registerBeforeSendHandler(Ti({redactionConfiguration:r,filterConfiguration:n}))}}(t,l),Ni(t,l),function(e,t){e.isSessionCookieTimeoutActive()&&t.registerBeforeSendHandler(function(e){return function(t){return e.updateCookieExpiration(),t}}(e))}(i,l),l.registerBeforeSendHandler(function(e){return function(t){return t&&e.onMessageSent(),t}}(n)),{beforeDisplay:function(e){return l.beforeDisplay(e)},beforeSend:function(e){return l.beforeSend(e)},beforePostbackSend:function(e){return l.beforePostbackSend(e)}}}var Oi="58",Ri="reply:",ji="http",xi="BUTTON_TYPE_NO_ACTION",_i="BUTTON_TYPE_LINK",Bi="BUTTON_TYPE_REPLY",Li="KHOROS_ADDED_MESSAGE",Ui="web-messenger-container",zi="%\\[(.*?)\\]\\((.*?)\\)",Wi=new RegExp(zi,"g"),Hi=new RegExp(zi);function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Gi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ki={"eu-west-1":"eu-1"},qi=function(){function e(r){t(this,e),this.initParameters=r.getInitParameters(),this.storageAdapter=r.getStorageAdapter(),this.browserPageAdapter=r.getBrowserPageAdapter(),this.hasPreviouslyOpened=!1,this.brandStyleFetcher=r.getBrandStyleFetcher(),this.widgetStateEngine=r.getWidgetStateEngine(),this.authenticationProvider=r.getAuthenticationProvider(),this.iframeStyleHandler=r.getIframeStyleHandler(),this.triggeredRuleProvider=r.getTriggeredRuleProvider(),this.sessionDataManager=r.getSessionDataManager(),this.logger=r.getLogger(),this.headerBarFormatter=r.getHeaderBarFormatter(),this.soundPlayer=r.getSoundPlayer(),this.geoIPFetcher=r.getGeoIPFetcher(),this.pageVisitsTracker=r.getPageVisitsTracker(),this.classRegistry=r,this.showWidget=this.showWidget.bind(this),this.brandStyleHandler=r.getBrandStyleHandler(),this.i18n=r.getI18n(),this.sdkProxy=r.getSDKProxy()}var r;return n(e,[{key:"showPopup",value:function(e,t){var r=this;return this.sessionDataManager.set(or,e.id),t&&t.enabled?this.getBrandStyleConfig(e,t).then((function(t){var n=e.isChatWindowOpen()&&!!r.getFirstMessageFromRule(e);return r.showWidget(e,n,t)})).catch((function(e){r.logger.logError(r.initParameters.getClientConfig().companyKey,t.id,"Error showing popup",e)})):(_("widget is not enabled, will not show popup for widgetId: ",t.id),Promise.resolve())}},{key:"showButton",value:function(e,t){var r=this;return this.sessionDataManager.set(or,e.id),t&&t.enabled?this.getBrandStyleConfig(e,t).then((function(t){return r.showWidget(e,!1,t)})).catch((function(e){r.logger.logError(r.initParameters.getClientConfig().companyKey,t.id,"Error showing button",e)})):(_("widget is not enabled, will not show button for widgetId: ",t.id),Promise.resolve())}},{key:"getFirstMessageFromRule",value:function(e){var t=this.browserPageAdapter.getMainLanguageCode();return e.getActionsMessage(t)}},{key:"getBrandStyleConfig",value:function(e,t){var r=this;return new Promise((function(n){var o,i;r.resumedConversationBrandStyleId?i=r.resumedConversationBrandStyleId:e&&e.brandStyleId?i=e.brandStyleId:e&&e.getBrandStyleId&&e.getBrandStyleId()?i=e.getBrandStyleId():t&&t.brandStyleId&&(i=t.brandStyleId),r.selectedBrandStyleId=i;var a=r.browserPageAdapter.getLanguage();if(!i)return r.updateBrandStyleConfig({}),void n(ei(Zo({}),a));null!==(o=r.brandStyleHandler)&&void 0!==o&&o.isBrandStyleSet(i)?n(r.brandStyleHandler.brandStyleSmoochConfig):r.brandStyleFetcher.fetch(i,(function(e){r.updateBrandStyleConfig(e),n(ei(Zo(e||{}),a))}))}))}},{key:"resumeConversation",value:function(e,t,r){var n=this;try{this.resumedConversationBrandStyleId=this.storageAdapter.get(ge)}catch(e){}return e&&e.enabled?this.getBrandStyleConfig(r,e).then((function(e){return n.showWidget(r,t,e)})).catch((function(t){n.logger.logError(n.initParameters.getClientConfig().companyKey,e.id,"Error resuming conversation",t)})):(_("widget is not enabled, will not resume conversation for widgetId: ",e.id),Promise.resolve())}},{key:"resetConversation",value:function(){var e=this.sdkProxy.getSDK();null!=e&&e.destroy&&e.destroy(),this.authenticationProvider.reset()}},{key:"getPrechatForm",value:function(e,t,r){return t&&t.prechatCapture?Ve(t.prechatCapture):e&&e.getPrechatForm(r)?e.getPrechatForm(r):null}},{key:"mergeConfig",value:function(e,t,r,n,o,i){return $o()({},e,t,r,n,o,i)}},{key:"showWidget",value:function(e,t,r){var n=this,o=this.sdkProxy.getSDK(),i=this.initParameters.getWidgetConfig(),a=this.initParameters.getClientConfig(),s=this.i18n.getInterfaceLanguage();if(this.hasPreviouslyOpened)return Promise.resolve();o.WIDGET_CONFIG=i;var u=function(e){if(!e.generalConfiguration)return{};var t=e.generalConfiguration,r=t.imageUploadEnabled,n=t.fileUploadEnabled,o=t.shareLocationEnabled,i=t.emojiPickerEnabled,a=void 0===i||i,s=t.outboundReadReceiptsEnabled,u=t.typingIndicatorEnabled,c=t.welcomeEventEnabled;return{uiSettings:{outboundReadReceiptsEnabled:s,typingIndicatorEnabled:u,showEmbedModeCloseButton:t.showEmbedModeCloseButton},menuItems:{imageUpload:r,fileUpload:n,shareLocation:o,emojiPicker:a,supportedFileExtensions:ze(e.generalConfiguration),welcomeEventEnabled:c}}}(i),c=this.getPrechatForm(e,a,s);this.selectedBrandStyleId&&this.sessionDataManager.set(ge,this.selectedBrandStyleId),this.sessionDataManager.persistInstanceProperties();var l={locale:s},p={customText:Yt(s)},d=this.mergeConfig(Cr,l,p,u,r,a);(this.getDelegate(a,i)&&(d.delegate=this.getDelegate(a,i)),e&&(o.WIDGET_CONFIG.firedRuleId=e.getId()),c&&(d.prechatCapture=c.config,r.defaultAvatarUrl&&(d.prechatCapture.avatarUrl=r.defaultAvatarUrl),d.customText=Object.assign(d.customText,c.customText)),Ki[i.region]&&(d.region=Ki[i.region]),this.authenticationProvider.isAuthenticated()&&(d.jwt=this.authenticationProvider.getJWT(),d.userId=this.authenticationProvider.getUserId()),d.soundNotificationEnabled=!1,d.displayStyle===Le.EMBED)&&(document.querySelector(d.embedTarget)?(d.embedded=!0,this.sessionDataManager.set(or,e.id),this.widgetStateEngine.onWidgetOpened&&this.widgetStateEngine.onWidgetOpened(d.companyKey,i,e,r)):d.displayStyle=Le.TAB);si("Config",o,{config:d});var h=this.classRegistry.getClientConfig().widgetId;return this.classRegistry.getClientConfig().resetOnLoad?(console.warn("Brand Messenger (widgetId: ".concat(h,") will not load because resetOnLoad is true")),this.classRegistry.getAuthenticationProvider().reset(),null):o.init(d,e,this.classRegistry).then((function(){return n.afterWidgetInit(r,e,d,t)}))}},{key:"updateBrandStyleConfig",value:function(e){this.brandStyleHandler&&this.brandStyleHandler.setBrandStyleJsonConfig(e)}},{key:"afterWidgetInit",value:(r=qo(Jo().mark((function e(t,r,n,o){var i,a,s,u,c,l,p,d,h;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.initParameters.getClientConfig(),a=this.initParameters.getWidgetConfig(),s=this.sdkProxy.getSDK(),u=this.i18n.getInterfaceLanguage(),c=n.displayStyle===Le.EMBED,this.initializeHeaderBarFormatter(u,t,r),this.registerSDKEvents(t,n,a,r),this.hasPreviouslyOpened=!0,si("Init",s),this.injectAdvancedCss(t),this.injectInternalCss(),this.overrideFooterStyle(),c?(this.overrideEmbeddedIframeStyle(),this.iframeStyleHandler.init(i,Vi(Vi({},t),{},{displayStyle:n.displayStyle})),s.open(),si(ni,s)):(d=Vi(Vi({},t),{},{displayStyle:n.displayStyle}),this.overrideMessengerButtonIconStyle(Ke(d)),this.overrideMessengerColorScheme(),this.initializeIframeStyleHandler(i,d),h=(null===(l=s.widgetStateEngine)||void 0===l?void 0:l.conversationStateExists())&&(null===(p=s.widgetStateEngine)||void 0===p?void 0:p.isNever()),o&&!h&&(s.open(),si(ni,s))),e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,n,o){return r.apply(this,arguments)})},{key:"injectAdvancedCss",value:function(e){var t=document.getElementById(P);if(t&&null!=e&&e.injectAdvancedCss&&null!=e&&e.advancedCss){var r=document.createElement("style");r.setAttribute("id","khoros-injectedAdvancedCss"),r.textContent=e.advancedCss,t.contentWindow.document.head.appendChild(r)}}},{key:"overrideFooterStyle",value:function(){}},{key:"overrideMessengerButtonIconStyle",value:function(){}},{key:"overrideMessengerColorScheme",value:function(){}},{key:"injectInternalCss",value:function(){}},{key:"getDelegate",value:function(e,t){return Pi(e,t,this.classRegistry)}},{key:"overrideEmbeddedIframeStyle",value:function(){var e=document.getElementById(Ui);e&&(e.style.height="100%",e.style.width="100%",e.style.position="relative")}},{key:"beforeWidgetInitEmbedded",value:function(){}},{key:"initializeHeaderBarFormatter",value:function(){}},{key:"initializeIframeStyleHandler",value:function(){}},{key:"registerSDKEvents",value:function(){}}]),e}(),Yi=Z,Ji=function(){function e(r,n,o,i){t(this,e),this.rulesFactory=r.getRulesFactory(),this.displayConditionEngine=i,this.urlFetcher=r.getUrlFetcher(),this.registry=r,this.collectionEngine=o,this.storageAdapter=r.getStorageAdapter(),this.widgetConfig=n,this.widgetStateEngine=r.getWidgetStateEngine(),this.logger=r.getLogger(),this.ipWhitelist=r.getIPWhitelist(),this.ipBlacklist=r.getIPBlacklist(),this.triggeredRuleProvider=r.getTriggeredRuleProvider(),this.geoIPFetcher=r.getGeoIPFetcher(),this.browserPageAdapter=r.getBrowserPageAdapter(),this.sessionDataManager=r.getSessionDataManager(),this.actionHandler=new qi(r),this.currentRulesTimeout=null,this.currentVariablesTimeout=null,this.parseRules(n),this.scheduleEvaluateRulesAndVariables=this.scheduleEvaluateRulesAndVariables.bind(this),this.evaluateRules=this.evaluateRules.bind(this),this.updateDynamicVariables=this.updateDynamicVariables.bind(this),this.evaluateGeoIPData=this.evaluateGeoIPData.bind(this),this.init=this.init.bind(this),this.performAction=this.performAction.bind(this),this.sdkProxy=r.getSDKProxy(),this.shouldScheduleRulesOnMissingActivatingRule=!1}var r,o,i;return n(e,[{key:"init",value:(i=qo(Jo().mark((function e(){var t,r,n=this;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.browserPageAdapter.registerHistoryChangeListener((function(){n.scheduleEvaluateRulesAndVariables()})),t=this.storageAdapter.get(or,null),r=t?this.rules.find((function(e){return e.getId()===t})):null,!this.isViewingConversation()||null==r){e.next=8;break}return e.abrupt("return",this.getBrandStyleAndResumeConversation(r,!0));case 8:if(!this.hasPreviousConversation()||null==r){e.next=13;break}return e.abrupt("return",this.getBrandStyleAndResumeConversation(r,!1));case 13:this.geoIPVariableExists()?this.evaluateGeoIPData():(this.shouldScheduleRulesOnMissingActivatingRule=null==r,this.scheduleEvaluateRulesAndVariables(!0));case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getBrandStyleAndResumeConversation",value:function(e,t){var r=this;this.triggeredRuleProvider.updateTriggeredRule(e),this.actionHandler.getBrandStyleConfig(e,this.widgetConfig).then((function(n){r.sdkProxy.loadSdkIfNeededAndRunFunction(r.widgetConfig,n,(function(){return r.displayConditionEngine.resumeConversation(r.widgetConfig,t,e)}))}))}},{key:"parseRules",value:function(e){var t=new(this.registry.getRulesFactory())(e.rules,this.registry);this.rules=t.build()}},{key:"isRulesScheduled",value:function(){return null!=this.currentRulesTimeout}},{key:"isVariablesScheduled",value:function(){return null!=this.currentVariablesTimeout}},{key:"clearAllScheduled",value:function(){_("Clear all Schedules"),this.currentRulesTimeout&&clearTimeout(this.currentRulesTimeout),this.currentRulesTimeout=null,this.currentVariablesTimeout&&clearTimeout(this.currentVariablesTimeout),this.currentVariablesTimeout=null}},{key:"scheduleEvaluateRulesAndVariables",value:function(e){this.clearAllScheduled(),e&&this.updateDynamicVariables(),this.evaluateRules(),clearTimeout(this.currentVariablesTimeout),this.currentVariablesTimeout=setTimeout(this.updateDynamicVariables,3e4)}},{key:"addToContext",value:function(e,t){this.registry.getClientSuppliedContext().addToContext(e,t),this.scheduleEvaluateRulesAndVariables()}},{key:"addCriteria",value:function(e,t){this.registry.getClientSuppliedCriteria().addCriteria(e,t,this.rules),this.scheduleEvaluateRulesAndVariables()}},{key:"buildContext",value:function(e){var t=this.collectionEngine.collect(e);return t.addToContext(this.registry.getClientSuppliedContext().getEnvironment()),t.storageAdapter=this.storageAdapter,t.customConditions=this.widgetConfig.customConditions,t.displayConditionEngine=this.displayConditionEngine,t}},{key:"getAllRules",value:function(){return this.registry.getClientSuppliedCriteria().applyToRules(this.rules)}},{key:"updateDynamicVariables",value:function(){var e=this;_("Updating dynamic variables"),this.registry.getVariableFetcher().fetch((function(t){e.sessionDataManager.set(me,JSON.stringify(t)),e.isRulesScheduled()&&(clearTimeout(e.currentVariablesTimeout),e.currentVariablesTimeout=setTimeout(e.updateDynamicVariables,3e4))}))}},{key:"geoIPVariableExists",value:function(){var e=void 0!==this.rules.find((function(e){return e.isEnabled()&&e.hasGEOIpRequirement()})),t=this.ipWhitelist&&this.ipWhitelist.isIPListEnabled(),r=this.ipBlacklist&&this.ipBlacklist.isIPListEnabled();return e||t||r}},{key:"evaluateGeoIPData",value:function(){if(this.geoIPFetcher.getData()){var e=this.buildContext();this.ipWhitelist.evaluate(e),this.ipBlacklist.evaluate(e),this.scheduleEvaluateRulesAndVariables()}else setTimeout(this.evaluateGeoIPData,1e3)}},{key:"restartEvaluateRules",value:function(){this.clearAllScheduled(),this.evaluateRules()}},{key:"existsActiveRuleWithDisplayConditionsEnabled",value:function(){return this.rules.some((function(e){return e.isEnabled()&&e.displayConditionsEnabled()}))}},{key:"evaluateRules",value:(o=qo(Jo().mark((function e(){var t,r,n,o,i,a,s=this;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_("Evaluating rules"),!this.displayConditionEngine.shouldThrottle(this.storageAdapter)||this.existsActiveRuleWithDisplayConditionsEnabled()){e.next=5;break}return _("Throttling based on percentage"),e.abrupt("return",!1);case 5:if((t=this.displayConditionEngine.haveDisplayConditionsLoaded())||(_("Waiting for display conditions, rescheduling rules evaluation"),this.updateDynamicVariables()),r=this.buildContext((function(){return s.restartEvaluateRules()})),n=this.getAllRules(),o=!0,n&&0!==n.length){e.next=13;break}return _("No rules defined, evaluating to false"),e.abrupt("return",!1);case 13:if(!t){e.next=30;break}i=0;case 15:if(!(i<n.length)){e.next=30;break}if((a=n[i]).isEnabled()){e.next=20;break}return _("Skipping rule because it is not enabled: ",a.getName()),e.abrupt("continue",27);case 20:if(!a.evaluate(r)||!this.areRuleAndWidgetDisplayConditionsMet(a)){e.next=27;break}return e.next=24,this.sendRuleAction(a);case 24:return _("Rules Engine: Rule ",a.getName()," triggered - not rescheduling evaluation"),o=!1,e.abrupt("break",30);case 27:i++,e.next=15;break;case 30:return this.currentRulesTimeout=null,o&&(_("Rescheduling rule evaluation in ",5e3,"ms"),this.currentRulesTimeout=setTimeout(this.evaluateRules,5e3)),e.abrupt("return",!0);case 35:return e.prev=35,e.t0=e.catch(0),this.logger.logError(this.registry.getClientConfig().companyKey,this.widgetConfig.id,"Error evaluating rules",e.t0),e.abrupt("return",!1);case 39:case"end":return e.stop()}}),e,this,[[0,35]])}))),function(){return o.apply(this,arguments)})},{key:"areRuleAndWidgetDisplayConditionsMet",value:function(e){return e.displayConditions&&e.displayConditions.enabled?(_("** Widget Display Conditions Overrided by Rule **"),this.displayConditionEngine.evaluateRuleDisplayConditions(e)):this.displayConditionEngine.areDisplayConditionsMet()}},{key:"performRuleActions",value:function(e,t){var r=this;e.getActions().forEach((function(n){return r.performAction(e,n,t)}))}},{key:"performAction",value:function(e,t,r){t.getActionType()===Yi?this.actionHandler.showPopup(e,r):this.actionHandler.showButton(e,r)}},{key:"isViewingConversation",value:function(){return this.widgetStateEngine.isActive()||this.widgetStateEngine.isOpened()}},{key:"hasPreviousConversation",value:function(){return this.widgetStateEngine.isEnded()}},{key:"sendRuleAction",value:(r=qo(Jo().mark((function e(t){var r=this;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.triggeredRuleProvider.updateTriggeredRule(t),!this.shouldScheduleRulesOnMissingActivatingRule){e.next=10;break}if(!this.isViewingConversation()){e.next=7;break}return e.abrupt("return",this.getBrandStyleAndResumeConversation(t,!0));case 7:if(!this.hasPreviousConversation()){e.next=10;break}return e.abrupt("return",this.getBrandStyleAndResumeConversation(t,!1));case 10:return this.actionHandler.getBrandStyleConfig(t,this.widgetConfig).then((function(e){r.sdkProxy.loadSdkIfNeededAndRunFunction(r.widgetConfig,e,(function(){return r.performRuleActions(t,r.widgetConfig)}))})),e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"forceOpen",value:function(){this.clearAllScheduled(),this.displayConditionEngine.resumeConversation(this.widgetConfig,!0,null)}},{key:"getDisplayConditionEngine",value:function(){return this.displayConditionEngine}}]),e}(),Qi=function(){function e(r,n){t(this,e),this.widgetConfig=r,this.clientConfig=n}return n(e,[{key:"getWidgetConfig",value:function(){return this.widgetConfig}},{key:"getClientConfig",value:function(){return this.clientConfig}}]),e}();function $i(e){var t=window.Brandmessenger;null!=e?e instanceof Xc?(t.debug=function(){return B()},t.debugNetwork=function(){return U()},t.forceEvaluate=function(){return e.scheduleEvaluateRules()},t.initConversation=function(){return e.forceOpen()},t.reload=function(){return e.reload()},t.reset=function(){return e.resetConversation()},t.addToContext=function(t,r){return e.addToContext(t,r)},t.addCriteria=function(t,r){return e.addCriteria(t,r)},t.hide=function(){return e.hide()},t.show=function(){return e.show()},t.clientConfig={metadata:{}}):console.warn("Unable to add public API decorator to SDK, main must be an instance of ProactiveChatMain"):console.warn("Unable to add public API decorator to SDK, main is null")}function Zi(e){var t=window.Brandmessenger,r=window.Brandmessenger._sdk();r?(t.appId=r.appId||e.appId,t.brandUserId=r.brandUserId,t.userId=r.userId,t.companyKey=r.companyKey,t.widgetId=r.widgetId,t.activatingRule=r.activatingRule,t.getUserDetails=r.getUserDetails.bind(r),t.getConversation=r.getConversation.bind(r),t.getUser=r.getUser.bind(r),t.login=r.login.bind(r),t.logout=r.logout.bind(r),t.open=r.open.bind(r),t.close=r.close.bind(r),t.sendMessage=r.sendMessage.bind(r),t.updateUser=r.updateUser.bind(r),t.insertStyle=r.insertStyle.bind(r),t.insertScript=r.insertScript.bind(r)):console.warn("Unable to add public SDK properties")}var Xi=function(){function e(){t(this,e),this.applyIFrameStyles=this.applyIFrameStyles.bind(this),this.toggleButtonOrChatWindowPositioning=this.toggleButtonOrChatWindowPositioning.bind(this),this.togglePositioning=this.togglePositioning.bind(this),this.applyWebStyles=this.applyWebStyles.bind(this),this.applyMobileStyles=this.applyMobileStyles.bind(this),this.widgetObserver=new MutationObserver(this.applyIFrameStyles),this.containerObserver=new MutationObserver(this.toggleButtonOrChatWindowPositioning),this.zIndex=999999989}return n(e,[{key:"getZIndex",value:function(){return this.zIndex}},{key:"getIframe",value:function(){return this.iframe||(this.iframe=document.getElementById(Ui)),this.iframe}},{key:"getDocument",value:function(){return this.getIframe().contentWindow.document}},{key:"getElementById",value:function(e){return this.getDocument().getElementById(e)}},{key:"init",value:function(e,t,r){if(e&&e.messengerStyle&&e.messengerStyle.zIndex&&(this.zIndex=e.messengerStyle.zIndex),this.webStyles=e.messengerStyle||{zIndex:this.zIndex},this.mobileStyles=e.mobileStyle||{},this.webButtonStyles={},this.mobileButtonStyles={},this.firstMessageChat=r||null,t){var n=t.buttonHeight||Oi,o=t.buttonWidth||Oi,i=t.mobileButtonHeight||Oi,a=t.mobileButtonWidth||Oi;if(this.webButtonStyles={height:n,width:o},this.mobileButtonStyles={height:i,width:a},t.positioning){var s=t.positioning.mobilePositioning,u=t.positioning.desktopPositioning;(u.right||u.bottom)&&(Object.assign(this.webStyles,u),this.desktopPositioning=u),(s.right||s.bottom)&&(Object.assign(this.mobileStyles,s),this.mobilePositioning=s)}if(t.displayStyle===Le.BUTTON){this.applyIFrameStyles();var c=document.getElementById(Ui)&&document.getElementById(Ui).contentDocument.querySelector('#mount > div[class^="widget"]');c&&this.widgetObserver.observe(c,{attributes:!0,attributeFilter:["class"]})}}}},{key:"removeStyles",value:function(e){var t=document.getElementById(Ui);if(t&&e)for(var r in e)t.style[r]=""}},{key:"applyStyles",value:function(e,t){var r,n=document.getElementById(Ui);if(n){var o=n.contentDocument.getElementById("messenger-button"),i=n.contentDocument.getElementById("khoros-firstMessageChatWrapper");if(n.style.transition="bottom 0.2s ease 0s, right 0.2s ease 0s",e&&Object.keys(e).forEach((function(t){n.style[t]=e[t]})),t){if(o){Object.keys(t).forEach((function(e){o.style[e]=t[e]+"px"}));var a=parseInt(t.height)+10+20+14+"px",s=parseInt(t.width)+20+"px";n.setAttribute("height",a),n.setAttribute("width",s)}if(i&&"none"!==i.style.display&&this.firstMessageChat){r=i.clientHeight,n.style.height=parseInt(t.height)+10+20+parseInt(r)+14+"px";var u=this.firstMessageChat.getIframeWithFirstMessageChatHeightNoText();this.firstMessageChat.setIframeWithFirstMessageChatHeight(u)}}}}},{key:"applyWebStyles",value:function(){this.applyStyles(this.webStyles,this.webButtonStyles)}},{key:"applyMobileStyles",value:function(){this.applyStyles(this.mobileStyles,this.mobileButtonStyles)}},{key:"isMobile",value:function(){var e=document.getElementById(Ui);return!!e&&e.contentWindow.document.getElementsByClassName("widget-xs").length>0}},{key:"applyIFrameStyles",value:function(){this.isMobile()?this.togglePositioning(this.webStyles,this.mobilePositioning,this.applyMobileStyles):this.togglePositioning(this.mobileStyles,this.desktopPositioning,this.applyWebStyles)}},{key:"togglePositioning",value:function(e,t,r){if(this.removeStyles(e),r(),t){var n=document.getElementById(Ui).contentDocument.getElementById("container");this.toggleButtonOrChatWindowPositioning(),n&&this.containerObserver.observe(n,{attributes:!0,attributeFilter:["class"]})}}},{key:"toggleButtonOrChatWindowPositioning",value:function(){var e=document.getElementById(Ui).contentDocument.getElementById("container");if(e){var t=e.className;this.isMobile()?t.includes("appear")&&!t.includes("animation")?this.removeStyles(this.mobilePositioning):t.includes("close")&&!t.includes("animation")&&this.applyStyles(this.mobilePositioning,this.mobileButtonStyles):t.includes("appear")&&!t.includes("animation")?this.removeStyles(this.desktopPositioning):t.includes("close")&&!t.includes("animation")&&this.applyStyles(this.desktopPositioning,this.webButtonStyles)}}}]),e}(),ea=function(){function e(){t(this,e),this.environment={},this.criteria={}}return n(e,[{key:"addToContext",value:function(e,t){if(!He(e))throw Error(e,"is not a string");Ge(t)?this.environment[e]=t():this.environment[e]=t}},{key:"getEnvironment",value:function(){return this.environment}}]),e}(),ta=function(){function e(r,n){t(this,e),this.evaluationFn=r,this.logErrors=n}return n(e,[{key:"evaluate",value:function(e){try{var t=this.evaluationFn(e);return _("client supplied criteria evaluated to ",t),t}catch(e){this.logErrors&&console.error(e," error encountered in client supplied criteria, returning false")}return!1}},{key:"containsCriteria",value:function(){return!1}}]),e}(),ra=function(){function e(){var r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t(this,e),this.criteria={},this.logErrors=r}return n(e,[{key:"constructCriterion",value:function(e){return new ta(e,this.logErrors)}},{key:"addCriteria",value:function(e,t,r){if(!He(e))throw Error(e,"is not a string");if(!Ge(t))throw Error(t,"is not a function");r&&r.length&&this.validateRuleId(e,r),this.criteria[e]&&this.criteria[e].length?this.criteria[e].push(this.constructCriterion(t)):this.criteria[e]=[this.constructCriterion(t)]}},{key:"validateRuleId",value:function(e,t){var r=t.map((function(e){return e.getId()}));if(!r.includes(e)){var n=r.join(", ");throw Error("Invalid Rule ID: "+e+" specified, ruleIds are: "+n)}}},{key:"getCriteriaForRule",value:function(e){return this.criteria[e]||[]}},{key:"applyToRules",value:function(e){var t=this;return e&&e.length&&Object.keys(this.criteria).forEach((function(r){return t.validateRuleId(r,e)})),e.forEach((function(e){return t.addCriteriaToRule(e,t.getCriteriaForRule(e.getId()))})),e}},{key:"addCriteriaToRule",value:function(e,t){var r=e.getCriteria();t.forEach((function(e){return r.addToSubCriteria(e)}))}}]),e}(),na=function(){function e(r){t(this,e),this.triggeredRule=null,this.registeredListeners=[],this.sessionDataManager=r}return n(e,[{key:"updateTriggeredRule",value:function(e){this.sessionDataManager.set(or,e.id),this.triggeredRule=e,this.fireListeners()}},{key:"getTriggeredRule",value:function(){return this.triggeredRule}},{key:"registerTriggeredRuleListener",value:function(e){this.registeredListeners.push(e)}},{key:"fireListeners",value:function(){var e=this;this.registeredListeners.forEach((function(t){return t(e.triggeredRule)}))}},{key:"getTriggeredRuleId",value:function(){return this.triggeredRule?this.triggeredRule.getId():null}}]),e}(),oa=function(){function e(r,n,o,i){t(this,e),this.companyKey=r,this.widgetID=n,this.urlFetcher=o,this.logger=i||new z(o)}return n(e,[{key:"fetch",value:function(e){var t=this;if(!this.widgetID)throw new Error("widgetID not specified");if(!this.companyKey)throw new Error("companyKey not specified");var r=this.urlFetcher.companyScopedURL(Fe(),this.companyKey,Ae,this.widgetID);this.urlFetcher.fetchURL(r,(function(r,n){r?t.logger.logError(t.companyKey,t.widgetID,"Error fetching dynamic variables entry point",r):e(n)}))}}]),e}(),ia=function(){function e(r,n,o,i){t(this,e),this.companyKey=r,this.widgetId=n,this.urlFetcher=o,this.logger=i||new z(o)}return n(e,[{key:"fetchBrandStyleHash",value:function(e,t){var r=this,n=this.urlFetcher.companyScopedURL(Fe(),this.companyKey,Ae,t);this.urlFetcher.fetchURL(n,(function(n,o){n?r.logger.logError(r.companyKey,t,"Error fetching configuration by hash url",n):e(o)}))}},{key:"fetch",value:function(e,t){var r=this;if(!e)throw new Error("brandStyleId not specified");if(!this.companyKey)throw new Error("companyKey not specified");var n=this.urlFetcher.companyScopedURLWithCacheBusting(Fe(),this.companyKey,Ae,e);this.urlFetcher.fetchURL(n,(function(e,n){if(e)r.logger.logError(r.companyKey,r.widgetId,"Error fetching brand style",e),t({});else if(n.brandStyleHash){var o=n.brandStyleHash;r.fetchBrandStyleHash(t,o)}else t(n||{})}))}}]),e}(),aa=function(){function e(r,n,o,i,a){t(this,e),this.storageAdapter=r,this.browserPageAdapter=n,this.firstBusinessMessage=o,this.sessionDataManager=a,this.SDKProxy=i}return n(e,[{key:"getConversationState",value:function(){return this.sessionDataManager.get(oe,ue)}},{key:"isNever",value:function(){return this.getConversationState()===ue}},{key:"isOpened",value:function(){return this.getConversationState()===ie}},{key:"isActive",value:function(){return this.getConversationState()===ae}},{key:"isEnded",value:function(){return this.getConversationState()===se}},{key:"conversationStateExists",value:function(){return!!this.sessionDataManager.get(oe)}},{key:"isFirstMessageSent",value:function(){return this.storageAdapter.get(ce,pe)===le}},{key:"isWelcomeScreenMessageDisplayed",value:function(){return this.storageAdapter.get(de,he)===fe}},{key:"isWelcomeScreenMessageClicked",value:function(){return this.storageAdapter.get(de,he)===ye}},{key:"isEngagedInSession",value:function(){var e=this.sessionDataManager.get(or,"");return!!e&&sa(this.storageAdapter,e)}},{key:"getFirstMessageState",value:function(){return this.storageAdapter.get(ce,pe)}},{key:"setNever",value:function(){this.sessionDataManager.set(oe,ue)}},{key:"setOpened",value:function(){this.sessionDataManager.set(oe,ie)}},{key:"setActive",value:function(){this.sessionDataManager.set(oe,ae)}},{key:"setEnded",value:function(){this.sessionDataManager.set(oe,se)}},{key:"setFirstMessageSent",value:function(){this.sessionDataManager.set(ce,le)}},{key:"setWelcomeScreenMessageDisplayed",value:function(){this.sessionDataManager.set(de,fe)}},{key:"setWelcomeScreenMessageClicked",value:function(){this.sessionDataManager.set(de,ye)}},{key:"setEngagedInSession",value:function(){var e=this.sessionDataManager.get(or,"");this.sessionDataManager.set(De,e)}},{key:"onFirstMessageSent",value:function(){this.setFirstMessageSent()}},{key:"transitionStateOnWidgetOpen",value:function(e){this.isNever()||this.isOpened()||this.isActive()?this.isFirstMessageSent()?e?this.setOpened():this.setActive():this.isActive()||this.setOpened():this.isEnded()&&this.setActive()}},{key:"transitionStateOnWidgetClose",value:function(){this.isOpened()?this.setNever():this.isActive()?this.setEnded():this.setNever()}},{key:"onWidgetOpened",value:function(e,t,r,n){var o=this.SDKProxy.getSDK();this.transitionStateOnWidgetOpen(n),this.firstBusinessMessage.sendFirstMessage(e,t,r,this.browserPageAdapter.getMainLanguageCode(),o,n,this.onFirstMessageSent.bind(this),this.getFirstMessageState())}},{key:"onWidgetClosed",value:function(){this.isOpened()?this.setNever():this.isActive()&&this.setEnded()}},{key:"onMessageSent",value:function(){(this.isNever()||this.isOpened()||this.isEnded())&&this.setActive()}},{key:"onWidgetConnected",value:function(){this.sessionDataManager.persistSmoochDataInCookies()}}]),e}(),sa=function(e,t){var r=!1,n="".concat(De,":").concat(t);e.get(n,!1)?(e.remove(n),e.set(De,t),r=!0):r=e.get(De,"")===t;return r},ua=function(){function e(r,n,o,i){t(this,e),this.buttonMessage=r,this.target=n,this.actionColor="#".concat(o.customColors.actionColor),this.conversationColor="#".concat(o.customColors.conversationColor),this.buttonActionType=i||xi}return n(e,[{key:"getButtonActionType",value:function(){return this.buttonActionType}},{key:"getDomElement",value:function(){}}]),e}();function ca(e){var t=la();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function la(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(la=function(){return!!e})()}var pa=function(e){Qe(o,e);var r=ca(o);function o(e,n,i){return t(this,o),r.call(this,e,n,i,_i)}return n(o,[{key:"getDomElement",value:function(){var e=document.createElement("div");e.setAttribute("class","action");var t=document.createElement("a");return t.setAttribute("class","btn btn-primary"),t.setAttribute("href",this.target),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("style","border-color: ".concat(this.actionColor,"; background-color: ").concat(this.actionColor,"; margin: 4px 0px; padding: 6px 12px")),t.innerText=this.buttonMessage,e.appendChild(t),e}}]),o}(ua);function da(e){var t=ha();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function ha(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ha=function(){return!!e})()}var fa=function(e){return.05*e+242.25},ya=function(e){Qe(o,e);var r=da(o);function o(e,n,i){var a,s,u,c,l,p;return t(this,o),(a=r.call(this,e,n,i,Bi)).targetMessage=n.replace(Ri,""),a.backGroundColor=(s=i.customColors.conversationColor,u=(s=s.trim()).replace("#",""),c=fa(parseInt(u.substring(0,2),16)),l=fa(parseInt(u.substring(2,4),16)),p=fa(parseInt(u.substring(4,6),16)),"rgb( ".concat(c,", ").concat(l,", ").concat(p," )")),a}return n(o,[{key:"getDomElement",value:function(e){var t=this,r=document.createElement("button");r.setAttribute("class","btn btn-reply-action"),r.setAttribute("style","border-color: ".concat(this.conversationColor,"; background-color: ").concat(this.backGroundColor,"; color: ").concat(this.conversationColor,"; padding: 3px 7px 4px 7px; margin: 0px 0px 5px 5px;"));var n=document.createElement("span");return n.innerHTML=this.buttonMessage,r.appendChild(n),e&&r.addEventListener("click",(function(){return e(t.targetMessage)}),!1),r}}]),o}(ua);function ga(e,t,r,n){var o=function(e,t){for(var r=e.match(Wi)||[],n=xi,o=[],i=e,a=0;a<r.length;a++){var s=r[a].match(new RegExp(Hi));o[a]=ma(s[1],s[2],t),n!==Bi&&(n=o[a].buttonActionType),i=i.replace(s[0],"")}return{buttons:o,buttonActionType:n,parsedFirstMessage:i}}(e,t),i=o.buttons,a=o.buttonActionType;switch(e=o.parsedFirstMessage,a){case _i:return function(e,t,r,n){var o=va(t),i={firstMessage:e,buttonActionType:r,brandStyleConfig:t,buttons:n,avatarUrl:o,hasLinkButtons:!0};return Object.assign(i,Sa(i),Ea(i),Ca(i),Aa(i))}(e,t,a,i);case Bi:return function(e,t,r,n,o,i){var a=va(t),s=function(e){o.sendMessage(e).then((function(){i(),o.open()}))},u=!!n.find((function(e){return e.getButtonActionType()===_i})),c={firstMessage:e,buttonActionType:r,brandStyleConfig:t,buttons:n,avatarUrl:a,postButtonClicked:!1,replyButtonClickHandler:s,nodeReplyContainer:null,hasReplyButtons:!0,hasLinkButtons:u};return Object.assign(c,Sa(c),Ea(c),Ca(c),Aa(c),Ia(c),Fa(c),Ma(c))}(e,t,a,i,r,n)}return function(e,t,r,n){var o=va(t),i={firstMessage:e,buttonActionType:r,brandStyleConfig:t,buttons:n,avatarUrl:o};return Object.assign(i,Sa(i),Ea(i),Ca(i),Aa(i))}(e,t,a,i)}function ma(e,t,r){var n=function(e){if(e.toLowerCase().startsWith("".concat(ji,"://"))||e.toLowerCase().startsWith("".concat(ji,"s://")))return _i;if(e.toLowerCase().startsWith(Ri))return Bi;return xi}(t);switch(n){case _i:return new pa(e,t,r);case Bi:return new ya(e,t,r);default:return new ua(e,t,r)}}var va=function(e){return e.defaultAvatarUrl?e.defaultAvatarUrl:e.businessIconUrl?e.businessIconUrl:"https://www.gravatar.com/avatar/00000000000000000000000000000000.png?s=200&amp;d=mm"},ba=function(e){var t=document.createElement("div");t.setAttribute("class","msg-wrapper"),t.appendChild(function(e){var t=document.createElement("div");return t.setAttribute("class","msg-avatar"),t.innerHTML='<img alt="\'s avatar" src="'.concat(e.avatarUrl,'">'),t}(e)),t.appendChild(function(e){var t=document.createElement("div");t.setAttribute("class","msg");var r=document.createTextNode(e.firstMessage),n=document.createElement("span");n.setAttribute("class","message-item message-text last-item"),n.appendChild(r);var o=document.createElement("div");return o.appendChild(n),t.appendChild(o),wa(e,t)}(e));var r=document.createElement("div");return r.setAttribute("class","__react_component_tooltip place-top type-dark"),r.setAttribute("id","tooltip-5e1e215910c26c0010368670"),r.setAttribute("data-id","tooltip"),t.appendChild(r),t},Da=function(e){var t,r=document.createElement("div");return r.setAttribute("class","row left-row row-appmaker-first row-appmaker-last"),r.setAttribute("id",Li),r.appendChild(((t=document.createElement("div")).setAttribute("class","from"),t)),r.appendChild(ba(e)),r.appendChild(function(){var e=document.createElement("div");e.setAttribute("id","first-message-status-indicator"),e.setAttribute("class","message-status-indicator");var t=document.createElement("span");t.setAttribute("class","time");var r=document.createTextNode("Just now");return t.appendChild(r),e.appendChild(t),e}()),r.appendChild(function(){var e=document.createElement("div");return e.setAttribute("class","clear"),e}()),r},wa=function(e,t){return e.hasLinkButtons&&t.appendChild(function(e){var t=document.createElement("div");return t.setAttribute("class","message-item last-item"),e.buttons.forEach((function(e){e.getButtonActionType()===_i&&t.appendChild(e.getDomElement())})),t}(e)),t},Ea=function(e){return{getMessageForFirstBusinessMessage:function(){return Da(e)}}},Ca=function(e){return{getMessageForFirstMessageChat:function(){return function(e){var t=document.createElement("div"),r=document.createElement("div");r.setAttribute("style","padding: 5px 0px");var n=document.createTextNode(e.firstMessage);return r.appendChild(n),t.appendChild(r),wa(e,t)}(e)}}},Sa=function(e){return{getButtonActionType:function(){return e.buttonActionType}}},ka=function(e){return e.nodeReplyContainer=document.createElement("div"),e.nodeReplyContainer.setAttribute("class","reply-container"),e.nodeReplyContainer.setAttribute("style","overflow: auto; margin: 10px 10px 0 0;"),e.buttons.forEach((function(t){t.getButtonActionType()===Bi&&e.nodeReplyContainer.appendChild(t.getDomElement((function(t){Ta(e),e.replyButtonClickHandler(t)})))})),e.nodeReplyContainer},Aa=function(e){return{insertMessageBeforeNode:function(t,r,n){n!==le&&function(e,t,r){!e.hasReplyButtons||e.postButtonClicked||r||t.insertBefore(ka(e),t.firstChild)}(e,t,r),t.insertBefore(Da(e),t.firstChild)}}};var Ta=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.postButtonClicked=t,e.nodeReplyContainer&&e.nodeReplyContainer.remove()},Ia=function(e){return{setReplyButtonClickHandler:function(t){e.replyButtonClickHandler=t}}},Fa=function(e){return{getReplyButtonsContainer:function(){return ka(e)}}},Ma=function(e){return{setReplyOptionClicked:function(){Ta(e,!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}}};var Na=function(){function e(r,n,o,i,a){t(this,e),this.firstMessageFetcher=r,this.appId=n,this.storageAdapter=i,this.browserPageAdapter=o,this.useServer=!1,this.logger=a||new z(null,o),this.firstMessageFormatter=null,this.firstMessageIndicator=null}return n(e,[{key:"setFirstMessageFormatter",value:function(e){this.firstMessageFormatter=e}},{key:"sendFirstMessage",value:function(e,t,r,n,o,i,a,s){var u=this;if(!this.useServer)return this.addFirstBusinessMessage(t,i,o,a,s);try{return o.startConversation().then((function(){o.getConversation().messages&&0!==o.getConversation().messages.length||u.firstMessageFetcher.post(e,t.id,r.id,o.getUser()._id,u.appId,n,(function(){}))}))}catch(r){return this.logger.logError(e,t.id,"Uncaught error sending first message",r),Promise.reject("error")}}},{key:"getMessageForLanguage",value:function(e){var t=this.browserPageAdapter.getMainLanguageCode(),r=e.actions[0].messages.reduce((function(e,r){return r.languageId===t?r:"default"!==r.languageId||e?e:r}),null);return r&&r.text?r.text:null}},{key:"getActivatingRule",value:function(e){var t=this.storageAdapter.get(or);return t&&e.rules?e.rules.find((function(e){return e.id===t})):null}},{key:"khorosAddedMessageAlreadyExists",value:function(){var e=document.getElementById(Ui);if(e&&e.contentWindow.document.getElementById(Li))return!0;return!1}},{key:"findMessageContainer",value:function(){var e=document.getElementById(Ui);if(e){var t;try{t=e.contentWindow.document.getElementById("container").getElementsByClassName("messages-container")[0].getElementsByClassName("messages")[0]}catch(e){return null}return t||null}return null}},{key:"addFirstBusinessMessage",value:function(e,t,r,n,o){var i=this;if(!this.khorosAddedMessageAlreadyExists()){var a=this.getActivatingRule(e);if(a){var s=this.getMessageForLanguage(a);if(s){var u=this.findMessageContainer();if(u){var c=this.firstMessageFormatter?this.firstMessageFormatter:ga(s,t,r,n);r.on("message",(function(){i.removeIndicatorNode()})),c&&c.insertMessageBeforeNode(u,a.prechatForm,o),this.firstMessageIndicator=this.getIndicatorNode(),u.childElementCount>1&&this.removeIndicatorNode()}else _("Unable to find messages node to display first business message")}else _("Unable to find original message for first business message")}else _("Unable to display first message because activating rule is missing")}}},{key:"getIndicatorNode",value:function(){var e=document.getElementById(Ui);if(e)return e.contentWindow.document.getElementById("first-message-status-indicator")}},{key:"removeIndicatorNode",value:function(){this.firstMessageIndicator&&(this.firstMessageIndicator.style.display="none",this.firstMessageIndicator=null)}}]),e}(),Pa=function(){function e(r,n){t(this,e),this.urlFetcher=r,this.logger=n||new z(r),this.firstMessageURL=this.urlFetcher.getFirstMessageURL()}return n(e,[{key:"post",value:function(e,t,r,n,o,i,a){var s=this;this.urlFetcher.postURL(this.firstMessageURL,{companyKey:e,widgetId:t,ruleId:r,userId:n,appId:o,languageId:i},(function(r,n){r?s.logger.logError(e,t,"Error sending First Message request",r):a(n)}),!0)}}]),e}(),Oa=function(){function e(r,n,o){t(this,e),this.config=r,this.storageAdapter=n,this.sessionDataManager=o,r.jwt&&r.userId&&r.persistJWT&&(this.sessionDataManager.persistKeyInCookie("jwt",r.jwt),this.sessionDataManager.persistKeyInCookie(Er,r.userId)),this.userId=r.userId,this.jwt=r.jwt}return n(e,[{key:"getUserId",value:function(){return this.storageAdapter.getCookie(Er)||this.userId}},{key:"getJWT",value:function(){return this.storageAdapter.getCookie("jwt")||this.jwt}},{key:"reset",value:function(){this.sessionDataManager.resetCookies(),this.storageAdapter.resetStorage(),delete this.userId,delete this.jwt}},{key:"isAuthenticated",value:function(){return this.getUserId()&&this.getJWT()}}]),e}();const Ra=JSON.parse('{"samsungbnl":{"customText":{"conversationTimestampHeaderFormat":"d MMMM YYYY, H:mm","messageTimestampFormat":"H:mm"}},"samsungbnldev":{"customText":{"conversationTimestampHeaderFormat":"d MMMM YYYY, H:mm","messageTimestampFormat":"H:mm"}},"bryanpsb":{"persistJWT":true},"bunnings":{"hideFirstChatMessage":true},"khoros":{"persistJWT":true,"uiSettings":{"showEmbedModeCloseButton":true}},"_defaultCompanyForTest":{"locale":"zz","customText":{"conversationTimestampHeaderFormat":"cthf_test","messageTimestampFormat":"mtf_test"},"persistJWT":true},"rosetta-c01":{"uiSettings":{"showEmbedModeCloseButton":true}}}');var ja=function(){function e(r,n){t(this,e),this.urlFetcher=r,this.sessionDataManager=n,this.geoIpURL=this.urlFetcher.getGeoIpURL(),this.data=null}return n(e,[{key:"setData",value:function(e){this.data=e}},{key:"getData",value:function(){return this.data}},{key:"getStoreLocationData",value:function(){return this.sessionDataManager.get(ve,"")}},{key:"fetch",value:function(e){var t=this,r=this.getStoreLocationData();r?(this.setData(JSON.parse(r)),e&&e()):this.urlFetcher.fetchURL(this.geoIpURL,(function(r,n){if(r)throw new Error("Error fetching Geo IP data");t.sessionDataManager.set(ve,JSON.stringify(n)),t.setData(n),e&&e()}))}}]),e}();var xa="khoros_ellipsis_popup_menu",_a="khoros_iframe_fullscreen_clickhandler",Ba=function(){function e(r,n,o,i,a){t(this,e),this.action=i,this.textDiv=document.createElement("div"),this.textDiv.setAttribute("class","khoros_ellipsis_menuItem_text_class"),this.iconDiv=document.createElement("div"),this.iconDiv.setAttribute("class","khoros_ellipsis_menuItem_icon_class"),this.textKey=o,this.language=a,this.init(r,n)}return n(e,[{key:"updateMenuItemTextKey",value:function(e){this.textKey=e,this.updateMenuItemText()}},{key:"updateMenuItemText",value:function(){var e=Yt(this.language)[this.textKey];this.textDiv.innerText=e}},{key:"updateMenuItemIcon",value:function(e){this.iconDiv.innerHTML=e}},{key:"init",value:function(e,t){var r=document.createElement("div");r.setAttribute("id",e);r.setAttribute("style","\n            padding: 5px 10px;\n            display: flex;\n            align-items: center;\n        "),r.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),r.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),r.addEventListener("click",this.handleClick.bind(this)),this.updateMenuItemText();this.textDiv.setAttribute("style",'\n            margin-left: 15px;\n            font-family: "Helvetica Neue", Helvetica, sans-serif;\n            font-size: 13px;\n            color: #29292d;\n            height: 32px;\n            display: flex;\n            align-items: center;\n        ');this.iconDiv.setAttribute("style","\n            height: 32px;\n            width: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        "),this.iconDiv.innerHTML=t,r.appendChild(this.iconDiv),r.appendChild(this.textDiv),this.menuItemElement=r}},{key:"handleMouseEnter",value:function(){this.menuItemElement.style.backgroundColor="rgba(0,0,0,0.05)"}},{key:"handleMouseLeave",value:function(){this.menuItemElement.style.backgroundColor="transparent"}},{key:"handleClick",value:function(e){this.handleMouseLeave(),e.stopPropagation(),this.action()}},{key:"getMenuItemElement",value:function(){return this.menuItemElement}}]),e}(),La=function(){function e(r,n,o){t(this,e),this.SDKProxy=r,this.language=n||"en",this.brandStyleConfig=o,this.imagesBeingLoaded=[]}var r;return n(e,[{key:"formatConversation",value:function(e,t){var r=this;this.addStylesToPrintWindowDocument(e);var n=document.createElement("div");return e.document.body.appendChild(n),t&&t.messages&&(this.addTitle(n),this.addSystemMessage(n),t.messages.forEach((function(e){r.addMessage(n,e)}))),t}},{key:"addStylesToPrintWindowDocument",value:function(e){var t=e.document.createElement("style");e.document.head.appendChild(t);var r=t.sheet;r.insertRule("body {\n                margin: 10mm;\n                font-family: 'Open Sans', sans-serif !important;\n                font-size: 10px;\n                font-weight: normal;\n                font-stretch: normal;\n                font-style: normal;\n                line-height: normal;\n                letter-spacing: normal;\n                color: #29292d;\n            }",r.cssRules.length),r.insertRule(".author {\n                margin: 15px 0 5px;\n                font-weight: bold;\n                page-break-after: avoid;\n            }",r.cssRules.length),r.insertRule(".message {\n                padding: 0 20px;\n            }",r.cssRules.length),r.insertRule(".contentLine {\n                margin: 15px 0px;\n                page-break-inside: avoid;\n            }",r.cssRules.length),r.insertRule(".image {\n                max-width: 40%;\n            }",r.cssRules.length),r.insertRule("img {\n                border-radius: 14px;\n            }")}},{key:"addTitle",value:function(e){var t=document.createElement("h2");t.setAttribute("class","title");var r=Yt(this.language).transcriptConversationWith,n=(new Date).toLocaleDateString();t.innerText="".concat(r," ").concat(this.brandStyleConfig.businessName," - ").concat(n),e.appendChild(t)}},{key:"addSystemMessage",value:function(e){var t;if(null!==(t=this.brandStyleConfig)&&void 0!==t&&t.systemMessage){var r=document.createElement("h3");r.setAttribute("class","systemMessage"),r.innerHTML=this.brandStyleConfig.systemMessage,e.appendChild(r)}}},{key:"addMessage",value:function(e,t){var r=this;if(t&&t.type){var n=document.createElement("div");if(n.setAttribute("class","contentLine"),n.appendChild(this.getAuthorLine(t)),"text"!==t.type&&"location"!==t.type||(t.actions?(t.text&&n.appendChild(this.getTextMessageElement(t)),t.actions.forEach((function(e){if(r.isSecureFormRequest(e)){var t=Yt(r.language).secureFormRequest;n.appendChild(r.getFormMessageElement(t))}}))):n.appendChild(this.getTextMessageElement(t))),"image"===t.type&&n.appendChild(this.getImageElement(t)),"file"===t.type&&n.appendChild(this.getFileMessageElement(t)),"form"===t.type){var o=Yt(this.language).formRequested;n.appendChild(this.getFormMessageElement(o))}if("formResponse"===t.type){var i=Yt(this.language).formResponseSent;n.appendChild(this.getFormMessageElement(i))}e.appendChild(n)}}},{key:"isSecureFormRequest",value:function(e){return e&&"webview"===e.type}},{key:"getTextMessageElement",value:function(e){var t=document.createElement("div");return t.setAttribute("class","message"),t.innerText=e.text,t}},{key:"getImageElement",value:function(e){var t=this,r=document.createElement("div");r.setAttribute("class","image");var n=document.createElement("img");return this.addResourceToWaitList(e.mediaUrl),n.addEventListener("load",(function(){return t.removeResourceFromWaitList(e.mediaUrl)})),n.addEventListener("error",(function(){return t.removeResourceFromWaitList(e.mediaUrl)})),n.setAttribute("src",e.mediaUrl),n.setAttribute("alt",e.altText),r.appendChild(n),e.text&&r.appendChild(this.getTextMessageElement(e)),r}},{key:"getFileMessageElement",value:function(e){var t=document.createElement("div");t.setAttribute("class","message");var r=Yt(this.language).documentUploaded,n=e.altText?": ".concat(e.altText):"";return t.innerText="".concat(r).concat(n),t}},{key:"getFormMessageElement",value:function(e){var t=document.createElement("div");return t.setAttribute("class","message"),t.innerText="< ".concat(e," >").toUpperCase(),t}},{key:"getAuthorLine",value:function(e){var t=document.createElement("div");t.setAttribute("class","author");var r=this.getName(e),n=this.getTime(e);return t.innerText=n?"".concat(r," [").concat(n,"]"):"".concat(r),t}},{key:"getName",value:function(e){return e.role&&"appUser"===e.role?Yt(this.language).youWrote:e.name||this.brandStyleConfig.businessName}},{key:"getTime",value:function(e){return e.received?new Date(1e3*e.received).toLocaleTimeString():null}},{key:"addResourceToWaitList",value:function(e){this.imagesBeingLoaded.push(e)}},{key:"removeResourceFromWaitList",value:function(e){var t=this.imagesBeingLoaded.indexOf(e);t>=0&&this.imagesBeingLoaded.splice(t,1)}},{key:"waitForResourcesAndPrint",value:function(e,t){var r=this;if(t>5||0===this.imagesBeingLoaded.length)return e.print(),void e.close();setTimeout((function(){return r.waitForResourcesAndPrint(e,t+1)}),1e3)}},{key:"getConversation",value:(r=qo(Jo().mark((function e(){var t;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.SDKProxy.getSDK(),e.abrupt("return",t.getConversation());case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"print",value:function(){var e=this;return new Promise((function(t){e.imagesBeingLoaded=[];var r=window.open();e.getConversation().then((function(n){e.formatConversation(r,n),setTimeout((function(){return e.waitForResourcesAndPrint(r,0)}),100),t("Finished Printing")}))}))}}]),e}(),Ua="KHOROS_INTERNAL";"".concat(Ua,":name"),"".concat(Ua,":avatarUrl");function za(e){return"KHOROS_INTERNAL:".concat(e)}za("openLinkInWebview"),za("isSecureForm"),za("locationRequest"),za("citations");var Wa=o(5734);const Ha={APPLOZIC_HOST:"https://apps.applozic.com"};var Ga,Va=o(5914),Ka=function(e){if(!(null==e?void 0:e.authToken))return-1;var t=function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e.authToken),r=t.validUpto;return t.createdAtTime+60*(r-1)*1e3-(new Date).getTime()},qa=function(e){return!(null==e?void 0:e.authToken)||Ka(e)<=0},Ya=function(e,t){var r=(0,Va.encode)("".concat(e.userId,":").concat(e.deviceKey)),n="Basic ".concat(r);return{"Application-Key":t,"Device-Key":e.deviceKey,Authorization:n,"Application-User":n,"X-Authorization":e.authToken,"UserId-Enabled":!0}},Ja=function(){return Ja=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ja.apply(this,arguments)},Qa=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},$a=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(e){e.GET="GET",e.POST="POST"}(Ga||(Ga={}));var Za=function(){function e(e,t){var r,n=this;this.authHeaders={"Application-Key":"",Authorization:"","Device-Key":"","Application-User":"","X-Authorization":"","UserId-Enabled":!1},this.loginResult=null,this.getAgent=function(e){var t=(0,Wa.agent)();return e&&t.set(n.authHeaders),t},this.uploadFile=function(e,t,r,o){return Qa(n,void 0,void 0,(function(){var n,i,a,s,u;return $a(this,(function(c){switch(c.label){case 0:n=null!==(u=null!==(s=null==o?void 0:o.apiHost)&&void 0!==s?s:this.host)&&void 0!==u?u:Ha.APPLOZIC_HOST,(i=this.getAgent(!!(null==o?void 0:o.useAuth))).set("Accept","application/json"),(null==o?void 0:o.query)&&i.query(o.query),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,i.post("".concat(n).concat(e)).attach(t,r)];case 2:return[2,c.sent().body];case 3:throw a=c.sent(),console.error(a),a;case 4:return[2]}}))}))},this.applicationId=e,this.host=null==t?void 0:t.host,this.universeOverride=null==t?void 0:t.universeOverride,this.regionOverride=null==t?void 0:t.regionOverride,this.isS3Enabled=null!==(r=null==t?void 0:t.enableS3)&&void 0!==r&&r,this.id=Math.round(1e4*Math.random()),this.debugMessage("New object Created"),this.reconnectBrandMessengerClient=null==t?void 0:t.reconnectBrandMessengerClient,this.reconnectBrandMessengerClient||this.debugMessage("reconnectBrandMessengerClient not present!!"),this.refreshTokenFixed=!1}return e.prototype.getId=function(){return this.id},e.prototype.debugMessage=function(e){L(this.constructor.name,this.id,e)},e.prototype.init=function(){return Qa(this,void 0,void 0,(function(){return $a(this,(function(e){return[2]}))}))},e.prototype.postLogin=function(e){return Qa(this,void 0,void 0,(function(){return $a(this,(function(t){return this.loginResult=Ja({},e),this.debugMessage("(base) postLogin - method called"),this.authHeaders=Ya(e,this.applicationId),[2,e]}))}))},e.prototype.logout=function(){return Qa(this,void 0,void 0,(function(){return $a(this,(function(e){return this.loginResult=null,this.debugMessage("logout - setting loginResult to null!!! (for the applozicClient)"),[2]}))}))},e}();const Xa=Za;var es,ts,rs=(es=function(e,t){return es=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},es(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}es(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ns=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},os=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},is=Xt.keys.LOGIN_RESULT;!function(e){e.GET="GET",e.POST="POST"}(ts||(ts={}));var as=function(e){function t(t,r){var n=e.call(this,t,r)||this;return!1!==(null==r?void 0:r.useStore)&&(null==r?void 0:r.sessionDataManager)&&(n.sessionDataManager=r.sessionDataManager),n}return rs(t,e),t.prototype.reloadLoginResultFromSession=function(){this.loginResult=this.sessionDataManager.getLoginResult()},t.prototype.postLogin=function(t){return ns(this,void 0,void 0,(function(){return os(this,(function(r){switch(r.label){case 0:return[4,e.prototype.postLogin.call(this,t)];case 1:return r.sent(),this.sessionDataManager.set(is,JSON.stringify(t)),[2,t]}}))}))},t.prototype.logout=function(){return ns(this,void 0,void 0,(function(){return os(this,(function(t){switch(t.label){case 0:return[4,e.prototype.logout.call(this)];case 1:return t.sent(),this.sessionDataManager.remove(is),[2]}}))}))},t}(Xa);const ss=as;class us{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map((e=>`v${e.replace(".","")}.stomp`))}}us.V1_0="1.0",us.V1_1="1.1",us.V1_2="1.2",us.default=new us([us.V1_0,us.V1_1,us.V1_2]);const cs="\n",ls="\0";class ps{constructor(e){const{command:t,headers:r,body:n,binaryBody:o,escapeHeaderValues:i,skipContentLengthHeader:a}=e;this.command=t,this.headers=Object.assign({},r||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=n||"",this.isBinaryBody=!1),this.escapeHeaderValues=i||!1,this.skipContentLengthHeader=a||!1}get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body}get binaryBody(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}static fromRawFrame(e,t){const r={},n=e=>e.replace(/^\s+|\s+$/g,"");for(const o of e.headers.reverse()){o.indexOf(":");const i=n(o[0]);let a=n(o[1]);t&&"CONNECT"!==e.command&&"CONNECTED"!==e.command&&(a=ps.hdrValueUnEscape(a)),r[i]=a}return new ps({command:e.command,headers:r,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){const e=this.serializeCmdAndHeaders();return this.isBinaryBody?ps.toUnit8Array(e,this._binaryBody).buffer:e+this._body+ls}serializeCmdAndHeaders(){const e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const t of Object.keys(this.headers||{})){const r=this.headers[t];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?e.push(`${t}:${ps.hdrValueEscape(`${r}`)}`):e.push(`${t}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(cs)+cs+cs}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?(new TextEncoder).encode(e).length:0}static toUnit8Array(e,t){const r=(new TextEncoder).encode(e),n=new Uint8Array([0]),o=new Uint8Array(r.length+t.length+n.length);return o.set(r),o.set(t,r.length),o.set(n,r.length+t.length),o}static marshall(e){return new ps(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class ds{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let r;if(r=e instanceof ArrayBuffer?new Uint8Array(e):this._encoder.encode(e),t&&0!==r[r.length-1]){const e=new Uint8Array(r.length+1);e.set(r,0),e[r.length]=0,r=e}for(let e=0;e<r.length;e++){const t=r[e];this._onByte(t)}}_collectFrame(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())}_collectCommand(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_collectHeaders(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)}_collectHeaderValue(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)}_setupCollectBody(){const e=this._results.headers.filter((e=>"content-length"===e[0]))[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){0!==e?this._consumeByte(e):this._retrievedBody()}_collectBodyFixedSize(e){0!=this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw(),this.onFrame(this._results),this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var hs,fs;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(hs||(hs={})),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE"}(fs||(fs={}));class ys{constructor(e,t,r={}){this._client=e,this._webSocket=t,this._serverFrameHandlers={CONNECTED:e=>{this.debug(`connected to server ${e.headers.server}`),this._connected=!0,this._connectedVersion=e.headers.version,this._connectedVersion===us.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(e.headers),this.onConnect(e)},MESSAGE:e=>{const t=e.headers.subscription,r=this._subscriptions[t]||this.onUnhandledMessage,n=e,o=this,i=this._connectedVersion===us.V1_2?n.headers.ack:n.headers["message-id"];n.ack=(e={})=>o.ack(i,t,e),n.nack=(e={})=>o.nack(i,t,e),r(n)},RECEIPT:e=>{const t=this._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete this._receiptWatchers[e.headers["receipt-id"]]):this.onUnhandledReceipt(e)},ERROR:e=>{this.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.configure(r)}get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}configure(e){Object.assign(this,e)}start(){const e=new ds((e=>{const t=ps.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${t}`);(this._serverFrameHandlers[t.command]||this.onUnhandledFrame)(t)}),(()=>{this.debug("<<< PONG")}));this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const e=t.data instanceof ArrayBuffer?(new TextDecoder).decode(t.data):t.data;this.debug(`<<< ${e}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._onclose=e=>{this.debug(`Connection closed to ${this._client.brokerURL}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onclose=this._onclose,this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{const e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(e){if(e.version!==us.V1_1&&e.version!==us.V1_2)return;if(!e["heart-beat"])return;const[t,r]=e["heart-beat"].split(",").map((e=>parseInt(e,10)));if(0!==this.heartbeatOutgoing&&0!==r){const e=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${e}ms`),this._pinger=setInterval((()=>{this._webSocket.readyState===hs.OPEN&&(this._webSocket.send(cs),this.debug(">>> PING"))}),e)}if(0!==this.heartbeatIncoming&&0!==t){const e=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${e}ms`),this._ponger=setInterval((()=>{const t=Date.now()-this._lastServerActivityTS;t>2*e&&(this.debug(`did not receive server activity for the last ${t}ms`),this._closeOrDiscardWebsocket())}),e)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this._discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState!==hs.CONNECTING&&this._webSocket.readyState!==hs.OPEN||this._closeOrDiscardWebsocket())}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}_discardWebsocket(){this._webSocket.terminate||function(e,t){e.terminate=function(){const e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;const r=new Date,n=this.onclose;this.onclose=e=>{const n=(new Date).getTime()-r.getTime();t(`Discarded socket closed after ${n}ms, with code/reason: ${e.code}/${e.reason}`)},this.close(),n.call(this,{code:4001,reason:"Heartbeat failure, discarding the socket",wasClean:!1})}}(this._webSocket,(e=>this.debug(e))),this._webSocket.terminate()}_transmit(e){const{command:t,headers:r,body:n,binaryBody:o,skipContentLengthHeader:i}=e,a=new ps({command:t,headers:r,body:n,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:i});let s=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${s}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&"string"==typeof s&&(s=(new TextEncoder).encode(s)),"string"==typeof s&&this.splitLargeFrames){let e=s;for(;e.length>0;){const t=e.substring(0,this.maxWebSocketChunkSize);e=e.substring(this.maxWebSocketChunkSize),this._webSocket.send(t),this.debug(`chunk sent = ${t.length}, remaining = ${e.length}`)}}else this._webSocket.send(s)}dispose(){if(this.connected)try{const e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt="close-"+this._counter++),this.watchForReceipt(e.receipt,(e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)})),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else this._webSocket.readyState!==hs.CONNECTING&&this._webSocket.readyState!==hs.OPEN||this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&clearInterval(this._pinger),this._ponger&&clearInterval(this._ponger)}publish(e){const{destination:t,headers:r,body:n,binaryBody:o,skipContentLengthHeader:i}=e,a=Object.assign({destination:t},r);this._transmit({command:"SEND",headers:a,body:n,binaryBody:o,skipContentLengthHeader:i})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,r={}){(r=Object.assign({},r)).id||(r.id="sub-"+this._counter++),r.destination=e,this._subscriptions[r.id]=t,this._transmit({command:"SUBSCRIBE",headers:r});const n=this;return{id:r.id,unsubscribe:e=>n.unsubscribe(r.id,e)}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){const t=e||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:t}});const r=this;return{id:t,commit(){r.commit(t)},abort(){r.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,r={}){r=Object.assign({},r),this._connectedVersion===us.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"ACK",headers:r})}nack(e,t,r={}){return r=Object.assign({},r),this._connectedVersion===us.V1_2?r.id=e:r["message-id"]=e,r.subscription=t,this._transmit({command:"NACK",headers:r})}}var gs,ms,vs,bs,Ds=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};class ws{constructor(e={}){this.stompVersions=us.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.state=fs.INACTIVE;const t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}get webSocket(){return this._stompHandler?this._stompHandler._webSocket:void 0}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===fs.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}configure(e){Object.assign(this,e)}activate(){if(this.state===fs.DEACTIVATING)throw this.debug("Still DEACTIVATING, please await call to deactivate before trying to re-activate"),new Error("Still DEACTIVATING, can not activate now");this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(fs.ACTIVE),this._connect())}_connect(){return Ds(this,void 0,void 0,(function*(){if(this.connected)return void this.debug("STOMP: already connected, nothing to do");if(yield this.beforeConnect(),!this.active)return void this.debug("Client has been marked inactive, will not attempt to connect");this.connectionTimeout>0&&(this._connectionWatcher=setTimeout((()=>{this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect()}),this.connectionTimeout)),this.debug("Opening Web Socket...");const e=this._createWebSocket();this._stompHandler=new ys(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active)return this.debug("STOMP got connected while deactivate was issued, will disconnect now"),void this._disposeStompHandler();this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===fs.DEACTIVATING&&(this._resolveSocketClose(),this._resolveSocketClose=void 0,this._changeState(fs.INACTIVE)),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()}))}_createWebSocket(){let e;return e=this.webSocketFactory?this.webSocketFactory():new WebSocket(this.brokerURL,this.stompVersions.protocolVersions()),e.binaryType="arraybuffer",e}_schedule_reconnect(){this.reconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`),this._reconnector=setTimeout((()=>{this._connect()}),this.reconnectDelay))}deactivate(){return Ds(this,void 0,void 0,(function*(){let e;return this.state!==fs.ACTIVE?(this.debug(`Already ${fs[this.state]}, ignoring call to deactivate`),Promise.resolve()):(this._changeState(fs.DEACTIVATING),this._reconnector&&clearTimeout(this._reconnector),this._stompHandler&&this.webSocket.readyState!==hs.CLOSED?(e=new Promise(((e,t)=>{this._resolveSocketClose=e})),this._disposeStompHandler(),e):(this._changeState(fs.INACTIVE),Promise.resolve()))}))}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&(this._stompHandler.dispose(),this._stompHandler=null)}publish(e){this._stompHandler.publish(e)}watchForReceipt(e,t){this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,r={}){return this._stompHandler.subscribe(e,t,r)}unsubscribe(e,t={}){this._stompHandler.unsubscribe(e,t)}begin(e){return this._stompHandler.begin(e)}commit(e){this._stompHandler.commit(e)}abort(e){this._stompHandler.abort(e)}ack(e,t,r={}){this._stompHandler.ack(e,t,r)}nack(e,t,r={}){this._stompHandler.nack(e,t,r)}}class Es{constructor(e){this.client=e}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(e){this.client.heartbeatOutgoing=e}get incoming(){return this.client.heartbeatIncoming}set incoming(e){this.client.heartbeatIncoming=e}}class Cs extends ws{constructor(e){super(),this.maxWebSocketFrameSize=16384,this._heartbeatInfo=new Es(this),this.reconnect_delay=0,this.webSocketFactory=e,this.debug=(...e)=>{console.log(...e)}}_parseConnect(...e){let t,r,n,o={};if(e.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof e[1])[o,r,n,t]=e;else if(6===e.length)[o.login,o.passcode,r,n,t,o.host]=e;else[o.login,o.passcode,r,n,t]=e;return[o,r,n,t]}connect(...e){const t=this._parseConnect(...e);t[0]&&(this.connectHeaders=t[0]),t[1]&&(this.onConnect=t[1]),t[2]&&(this.onStompError=t[2]),t[3]&&(this.onWebSocketClose=t[3]),super.activate()}disconnect(e,t={}){e&&(this.onDisconnect=e),this.disconnectHeaders=t,super.deactivate()}send(e,t={},r=""){const n=!1===(t=Object.assign({},t))["content-length"];n&&delete t["content-length"],this.publish({destination:e,headers:t,body:r,skipContentLengthHeader:n})}set reconnect_delay(e){this.reconnectDelay=e}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(e){this.onUnhandledMessage=e}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(e){this.onUnhandledReceipt=e}get heartbeat(){return this._heartbeatInfo}set heartbeat(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing}}class Ss{static client(e,t){null==t&&(t=us.default.protocolVersions());return new Cs((()=>new(Ss.WebSocketClass||WebSocket)(e,t)))}static over(e){let t;return"function"==typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=()=>e),new Cs(t)}}Ss.WebSocketClass=null,function(e){e.HIDDEN="HIDDEN",e.PUSHNOTIFICATION="PUSHNOTIFICATION",e.ARCHIVE="ARCHIVE"}(gs||(gs={})),function(e){e[e.TEXT=0]="TEXT",e[e.FILE=1]="FILE",e[e.LOCATION=2]="LOCATION"}(ms||(ms={})),function(e){e[e.OTHERS=4]="OTHERS",e[e.MINE=5]="MINE"}(vs||(vs={})),function(e){e.CONVERSATION_READ="28",e.MESSAGE_DELIVERED_1="04",e.MESSAGE_DELIVERED_2="MESSAGE_DELIVERED",e.MESSAGE_DELIVERED_3="DELIVERED",e.MT_MESSAGE_DELIVERED_READ_1="08",e.MT_MESSAGE_DELIVERED_READ_2="MT_MESSAGE_DELIVERED_READ",e.MT_MESSAGE_DELIVERED_READ_3="MESSAGE_DELIVERED_READ",e.MESSAGE_RECEIVED_1="01",e.MESSAGE_SENT="02",e.MESSAGE_READ="29",e.MESSAGE_DELETED="05"}(bs||(bs={}));var ks=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},As=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Ts=function(e){return ks(void 0,void 0,void 0,(function(){var t,r;return As(this,(function(n){return(t=e.events)&&t.onConversationRead&&(r=e.messageData.message.split(",")[0],t.onConversationRead(r)),[2]}))}))};var Is=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Fs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Ms=function(e){return Is(void 0,void 0,void 0,(function(){var t,r,n,o;return Fs(this,(function(i){return(t=e.events)&&t.onMessageDeleted&&(r=e.messageData.message.split(","),n=r[0],o=r[1],t.onMessageDeleted(o,n)),[2]}))}))};var Ns=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ps=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Os=function(e){return Ns(void 0,void 0,void 0,(function(){var t,r,n,o;return Ps(this,(function(i){return(t=e.events)&&t.onMessageDelivered&&(r=e.messageData.message.split(","),n=r[0],o=r[1],t.onMessageDelivered(o,n)),[2]}))}))};var Rs=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},js=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const xs=function(e){return Rs(void 0,void 0,void 0,(function(){var t,r,n,o;return js(this,(function(i){return(t=e.events)&&t.onMessageRead&&(r=e.messageData.message.split(","),n=r[0],o=r[1],t.onMessageRead(o,n)),[2]}))}))};var _s,Bs;!function(e){e.USER="user",e.GROUP="group"}(_s||(_s={})),function(e){e.UNKONWN="UNKONWN",e.RECEIVED="received",e.PENDING="pending",e.SENT="sent",e.DELIVERED="delivered",e.READ="read"}(Bs||(Bs={}));const Ls=Bs;var Us=function(e){var t=e.type,r=e.status,n=e.source;return 7===t||6===t||t===vs.OTHERS||0===t?Ls.RECEIVED:5===r?Ls.READ:4===r?Ls.DELIVERED:3===t||t===vs.MINE||1===t&&(0===n||1===n)?Ls.SENT:Ls.UNKONWN},zs=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ws=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Hs=function(e){return zs(void 0,void 0,void 0,(function(){var t,r,n,o,i,a,s,u;return Ws(this,(function(c){return t=e.events,r=null===(a=e.messageData)||void 0===a?void 0:a.message,Tc(n=function(e){return{key:e.key,messageKey:e.pairedMessageKey,messageText:e.message,fromUserId:e.contactIds,timeStamp:(null==e?void 0:e.createdAtTime)?new Date(e.createdAtTime):new Date,status:Us(e),isReply:e.type===vs.MINE,file:e.fileMeta,metadata:e.metadata,contentType:e.contentType,read:e.read,deliveredAtTime:e.deliveredAtTime,readAtTime:e.readAtTime}}(r))?(o=function(e){if(function(e){return!Tc(e)}(e))return null;var t=Ac(e,"action");if(Ic===t){var r=Ac(e,"name");if(r)return{subject:r}}else if(Fc===t){return{state:"0"===Ac(e,"state")?Sc.ACTIVE:Sc.CLOSED}}return null}(n),(i=r.clientGroupId)&&o&&(null===(s=null==t?void 0:t.onInboxChatUpdate)||void 0===s||s.call(t,i,o))):null===(u=null==t?void 0:t.onMessageReceived)||void 0===u||u.call(t,e.messageData),[2]}))}))};var Gs=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Vs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Ks=function(e){return Gs(void 0,void 0,void 0,(function(){var t;return Vs(this,(function(r){return(t=e.events)&&t.onMessageSent&&t.onMessageSent(e.messageData),[2]}))}))};var qs,Ys=((qs={})[bs.CONVERSATION_READ]=Ts,qs[bs.MESSAGE_DELETED]=Ms,qs[bs.MESSAGE_DELIVERED_1]=Os,qs[bs.MESSAGE_DELIVERED_2]=Os,qs[bs.MESSAGE_DELIVERED_3]=Os,qs[bs.MT_MESSAGE_DELIVERED_READ_1]=xs,qs[bs.MT_MESSAGE_DELIVERED_READ_2]=xs,qs[bs.MT_MESSAGE_DELIVERED_READ_3]=xs,qs[bs.MESSAGE_READ]=xs,qs[bs.MESSAGE_RECEIVED_1]=Hs,qs[bs.MESSAGE_SENT]=Ks,qs);function Js(e,t,r){var n;throw r instanceof Error?((n=new Error("".concat(e,": ").concat(t," - ").concat(r.toString()))).stack=r.stack,n.originalError=r):(n=new Error("".concat(e,": ").concat(t," - ").concat(String(r)))).originalError=r,n}var Qs,$s=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Zs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Xs=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.CONNETING=0]="CONNETING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(Qs||(Qs={}));var eu=function(){function e(e){var t=this;this.eventHandlers=[],this.reset=function(e){t.loginResult=e.loginResult,t.applicationId=e.applicationId,e.events&&(t.eventHandlers=Xs(Xs([],t.eventHandlers,!0),e.events,!0)),t.onSocketConnectError=e.onSocketConnectError},this.resetLoginResult=function(e){t.loginResult=e},this.getWebSocket=function(e){return void 0===e&&(e=!1),function(){if(t.webSocket&&!e)return t.webSocket;if(t.loginResult){var r=t.loginResult.websocketUrl,n=t.loginResult.websocketPort;r?(r=r.replace("https://",""),t.socketUrl="wss://".concat(r,":").concat(n,"/ws")):t.debugMessage("getWebSocket - invalid websocketUrl ".concat(r))}return t.webSocket=new WebSocket(t.socketUrl),t.webSocket.addEventListener("close",(function(){t.debugMessage("Websocket closed - refetch messages required"),t.isRefreshMessagesNeededFlag=!0})),t.webSocket}},this.getStompClient=function(e){return void 0===e&&(e=!1),t.stompClient&&!e||(t.stompClient=Ss.over(t.getWebSocket(e).bind(t)),t.stompClient.heartbeat.outgoing=1e4,t.stompClient.heartbeat.incoming=0,t.stompClient.reconnectDelay=0,t.stompClient.debug=function(){}),t.stompClient},this.onMessage=function(e){t.debugMessage("onMessage - method called");try{var r=JSON.parse(e.body);t.eventHandlers.forEach((function(e){!function(e){var t=e.messageData.type.split("_");t.shift();var r=t.join("_");Ys[e.messageData.type]?Ys[e.messageData.type](e):Ys[r]&&Ys[r](e)}({messageData:r,events:e})}))}catch(t){console.error("Error parsing message",e,t),Js("MESSAGE_PARSE_ERROR","Message parsing failed",t)}},this.getWebSocketState=function(){return t.webSocket?Qs[t.webSocket.readyState]:"< Undefined >"},this.getStompClientState=function(){return t.stompClient?"".concat(fs[t.stompClient.state]):"< Undefined >"},this.isConnected=function(){var e,r;return t.debugMessage("isConnected method called in applozicSocket - this.getWebSocketState() = ".concat(t.getWebSocketState())),(null===(e=t.webSocket)||void 0===e?void 0:e.readyState)===Qs.OPEN&&(null===(r=t.stompClient)||void 0===r?void 0:r.state)===fs.ACTIVE},this.isReconnectionRequired=function(){var e,r;return t.debugMessage("isReconnectionRequired - connectionPromiseStatus = ".concat(t.connectionPromiseStatus," - this.getWebSocketState() = ").concat(t.getWebSocketState()," - stompClient.state = ").concat(t.getStompClientState())),"PENDING"===t.connectionPromiseStatus?(t.debugMessage("reconnection not required - promise status is PENDING"),t.pendingConnectionCounter=t.pendingConnectionCounter+1,t.pendingConnectionCounter>20&&(t.debugMessage("Max number of pending connection iterations - force a new connection"),t.pendingConnectionCounter=0,!0)):qa(t.loginResult)?(t.debugMessage("reconnection required - Token has expired"),!0):(null===(e=t.webSocket)||void 0===e?void 0:e.readyState)===Qs.CLOSED||(null===(r=t.webSocket)||void 0===r?void 0:r.readyState)===Qs.CLOSING?(t.debugMessage("reconnection required - Websocket is CLOSED or CLOSING"),!0):(t.debugMessage("** reconnection NOT REQUIRED - Websocket is ".concat(t.getWebSocketState())),!1)},this.reconnectIfNeeded=function(){return t.isReconnectionRequired()?t.connect():t.connectionPromise},this.connect=function(){return $s(t,void 0,void 0,(function(){var e,t,r=this;return Zs(this,(function(n){switch(n.label){case 0:return e=this.isReconnectionRequired(),t="",this.debugMessage("connect - method called with force = ".concat(e," - stompClient.state = ").concat(this.getStompClientState()," - webSocket.readyState = ").concat(this.getWebSocketState())),this.connectionPromise&&!e?(this.debugMessage("connect - returning promise"),[2,this.connectionPromise]):(this.connectionPromise=new Promise((function(e,t){r.connectionPromiseResolver=e,r.connectionPromiseRejecter=t})),this.connectionPromiseStatus="PENDING",this.loginResult?[3,2]:[4,this.refreshToken(this.loginResult)]);case 1:if(!(t=n.sent()))return console.error("Unable to connect without a valid loginResult"),[2,null];n.label=2;case 2:return this.debugMessage("connect - calling stomp client connect"),t=this.loginResult.authToken,qa(this.loginResult)?(this.debugMessage("connect - token has expired, we need to refresh the token"),[4,this.refreshToken(this.loginResult)]):[3,4];case 3:if(!(t=n.sent()))return console.warn("Unable to connect Client - no valid token"),[2,null];n.label=4;case 4:return this.getStompClient(e).connect(this.applicationId,t,this.onConnect,this.onError,this.onClose,"/"),[2,this.connectionPromise]}}))}))},this.clearOnErrorTimeout=function(){t.debugMessage("clearOnErrorTimeout - method called"),t.onErrorTimeout&&(clearInterval(t.onErrorTimeout),t.onErrorTimeout=null)},this.onConnect=function(){return $s(t,void 0,void 0,(function(){return Zs(this,(function(e){return this.debugMessage("onConnect - method called"),this.clearOnErrorTimeout(),this.onErrorTimeout&&clearInterval(this.onErrorTimeout),this.connectionPromiseResolver&&(this.connectionPromiseResolver(this.getStompClient()),this.connectionPromiseStatus="FULFILLED"),this.sendStatus(!0),this.subscribe("/topic/".concat(this.loginResult.token),this.onMessage),this.eventHandlers.forEach((function(e){e.onConnect&&e.onConnect()})),this.reSubscribeToTypingStatus(),[2]}))}))},this.subscribe=function(e,r){return $s(t,void 0,void 0,(function(){var t;return Zs(this,(function(n){switch(n.label){case 0:return this.debugMessage("subscribe - method called"),t=this.getStompClient(),[4,this.reconnectIfNeeded()];case 1:return n.sent(),[4,this.waitForWebSocketOpen()];case 2:return n.sent(),t.subscribe(e,r),[2]}}))}))},this.unSubscribe=function(e){return $s(t,void 0,void 0,(function(){var t;return Zs(this,(function(r){switch(r.label){case 0:return this.debugMessage("unSubscribe - method called"),t=this.getStompClient(),[4,this.reconnectIfNeeded()];case 1:return r.sent(),t.unsubscribe(e),[2]}}))}))},this.onError=function(e){var r;t.debugMessage("onError - method called - rejecting connection promise - error "+JSON.stringify(e)),t.connectionPromiseStatus="REJECTED",t.connectionPromiseRejecter&&t.connectionPromiseRejecter(e),"Bad CONNECT"===(null===(r=null==e?void 0:e.headers)||void 0===r?void 0:r.message)?(t.debugMessage("Bad CONNECT - running onSocketConnectError"),t.onSocketConnectError()):(Js("WEBSOCKET_ERROR","WebSocket connection failed",e),t.debugMessage("onError method called but the message is not Bad CONNECT -error = ".concat(JSON.stringify(e))),console.error("WEBSOCKET_ERROR: Non-authentication WebSocket error occurred",{error:e,timestamp:(new Date).toISOString(),applicationId:t.applicationId}))},this.clearConnectionPromise=function(){t.debugMessage("clearConnectionPromise - method called"),t.connectionPromise&&(t.connectionPromise=null),t.connectionPromiseResolver&&(t.connectionPromiseResolver=null),t.connectionPromiseRejecter&&(t.connectionPromiseRejecter=null),t.connectionPromiseStatus="INITIAL"},this.onClose=function(e){t.debugMessage("onClose - method called - "+JSON.stringify(e)),t.stompClient.state=2,t.clearConnectionPromise(),!t.onErrorTimeout&&t.loginResult&&(t.debugMessage("Running onClose - set new Interval"),t.onErrorTimeout=setInterval((function(){t.connect().catch((function(e){console.error("WEBSOCKET_RECONNECT_ERROR: Reconnection attempt failed",e),Js("WEBSOCKET_RECONNECT_ERROR","Reconnection attempt failed",e)}))}),3e3)),t.debugMessage("onClose - connectionPromiseStatus = ".concat(t.connectionPromiseStatus))},this.sendStatus=function(e){t.debugMessage("sendStatus - method called");var r=t.loginResult,n=r.token,o=r.deviceKey,i="".concat(n,",").concat(o,",").concat(e?1:0);t.sendMessage("/topic/status-v2",i)},this.disconnect=function(){return $s(t,void 0,void 0,(function(){return Zs(this,(function(e){switch(e.label){case 0:return this.debugMessage("disconnect - method called"),this.stompClient&&this.stompClient.connected?[4,this.stompClient.deactivate()]:[3,3];case 1:return e.sent(),[4,this.waitForStompClientDisconnected()];case 2:e.sent(),e.label=3;case 3:return this.loginResult=null,this.debugMessage("setting loginResult to null!! (for the applozicSocket)"),this.clearOnErrorTimeout(),this.onErrorTimeout&&clearInterval(this.onErrorTimeout),this.clearConnectionPromise(),[2]}}))}))},this.waitForStompClientDisconnected=function(){return $s(t,void 0,void 0,(function(){return Zs(this,(function(e){return[2,this.waitForStompClientState(fs.INACTIVE)]}))}))},this.waitForStompClientState=function(e){return $s(t,void 0,void 0,(function(){var t,r,n=this;return Zs(this,(function(o){return t=null,r=new Promise((function(e){t=e})),setTimeout((function(){n.debugMessage("waitForStompClientState - waiting for correct stomp client state"),n.stompClient.state===e&&(n.debugMessage("waitForStompClientState - stompClient in state "+fs[e]),t())}),100),[2,r]}))}))},this.waitForWebSocketOpen=function(){return $s(t,void 0,void 0,(function(){var e,t,r=this;return Zs(this,(function(n){return e=null,t=new Promise((function(t){e=t})),setTimeout((function(){var t;r.debugMessage("waitForWebSocketOpen - waiting for correct webSocket state"),(null===(t=r.webSocket)||void 0===t?void 0:t.readyState)===Qs.OPEN&&(r.debugMessage("waitForWebSocketOpen - WebSocket Open "),e())}),100),[2,t]}))}))},this.sendMessage=function(e,r){return $s(t,void 0,void 0,(function(){var t;return Zs(this,(function(n){switch(n.label){case 0:return this.debugMessage("sendMessage - method called"),[4,this.reconnectIfNeeded()];case 1:return null===n.sent()?(console.warn("Unable to send Message - reconnection failed"),[2]):(t=this.getStompClient(),[4,this.waitForWebSocketOpen()]);case 2:return n.sent(),t.send(e,{"content-type":"text/plain"},r),[2]}}))}))},this.isRefreshMessagesNeeded=function(){var e=t.isRefreshMessagesNeededFlag;return t.isRefreshMessagesNeededFlag=!1,e},this.addEventListener=function(e){e&&t.eventHandlers.push(e)},this.setEventListeners=function(e){t.eventHandlers=e},this.id=Math.round(1e4*Math.random()),this.reset(e),this.debugMessage("New Socket Created with Id ".concat(this.id)),this.refreshToken=e.refreshToken,this.pendingConnectionCounter=0,this.reSubscribeToTypingStatus=e.reSubscribeToTypingStatus,this.socketUrl="",this.isRefreshMessagesNeededFlag=!1}return e.prototype.debugMessage=function(e){L(this.constructor.name,this.id,e)},e}();const tu=eu;var ru=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},nu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const ou=function(e){return function(t){return ru(void 0,void 0,void 0,(function(){return nu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.POST,"/rest/ws/user/v2/detail",{data:{userIdList:t},useAuth:!0})];case 1:return[2,r.sent().response]}}))}))}};var iu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},au=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const su=function(e){return function(t){return iu(void 0,void 0,void 0,(function(){return au(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.POST,"/rest/ws/user/update",{data:t,useAuth:!0})];case 1:return[2,r.sent().response]}}))}))}};const uu=function(e){return{updateUserDetails:su(e),getUserDetails:ou(e)}};var cu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},lu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const pu=function(e){return function(t){return cu(void 0,void 0,void 0,(function(){return lu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/file/url",{query:{key:decodeURI(t)},useAuth:!0,json:!1})];case 1:return[2,r.sent()]}}))}))}};var du=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},hu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const fu=function(e){return function(t){return du(void 0,void 0,void 0,(function(){var r,n,o,i;return hu(this,(function(a){switch(a.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/aws/file/url",{apiHost:"https://applozic.appspot.com",query:{data:"".concat(Date.now())},useAuth:!1,json:!1})];case 1:return r=a.sent(),n=new URL(r),o="".concat(n.protocol,"//").concat(n.host),i=r.replace(o,""),[4,e.uploadFile(i,"files[]",t,{apiHost:o})];case 2:return[2,a.sent().fileMeta]}}))}))}};var yu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},gu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const mu=function(e){return function(t){return yu(void 0,void 0,void 0,(function(){return gu(this,(function(r){switch(r.label){case 0:return[4,e.uploadFile("/rest/ws/upload/image","file",t,{query:{aclsPrivate:"true"},useAuth:!0})];case 1:return[2,r.sent()]}}))}))}};const vu=function(e){return e.isS3Enabled?mu(e):fu(e)};const bu=function(e){return{upload:vu(e),getDownloadUrl:pu(e)}};var Du=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},wu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Eu=function(e){return function(t){return Du(void 0,void 0,void 0,(function(){return wu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.POST,"/rest/ws/group/v2/create",{data:t,useAuth:!0})];case 1:return[2,r.sent().response]}}))}))}};const Cu=function(e){return{createGroup:Eu(e)}};var Su=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ku=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Au=function(e){return function(t,r){return Su(void 0,void 0,void 0,(function(){return ku(this,(function(n){switch(n.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/message/v2/delete",{query:{key:t,deleteForAll:r?"true":void 0},useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};var Tu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Iu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Fu=function(e){return function(){return Tu(void 0,void 0,void 0,(function(){return Iu(this,(function(t){switch(t.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/message/delete/all",{useAuth:!0})];case 1:return[2,t.sent().response]}}))}))}};var Mu=function(){return Mu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mu.apply(this,arguments)},Nu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Pu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Ou=function(e){return function(t){return Nu(void 0,void 0,void 0,(function(){return Pu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/message/delete/conversation",{query:Mu({},t),useAuth:!0,json:!1})];case 1:return[2,r.sent().response]}}))}))}};var Ru=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ju=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const xu=function(e){return function(t){return Ru(void 0,void 0,void 0,(function(){return ju(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.POST,"/rest/ws/message/delete",{query:{days:"".concat(t)},useAuth:!0})];case 1:return[2,r.sent().response]}}))}))}};var _u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Bu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Lu=function(e){return function(t){return _u(void 0,void 0,void 0,(function(){return Bu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/message/delivered",{query:{key:t},useAuth:!0,json:!1})];case 1:return[2,r.sent().response]}}))}))}};var Uu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},zu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Wu=function(e){return function(t){return Uu(void 0,void 0,void 0,(function(){return zu(this,(function(r){switch(r.label){case 0:return[4,e.makeApiCall(Ga.GET,"/rest/ws/message/read",{query:{key:t},useAuth:!0,json:!1})];case 1:return[2,r.sent().response]}}))}))}};var Hu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Gu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Vu=function(e){return function(t){return Hu(void 0,void 0,void 0,(function(){var r,n,o;return Gu(this,(function(i){switch(i.label){case 0:return r={},((null==t?void 0:t.startIndex)||0===(null==t?void 0:t.startIndex))&&(r.startIndex="".concat(t.startIndex)),(null==t?void 0:t.endTime)&&(r.endTime="".concat(t.endTime)),(null==t?void 0:t.userId)||(null==t?void 0:t.groupId)||(null==t?void 0:t.clientGroupId)?(n=t,r.pageSize=n.pageSize||50,n.userId&&(r.userId=n.userId),n.groupId&&(r.groupId=n.groupId),n.clientGroupId&&(r.clientGroupId=n.clientGroupId)):(n=t,r.mainPageSize=null!==(o=null==n?void 0:n.mainPageSize)&&void 0!==o?o:50),[4,e.makeApiCall(Ga.GET,"/rest/ws/message/v2/list",{query:r,useAuth:!0})];case 1:return[2,i.sent().response]}}))}))}};var Ku=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},qu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const Yu=function(e){return function(t){return Ku(void 0,void 0,void 0,(function(){return qu(this,(function(r){switch(r.label){case 0:return L("sendMessageApi",0,"Sending a message via POST"),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:t,useAuth:!0})];case 1:return[2,r.sent().response]}}))}))}};var Ju,Qu;function $u(e,t){var r=t.payload,n=t.formData,o=t.formAction,i=t.requestType;return{templateId:e,contentType:"300",payload:JSON.stringify(r),formData:JSON.stringify(n),formAction:o,requestType:i}}!function(e){e.BUTTON="3",e.SUGGESTED_REPLIES="6",e.IMAGE_CAPTION="9",e.LIST="7",e.CARD="10",e.ACTION_BUTTON="11",e.DROPDOWN="12",e.SYSTEM_MESSAGE="13"}(Ju||(Ju={})),function(e){e.NOTIFICATION_SUCCESS="NOTIFICATION_SUCCESS",e.NOTIFICATION_INFO="NOTIFICATION_INFO",e.NOTIFICATION_WARNING="NOTIFICATION_WARNING",e.NOTIFICATION_DANGER="NOTIFICATION_DANGER",e.MESSAGE="MESSAGE"}(Qu||(Qu={}));var Zu=function(){return Zu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zu.apply(this,arguments)},Xu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ec=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const tc=function(e){return function(t){return Xu(void 0,void 0,void 0,(function(){var r;return ec(this,(function(n){switch(n.label){case 0:return r=Zu(Zu({},t),{metadata:$u(Ju.BUTTON,t.metadata)}),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:r,useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};var rc=function(){return rc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rc.apply(this,arguments)},nc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},oc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const ic=function(e){return function(t){return nc(void 0,void 0,void 0,(function(){var r;return oc(this,(function(n){switch(n.label){case 0:return r=rc(rc({},t),{metadata:$u(Ju.CARD,t.metadata)}),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:r,useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};var ac=function(){return ac=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ac.apply(this,arguments)},sc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},uc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const cc=function(e){return function(t){return sc(void 0,void 0,void 0,(function(){var r;return uc(this,(function(n){switch(n.label){case 0:return r=ac(ac({},t),{metadata:$u(Ju.IMAGE_CAPTION,t.metadata)}),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:r,useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};var lc=function(){return lc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lc.apply(this,arguments)},pc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},dc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const hc=function(e){return function(t){return pc(void 0,void 0,void 0,(function(){var r;return dc(this,(function(n){switch(n.label){case 0:return r=lc(lc({},t),{metadata:$u(Ju.LIST,t.metadata)}),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:r,useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};var fc=function(){return fc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fc.apply(this,arguments)},yc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},gc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const mc=function(e){return function(t){return yc(void 0,void 0,void 0,(function(){var r;return gc(this,(function(n){switch(n.label){case 0:return r=fc(fc({},t),{metadata:$u(Ju.SUGGESTED_REPLIES,t.metadata)}),[4,e.makeApiCall(Ga.POST,"/rest/ws/message/v2/send",{data:r,useAuth:!0})];case 1:return[2,n.sent().response]}}))}))}};const vc=function(e){return{deleteAll:Fu(e),deleteConversation:Ou(e),deleteOlderThan:xu(e),delete:Au(e),list:Vu(e),send:Yu(e),sendButtons:tc(e),sendSuggestedResponses:mc(e),sendImageWithCaption:cc(e),sendList:hc(e),sendCards:ic(e),markAsDelivered:Lu(e),markAsRead:Wu(e)}};var bc=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dc=function(){return Dc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dc.apply(this,arguments)},wc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ec=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Cc=Xt.keys.LOGIN_RESULT;!function(e){function t(t,r){var n,o=this;return(o=e.call(this,t,r)||this).applozicSocket=void 0,o.events=[],o.initializedPromise=null,o.groupIdSubscriptions=[],o.getFilesApiHost=function(){var e;return null===(e=o.loginResult)||void 0===e?void 0:e.fileBaseUrl},o.contacts=uu(o),o.files=bu(o),o.messages=vc(o),o.groups=Cu(o),o.setupTokenExpirationTimeout=function(){o.onTokenExpirationTimeout&&clearTimeout(o.onTokenExpirationTimeout);var e=o.sessionDataManager.getLoginResult(),t=Ka(e);t>0?(o.debugMessage("Setting Timeout to refreshToken in ".concat(t/1e3," segs")),o.onTokenExpirationTimeout=setTimeout((function(){o.debugMessage("Refresh Timeout on Token expiration!!"),o.refreshToken(e).catch((function(e){console.error("TOKEN_EXPIRATION_ERROR: Token expiration refresh failed",e),Js("TOKEN_EXPIRATION_ERROR","Automatic token refresh on expiration failed",e)}))}),t)):o.debugMessage("millis to Token Exp is = ".concat(t," - No new timeout set"))},o.disconnect=function(){return wc(o,void 0,void 0,(function(){var e,t=this;return Ec(this,(function(r){return e=new Promise((function(e){return wc(t,void 0,void 0,(function(){return Ec(this,(function(t){switch(t.label){case 0:return this.debugMessage("disconnect - method called in applozicClient class"),this.loginResult=null,[4,this.logout()];case 1:return t.sent(),this.applozicSocket?(this.debugMessage("logout - calling socket disconnect"),[4,this.applozicSocket.disconnect()]):[3,3];case 2:t.sent(),t.label=3;case 3:return e(),[2]}}))}))})),[2,e]}))}))},o.sendTypingStatus=function(e,t,r,n){var i,a,s=null===(i=o.loginResult)||void 0===i?void 0:i.userId,u=o.getTypingStatusTopic(r,e,n),c=o.getTypingStatusMessage(r,e,s,t);null===(a=o.applozicSocket)||void 0===a||a.sendMessage(u,c)},o.getTypingStatusTopic=function(e,t,r){return e===_s.USER?"/topic/typing-".concat(o.applicationId,"-").concat(t):"/topic/typing-".concat(o.applicationId,"-").concat(t,"-").concat(r)},o.getTypingStatusMessage=function(e,t,r,n){return e===_s.USER?"".concat(o.applicationId,",").concat(r,",").concat(n?1:0):"".concat(o.applicationId,",group,").concat(t,",").concat(r,",").concat(n?1:0)},o.subscribeToTypingStatus=function(){return wc(o,void 0,void 0,(function(){var e,t=this;return Ec(this,(function(r){return this.debugMessage("subscribe to typing indicators"),this.applozicSocket&&this.applozicSocket.subscribe("/topic/typing-".concat(this.applicationId,"-").concat(null===(e=this.loginResult)||void 0===e?void 0:e.userId),(function(e){try{var r=e.body.split(","),n=(r[0],r[1]),o=r[2];t.events.forEach((function(e){e.onTypingStatus&&e.onTypingStatus(n,parseInt(o))}))}catch(t){console.error("Error parsing message",t,e)}})),[2]}))}))},o.subscribeToTypingStatusForGroup=function(e){return wc(o,void 0,void 0,(function(){var t,r,n=this;return Ec(this,(function(o){return this.groupIdSubscriptions.includes(e)||this.groupIdSubscriptions.push(e),this.applozicSocket&&(t="".concat(this.applicationId,"-").concat(e,"-").concat(null===(r=this.loginResult)||void 0===r?void 0:r.userId),this.applozicSocket.subscribe("/topic/typing-".concat(t),(function(t){var r;try{var o=t.body.split(","),i=o[1],a=o[o.length-1];if(i===(null===(r=n.loginResult)||void 0===r?void 0:r.userId))return;n.events.forEach((function(t){t.onTypingStatus&&t.onTypingStatus(e,parseInt(a))}))}catch(e){console.error("Error parsing message",e,t)}}))),[2]}))}))},o.reSubscribeToTypingStatus=function(){return wc(o,void 0,void 0,(function(){var e=this;return Ec(this,(function(t){switch(t.label){case 0:return[4,this.subscribeToTypingStatus()];case 1:return t.sent(),this.groupIdSubscriptions.forEach((function(t){e.subscribeToTypingStatusForGroup(t)})),[2]}}))}))},o.waitForOnlineStatus=function(){return wc(o,void 0,void 0,(function(){var e,t,r,n=this;return Ec(this,(function(o){return e=null,t=new Promise((function(t){e=t})),r=setInterval((function(){n.debugMessage("waitForOnlineStatus - waiting for network online"),navigator.onLine&&(n.debugMessage("waitForOnlineStatus - Network is online "),e(),clearInterval(r))}),5e3),[2,t]}))}))},o.makeApiCall=function(e,t,r){return wc(o,void 0,void 0,(function(){var n,o,i,a,s,u,c,l,p,d;return Ec(this,(function(h){switch(h.label){case 0:return n=null===(c=null==r?void 0:r.json)||void 0===c||c,this.debugMessage("makeApiCall method called"),this.isConnected()?[3,2]:(this.debugMessage("makeApiCall - client is not connected. Connecting..."),[4,this.connect()]);case 1:if(h.sent(),!this.isConnected())throw console.warn("Unable to complete api call - No connection"),new Error("Unable to establish a new connection");h.label=2;case 2:return(null==r?void 0:r.useAuth)&&qa(this.loginResult)?(this.debugMessage("makeApiCall - calling refreshToken"),[4,this.refreshToken(this.loginResult)]):[3,4];case 3:if(!h.sent())throw console.warn("Unable to complete api call - No valid token to continue"),new Error("Unable to complete api call - No valid token to continue");h.label=4;case 4:i=this.getAgent(!!(null==r?void 0:r.useAuth)),(null==r?void 0:r.query)&&i.query(r.query),n&&i.set("Accept","application/json"),a=null!==(p=null!==(l=null==r?void 0:r.apiHost)&&void 0!==l?l:this.host)&&void 0!==p?p:Ha.APPLOZIC_HOST,h.label=5;case 5:return h.trys.push([5,11,,12]),e!==Ga.GET?[3,7]:[4,i.get("".concat(a).concat(t))];case 6:return o=h.sent(),[3,10];case 7:return e!==Ga.POST?[3,9]:[4,i.post("".concat(a).concat(t)).send(null!==(d=null==r?void 0:r.data)&&void 0!==d?d:null)];case 8:return o=h.sent(),[3,10];case 9:o=null,h.label=10;case 10:if(null!==o)return n?[2,o.body]:[2,o.text];throw console.error("Brandmessenger: API call failed"),new Error("Brandmessenger: API call failed");case 11:if(s=h.sent(),u="",s instanceof Error&&(u=s.message),Js("API_CALL_FAILURE_".concat(e,"_").concat(t.replace(/[^a-zA-Z0-9]/g,"_")),"".concat(e," ").concat(t," failed"),s),"UnAuthorized Access"!==u)throw s;return console.error("Unable to retry messages - unauthorized access - reset session"),this.sessionDataManager.resetSession(),[3,12];case 12:return[2]}}))}))},o.addEventListener=function(e){o.useSocket&&e&&(o.events.push(e),o.applozicSocket&&o.applozicSocket.setEventListeners(o.events))},o.removeEventListener=function(e){o.events=o.events.filter((function(t){return t!==e})),o.useSocket&&e&&o.applozicSocket&&o.applozicSocket.setEventListeners(o.events)},o.isConnected=function(){return o.debugMessage("isConnected method called in applozic class - this.applozicSocket.isConnected() = ".concat(o.applozicSocket.isConnected())),o.applozicSocket.isConnected()},o.isRefreshMessagesNeeded=function(){return o.applozicSocket.isRefreshMessagesNeeded()},o.connect=function(){return wc(o,void 0,void 0,(function(){return Ec(this,(function(e){switch(e.label){case 0:return this.debugMessage("connect - Connect Client"),[4,this.applozicSocket.connect()];case 1:return e.sent(),[2]}}))}))},o.useSocket=null===(n=null==r?void 0:r.useSocket)||void 0===n||n,(null==r?void 0:r.events)&&(o.events=[r.events]),o}bc(t,e),t.prototype.reloadLoginResultFromSession=function(){e.prototype.reloadLoginResultFromSession.call(this),this.applozicSocket.resetLoginResult(this.loginResult)},t.prototype.postLogin=function(t){return wc(this,void 0,void 0,(function(){var r=this;return Ec(this,(function(n){switch(n.label){case 0:return this.debugMessage("postLogin - method called"),[4,e.prototype.postLogin.call(this,t)];case 1:return n.sent(),this.useSocket?(this.applozicSocket?this.applozicSocket.reset({applicationId:this.applicationId,loginResult:t,events:this.events,onSocketConnectError:function(){r.debugMessage("calling refreshToken from onSocketConnectError"),r.refreshToken(r.loginResult).catch((function(e){console.error("SOCKET_AUTH_ERROR: Socket auth refresh failed",e),Js("SOCKET_AUTH_ERROR","Socket auth refresh failed",e)}))},refreshToken:this.refreshToken,reSubscribeToTypingStatus:this.reSubscribeToTypingStatus.bind(this)}):this.applozicSocket=new tu({applicationId:this.applicationId,loginResult:t,events:this.events,onSocketConnectError:function(){r.debugMessage("calling refreshToken from onSocketConnectError*"),r.refreshToken(r.loginResult).catch((function(e){console.error("SOCKET_AUTH_ERROR: Socket auth refresh failed (new socket)",e),Js("SOCKET_AUTH_ERROR","Socket auth refresh failed (new socket)",e)}))},refreshToken:this.refreshToken.bind(this),reSubscribeToTypingStatus:this.reSubscribeToTypingStatus.bind(this)}),this.debugMessage("postLogin - calling applozicSocket.connect"),[4,this.applozicSocket.connect()]):[3,3];case 2:n.sent(),this.setupTokenExpirationTimeout(),n.label=3;case 3:return[2,t]}}))}))},t.prototype.init=function(){return wc(this,void 0,void 0,(function(){var t=this;return Ec(this,(function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this)];case 1:return r.sent(),this.initializedPromise?[2,this.initializedPromise]:(this.initializedPromise=new Promise((function(e){return wc(t,void 0,void 0,(function(){var t,r;return Ec(this,(function(n){switch(n.label){case 0:if(!this.sessionDataManager)return[3,9];n.label=1;case 1:return n.trys.push([1,8,,9]),(t=this.sessionDataManager.getLoginResult())?qa(t)?[4,this.refreshToken(t)]:[3,3]:[3,6];case 2:return n.sent(),[3,5];case 3:return[4,this.postLogin(t)];case 4:n.sent(),n.label=5;case 5:return[3,7];case 6:this.sessionDataManager.remove(Cc),n.label=7;case 7:return[3,9];case 8:return r=n.sent(),console.error("An error occurred while initializing session (refresh token or postlogin)",r),[3,9];case 9:return e(),[2]}}))}))})),[2,this.initializedPromise])}}))}))},t.prototype.logout=function(){return wc(this,void 0,void 0,(function(){return Ec(this,(function(t){switch(t.label){case 0:return this.debugMessage("logout method called"),this.onTokenExpirationTimeout&&clearTimeout(this.onTokenExpirationTimeout),[4,e.prototype.logout.call(this)];case 1:return t.sent(),[2]}}))}))},t.prototype.refreshToken=function(e){return wc(this,void 0,void 0,(function(){var t;return Ec(this,(function(r){switch(r.label){case 0:return navigator.onLine?[3,2]:(this.debugMessage("refreshToken - Waiting for Available network connection before attempting to refresh token"),[4,this.waitForOnlineStatus()]);case 1:r.sent(),r.label=2;case 2:return this.refreshTokenFixed&&e?[4,this.callRefreshTokenEndpoint(e)]:[3,4];case 3:return[2,r.sent()];case 4:return this.reconnectBrandMessengerClient?[4,this.reconnectBrandMessengerClient()]:[3,6];case 5:return(t=r.sent().applozicAuthToken)&&(this.reloadLoginResultFromSession(),this.postLogin(this.loginResult)),[2,t];case 6:throw this.debugMessage("No reconnectBrandMessengerClient function provided"),this.sessionDataManager.resetSession(),new Error("Unable to reconnect Brand Messenger Client - not reconnect function provided")}}))}))},t.prototype.callRefreshTokenEndpoint=function(e){var t;return wc(this,void 0,void 0,(function(){var r,n,o,i,a,s,u;return Ec(this,(function(c){switch(c.label){case 0:r="/rest/ws/register/refresh/token",(n=(0,Wa.agent)()).set(Ya(e,this.applicationId)),n.set("Accept","application/json"),o=null!==(t=this.host)&&void 0!==t?t:Ha.APPLOZIC_HOST,i=null,c.label=1;case 1:return c.trys.push([1,3,,5]),[4,n.post("".concat(o).concat(r)).send({applicationId:this.applicationId,userId:e.userId})];case 2:return i=c.sent(),[3,5];case 3:return a=c.sent(),console.error("BrandMessenger unable to refreshToken",a),Js("TOKEN_REFRESH_ERROR","Failed to refresh authentication token",a),[4,this.disconnect()];case 4:return c.sent(),[3,5];case 5:return null!==i&&"error"!==(null==(s=i.body)?void 0:s.status)&&(u=i.body.response)?(this.loginResult=Dc(Dc({},e),{authToken:u}),this.postLogin(Dc(Dc({},e),{authToken:u})),[2,u]):[2]}}))}))}}(ss);var Sc;!function(e){e[e.ACTIVE=0]="ACTIVE",e[e.CLOSED=1]="CLOSED"}(Sc||(Sc={}));var kc=function(e){var t;return!!e&&!!e.metadata&&"300"===(null===(t=e.metadata)||void 0===t?void 0:t.contentType)};function Ac(e,t,r){var n,o;return null!==(o=null===(n=e.metadata)||void 0===n?void 0:n[t])&&void 0!==o?o:r}function Tc(e){return"true"===Ac(e,"hide")}var Ic="5",Fc="11";function Mc(e){var t=Nc();return function(){var r,n=Ze(e);if(t){var o=Ze(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return $e(this,r)}}function Nc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Nc=function(){return!!e})()}var Pc=function(e){Qe(i,e);var r,o=Mc(i);function i(){return t(this,i),o.apply(this,arguments)}return n(i,[{key:"getConversation",value:(r=qo(Jo().mark((function e(){var t,r;return Jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.SDKProxy.getSDK(),e.next=3,t.getConversation();case 3:return r=e.sent,e.abrupt("return",this.convertConversationToV1Format(r));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"convertConversationToV1Format",value:function(e){var t=this,r=e.messages.sort((function(e,t){return e.createdAtTime-t.createdAtTime})).map((function(e){return t.convertMessageToV1Format(e)})),n=this.getFirstMessage();return e.messages=n?[n].concat(N(r)):r,e}},{key:"getFirstMessage",value:function(){var e=this.SDKProxy.getSDK().activatingRule;if(null!=e&&e.includeFirstMessageChatInConvo){var t,r=null===(t=e.message)||void 0===t?void 0:t.text;if(r)return{type:"text",role:"appMaker",text:r}}return null}},{key:"convertMessageToV1Format",value:function(e){var t,r,n,o={type:"text",role:e.type===vs.MINE?"appUser":"appMaker",received:e.createdAtTime/1e3,text:e.message?e.message:""};if(kc(e)&&e.metadata){var i=function(e){var t,r=e.payload,n=e.formData,o=e.formAction,i=e.requestType;try{t=JSON.parse(r)}catch(e){console.error("Unable to parse RichtTextContent payload with value = ".concat(r," - error = ").concat(e))}return{payload:t,formData:n?JSON.parse(n):void 0,formAction:o,requestType:i}}(e.metadata),a=i.payload;switch(e.metadata.templateId){case Ju.BUTTON:return o.type="form",o;case Ju.SUGGESTED_REPLIES:var s=Yt(this.language).suggestedReplies||"";return o.text="".concat(s.toUpperCase(),"\n").concat(o.text," \n"),a.forEach((function(e,t){var r=0===t?"":" | ";o.text="".concat(o.text).concat(r).concat(e.title)})),o;case Ju.IMAGE_CAPTION:return o.type="image",a.forEach((function(e){o.altText=e.caption,o.mediaUrl=e.url})),o;case Ju.LIST:return o;case Ju.CARD:var u=Yt(this.language).cardCarousel||"";return o.text="".concat(u.toUpperCase(),"\n").concat(o.text),o;case Ju.DROPDOWN:var c=a.placeholder;return o.text="".concat(o.text,"\n\n").concat(c),a.options.forEach((function(e){o.text=o.text+"\n- ".concat(e.displayText)})),o}}return null!==(t=e.fileMeta)&&void 0!==t&&t.thumbnailUrl||null!==(r=e.fileMeta)&&void 0!==r&&r.thumbnailBlobKey?(o.type="image",o.altText=e.fileMeta.name,o.mediaUrl=e.fileMeta.url||e.fileMeta.thumbnailUrl,o):null!==(n=e.fileMeta)&&void 0!==n&&n.url&&"text"===o.type?(o.type="file",o.altText=e.fileMeta.name,o.mediaUrl=e.fileMeta.url,o):o}}]),i}(La),Oc=function(){function e(r,n,o,i,a,s){t(this,e),this.menuItems=[],this.iframeStyleHandler=n,this.soundPlayer=i,this.printHandler=new Pc(o,a,s),this.language=a,this.printerIcon=this.convertSVGbase64IconToSVGNode("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxN3B4IiB2aWV3Qm94PSIwIDAgMTYgMTciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+cDwvdGl0bGU+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRGVza3RvcC1IRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYwOC4wMDAwMDAsIC0yMjIuMDAwMDAwKSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTYyMC41LDIzOC4yNTAwNTQgQzYyMC43NzYyNDUsMjM4LjI1MDA1NCA2MjEsMjM4LjAyNjI5OSA2MjEsMjM3Ljc1MDA1NCBMNjIxLDIzNC4yNTAwNTQgTDYyMy41LDIzNC4yNTAwNTQgQzYyMy43NzYyNDUsMjM0LjI1MDA1NCA2MjQsMjM0LjAyNjI5OSA2MjQsMjMzLjc1MDA1NCBMNjI0LDIzMC43NTAwNTQgQzYyNCwyMjkuMzY5NDM5IDYyMi44ODA2MTUsMjI4LjI1MDA1NCA2MjEuNSwyMjguMjUwMDU0IEw2MjEsMjI4LjI1MDA1NCBMNjIxLDIyNS42NjQxMTcgQzYyMSwyMjUuMzk4Nzk3IDYyMC44OTQ2ODQsMjI1LjE0NDczOCA2MjAuNzA3MTg0LDIyNC45NTY5MzMgTDYxOC4yOTI4MTYsMjIyLjU0Mjg3IEM2MTguMTA1MzE2LDIyMi4zNTUzNyA2MTcuODUwOTUyLDIyMi4yNTAwNTQgNjE3LjU4NTYzMiwyMjIuMjUwMDU0IEw2MTEuOTUyNTE1LDIyMi4yNTAwNTQgQzYxMS40MjYyMzksMjIyLjI1MDA1NCA2MTEsMjIyLjY5Nzg2OSA2MTEsMjIzLjI1MDA1NCBMNjExLDIyOC4yNTAwNTQgTDYxMC41LDIyOC4yNTAwNTQgQzYwOS4xMTkzODUsMjI4LjI1MDA1NCA2MDgsMjI5LjM2OTQzOSA2MDgsMjMwLjc1MDA1NCBMNjA4LDIzMy43NTAwNTQgQzYwOCwyMzQuMDI2Mjk5IDYwOC4yMjM3NTUsMjM0LjI1MDA1NCA2MDguNSwyMzQuMjUwMDU0IEw2MTEsMjM0LjI1MDA1NCBMNjExLDIzNy43NTAwNTQgQzYxMSwyMzguMDI2Mjk5IDYxMS4yMjM3NTUsMjM4LjI1MDA1NCA2MTEuNSwyMzguMjUwMDU0IEw2MjAuNSwyMzguMjUwMDU0IFogTTYyMCwyMjguMjUwMDU0IEw2MTIuMDAwNjEsMjI4LjI1MDA1NCBMNjEyLjAwMzc1NCwyMjMuMjUwMDU0IEw2MTcsMjIzLjI1MDA1NCBMNjE3LDIyNS4yNTAwNTQgQzYxNywyMjUuODAyMjM5IDYxNy40NDc4MTUsMjI2LjI1MDA1NCA2MTgsMjI2LjI1MDA1NCBMNjIwLDIyNi4yNTAwNTQgTDYyMCwyMjguMjUwMDU0IFogTTYxOS41ODU5MzgsMjI1LjI1MDA1NCBMNjE4LDIyNS4yNTAwNTQgTDYxOCwyMjMuNjY0MTE3IEw2MTkuNTg1OTM4LDIyNS4yNTAwNTQgWiBNNjIzLDIzMy4yNTAwNTQgTDYwOSwyMzMuMjUwMDU0IEw2MDksMjMwLjc1MDA1NCBDNjA5LDIyOS45MjI4NzUgNjA5LjY3MjgyMSwyMjkuMjUwMDU0IDYxMC41LDIyOS4yNTAwNTQgTDYyMS41LDIyOS4yNTAwNTQgQzYyMi4zMjcxNzksMjI5LjI1MDA1NCA2MjMsMjI5LjkyMjg3NSA2MjMsMjMwLjc1MDA1NCBMNjIzLDIzMy4yNTAwNTQgWiBNNjIwLjUsMjMyLjAwMDA1NCBDNjIwLjkxNDA2MiwyMzIuMDAwMDU0IDYyMS4yNSwyMzEuNjY0MTE3IDYyMS4yNSwyMzEuMjUwMDU0IEM2MjEuMjUsMjMwLjgzNTY4NyA2MjAuOTE0MDYyLDIzMC41MDAwNTQgNjIwLjUsMjMwLjUwMDA1NCBDNjIwLjA4NTkzOCwyMzAuNTAwMDU0IDYxOS43NSwyMzAuODM1Njg3IDYxOS43NSwyMzEuMjUwMDU0IEM2MTkuNzUsMjMxLjY2NDExNyA2MjAuMDg1OTM4LDIzMi4wMDAwNTQgNjIwLjUsMjMyLjAwMDA1NCBaIE02MjAsMjM3LjI1MDA1NCBMNjEyLDIzNy4yNTAwNTQgTDYxMiwyMzQuMjUwMDU0IEw2MjAsMjM0LjI1MDA1NCBMNjIwLDIzNy4yNTAwNTQgWiIgaWQ9InAiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="),this.printerMenuItemTextKey="printTranscript",this.printerMenuItem=this.addPrintTranscriptMenuOption(r),this.muteSoundNotificationsTextKey="muteNotifications",this.unmuteSoundNotificationsTextKey="unmuteNotifications",this.muteSoundNotificationsIcon=this.convertSVGbase64IconToSVGNode("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxM3B4IiB2aWV3Qm94PSIwIDAgMTYgMTMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+djwvdGl0bGU+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRGVza3RvcC1IRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTY3My4wMDAwMDAsIC0yMjUuMDAwMDAwKSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTY4MC4yNDQwNDYsMjM3LjUwMDA0NiBDNjgwLjYyOTM2LDIzNy41MDAwNDYgNjgxLDIzNy4yMDI1NTYgNjgxLDIzNi43NDk0MzEgTDY4MSwyMjYuMjUwNjU2IEM2ODEsMjI1Ljc5NzIyNyA2ODAuNjI5MDU1LDIyNS41MDAwNDYgNjgwLjI0NDA0NiwyMjUuNTAwMDQ2IEM2ODAuMDU5Mzg0LDIyNS41MDAwNDYgNjc5Ljg3MTU0OCwyMjUuNTY4MTYyIDY3OS43MTk2OTMsMjI1LjcyMDM1MyBMNjc2LjkzOTM2LDIyOC41MDAwNDYgTDY3My43NSwyMjguNTAwMDQ2IEM2NzMuMzM1NjMyLDIyOC41MDAwNDYgNjczLDIyOC44MzU2NzcgNjczLDIyOS4yNTAwNDUgTDY3MywyMzMuNzUwMDQzIEM2NzMsMjM0LjE2NDEwNSA2NzMuMzM1NjMyLDIzNC41MDAwNDYgNjczLjc1LDIzNC41MDAwNDYgTDY3Ni45MzkzNiwyMzQuNTAwMDQ2IEw2NzkuNzE5NjkzLDIzNy4yNzk3MzQgQzY3OS44NzE4ODQsMjM3LjQzMTkyNiA2ODAuMDU5Njg5LDIzNy41MDAwNDYgNjgwLjI0NDA0NiwyMzcuNTAwMDQ2IFogTTY4MCwyMzYuMTQ1OTc2IEw2NzcuNjQ2MjM4LDIzMy43OTI4NTkgTDY3Ny4zNTM0MjIsMjMzLjUwMDA0MyBMNjc0LDIzMy41MDAwNDMgTDY3NCwyMjkuNTAwMDQ1IEw2NzcuMzUzNDIyLDIyOS41MDAwNDUgTDY4MCwyMjYuODU0MTExIEw2ODAsMjM2LjE0NTk3NiBaIE02ODguNTczMTEzLDIzMy45MjY5MjIgTDY4OC45MjY1NjcsMjMzLjU3MzQ2OCBDNjg5LjAyNDA0LDIzMy40NzU5OTUgNjg5LjAyNDA0LDIzMy4zMTc1NDggNjg4LjkyNjU2NywyMzMuMjIwMDQ0IEw2ODcuMjA3MTc3LDIzMS41MDAwMzcgTDY4OC45MjY4NzIsMjI5Ljc4MDM0OCBDNjg5LjAyNDM3NiwyMjkuNjgyODQ1IDY4OS4wMjQzNzYsMjI5LjUyNDQyOCA2ODguOTI2ODcyLDIyOS40MjY5MjUgTDY4OC41NzM0MTgsMjI5LjA3MzQ3IEM2ODguNDc1OTQ1LDIyOC45NzU5OTcgNjg4LjMxNzQ5OCwyMjguOTc1OTk3IDY4OC4yMTk5OTQsMjI5LjA3MzQ3IEw2ODYuNDk5OTg3LDIzMC43OTI4NiBMNjg0Ljc4MDI5OCwyMjkuMDczMTY1IEM2ODQuNjgyNzk1LDIyOC45NzU2NjEgNjg0LjUyNDM3OCwyMjguOTc1NjYxIDY4NC40MjY4NzQsMjI5LjA3MzE2NSBMNjg0LjA3MzQyLDIyOS40MjY2MTkgQzY4My45NzU5NDcsMjI5LjUyNDA5MiA2ODMuOTc1OTQ3LDIyOS42ODI1NCA2ODQuMDczNDIsMjI5Ljc4MDA0MyBMNjg1Ljc5MjgxLDIzMS41MDAwMzcgTDY4NC4wNzMxMTUsMjMzLjIxOTczOSBDNjgzLjk3NTYxMSwyMzMuMzE3MjQyIDY4My45NzU2MTEsMjMzLjQ3NTY1OSA2ODQuMDczMTE1LDIzMy41NzMxNjMgTDY4NC40MjY1NjksMjMzLjkyNjYxNyBDNjg0LjUyNDA0MiwyMzQuMDI0MDkgNjg0LjY4MjQ5LDIzNC4wMjQwOSA2ODQuNzc5OTkzLDIzMy45MjY2MTcgTDY4Ni40OTk5ODcsMjMyLjIwNzIyNyBMNjg4LjIxOTY4OSwyMzMuOTI2OTIyIEM2ODguMzE3MTkyLDIzNC4wMjQ0MjYgNjg4LjQ3NTYwOSwyMzQuMDI0NDI2IDY4OC41NzMxMTMsMjMzLjkyNjkyMiBaIiBpZD0idiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"),this.unmuteSoundNotificationsIcon=this.convertSVGbase64IconToSVGNode("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDE2IDEzIj4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEuNDMgNC4zMTljLS4yNi0uMTI3LS41ODMtLjAxNi0uNzExLjI1LS4xMjcuMjY2LS4wMTUuNTg0LjI1MS43MTEuNDcuMjI3Ljc2My42NTUuNzYzIDEuMTIgMCAuNDY1LS4yOTIuODkzLS43NjMgMS4xMi0uMjY2LjEyNi0uMzc4LjQ0NS0uMjUxLjcxLjEyOS4yNjkuNDUxLjM3Ny43MTEuMjUuODQ1LS40MDQgMS4zNy0xLjIwMSAxLjM3LTIuMDhzLS41MjUtMS42NzYtMS4zNy0yLjA4MXpNNy43MjcgMGMtLjE5NyAwLS4zOTcuMDczLS41Ni4yMzVMNC4yMDMgMy4ySC44Yy0uNDQyIDAtLjguMzU4LS44Ljh2NC44YzAgLjQ0Mi4zNTguOC44LjhoMy40MDJsMi45NjYgMi45NjVjLjE2Mi4xNjIuMzYyLjIzNS41NTkuMjM1LjQxMSAwIC44MDYtLjMxNy44MDYtLjhWLjhjMC0uNDgzLS4zOTUtLjgtLjgwNi0uOHptLS4yNiAxMS4zNTZMNC42NDQgOC41MzNIMS4wNjdWNC4yNjdoMy41NzdsMi44MjMtMi44MjN2OS45MTJ6TTE2IDYuNGMwLTIuMjA0LTEuMTM0LTQuMjIxLTIuOTYtNS4yNjMtLjI1Ny0uMTQ2LS41ODctLjA1OS0uNzM1LjE5Ny0uMTQ4LjI1NS0uMDU5LjU4MS4xOTkuNzI4IDEuNDkyLjg1MiAyLjQyIDIuNTE0IDIuNDIgNC4zMzggMCAxLjgyNC0uOTI4IDMuNDg2LTIuNDIgNC4zMzctLjI1OC4xNDctLjM0Ny40NzMtLjE5OS43MjkuMTQzLjI0Ni40NjkuMzQ4LjczNS4xOTZDMTQuODY2IDEwLjYyMSAxNiA4LjYwNCAxNiA2LjR6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIwNyAtNDI5KSB0cmFuc2xhdGUoMTIwNyA0MjkpIi8+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPgo="),this.toggleSoundNotificationsMenuItem=this.addToggleNotificationsOption(r)}return n(e,[{key:"convertSVGbase64IconToSVGNode",value:function(e){var t=e.replace("data:image/svg+xml;base64,","");return window.atob(t)}},{key:"addPrintTranscriptMenuOption",value:function(e){if(e.printTranscript){var t=new Ba("khoros_ellipsis_print_option_id",this.printerIcon,this.printerMenuItemTextKey,this.printTranscriptAction.bind(this),this.language);return this.menuItems.push(t),t}}},{key:"addToggleNotificationsOption",value:function(e){if(e.muteNotifications){var t=this.soundPlayer.getSoundEnabled(),r=t?this.muteSoundNotificationsIcon:this.unmuteSoundNotificationsIcon,n=t?this.muteSoundNotificationsTextKey:this.unmuteSoundNotificationsTextKey,o=new Ba("khoros_ellipsis_mute_option_id",r,n,this.toggleNotificationAction.bind(this),this.language);return this.menuItems.push(o),o}}},{key:"printTranscriptAction",value:function(){this.hide(),this.printHandler.print()}},{key:"toggleNotificationAction",value:function(){this.soundPlayer.toggleSoundEnabled(),this.soundPlayer.getSoundEnabled()?(this.toggleSoundNotificationsMenuItem.updateMenuItemTextKey(this.muteSoundNotificationsTextKey),this.toggleSoundNotificationsMenuItem.updateMenuItemIcon(this.muteSoundNotificationsIcon)):(this.toggleSoundNotificationsMenuItem.updateMenuItemTextKey(this.unmuteSoundNotificationsTextKey),this.toggleSoundNotificationsMenuItem.updateMenuItemIcon(this.unmuteSoundNotificationsIcon)),this.hide()}},{key:"toggleDisplay",value:function(e){this.getMenuContainer()?this.hide():this.display(e)}},{key:"display",value:function(e){var t=this.createMenuContainer();e.appendChild(this.createIframeFullScreenDiv()),e.appendChild(t)}},{key:"hide",value:function(){var e=this.getIframeFullScreenDiv();e&&e.remove();var t=this.getMenuContainer();t&&t.remove()}},{key:"getIframeFullScreenDiv",value:function(){return this.iframeStyleHandler.getElementById(_a)}},{key:"createIframeFullScreenDiv",value:function(){var e=this.iframeStyleHandler.getDocument().createElement("div");e.setAttribute("id",_a),e.addEventListener("click",this.fullscreenDivClickHandler.bind(this));var t=this.iframeStyleHandler.getZIndex()+1,r="\n            position: fixed;\n            top: 0px;\n            left: 0px;\n            width: 100%;\n            height: 100%;\n            z-index: ".concat(t,";\n            background-color: transparent;\n        ");return e.setAttribute("style",r),e}},{key:"fullscreenDivClickHandler",value:function(){this.hide()}},{key:"getMenuContainer",value:function(){return this.iframeStyleHandler.getElementById(xa)}},{key:"createMenuContainer",value:function(){var e=document.createElement("div");e.setAttribute("id",xa);var t=this.iframeStyleHandler.getZIndex()+2,r="\n            position: absolute;\n            top: 33px;\n            right: 46px;\n            width: 200px;\n            border-radius: 5px;\n            box-shadow: 0 0 8px 1px rgba(0, 0, 0, 0.21);\n            z-index: ".concat(t,";\n            background-color: #ffffff;\n            padding: 12px 0 9px;\n        ");return e.setAttribute("style",r),this.menuItems.forEach((function(t){return e.appendChild(t.getMenuItemElement())})),e}}]),e}(),Rc=function(){function e(r,n,o,i){t(this,e),this.customerActions={printTranscript:!1,muteNotifications:!1,clearChatHistory:!1,endConversation:!1},this.iframeStyleHandler=r,this.soundPlayer=o,this.SDKProxy=n,this.customerActions=$o()(this.customerActions,i.customerActions)}return n(e,[{key:"shouldDisplayEllipsis",value:function(){return this.customerActions.printTranscript||this.customerActions.muteNotifications||this.customerActions.clearChatHistory||this.customerActions.endConversation}},{key:"init",value:function(e,t,r){var n,o,i,a,s;this.language=e,this.headerTextColor=(a=null!==(n=t.brandColor)&&void 0!==n?n:"#555",s="#"===a.charAt(0)?a.substring(1,7):a,.299*parseInt(s.substring(0,2),16)+.587*parseInt(s.substring(2,4),16)+.114*parseInt(s.substring(4,6),16)>186?"#464646":"#ffffff");var u=t.displayStyle===Le.EMBED,c=null===(o=this.SDKProxy.initParameters)||void 0===o||null===(i=o.getClientConfig())||void 0===i?void 0:i.uiSettings;if(this.showCloseButton=!u||(null==c?void 0:c.showEmbedModeCloseButton),r&&r.customerActions&&r.customerActions.customerActionsEnabled&&(this.customerActions=$o()(this.customerActions,r.customerActions)),this.shouldDisplayEllipsis()){this.ellipsisElement=this.getEllipsisElement(),this.ellipsisPopUpMenu=new Oc(this.customerActions,this.iframeStyleHandler,this.SDKProxy,this.soundPlayer,e,t);var l=this.getHeaderDiv();l&&this.addEllipsis(l)}}},{key:"getEllipsisImage",value:function(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width","20"),t.setAttribute("height","20"),t.setAttribute("viewBox","0 0 48 48"),t.setAttribute("xmlns","http://www.w3.org/2000/svg");var r=document.createElementNS(e,"path");return r.setAttribute("fill-rule","evenodd"),r.setAttribute("clip-rule","evenodd"),r.setAttribute("d","M9.5 29a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11m20-5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m14.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"),r.setAttribute("fill",this.headerTextColor),t.appendChild(r),t}},{key:"getEllipsisElement",value:function(){var e=document.createElement("div");e.setAttribute("id","khoros_ellipsis_div");var t=this.showCloseButton?46:16,r="\n            position: absolute;\n            right: ".concat(t,"px;\n            cursor: pointer;\n            display: none;\n        ");e.setAttribute("style",r);var n=this.getEllipsisImage();return e.appendChild(n),e.addEventListener("click",this.handleClick.bind(this)),e}},{key:"getHeaderDiv",value:function(){return this.iframeStyleHandler.getElementById("header")}},{key:"addEllipsis",value:function(e){e.appendChild(this.ellipsisElement)}},{key:"handleClick",value:function(e){e.stopPropagation(),this.ellipsisPopUpMenu.toggleDisplay(this.getHeaderDiv())}}]),e}(),jc=function(){function e(){t(this,e),this.brandStyleSmoochConfig=ei(Zo({})),this.brandStyle=Zo({}),this.brandStyleId=0}return n(e,[{key:"setClassRegistry",value:function(e){this.classRegistry=e}},{key:"setBrandStyleJsonConfig",value:function(e){this.brandStyleId=null==e?void 0:e.id,this.brandStyle=Zo(e||{}),this.brandStyleSmoochConfig=ei(this.brandStyle)}},{key:"isBrandStyleSet",value:function(e){return this.brandStyleId===e}},{key:"getBrandStyle",value:function(){return this.brandStyle}},{key:"getBrandStyleSmoochConfig",value:function(){return this.brandStyleSmoochConfig}}]),e}(),xc=function(){return xc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xc.apply(this,arguments)},_c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Bc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Lc=Xt.keys.LOGIN_RESULT;function Uc(e){if(!e)return!1;var t=e.jwt,r=e.userId;return!!(e.bearer||t&&r)}function zc(e){var t=e.userId,r=e.mahToken;return t&&r&&t.trim()&&r.trim()}var Wc=function(){function e(e,t,r,n,o,i){var a=this;if(this.shouldSkipMergeEvent=function(){return"false"!==a.sessionDataManager.get("pendingPrechatForm","null").toString()&&"true"!==a.sessionDataManager.get(ir,"false").toString()},this.unauthToAuthDetails=function(e){return e?e.credentialsSource!==ur?{}:{unauthUserId:e.userId,unauthToken:e.mahToken,skipMergeEvent:a.shouldSkipMergeEvent()}:{}},!t)throw new Error("Application ID not specified");if(!e)throw new Error("companyKey not specified");this.companyKey=e,this.appId=t,this.urlFetcher=new Ho(r,e),this.sessionDataManager=n,this.logger=new z(this.urlFetcher),this.getOrCreateUserAttemptCounter=0,this.metadataProducer=o,this.applozicAuthHandlerService=i,this.isUnauthUser=!0}return e.prototype.debugMessage=function(e){L(this.constructor.name,0,e)},e.prototype.getAppId=function(){return this.appId},e.prototype.getBrandUserId=function(e){var t=e||"default";return"".concat(this.companyKey,"_").concat(this.appId,"_").concat(t)},e.prototype.isAuthUserDetailsEmpty=function(e){if(!e)return!0;var t=e.bearer,r=e.handleGetCredentials,n=e.userId,o=e.jwt;return!(t||r||n&&o)},e.prototype.userCredentialsAreNoLongerProvidedInKhorosConfig=function(e){return this.getSessionUserInfo().credentialsSource===sr&&this.isAuthUserDetailsEmpty(e)},e.prototype.getOrCreateUser=function(e,t){return _c(this,void 0,void 0,(function(){var r,n,o,i,a;return Bc(this,(function(s){switch(s.label){case 0:return this.authUserDetails&&!e&&(e=this.authUserDetails),this.userCredentialsAreNoLongerProvidedInKhorosConfig(e)&&(this.debugMessage("getOrCreateUser - Credentials no longer provided -> Clearing Previous Session"),this.clearPreviousSessionData()),r=this.getSessionUserInfo(),this.userPreregisterData&&!t&&(t=this.userPreregisterData),this.authUserDetails=e,this.userPreregisterData=t,!(n=this.isSwitchingUnauthToAuth(r,this.authUserDetails))&&zc(r)?(this.mahUser={userId:r.userId,mahToken:r.mahToken},[2,Promise.resolve(r)]):(o=n?r:null,[4,this.getAuthUserDetails(e)]);case 1:return(a=s.sent())&&Uc(a)?[4,this.getOrCreateAuthUser(a,o,t)]:[3,3];case 2:return i=s.sent(),[3,5];case 3:return[4,this.getOrCreateAnonUser(t)];case 4:i=s.sent(),s.label=5;case 5:return this.hashAndStoreUserMetadata(t),[2,i]}}))}))},e.prototype.isSwitchingUnauthToAuth=function(e,t){if(!this.isUnauthUser)return!1;if(!zc(e)||Uc(e.userDetails))return!1;var r=!!(null==t?void 0:t.handleGetCredentials);return!(e.userDetails&&!r)&&(r||Uc(t))},e.prototype.getSessionUserInfo=function(){return{userId:this.sessionDataManager.get(lr,""),mahToken:this.sessionDataManager.get(pr,""),userDetails:this.getSessionUserDetails(),credentialsSource:this.sessionDataManager.get(cr,"")}},e.prototype.hasSessionUserInfo=function(){return!!this.getSessionUserInfo().userId},e.prototype.getSessionUserDetails=function(){var e=this.sessionDataManager.get(dr,"");return e?JSON.parse(e):null},e.prototype.clearPreviousSessionData=function(){this.sessionDataManager.remove(dr),this.sessionDataManager.remove(lr),this.sessionDataManager.remove(pr),this.sessionDataManager.remove(Lc)},e.prototype.getNewCredentials=function(e){return _c(this,void 0,void 0,(function(){var t,r;return Bc(this,(function(n){switch(n.label){case 0:this.debugMessage("getNewCredentials - (verify and call handleGetCredentials if possible)"),e||(e=this.authUserDetails),n.label=1;case 1:return n.trys.push([1,5,,6]),(null==e?void 0:e.handleGetCredentials)?[4,e.handleGetCredentials()]:[3,3];case 2:return Uc(t=n.sent())?(this.storeAuthUserDetails(t),this.debugMessage("getNewCredentials - new userCredentials obtained"),t.credentialsSource=sr,[2,t]):(console.error("handleGetCredentials method returned invalid credentials. Unable to authenticate"),[3,4]);case 3:this.debugMessage("getNewCredentialsno - no handleGetCredentials method provided"),n.label=4;case 4:return[3,6];case 5:return r=n.sent(),console.error("Error calling handleGetCredentials method - error ".concat(r)),[3,6];case 6:return[2,e]}}))}))},e.prototype.getAuthUserDetails=function(e){return _c(this,void 0,void 0,(function(){var t;return Bc(this,(function(r){return this.debugMessage("getAuthUserDetails - running..."),e&&Uc(e)?(this.debugMessage("getAuthUserDetails - returning existing details"),this.storeAuthUserDetails(e),[2,e]):Uc(t=this.getSessionUserDetails())?(this.debugMessage("getAuthUserDetails - returning existing session UserDetails"),this.storeAuthUserDetails(t),[2,t]):e&&e.handleGetCredentials?[2,this.getNewCredentials(e)]:[2,{}]}))}))},e.prototype.storeAuthUserDetails=function(e){this.sessionDataManager.set(dr,JSON.stringify(e))},e.prototype.storeSessionUserInfo=function(e,t){this.sessionDataManager.set(lr,e.id),this.sessionDataManager.set(pr,e.token),t&&this.sessionDataManager.set(cr,t)},e.prototype.updateSessionUserMetadataIfChanged=function(e){return _c(this,void 0,void 0,(function(){var t,r;return Bc(this,(function(n){switch(n.label){case 0:return t=this.sessionDataManager.get(hr,0),(r=Ye(e))==t?[3,2]:(this.storeUserMetadataHash(r),[4,this.updateUser(e)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.hashAndStoreUserMetadata=function(e){var t=Ye(e);this.storeUserMetadataHash(t)},e.prototype.storeUserMetadataHash=function(e){this.sessionDataManager.set(hr,e)},e.prototype.getOrCreateAnonUser=function(e){var t=this,r=this.urlFetcher.getAuthHandlerURLForMode("anon",this.appId),n={metadata:this.metadataProducer(),userName:null==e?void 0:e.name,userAvatarUrl:null==e?void 0:e.avatarUrl,userMetadata:null==e?void 0:e.userMetadata};return new Promise((function(e){t.urlFetcher.postURL(r,n,(function(r,n){r?t.logger.logError(t.companyKey,t.appId,"Error creating anon user",r):(null==n?void 0:n.id)&&(null==n?void 0:n.token)?(t.storeSessionUserInfo(n,ur),t.isUnauthUser=!0,t.mahUser={userId:n.id,mahToken:n.token},e({userId:n.id,mahToken:n.token})):console.log("Invalid data when creating anon user",t.companyKey,t.appId,n)}))}))},e.prototype.getOrCreateAuthUser=function(e,t,r){var n=this,o=this.urlFetcher.getAuthHandlerURLForMode("auth",this.appId),i=xc(xc(xc({},e),this.unauthToAuthDetails(t)),{metadata:this.metadataProducer(),userName:null==r?void 0:r.name,userAvatarUrl:null==r?void 0:r.avatarUrl,userMetadata:null==r?void 0:r.userMetadata});return new Promise((function(t){n.urlFetcher.putURL(o,i,(function(r,o){if(r)return n.logger.logError(n.companyKey,n.appId,"Error creating auth user",r),n.retryGetOrCreateUser().then((function(e){return t(e)}));(null==o?void 0:o.id)&&(null==o?void 0:o.token)?(n.storeSessionUserInfo(o,e.credentialsSource),n.sessionDataManager.remove(Lc),n.isUnauthUser=!1,n.mahUser={userId:o.id,mahToken:o.token},t({userId:o.id,mahToken:o.token})):console.log("Invalid data when creating auth user",n.companyKey,n.appId,o)}))}))},e.prototype.updateUser=function(e){var t=this,r=this.urlFetcher.getAuthHandlerURLForMode("update",this.appId),n=this.getSessionUserInfo(),o=n.userId,i=n.mahToken,a={userId:o,token:i,metadata:this.metadataProducer(),userName:null==e?void 0:e.name,userAvatarUrl:null==e?void 0:e.avatarUrl,userMetadata:null==e?void 0:e.userMetadata};return new Promise((function(e){t.urlFetcher.putURL(r,a,(function(r,n){r?t.logger.logError(t.companyKey,t.appId,"Error updating user",r):e({userId:o,mahToken:i})}))}))},e.prototype.createInboxChat=function(e){var t=this,r=this.urlFetcher.getInboxChatURL(this.appId),n={subject:e.subject,userId:this.mahUser.userId,token:this.mahUser.mahToken};return new Promise((function(o,i){t.urlFetcher.postURL(r,n,(function(r,n){!r&&(null==n?void 0:n.clientGroupId)?o(xc(xc({},e),{chatId:n.clientGroupId})):(t.logger.logError(t.companyKey,t.appId,"Error creating new inbox chat ".concat(e," with response ").concat(n),r),i(r))}))}))},e.prototype.retryGetOrCreateUser=function(){return this.getOrCreateUserAttemptCounter>0?Promise.resolve(null):(console.warn("Error creating auth user - resetting user details and retrying..."),this.sessionDataManager.remove(dr),this.getOrCreateUserAttemptCounter=this.getOrCreateUserAttemptCounter+1,this.getOrCreateUser())},e.prototype.loginUserToApplozicServerAndGetUserAndToken=function(){return _c(this,void 0,void 0,(function(){var e,t,r,n,o,i,a;return Bc(this,(function(s){switch(s.label){case 0:if(e=this.sessionDataManager.getLoginResult(),this.debugMessage("loginUserToApplozicServerAndGetUserAndToken - method called"),e&&!qa(e))return[2,{userId:e.userId,applozicAuthToken:e.authToken}];if(t=1,r=!1,!this.mahUser)return this.debugMessage("loginUserToApplozicServerAndGetUserAndToken - no mahUser!! can not retry login"),console.error("No valid user set to login to the server"),this.sessionDataManager.resetSession(),[2,null];s.label=1;case 1:if(!(t<=2)||r)return[3,9];s.label=2;case 2:return s.trys.push([2,4,,8]),n=this.mahUser.userId,o=this.mahUser.mahToken,this.debugMessage("loginUserToApplozicServerAndGetUserAndToken - login with userId: ".concat(n)),[4,this.applozicAuthHandlerService.loginApi(n,o)];case 3:return e=s.sent(),this.sessionDataManager.set(Lc,JSON.stringify(e)),r=!0,[3,8];case 4:return i=s.sent(),console.warn("Unable to login to Brandmessenger backend Server login attempt "+t,i),[4,this.getNewCredentials()];case 5:return(a=s.sent())&&Uc(a)?[4,this.getOrCreateAuthUser(a,null,null)]:[3,7];case 6:s.sent(),s.label=7;case 7:return[3,8];case 8:return t+=1,[3,1];case 9:return r&&(null==e?void 0:e.userId)&&(null==e?void 0:e.authToken)?[2,{userId:e.userId,applozicAuthToken:e.authToken}]:(this.sessionDataManager.resetSession(),[2,null])}}))}))},e}();const Hc=Wc;var Gc=function(){function e(e,t,r,n){this.SDK=e,this.isNewSDKLoaded=!1,this.companyKey=t,this.initParameters=r,this.callbackFunction=null,this.soundPlayer=n,this.processMessageEvent=this.processMessageEvent.bind(this)}return e.prototype.isSDKReady=function(){return!!this.SDK&&(!!this.isNewSDKLoaded&&"function"==typeof this.SDK.getConversation)},e.prototype.newSDKLoaded=function(){this.isNewSDKLoaded=!0,this.setSDKFromWindow()},e.prototype.registerClientEventListeners=function(){var e=this;this.SDK.on("onMessageReceived",(function(){return e.messageReceivedHandler()})),this.SDK.on("onMessageSent",(function(){return si("MessageSent",e.SDK)}))},e.prototype.registerWidgetEventListeners=function(){var e=this;this.SDK.on(ri,(function(){return si(ri,e.SDK)})),this.SDK.on(ai,(function(){return si(ai,e.SDK)})),this.SDK.on(oi,(function(){return si(oi,e.SDK)}))},e.prototype.messageReceivedHandler=function(){this.soundPlayer&&this.soundPlayer.play(),si("MessageReceived",this.SDK)},e.prototype.setSDKFromWindow=function(){this.SDK=window.Brandmessenger._sdk()},e.prototype.getSDK=function(){return this.SDK},e.prototype.destroy=function(){window.removeEventListener("message",this.processMessageEvent);var e=this.getIframeElement();e&&document.body.removeChild(e)},e.prototype.resumeAction=function(){var e;null===(e=this.callbackFunction)||void 0===e||e.call(this)},e.prototype.addMessageEventHandler=function(){window.addEventListener("message",this.processMessageEvent)},e.prototype.getIframeElement=function(){return document.getElementById(P)},e.prototype.processMessageEvent=function(e){e.origin===window.origin&&(e.data===ci(ii)?(this.newSDKLoaded(),this.resumeAction(),this.registerWidgetEventListeners()):e.data===ci(ai)?this.registerClientEventListeners():e.data.eventId===ci("FrameUpdated")&&this.processFrameUpdatedEvent(e))},e.prototype.processFrameUpdatedEvent=function(e){var t=this.getIframeElement();t&&(t.className=e.data.className,e.data.height?t.style.height="".concat(e.data.height,"px"):t.style.removeProperty("height"),e.data.width?t.style.width="".concat(e.data.width,"px"):t.style.removeProperty("width"),e.data.isTabMode&&this.processTabModeFrameUpdatedEvent(e,t))},e.prototype.processTabModeFrameUpdatedEvent=function(e,t){if(e.data.tabModeVisibleHeight){var r=e.data.tabModeVisibleHeight;t.style.transform="translateY(calc(100% - ".concat(r,"px))")}else t.style.removeProperty("transform")},e.prototype.loadSdkIfNeededAndRunFunction=function(e,t,r){return e&&!this.isSDKReady()?(this.callbackFunction=r,this.addMessageEventHandler(),this.createIframeAndRootElementForNewSDK(e,t),this.importStyleForNewSDK(),!0):r()},e.prototype.createIframeAndRootElementForNewSDK=function(e,t){var r,n,o,i=(null==t?void 0:t.displayStyle)===Le.EMBED,a=document.createElement("iframe");a.id=P,a.className=i?"":"webMessengerContainerHidden",a.allowFullscreen=!i,i?document.querySelector(t.embedTarget).appendChild(a):document.body.appendChild(a);var s=document.createElement("div");s.id="root",a.contentWindow.document.body.appendChild(s);var u="window.KHOROS_CONFIG  = { companyKey: '".concat(this.companyKey,"', widgetId: '").concat(e.id,"', region: '").concat(e.region,"' };"),c=document.createElement("html"),l=document.createElement("head"),p=document.createElement("meta");p.setAttribute("name","viewport"),p.setAttribute("content","width=device-width, initial-scale=1"),l.appendChild(p);var d=document.createElement("style"),h=document.createElement("script"),f=null===(o=null===(n=null===(r=this.initParameters)||void 0===r?void 0:r.clientConfig)||void 0===n?void 0:n.nonceConfig)||void 0===o?void 0:o.iframeContentScript;f&&h.setAttribute("nonce",f),h.innerHTML="".concat(u,"\n        (function() {\n            const scriptTag = document.createElement('script');\n            scriptTag.setAttribute('src','").concat(qe(),"');\n            document.head.appendChild(scriptTag);\n        })();"),c.appendChild(l),l.appendChild(h),l.appendChild(d),a.srcdoc=c.outerHTML},e.prototype.importStyleForNewSDK=function(){o.e(796).then(o.bind(o,7796))},e}();const Vc=Gc;var Kc=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},qc=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Yc=function(){function e(e,t){var r=this;this.loginApi=function(e,t){return Kc(r,void 0,void 0,(function(){var r,n,o,i,a;return qc(this,(function(s){switch(s.label){case 0:return r="".concat(this.host).concat("/v2/tab/initialize.page"),n={userId:e,password:t,applicationId:this.appId},(o=(0,Wa.agent)()).set("Accept","application/json"),[4,o.post(r).send(null!=n?n:null)];case 1:if(i=s.sent(),"object"==typeof(a=i.body))return[2,a];throw"INVALID_PASSWORD"===a?(this.debugMessage("loginApi - Invalid Password error"),new Error("Invalid password")):(this.debugMessage("Login Failure"),new Error("Login Failure: ".concat(i)))}}))}))},this.urlFetcher=e,this.appId=t,this.host=function(e){var t,r;return(null===(t=window.KHOROS_CONFIG)||void 0===t?void 0:t.host)||(null===(r=window.parent.KHOROS_CONFIG)||void 0===r?void 0:r.host)||xe[e]||je}(e.getUniverseRegionLookup())}return e.prototype.debugMessage=function(e){L(this.constructor.name,0,e)},e}();const Jc=Yc;const Qc=new(function(){function e(){t(this,e),this.isInitialized=!1,this.classRegistry=null,this.globalErrorHandler=this.globalErrorHandler.bind(this),this.unhandledRejectionHandler=this.unhandledRejectionHandler.bind(this)}return n(e,[{key:"initialize",value:function(e){this.isInitialized?console.warn("GlobalErrorHandler already initialized"):(this.classRegistry=e,this.setupGlobalErrorHandlers(),this.isInitialized=!0,console.log("Global error handlers initialized for chat widget"))}},{key:"cleanup",value:function(){this.isInitialized&&(window.removeEventListener("error",this.globalErrorHandler),window.removeEventListener("unhandledrejection",this.unhandledRejectionHandler),this.isInitialized=!1,this.classRegistry=null,console.log("Global error handlers cleaned up for chat widget"))}},{key:"setupGlobalErrorHandlers",value:function(){window.addEventListener("error",this.globalErrorHandler),window.addEventListener("unhandledrejection",this.unhandledRejectionHandler)}},{key:"globalErrorHandler",value:function(e){try{var t,r;if(!this.classRegistry)return void console.error("GlobalErrorHandler: classRegistry not available");var n=this.classRegistry.getLogger(),o=this.classRegistry.getAuthHandlerService(),i=this.classRegistry.getInitParameters(),a=null==o?void 0:o.companyKey,s=null==i||null===(t=i.widgetConfig)||void 0===t?void 0:t.id,u={message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null===(r=e.error)||void 0===r?void 0:r.stack,userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString()},c="GLOBAL_JS_ERROR: ".concat(e.message," at ").concat(u.filename,":").concat(u.lineno,":").concat(u.colno),l=e.error||new Error(e.message);n.logError(a,s,c,l),console.error("Global error handler logged error to lambda:",u)}catch(e){console.error("Failed to log global error to lambda:",e)}}},{key:"unhandledRejectionHandler",value:function(e){try{var t;if(!this.classRegistry)return void console.error("GlobalErrorHandler: classRegistry not available");var r=this.classRegistry.getLogger(),n=this.classRegistry.getAuthHandlerService(),o=this.classRegistry.getInitParameters(),i=null==n?void 0:n.companyKey,a=null==o||null===(t=o.widgetConfig)||void 0===t?void 0:t.id,s={reason:e.reason,promise:e.promise,userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString()},u="UNHANDLED_PROMISE_REJECTION: ".concat(e.reason instanceof Error?e.reason.message:String(e.reason)),c=e.reason instanceof Error?e.reason:new Error(String(e.reason));r.logError(i,a,u,c),console.error("Global promise rejection handler logged error to lambda:",s)}catch(e){console.error("Failed to log promise rejection to lambda:",e)}}}]),e}());function $c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?$c(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xc=function(){function e(){t(this,e),console.log("Proactive Chat Widget is starting up..."),this.widgetConfig=null,this.config=null,this.logger=new z,this.addPublicApiDecorator=this.addPublicApiDecorator.bind(this)}return n(e,[{key:"buildClassRegistry",value:function(e,t){var r=e.getWidgetConfig(),n=e.getClientConfig(),o=n.companyKey,a=n.widgetId,s=r.customConditions,u=r.displayConditions;this.browserPageAdapter=new i;var c=new Qt(this.browserPageAdapter),l=e.getWidgetConfig().region,p=new Ho(l,o);this.logger=new z(p,this.browserPageAdapter);var d=new oa(o,a,p,this.logger),h=new jc,f=new ia(o,a,p,this.logger),y=r.appId;if(!y)throw console.error("Missing appId in widget configuration or KHOROS_CONFIG, exiting widget initialization"),new Error("Missing appId in widget configuration or KHOROS_CONFIG");this.sessionDataManager=new br(this.storageAdapter,r,this.resetConversation.bind(this),o,y);var g=new G(this.sessionDataManager);this.sdkProxy=new Vc(t,o,e,g);var m=new Na(new Pa(p,this.logger),y,this.browserPageAdapter,this.storageAdapter,this.logger),v=new na(this.sessionDataManager),b=new ja(p,this.sessionDataManager),D=function(e,t,r,n,o){return function(){var i=(t.staticMetadata||{}).metadata,a=r.getLanguage(),s=yi(i,o,t,a)({}).metadata;return s.widgetId=e.widgetId,s.ruleId=n.getTriggeredRuleId(),s}}(n,r,this.browserPageAdapter,v,b),w=new Jc(p,y);this.authHandlerService=new Hc(o,y,l,this.sessionDataManager,D,w),this.widgetStateEngine=new aa(this.storageAdapter,this.browserPageAdapter,m,this.sdkProxy,this.sessionDataManager);var E=new Xi,C=new Rc(E,this.sdkProxy,g,r);return this.pageVisitsTracker=new q(this.sessionDataManager,this.browserPageAdapter,e.getWidgetConfig()),(new Ar).setCollectors(io).setBrandStyleFetcher(f).setBrowserPageAdapter(this.browserPageAdapter).setIPWhitelist(new Ft(u,we)).setIPBlacklist(new Ft(u,Ee)).setStorageAdapter(this.storageAdapter).setRuleActionFactory(co).setCriteriaFactory(Lo).setRulesFactory(Zt).setTriggeredRuleProvider(v).setVariableFetcher(d).setClientConfig(e.getClientConfig()).setClientSuppliedContext(new ea).setClientSuppliedCriteria(new ra).setInitParameters(e).setIframeStyleHandler(E).setAuthenticationProvider(new Oa(e.getClientConfig(),this.storageAdapter,this.sessionDataManager)).setWidgetStateEngine(this.widgetStateEngine).setCustomConditions(s).setUrlFetcher(p).setLogger(this.logger).setGeoIPFetcher(b).setSessionDataManager(this.sessionDataManager).setHeaderBarFormatter(C).setSoundPlayer(g).setPageVisitsTracker(this.pageVisitsTracker).setI18n(c).setBrandStyleHandler(h).setAuthHandlerService(this.authHandlerService).setSDKProxy(this.sdkProxy).setMetadataProducer(D)}},{key:"buildRulesEngine",value:function(e,t,r,n){return new Ji(e,t,r,n)}},{key:"buildCollectionEngine",value:function(e){return new so(e)}},{key:"initRulesEngine",value:function(e,t,r){try{var n=new Qi(e,r),o=this.buildClassRegistry(n,t);Qc.initialize(o);var i=this.buildCollectionEngine(o);this.actionHandler=new qi(o),this.sessionDataManager.initSession(o),o.getGeoIPFetcher().fetch();var a=new Uo(this.actionHandler,o,e.displayConditions);this.rulesEngine=this.buildRulesEngine(o,e,i,a),this.rulesEngine.init(),"onReady"in r&&r.onReady(t,e),this.pageVisitsTracker.trackCurrentPageVisitOrClear(),si("ChatRulesLoaded",t,{rulesDefinition:e}),this.preserveSiteReferer()}catch(e){this.logger.logError(r.companyKey,r.widgetId,"Error during init rules engine",e)}}},{key:"addMessageEventHandler",value:function(){var e=this;window.addEventListener("message",(function(t){return e.addPublicApiDecorator(t)}))}},{key:"addPublicApiDecorator",value:function(e){e.origin===window.origin?e.data===ci(ii)?(_("Adding public decorator"),$i(this),Zi(this.widgetConfig)):e.data===ci("SdkInitialized")&&Zi(this.widgetConfig):_("Unable to add public API decorator, origin mismatch")}},{key:"preserveSiteReferer",value:function(){this.storageAdapter.get(T)||this.sessionDataManager.set(T,this.browserPageAdapter.getReferrer())}},{key:"provideCompanySpecificOverrides",value:function(e){return Zc(Zc({},Ra[e.companyKey]||{}),e)}},{key:"run",value:function(e,t){var r=this;this.prefetchFrameScript();var n=t=this.provideCompanySpecificOverrides(t),o=n.widgetId,i=n.companyKey,a=n.resetOnLoad;if(this.storageAdapter=new Sr(t),!o&&a)return this.sessionDataManager||(this.sessionDataManager=new br(this.storageAdapter,t,this.resetConversation.bind(this),i,t.appId)),void new Oa(t,this.storageAdapter,this.sessionDataManager).reset();if(!o)throw new Error("Missing configuration: widgetId must be defined.");new Vo(i,o||null,this.storageAdapter).fetch((function(n){return r.addMessageEventHandler(),r.widgetConfig=n,r.config=t,r.initRulesEngine(n,e,t)}))}},{key:"scheduleEvaluateRules",value:function(){this.rulesEngine.scheduleEvaluateRulesAndVariables()}},{key:"addToContext",value:function(e,t){this.rulesEngine.addToContext(e,t)}},{key:"addCriteria",value:function(e,t){this.rulesEngine.addCriteria(e,t)}},{key:"forceOpen",value:function(){this.rulesEngine.forceOpen()}},{key:"reload",value:function(){this.actionHandler.resetConversation(),this.run(window.Brandmessenger,window.KHOROS_CONFIG)}},{key:"resetConversation",value:function(){window.removeEventListener("message",this.addPublicApiDecorator),Qc.cleanup(),this.actionHandler.resetConversation()}},{key:"setVisibility",value:function(e,t){var r=document.getElementById(e);r&&(r.style.display=t)}},{key:"hide",value:function(){this.setVisibility(Ui,"none")}},{key:"show",value:function(){this.setVisibility(Ui,"block")}},{key:"prefetchFrameScript",value:function(){var e=document.createElement("link");e.rel="prefetch",e.as="script",e.href=qe(),document.head.appendChild(e)}}]),e}();if(function(){var e;if(null!==(e=window.top)&&void 0!==e&&e.KHOROS_LOCAL_DEVELOPMENT){var t=console.trace;console.trace=function(e){console.groupCollapsed(e||"trace"),t.apply(this),console.groupEnd()}}}(),window.KHOROS_CONFIG){var el={init:function(e){void 0===e&&(e={}),(new Xc).run(el,e)},debug:function(){return B()},debugNetwork:function(){return U()}};window.Brandmessenger=el,window.Brandmessenger.init(window.KHOROS_CONFIG)}else console.error("KHOROS_CONFIG not found in window object. Cannot initialize Brandmessenger")})()})();