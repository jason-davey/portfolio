Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var decision_status="";if(window.digitalData.event[window.digitalData.event.length-1].data.decision_status&&window.digitalData.event[window.digitalData.event.length-1].data.decision_status.length>0)decision_status=window.digitalData.event[window.digitalData.event.length-1].data.decision_status;
else decision_status=window.digitalData.event[window.digitalData.event.length-1].data.transaction_result;if(/^(APPROVE)$/.test(decision_status))return"Appoved";else if(/^((NON_)?BUREAU_DECLINE)$/.test(decision_status))return"Declined";else if(/^(REFER|DEDUPE|CUSTOMER_TO_CONTACT)$/.test(decision_status))return"Referred";else return""}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL Facebook Decision",
collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62375"})},62375)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return window.digitalData.event[window.digitalData.event.length-1].data.application_id}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.bottomOfBodyTrigger,dataDefName:"DDL - applicationID",collection:"Digital Data Layer",
source:"Manage",priv:"false"},{id:"72183"})},72183)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return localStorage.getItem("n_aol")}catch(err){return""}},transform:function(val){return val},load:"page",trigger:Bootstrapper.data.immediateTrigger,dataDefName:"DDL - Hashed Email",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"71193"})},71193)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){if(window&&window.s&&window.s.eVar52)try{if(/^(Approved|Downsell (Limit|Offer))$/.test(window.s.eVar52))return"Approved";else if(/^(Declined)$/.test(window.s.eVar52))return"Declined";else if(/^(Referred|Dedupe)$/.test(window.s.eVar52))return"Referred";else return""}catch(e){return""}},
transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - CC Facebook Decision",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62372"})},62372)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){var HO;var HOClickIDArr;try{function getCookieValue(a){var b=document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*\x3d\\s*([^;]+)");return b?b.pop():""}HO=getCookieValue("HO")}catch(e){}try{HOClickIDArr=HO.split("+");return HOClickIDArr[0]}catch(e){}},transform:function(val){return val?val:
""},load:"page",trigger:Bootstrapper.data.bottomOfBodyTrigger,dataDefName:"DD HasOffers",collection:"Page",source:"Manage",priv:"false"},{id:"59677"})},59677)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined")if(window.digitalData.event[window.digitalData.event.length-1].data.name=="Personal Loan Online Application")return window.digitalData.event[window.digitalData.event.length-1].data.application_id;return""}catch(err){return""}},
transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - Personal Loan Application ApplicID",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"61655"})},61655)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var response={_gcl_au:Bootstrapper.Cookies.get("_gcl_au"),_gcl_aw:Bootstrapper.Cookies.get("_gcl_aw"),_gcl_dc:Bootstrapper.Cookies.get("_gcl_dc"),_gcl_gb:Bootstrapper.Cookies.get("_gcl_gb")};for(var key in response)if(!response[key])delete response[key];return response}catch(err){return""}},
transform:function(val){return val},load:"instance",trigger:Bootstrapper.data.afterEnsightenCompleteTrigger,dataDefName:"Google Cookie",collection:"TagSpecific",source:"Manage",priv:"false"},{id:"69031"})},69031)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function anon(){try{const productsAndServices=window.digitalData.event[window.digitalData.event.length-1].data.productsAndServices;for(let ps of productsAndServices)if(ps.name.includes("Expected Activity")){const splitName=ps.name.split("|");return splitName[splitName.length-1]}return""}catch(err){return""}},
transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - Expected Account Activity",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"71790"})},71790)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(window.digitalData.event[window.digitalData.event.length-1].data.decision_status&&window.digitalData.event[window.digitalData.event.length-1].data.decision_status.length>0)return window.digitalData.event[window.digitalData.event.length-1].data.decision_status;else return window.digitalData.event[window.digitalData.event.length-
1].data.transaction_result}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - Decision Status",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62204"})},62204)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var ft_c1_U1="";var ft_c1_U2="";var ft_c1_U3="";var ft_c1_U4="";var ft_c1_U5="";if(window){if(window.s)try{if(window.s.eVar56)ft_c1_U1=window.s.eVar56;if(window.s.eVar52)ft_c1_U2=window.s.eVar52}catch(e){}if(window.digitalData)try{if(window.digitalData.product&&Array.isArray(window.digitalData.product)&&
window.digitalData.product[0].campaignCode)ft_c1_U3=window.digitalData.product[0].campaignCode;else if(window.s&&typeof window.s.Util.getQueryParam=="function"&&window.s.Util.getQueryParam("campaignCode")!="")ft_c1_U3=window.s.Util.getQueryParam("campaignCode");if(window.digitalData.event&&Array.isArray(window.digitalData.event)&&window.digitalData.event[window.digitalData.event.length-1].data&&window.digitalData.event[window.digitalData.event.length-1].data.transaction_amount_approved)ft_c1_U4=window.digitalData.event[window.digitalData.event.length-
1].data.transaction_amount_approved}catch(e){}}try{var HO;var HOClickIDArr;function getCookieValue(a){var b=document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*\x3d\\s*([^;]+)");return b?b.pop():""}HO=getCookieValue("HO");HOClickIDArr=HO.split("+");ft_c1_U5=HOClickIDArr[0]}catch(e){}return"U1:"+ft_c1_U1+";U2:"+ft_c1_U2+";U3:"+ft_c1_U3+";U4:"+ft_c1_U4+";U5:"+ft_c1_U5+";"}catch(err){return"U1:;U2:;U3:;U4:;U5:;"}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,
dataDefName:"DDL - ft c1 - UVAR",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65598"})},65598)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var _url="nab.com.au/";var _AAFormName="";var _FormProgress="";var _Prod="";var _Decision="";var dde=window.digitalData.event;var lastEvent=dde[dde.length-1]["eventType"]==="form-interacted"?dde[dde.length-1].data:dde.length-2>=0?dde[dde.length-2].data:null;var lAction=lastEvent.action.split("-")[1];
if(lAction==="started"||lAction==="completed"){var AAFormName=lastEvent.name;if(typeof AAFormName!=="undefined"&&AAFormName.length>1)_AAFormName=AAFormName;_FormProgress=lAction==="started"?"start":"complete";var ProdId=lastEvent.products?lastEvent.products.map(product=>{if(product["product-id"])return product["product-id"];else if(product["subProduct"])return product["subProduct"];else if(product["product"])return product["product"];else return""}).join(","):"";if(ProdId.length>1)_Prod=ProdId;else if(typeof s!=
"undefined"&&typeof s.Util!="undefined"&&typeof s.Util.getQueryParam=="function"&&s.Util.getQueryParam("products")!="")_Prod=s.Util.getQueryParam("products");var Decision=lastEvent.decision_status?lastEvent.decision_status:lastEvent.transaction_result?lastEvent.transaction_result:"";if(Decision.length>1)_Decision=Decision;return _url+encodeURIComponent(_AAFormName+"|Step\x3d"+_FormProgress+"|Prod\x3d"+_Prod+"|Decision\x3d"+_Decision)}return""}catch(err){return""}},transform:function(val){return val?
val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL CC HL - LinkedIn URL param",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"63105"})},63105)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(typeof window.s!="undefined"&&typeof window.s.Util!="undefined"&&typeof s.Util.getQueryParam=="function")return"cid:"+window.s.Util.getQueryParam("cid")+";own_cid:"+window.s.Util.getQueryParam("own_cid")+";psc:"+window.s.Util.getQueryParam("psc")+";psea:"+window.s.Util.getQueryParam("psea")+
";";return"cid:;own_cid:;psc:;psea:;"}catch(err){return"cid:;own_cid:;psc:;psea:;"}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - ft custom - url campaign",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65597"})},65597)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{var _url="nab.com.au/";var _AAFormName="";var _FormProgress="";var _Prod="";var _Decision="";var dde=window.digitalData.event;var lastEvent=dde[dde.length-1]["eventType"]==="form-interacted"?dde[dde.length-1].data:dde.length-2>=0?dde[dde.length-2].data:null;var lAction=lastEvent.action.split("-")[1];
if(lAction==="started"||lAction==="completed"){var AAFormName=lastEvent.name;if(typeof AAFormName!=="undefined"&&AAFormName.length>1)_AAFormName=AAFormName;_FormProgress=lAction==="started"?"start":"complete";var ProdId=lastEvent.products?lastEvent.products.map(product=>{if(product["product-id"])return product["product-id"];else if(product["subProduct"])return product["subProduct"];else if(product["product"])return product["product"];else return""}).join(","):"";if(ProdId.length>1)_Prod=ProdId;else if(typeof s!=
"undefined"&&typeof s.Util!="undefined"&&typeof s.Util.getQueryParam=="function"&&s.Util.getQueryParam("products")!="")_Prod=s.Util.getQueryParam("products");var Decision=lastEvent.decision_status?lastEvent.decision_status:lastEvent.transaction_result?lastEvent.transaction_result:"";if(Decision.length>1)_Decision=Decision;return _url+_AAFormName+"|Step\x3d"+_FormProgress+"|Prod\x3d"+_Prod+"|Decision\x3d"+_Decision}return""}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",
trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - PL CC HL - Google Ads URL param",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"64159"})},64159)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return window.digitalData.event[window.digitalData.event.length-1].data.products[0]["product-name"]}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - CC First Product Name",collection:"Digital Data Layer",
source:"Manage",priv:"false"},{id:"65773"})},65773)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(typeof window.s!="undefined"&&typeof window.s._referrer!="undefined")return encodeURI(window.s._referrer);else if(document.referrer){var a=document.createElement("a");a.href=document.referrer;return encodeURI(a.hostname+a.pathname)}return""}catch(err){return""}},transform:function(val){return val?
val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - S Referrer",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"65600"})},65600)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{if(window.digitalData.event[window.digitalData.event.length-1].data.decision_status&&window.digitalData.event[window.digitalData.event.length-1].data.decision_status.length>0)return window.digitalData.event[window.digitalData.event.length-1].data.decision_status;else return window.digitalData.event[window.digitalData.event.length-
1].data.transaction_result}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - Decision Status - No URL Condition",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"72122"})},72122)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return localStorage.getItem("n_agb")}catch(err){return""}},transform:function(val){return val},load:"page",trigger:Bootstrapper.data.immediateTrigger,dataDefName:"DDL- Hashed Phone",collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"71194"})},71194)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){try{return window.digitalData.event[window.digitalData.event.length-1].data.products.map(product=>product["product-id"]).join(",")}catch(err){return""}},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.whenValueExistsTrigger,dataDefName:"DDL - ProductId",
collection:"Digital Data Layer",source:"Manage",priv:"false"},{id:"62205"})},62205)},-1,-1,-1);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - view-chat-history",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event124";_events+="event124";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","view-chat-history",tempObject)})},3785220,695639,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - share-content",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.prop65=function anon(){var shareAction="share:";if(typeof s.parseDataLayer("social-network")!="undefined")shareAction+=s.parseDataLayer("social-network")+":";else shareAction+="unknown social network:";if(typeof s.parseDataLayer("name")!="undefined")shareAction+=
s.parseDataLayer("name");else shareAction+="unknown name";return shareAction}.call(this);s.eVar65="D\x3dc65";s.events="event43";s.linkTrackVars+=s.linkTrackVars.slice(-1)!=","?",":"";s.linkTrackVars+="prop65,eVar65,events";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="event43";s.tl(this,"o","share content");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1457853,395882,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-checklist",function(){s.events="event1,event11";s.pageName=function anon(){if(typeof s.parseDataLayer("page")!="undefined")return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("page").replace(/\s+/g,"-").toLowerCase();if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName")if(typeof s.parseDataLayer("section")!=
"undefined")return s.parseDataLayer("pageName")+":"+s.parseDataLayer("section");else return s.parseDataLayer("pageName");else return"unknown page name"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);
s.eVar65=function anon(){try{if(/small business lending (broker )?online application/i.test(s_parseDataLayer("name"))){var customAction="";var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")customAction=s_parseDataLayer("name")+" : Quote Id pre-populated";else customAction=s_parseDataLayer("name")+" : Quote Id empty";return customAction}else return""}catch(err){return""}}.call(this);s.eVar86=function anon(){try{if(s_parseDataLayer("name")==
"Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")return quoteId;else return""}else return""}catch(err){return""}}.call(this);s.eVar24="Website";s.products=function anon(){try{var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=
0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!=="")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";return window.sc_products}else return""}catch(err){return""}}.call(this);s.linkTrackVars="pageName,eVar23,events,eVar65,eVar86,eVar24,products";
s.linkTrackEvents="event1,event11";s.t()})},3803131,482915,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - modal-survey-completed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";_linkTrackVars+="events,eVar46,prop9,eVar9";_linkTrackEvents+="event28";var _events="event28";var tempObject={};tempObject.linkTrackVars=
_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){var productName="";try{productName=digitalData.event[0].data.products[0]["productName"]}catch(err){}var surveyID=s.parseDataLayer("surveyID");var surveyResponse=s.parseDataLayer("surveyResponse");var pageName="";try{pageName=digitalData.page.pageInfo.pageName}catch(err){}if(typeof productName!="undefined"&&productName!="")return surveyID+"|"+productName+"|"+surveyResponse;else if(pageName!=
"")return surveyID+"|"+pageName+"|"+surveyResponse;else return surveyID+"|"+surveyResponse}.call(this);tempObject.prop9="D\x3dpageName";tempObject.eVar9="D\x3dpageName";s.tl(this,"o","modal-survey-completed",tempObject)})},2715901,574171,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-retrieved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event113"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event113"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Retieved");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628009,685948,55);
Bootstrapper.bindDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-start",function(){setCSArtificialPageview("form-started")});Bootstrapper.ensEvent.add("ensEvent - prospect-form-start",function(){setCSArtificialPageview("form-started")});Bootstrapper.ensEvent.add("ensEvent - form - form-progressed",function(){setCSArtificialPageview("form-progressed")});Bootstrapper.ensEvent.add("ensEvent - form - form-checklist",
function(){setCSArtificialPageview("form-checklist")});Bootstrapper.ensEvent.add("ensEvent - form - form-decision",function(){setCSArtificialPageview("form-decision")});Bootstrapper.ensEvent.add("ensEvent - form - submit-application",function(){setCSArtificialPageview("submit-application")});Bootstrapper.ensEvent.add("ensEvent - application-form2-complete",function(){setCSArtificialPageview("form-completed")});Bootstrapper.ensEvent.add("ensEvent - prospect-form-complete",function(){setCSArtificialPageview("form-completed")});
Bootstrapper.ensEvent.add("ensEvent - calc-started",function(){setCSArtificialPageview("calc-started")});Bootstrapper.ensEvent.add("ensEvent - calc-progressed",function(){console.log("{ ensEvent - calc-progressed }");setCSArtificialPageview("calc-progressed")});Bootstrapper.ensEvent.add("ensEvent - calc-insight",function(){console.log("{ ensEvent - calc-insight }");setCSArtificialPageview("calc-insight")});Bootstrapper.ensEvent.add("ensEvent - calc-completed",function(){setCSArtificialPageview("calc-completed")});
Bootstrapper.ensEvent.add("ensEvent - calculator-tab-changed",function(){setCSArtificialPageview("calculator-tab-changed")});setQuerySymbol=function(){try{var qp="?";if(location.href.indexOf("#?")!=-1)qp="\x26";else if(location.search.indexOf("?")!=-1)qp="\x26";else if(location.href.indexOf("?")!=-1)qp="\x26";return qp}catch(err){}};setCSArtificialPageview=function(action){try{var q="";if(/ciatesting/i.test(document.location.search))console.log("setCSArtificialPageview - action: ",action);if(typeof window.digitalData!==
"undefined"){if(typeof window.digitalData.page.pageInfo.pageName!=="undefined")window._uxa.push(["setCustomVariable",1,"Page Name",digitalData.page.pageInfo.pageName+window.getNABPageNameWithSection()]);if(typeof window.digitalData.page.pageInfo.siteSection!=="undefined")window._uxa.push(["setCustomVariable",2,"Site Section",window.digitalData.page.pageInfo.siteSection]);if(typeof window.digitalData.page.pageInfo.siteSubSection!=="undefined")window._uxa.push(["setCustomVariable",3,"Site Subsection",
window.digitalData.page.pageInfo.siteSubSection])}if(action==="form-started"||action==="form-progressed"||action==="form-decision"||action==="submit-application"||action==="form-completed"||action==="form-checklist"||action==="calc-started"||action==="calc-progressed"||action==="calculator-used"||action==="calculator-tab-changed")q=setQuerySymbol()+action+"\x3d"+window.getNABPageNameWithSection().replace(/:/g,"").replace(/'/g,"");else if(action==="calc-completed"||action==="calc-insight"){var dataValue=
s.parseDataLayer("calcInsight")!=="unknown calcInsight"?s.parseDataLayer("calcInsight"):window.getNABPageNameWithSection();q=setQuerySymbol()+action+"\x3d"+dataValue.replace(/\s/g,"-").replace(/:/g,"").replace(/'/g,"")}window._uxa.push(["setQuery",window.location.search+q]);if(/ciatesting/i.test(document.location.search))console.log("setQuery: ",window.location.search+q);window._uxa.push(["trackPageview",window.location.pathname+window.location.hash.replace("#","?__")]);if(/ciatesting/i.test(document.location.search))console.log("trackPageview: ",
window.location.pathname+window.location.hash.replace("#","?__"))}catch(err){}}},3960553,664338,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - document-uploaded",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var documents=s.parseDataLayer("documents");var secondsToUpload=s.parseDataLayer("secondsToUpload");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;
var status="";if(typeof documents[i].status!="undefined")status=documents[i].status;if(status=="Success"||status=="SUCCESS")return"event118,event116\x3d"+secondsToUpload;else if(status=="Fail"||status=="FAIL"||status=="FAILED")return"event119,event116\x3d"+secondsToUpload;return""}else return""}catch(err){return"error"}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var documents=s.parseDataLayer("documents");if(typeof documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;var docType=
documents[i].docType;var fileType=documents[i].fileType;var sectionType=documents[i].sectionType;var uploadType=docType+"|"+fileType+"|"+sectionType+"|"+formName;return uploadType.toLowerCase()}}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar23,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=
","+function anon(){try{var documents=s.parseDataLayer("documents");var secondsToUpload=s.parseDataLayer("secondsToUpload");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){if(documents[i].adobeSent==1)continue;var status="";if(typeof documents[i].status!="undefined")status=documents[i].status;if(status=="Success"||status=="SUCCESS")return"event118,event116\x3d"+secondsToUpload;else if(status=="Fail"||status=="FAIL"||status=="FAILED")return"event119,event116\x3d"+secondsToUpload;
return""}else return""}catch(err){return"error"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Enquiry Form");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3528364,682800,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - survey-completed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar46,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event28";_events+="event28";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){return"Chat Survey|"+s_parseDataLayer("starRating")}.call(this);tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","survey-completed",tempObject)})},3785216,552771,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - welcome-screen|shown",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event120";_events+="event120";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","welcome-screen|shown",tempObject)})},3783953,695635,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - enquiry-form-started",function(){try{var pageId=s_parseDataLayer("pageId");var pageType="enquiry-form";if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src=
"https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType;document.body.appendChild(frame)}catch(err){}})},2149099,500685,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-response",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop65,eVar65,prop80";_linkTrackEvents+="event81";_events+=
"event81";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.prop80=
"D\x3dv80";s.tl(this,"o","virtual-assistant-response",tempObject)})},3783963,533846,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - document-download",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event10"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("formName")!="undefined"){var sBFP=s.parseDataLayer("formName");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId==
"string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar10=function anon(){try{if(typeof s.parseDataLayer("name")!="undefined")return s.parseDataLayer("name");else"unknown file name"}catch(e){}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,eVar56,eVar10";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?
s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event10"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Review");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4044936,767773,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - application-type-verified",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event120"}.call(this);s.pageName=function anon(){try{return digitalData.page.pageInfo.pageName+":"+s_parseDataLayer("section")}catch(e){}}.call(this);s.eVar20=function anon(){try{var userType=
s_parseDataLayerUserObj("form-interacted","applicantLiabilty","application-type-verified");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);
s.eVar52=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined")for(var i=digitalData.event.length-1;i>=0;i--){if(digitalData.event[i].eventType=="form-interacted")if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(digitalData.event[i].data.action=="form-completed")if(typeof digitalData.event[i].data.transaction_result!="undefined")return digitalData.event[i].data.transaction_result;else return false}else return false}catch(err){return false}}.call(this);
s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","application-type-verified");if(userType)return userType;return""}catch(err){return""}}.call(this);s.products=function anon(){try{var products=s.parseDataLayer("product");var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof products=="object"&&typeof products.products=="object"){var productElement="productId";if(/merchant and payments/i.test(s.parseDataLayer("name")))productElement=
"cmsIdentifier";if(productElement)for(var i=0;i<products.products.length;i++)if(typeof products.products[i][productElement]!="undefined")window.sc_products+=";"+products.products[i][productElement]+",";return window.sc_products}else if(/merchant and payments/i.test(s.parseDataLayer("name"))){var plan=s.Util.getQueryParam("products");if(plan!="")window.sc_products=";"+plan;return window.sc_products}else if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!=
"undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!=="")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";else if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")window.sc_products+=";"+productArray[i]["product-id"]+",";return window.sc_products}else if(typeof s_parseDataLayerCustomValue("productName")==
"string"){window.sc_products=";"+s_parseDataLayerCustomValue("productName");return window.sc_products}else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);
s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,eVar52,eVar19,products,eVar56,eVar87,eVar28";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event120"}.call(this).replace(/(=.*?,|=.*?$)/g,
",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4211192,790930,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - initial-assessment",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var eventString="event1,event76";return eventString}catch(err){return"event1"}}.call(this);s.eVar52=function anon(){try{var initial_assessment_result=s.parseDataLayer("initial_assessment_result");if(typeof initial_assessment_result==
"string"&&initial_assessment_result!="unknown initial_assessment_result"&&initial_assessment_result!="")if(/002$|003$|005$|006$|007$|008$|009$|010$|011$|012$/i.test(initial_assessment_result))return"Declined";else if(/001$/i.test(initial_assessment_result))return"Dedupe";else if(/004$|099/i.test(initial_assessment_result))return"Technical Fault";else return initial_assessment_result;else return""}catch(err){return""}}.call(this);s.pageName=function anon(){try{if(s.parseDataLayer("pageName")!="unknown pageName")return s.parseDataLayer("pageName")+
":"+s.parseDataLayer("pageId");else if(typeof digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("pageId")}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!=
"undefined"){var productText="";var dlProdId=s_parseDataLayerProductId("form-interacted","form-initial-assessment",true);if(typeof dlProdId=="string"&&dlProdId!=="")productText=";"+dlProdId;else if(typeof s_parseDataLayerCustomValue("productName")=="string")productText=";"+s_parseDataLayerCustomValue("productName");return productText}else if(typeof digitalData!=="undefined"&&typeof s_parseDataLayerCustomValue("productName")=="string")return";"+s_parseDataLayerCustomValue("productName");else return""}catch(err){return""}}.call(this);
s.prop27=function anon(){try{var initial_assessment_result_code=s.parseDataLayer("initial_assessment_result_code");if(typeof initial_assessment_result_code=="string"&&initial_assessment_result_code!="unknown initial_assessment_result_code"&&initial_assessment_result_code!="")if(/mapping-list/i.test(initial_assessment_result_code))return"mapped-value";else return initial_assessment_result_code;else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(typeof s_parseDataLayerCustomValue("dataSharingConsent")==
"string")return s_parseDataLayerCustomValue("dataSharingConsent");else return""}catch(err){return""}}.call(this);s.eVar20=function anon(){if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiability","form-initial-assessment")=="string")return s_parseDataLayerUserObj("form-interacted","applicantLiability","form-initial-assessment");else return""}.call(this);s.purchaseID=function anon(){try{var serialised_id=s.parseDataLayer("serialised_id");if(typeof serialised_id=="string"&&serialised_id!=
"unknown serialised_id"&&serialised_id!="")return"i"+serialised_id.replace(/nab/i,"");else return""}catch(err){return""}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","form-initial-assessment");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted",
"age","form-initial-assessment");var dob=s_parseDataLayerUserObj("form-interacted","dob","form-initial-assessment");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","form-initial-assessment");if(typeof state!="undefined")return state;
else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-initial-assessment");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted",
"type","form-initial-assessment");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar52,pageName,events,eVar56,products,prop27,eVar65,eVar20,purchaseID,eVar15,eVar16,eVar17,eVar18,eVar19";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!==
"None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var eventString="event1,event76";return eventString}catch(err){return"event1"}}.call(this).replace(/=.*,/g,",").replace(/=.*/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2454761,507687,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - product-selected",function(){s.origLTV=s.linkTrackVars;s.events="event79";s.list3=function anon(){return s.parseDataLayer("name")}.call(this);s.prop66="D\x3dlist3";s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,list3,prop66,prop9,eVar9";
s.linkTrackEvents="event79";s.tl(this,"o","Product Selected");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2269574,514264,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - livechat-offered",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,eVar11,prop11,prop65,eVar65,eVar9,prop9,eVar72";_linkTrackEvents+=
"event82";_events+="event82";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.eVar11="D\x3dg";tempObject.prop11="D\x3dg";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+
":Agent";return prop65.trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.eVar9=function anon(){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined")if(digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName;else return"";else return""}.call(this);tempObject.prop9="D\x3dv9";tempObject.eVar72=function anon(){var widget_type=s.parseDataLayer("participantType");return"widget type: "+widget_type}.call(this);
s.tl(this,"o","livechat-offered",tempObject)})},3783959,533847,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - submit-application",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";uniqueReference=s.parseDataLayer("uniqueReference");
ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var eventString="";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=
":"+applicationSerialise}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){serialised_id=serialised_id.replace(/nab/i,"");eventString="event1,event75:"+applicationSerialise;return eventString}else if(s_parseDataLayer("name")=="Transaction and Savings Online Application"||s_parseDataLayer("name")=="Term Deposit Online Application")return"event1,event13"+applicationSerialise;else{if(s_parseDataLayerAmountAppliedFor("form-interacted","submit-application")!==
false){if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");if(typeof age!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+age;else eventString="event1,event13:"+applicationSerialise+",event14"}else eventString="event1,event13"+applicationSerialise+",event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==
false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&
application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}if(s_parseDataLayer("name")=="Online Credit Card Application")return"event1,event13"+
applicationSerialise;return"event1"}}catch(err){return"event1"}}.call(this);s.pageName=function anon(){if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name")))return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("pageId").replace(/\s+/g,"-").replace(/39/g,"");else if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,"-")+":processing"}.call(this);
s.eVar20=function anon(){try{var applicantLiability=s_parseDataLayerUserObj("form-interacted","applicantLiability","submit-application");var applicantLiabilityDesc=s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","submit-application");if(typeof applicantLiability=="string")return applicantLiability.charAt(0).toUpperCase()+applicantLiability.slice(1);else if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-
1];if(lastEventObject.data["user"].applicantLiability)return lastEventObject.data["user"].applicantLiability;else if(typeof applicantLiabilityDesc=="string")return applicantLiabilityDesc;else return""}else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=s_parseDataLayer("name");if(formAbandonStartedFormName==
formAbandonCompletedFormName){var currentTime=Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","submit-application");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=
s_parseDataLayer("application_id");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else return""}catch(err){return""}}.call(this);s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");var dob=s_parseDataLayerUserObj("form-interacted","dob","submit-application");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;
else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","submit-application");if(typeof state!="undefined")return state;else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","submit-application");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!=
"undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","submit-application");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{var dlProductId=s_parseDataLayerProductId("form-interacted","submit-application");
if(dlProductId!==false){var prodString="";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor!="maximum")prodString=";"+dlProductId+";;;event14\x3d"+dl_AmountAppliedFor;else prodString=";"+dlProductId;var productArray=s.parseDataLayer("products");if(typeof productArray=="object"&&typeof productArray[1]=="object"&&prodString!="")for(var j=1;j<productArray.length;j++)if(typeof productArray[j]!=
"undefined")if(typeof productArray[j]["product-id"]!="undefined"&&productArray[j]["product-id"]!=="")prodString+=",;"+productArray[j]["product-id"];var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount"&&parseInt(balanceTransferAmount)>0)prodString+=",;balanceTransfer"+";;;event74\x3d"+balanceTransferAmount;return prodString}else if(typeof s_parseDataLayerCustomValue("productName")==
"string")return";"+s_parseDataLayerCustomValue("productName");else return""}catch(err){return""}}.call(this);s.prop50="D\x3devents";s.prop26=function anon(){try{var amtApplied=s.parseDataLayer("transaction_amount_applied_for");if(typeof amtApplied!="undefined")if(amtApplied=="maximum")return"maximum";else{if(typeof s_parseDataLayerCustomValue("creditLimitDefault")=="string")return s_parseDataLayerCustomValue("creditLimitDefault")}else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(typeof s_parseDataLayerCustomValue("dataSharingConsent")==
"string")return s_parseDataLayerCustomValue("dataSharingConsent");else return""}catch(err){return""}}.call(this);s.list3=function anon(){try{var product="";var prodString="";if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices")product=s_parseDataLayer("productsAndServices");if(typeof product=="object"&&product.length>0)for(var i=0;i<product.length;i++)if(typeof product[i]["name"]!="undefined")prodString+=product[i]["name"]+",";return prodString}catch(err){return""}}.call(this);
s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar83=function anon(){var depositAmount=s_parseDataLayerCustomValue("depositAmount");var depositTerm=s_parseDataLayerCustomValue("depositTerm");var purpose=s.parseDataLayer("purpose");if(typeof depositAmount==="string"&&typeof depositTerm==="string")return"Term Deposit|"+depositTerm+"|"+depositAmount;else if(typeof purpose=="string"&&purpose!="unknown purpose")return purpose;
else if(s.parseDataLayer("purposeAndTerm")!="unknown purposeAndTerm")return s.parseDataLayer("purposeAndTerm");else return""}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,prop33,eVar15,eVar56,eVar16,eVar17,eVar18,eVar19,products,prop50,prop26,eVar65,list3,eVar87,eVar83,eVar28";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var eventString="";var applicationSerialise=
"";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=":"+applicationSerialise}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){serialised_id=
serialised_id.replace(/nab/i,"");eventString="event1,event75:"+applicationSerialise;return eventString}else if(s_parseDataLayer("name")=="Transaction and Savings Online Application"||s_parseDataLayer("name")=="Term Deposit Online Application")return"event1,event13"+applicationSerialise;else{if(s_parseDataLayerAmountAppliedFor("form-interacted","submit-application")!==false){if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var age=s_parseDataLayerUserObj("form-interacted","age","submit-application");
if(typeof age!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+age;else eventString="event1,event13:"+applicationSerialise+",event14"}else eventString="event1,event13"+applicationSerialise+",event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","submit-application");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=
s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&
balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}if(s_parseDataLayer("name")=="Online Credit Card Application")return"event1,event13"+applicationSerialise;return"event1"}}catch(err){return"event1"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3965964,499210,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - enquiry-form-completed",function(){try{var pageId="completed";var pageType="enquiry-form";var outcome="submitted";if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height=
"1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType+"\x26outcome\x3d"+outcome;document.body.appendChild(frame)}catch(err){}})},2151094,500687,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - file-upload-error",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="event1,event55";s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);
sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.pageName=function anon(){window.scFormDebug="file-upload-error - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="file-upload-error - Scenario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,
"").replace(/:privacy$/,"")+":"+section}else{window.scFormDebug="file-upload-error - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":file-upload-error"}}.call(this);s.prop19=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var error=s.parseDataLayer("error");var sectionName=s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=
sectionName.split("|");if(sectionNameArr[0]!=="")fileType=sectionNameArr[0]+"|"+fileType}var uploadError=formName+"|"+fileType+"|"+error;return uploadError.toLowerCase()}catch(err){return"unknown upload type error"}}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var uploadType=fileType+"|"+formName;var sectionName=s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=
sectionName.split("|");if(sectionNameArr[0]!=="")uploadType=sectionNameArr[0]+"|"+uploadType}return uploadType.toLowerCase()}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,pageName,prop19,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="event1,event55";s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},
2476688,543147,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-dialog-saved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{if(/(business|financial) snapshot/i.test(s_parseDataLayer("name"))&&/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(/product/i.test(productOrServiceAdd))return"event1,event72";
else if(/service/i.test(productOrServiceAdd))return"event1,event73";else return"event1"}else return"event1"}catch(err){return"event1"}}.call(this);s.eVar51=function anon(){try{if(s_parseDataLayerCustomValue("formType")=="application-form2")return"";else return s.parseDataLayer("name")}catch(err){return""}}.call(this);s.pageName=function anon(){window.scFormDebug="Form Dialog Saved - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=
s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="Form Dialog Saved - Scenario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section+":saved"}else{window.scFormDebug="Form Dialog Saved - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":form-dialog-saved"}}.call(this);s.eVar65=function anon(){try{var formName=s_parseDataLayer("name");if(/(business|financial) snapshot/i.test(formName)&&
/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(typeof productOrServiceAdd=="string"&&productOrServiceAdd!="")return formName+" : "+productOrServiceAdd+" : saved";else return""}else return""}catch(err){return""}}.call(this);s.prop65="D\x3dv65";s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar51,pageName,eVar65,prop65";s.linkTrackEvents=s.linkTrackEvents&&
s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{if(/(business|financial) snapshot/i.test(s_parseDataLayer("name"))&&/ProductOrServiceForm/i.test(s_parseDataLayer("sectionId"))){var productOrServiceAdd=s_parseDataLayerCustomValue("productOrServiceAdd");if(/product/i.test(productOrServiceAdd))return"event1,event72";else if(/service/i.test(productOrServiceAdd))return"event1,event73";else return"event1"}else return"event1"}catch(err){return"event1"}}.call(this).replace(/(=.*?,|=.*?$)/g,
",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2715826,488828,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chat-system-error",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event123";_events+="event123";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","chat-system-error",tempObject)})},3785219,695638,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - carousel-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event128";_events+="event128";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","carousel-clicked",tempObject)})},3785224,695643,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - prospect-form-complete",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var uniqueReference="";var ticketId="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!=
"unknown uniqueReference"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+uniqueReference;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+ticketId;else return"event1,event42"}catch(err){return"event1,event42"}}.call(this);s.eVar51=function anon(){return s.parseDataLayer("name")}.call(this);s.eVar24="Website";s.pageName=function anon(){return"nab:enquiry-forms:"+s.parseDataLayer("name").replace(/:start$/,
"").replace(/\s+/g,"-")+":thankyou"}.call(this);s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-completed");if(typeof postcode!="undefined"&&postcode!==false)return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.prop66=function anon(){try{if(typeof s_covid_addProducts==="function"&&typeof s_covid_getHLRepaymentPauseDuration===
"function"&&typeof s_covid_getPLRepaymentReduction==="function"&&typeof s_covid_getBusinessSupportLoanValue==="function")return s_covid_addProducts()+s_covid_getHLRepaymentPauseDuration()+s_covid_getPLRepaymentReduction()+s_covid_getBusinessSupportLoanValue();if(typeof s_covid_getBusinessSupportLoanValue==="function"&&typeof s_covid_addProducts!="function"&&typeof s_covid_getHLRepaymentPauseDuration!="function"&&typeof s_covid_getPLRepaymentReduction!="function")return s_covid_getBusinessSupportLoanValue();
var productService=s_parseDataLayerCustomValue("productService");if(typeof productService==="string")return productService;if(s_parseDataLayer("name")=="Compliments and Complaints Feedback"){var feedbackProduct=s_parseDataLayer("productsAndServices");var feedbackResult=feedbackProduct["product-id"];return feedbackResult}var product="";var prodString="";if(s_parseDataLayer("products")!="unknown products")product=s_parseDataLayer("products");else if(s_parseDataLayer("product")!="unknown product")product=
s_parseDataLayer("product");else if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices")product=s_parseDataLayer("productsAndServices");if(typeof product=="object"&&product.length>0)for(var i=0;i<product.length;i++){if(typeof product[i]["product-id"]!="undefined")prodString+=product[i]["product-id"]+",";if(typeof product[i]["topic"]!="undefined")prodString+=product[i]["topic"]+",";if(typeof product[i]["borrow"]!="undefined")prodString+="Borrow:"+product[i]["borrow"]+",";if((s_parseDataLayer("name")==
"Unsubscribe from email offers"||s_parseDataLayer("name")=="Unsubscribe from newsletter")&&product[i]["name"])prodString?prodString+=","+product[i]["name"]:prodString+=product[i]["name"]}return prodString.replace(/,+$/,"")}catch(err){return""}}.call(this);s.list3="D\x3dc66";s.eVar65=function anon(){try{var product=s_parseDataLayer("productsAndServices");if(typeof s_parseDataLayerCustomValue("contactAcceptance")=="string"){var fieldValue=s_parseDataLayerCustomValue("contactAcceptance");return fieldValue}else if(s.parseDataLayer("userAction")!=
"unknown userAction")return s.parseDataLayer("userAction");else if(s_parseDataLayer("productsAndServices")!="unknown productsAndServices"&&typeof product[0].name!="undefined"&&typeof product[0].method!="undefined"&&typeof product[0].dayOfWeek!="undefined"){var product=s_parseDataLayer("productsAndServices");return product[0].name+"|"+product[0].method+"|"+product[0].dayOfWeek+"|"+product[0].time}else return""}catch(err){return""}}.call(this);s.eVar4=function anon(){try{if(s_parseDataLayer("productsAndServices")!=
"unknown productsAndServices")if(s_parseDataLayer("name")=="Banker Appointment Booking Tool"||s_parseDataLayer("name")=="Business Appointment Booking Form"||s_parseDataLayer("name")=="Business Banker Appointment Booking Tool"){var product=s_parseDataLayer("productsAndServices");var formName=s_parseDataLayer("name");return formName+"|"+product[0].postcode+"|"+product[0].locality}else return"";else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){if(s.parseDataLayer("application_id")!=
"unknown applicatiom_id")return s.parseDataLayer("application_id")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar51,events,eVar24,pageName,prop9,eVar9,eVar18,prop66,list3,eVar65,eVar4,eVar56";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var uniqueReference="";var ticketId="";uniqueReference=s.parseDataLayer("uniqueReference");
ticketId=s.parseDataLayer("ticket_id");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+uniqueReference;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"&&s.linkTrackEvents.toLowerCase()=="none")return"event1,event42"+":"+ticketId;else return"event1,event42"}catch(err){return"event1,event42"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,
"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4202244,355922,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-cancelled",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event115"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event115"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,
"o","Form Cancelled");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628012,685950,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-withdrawn",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event135"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","form-withdrawn");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar20=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","applicantLiability","form-withdrawn");if(userType)return userType;return""}catch(err){return""}}.call(this);s.linkTrackVars=
s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87,eVar19,eVar20";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event135"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Withdrawn");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4209110,767647,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - file-upload-success",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event39"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=
as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";if(typeof sBFP=="string")sBFP=sBFP.trim();return sBFP}else""}.call(this);s.pageName=function anon(){window.scFormDebug="file-upload-success - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="file-upload-success - Scenario 1: section is set";
return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section}else{window.scFormDebug="file-upload-success - Scenario 4: no match";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":file-upload-success"}}.call(this);s.eVar55=function anon(){try{var formName=s.parseDataLayer("name");if(typeof formName=="string")formName=formName.trim();var fileType=s.parseDataLayer("fileType");var uploadType=fileType+"|"+formName;var sectionName=
s.parseDataLayer("section");if(sectionName!="unknown section"){var sectionNameArr=sectionName.split("|");if(sectionNameArr[0]!=="")uploadType=sectionNameArr[0]+"|"+uploadType}return uploadType.toLowerCase()}catch(err){return"unknown upload type"}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="events,eVar23,pageName,eVar55";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";
s.linkTrackEvents+=","+function anon(){return"event1,event39"}.call(this).match(/event\d+/g).join(",");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2476685,543144,55);
Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;try{var tealiumprod="https://tags.nab.com.au/main/prod/utag";var tealiumdev="https://tags.nab.com.au/main/dev/utag";var tealiumsandbox="https://tags.nab.com.au/sandbox/dev/utag";var tealium_endpoint=tealiumdev;var local_env=localStorage.getItem("tealiumenv");if((window.location.hostname=="www.nab.com.au"||window.location.hostname=="business.nab.com.au"||window.location.hostname==
"propertyinsights.nab.com.au"||window.location.hostname=="news.nab.com.au")&&typeof local_env!="string")tealium_endpoint=tealiumprod;else if(local_env=="sandbox")tealium_endpoint=tealiumsandbox;var utag_data={};(function(a,b,c,d){a=tealium_endpoint+".js";b=document;c="script";d=b.createElement(c);d.src=a;d.type="text/java"+c;d.async=true;a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a)})()}catch(e){console.error("UTAG error.",e.message)}},4062642,[4193940],728389,[315969],24);
Bootstrapper.bindEventImmediate(function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];Bootstrapper.currentRuleId=4016918;Bootstrapper.currentDeploymentId=524966;var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.data.resolve(["62375"],function(manage_62375){var ensVar0=function(){return localStorage.getItem("n_aol")};var ensVar1=function(){return localStorage.getItem("n_agb")};var ensVar2=function(){return manage_62375};
var options={},has_valid_value=function(a){return String(typeof a)!=="undefined"&&a!==null&&a!==""},get_cookie=Bootstrapper.Cookies?Bootstrapper.Cookies.get:function(a){var c=document.cookie.split(";");for(var i=0;i<c.length;i++){var b=c[i].trim().split("\x3d");if(a===b[0]){b.shift();return decodeURIComponent(b.join("\x3d"))}}};options.pixel_id="1349572601822987";options.event_data={};options.event_data.event_name="Lead";options.event_data.event_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}();options.event_data.user_data={};if(has_valid_value(ensVar0.call(this)))options.event_data.user_data.em=ensVar0.call(this);if(has_valid_value(ensVar1.call(this)))options.event_data.user_data.ph=ensVar1.call(this);options.event_data.custom_data={};options.event_data.custom_data.content_name="Personal Loans - Personal Loan - Application Form";options.event_data.custom_data.content_category="Personal Loans";options.event_data.custom_data["Step"]=
"Complete";options.event_data.custom_data["Test"]="0";options.event_data.custom_data["Version"]="2";options.event_data.custom_data["Decision"]=ensVar2.call(this);if(!options.event_data.user_data.external_id){var pulse_uuid=get_cookie("uuid");if(pulse_uuid)options.event_data.user_data.external_id=pulse_uuid}!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version="2.0";n.queue=
[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq.agent="tmensighten";Bootstrapper.fbq_ids=Bootstrapper.fbq_ids||[];if(!~Bootstrapper.fbq_ids.indexOf(options.pixel_id)){fbq("init",options.pixel_id,options.event_data.user_data);Bootstrapper.fbq_ids.push(options.pixel_id)}fbq("set","autoConfig",false,options.pixel_id);fbq("trackSingle",options.pixel_id,options.event_data.event_name,
options.event_data.custom_data,{"eventID":options.event_data.event_id});var sst_options=JSON.parse(JSON.stringify(options)),sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\u0080";b[h]%64-56;)b+="\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,
j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i},is_sha256=function(a){return/[0-9a-f]{64}/i.test(a)},
_fbp=get_cookie("_fbp"),_fbc=get_cookie("_fbc");sst_options.timestamp=(new Date).getTime();if(Array.isArray(sst_options.event_data.custom_data.content_type))sst_options.event_data.custom_data.content_type=sst_options.event_data.custom_data.content_type.join(",");for(var i in sst_options.event_data.user_data)if(sst_options.event_data.user_data.hasOwnProperty(i))if(is_sha256(sst_options.event_data.user_data[i]))sst_options.event_data.user_data[i]=[sst_options.event_data.user_data[i]];else{var hashed_value=
[sha256(sst_options.event_data.user_data[i])];sst_options.event_data.user_data[i]=hashed_value}if(_fbp)sst_options.event_data.user_data.fbp=_fbp;if(_fbc)sst_options.event_data.user_data.fbc=_fbc;Bootstrapper.SST=Bootstrapper.SST||[];Bootstrapper.SST.push({name:"facebook_conversions_api_integration",data:sst_options,publishPath:"sst"})});Bootstrapper.triggerEvent(4016918,524966)},4016918,524966,733,["Personal Loan Online Application - Application End Of Form","Personal Loan Online Application - Application Form Completed",
"Personal Loan Online Full Application - personal-loan - Application Form Completed"]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-saved",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event112"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.prop26=
function anon(){try{if(typeof s_parseDataLayerCustomValue("creditLimitDefault")=="string")return s_parseDataLayerCustomValue("creditLimitDefault");else return""}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,prop26,eVar87";s.linkTrackEvents=s.linkTrackEvents&&
s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event112"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Saved");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628008,685947,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - quick-reply-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event127";_events+=
"event127";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65=
"D\x3dc65";tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","quick-reply-clicked",tempObject)})},3785223,695642,55);
Bootstrapper.bindEventDependencyImmediate(function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];Bootstrapper.currentRuleId=4180328;Bootstrapper.currentDeploymentId=614851;var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.data.resolve(["59677","72122","51240","51241"],function(manage_59677,manage_72122,manage_51240,manage_51241){var ensVar0=function(){return typeof digitalData=="object"&&typeof digitalData.event!=
"undefined"&&typeof digitalData.event[digitalData.event.length-1].data!="undefined"&&typeof digitalData.event[digitalData.event.length-1].data.transaction_result!="undefined"?digitalData.event[digitalData.event.length-1].data.transaction_result=="APPROVED"?"nab-g0":digitalData.event[digitalData.event.length-1].data.transaction_result=="BUREAU_DECLINE"||digitalData.event[digitalData.event.length-1].data.transaction_result=="NON_BUREAU_DECLINE"?"nab-d008":"nab-d007":digitalData.event[digitalData.event.length-
1].data.transaction_result!="undefined"?"nab-d007":""};var ensVar1=function(){return manage_59677};var ensVar2=function(){try{if(window.digitalData.event[window.digitalData.event.length-1].data.name=="Personal Loan Online Application")return window.digitalData.event[window.digitalData.event.length-1].data.application_id;return""}catch(err){return""}};var ensVar3=function(){return manage_72122};var ensVar4=function(){return manage_51240};var ensVar5=function(){return manage_51241};var ensVar6=function(){return manage_59677};
var countingMethod="unique";var dl="gDataLayer";var floodLightId="DC-3347639";var send_to=[];if(floodLightId){var receiver=floodLightId+"/"+"perso109"+"/"+ensVar0.call(this)+"+"+countingMethod;send_to.push(receiver)}else{var ids=[];ids.push("");for(var i in ids){var receiver=ids[i]+"/"+"perso109"+"/"+ensVar0.call(this)+"+"+countingMethod;send_to.push(receiver)}}var allow_custom_scripts="true"=="true"?true:false;var eventObj={"allow_custom_scripts":allow_custom_scripts,"send_to":send_to};if(countingMethod===
"per_session")if(undefined)eventObj.session_id=undefined;if(countingMethod==="transactions"){if(ensVar1.call(this))eventObj.value=ensVar1.call(this);if(undefined)eventObj.transaction_id=undefined;if(undefined)eventObj.quantity=undefined}eventObj["u1"]=[ensVar2.call(this)];eventObj["u2"]=[ensVar3.call(this)];eventObj["u3"]=[ensVar4.call(this)];eventObj["u4"]=[ensVar5.call(this)];eventObj["u5"]=[ensVar6.call(this)];window[dl]=window[dl]||[];window.gtag=window.gtag||function gtag(){window[dl].push(arguments)};
gtag("event","conversion",eventObj)});Bootstrapper.triggerEvent(4180328,614851)},4180328,[2977562],614851,[564146],1108,["Personal Loan Online Application - Application End Of Form","Personal Loan Online Application - Application Form Completed","Personal Loan Online Full Application - Application Form Completed"]);
Bootstrapper.bindEventDependencyImmediate(function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];Bootstrapper.currentRuleId=4179664;Bootstrapper.currentDeploymentId=613674;var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.data.resolve(["59677","51242","51240","51241"],function(manage_59677,manage_51242,manage_51240,manage_51241){var ensVar0=function(){return manage_59677};var ensVar1=function(){try{if(window.digitalData.event[window.digitalData.event.length-
1].data.name=="Personal Loan Online Application")return window.digitalData.event[window.digitalData.event.length-1].data.application_id;return""}catch(err){return""}};var ensVar2=function(){return manage_51242};var ensVar3=function(){return manage_51240};var ensVar4=function(){return manage_51241};var ensVar5=function(){return manage_59677};var countingMethod="unique";var dl="gDataLayer";var floodLightId="DC-3347639";var send_to=[];if(floodLightId){var receiver=floodLightId+"/"+"perso109"+"/"+"plapp603"+
"+"+countingMethod;send_to.push(receiver)}else{var ids=[];ids.push("");for(var i in ids){var receiver=ids[i]+"/"+"perso109"+"/"+"plapp603"+"+"+countingMethod;send_to.push(receiver)}}var allow_custom_scripts="true"=="true"?true:false;var eventObj={"allow_custom_scripts":allow_custom_scripts,"send_to":send_to};if(countingMethod==="per_session")if(undefined)eventObj.session_id=undefined;if(countingMethod==="transactions"){if(ensVar0.call(this))eventObj.value=ensVar0.call(this);if(undefined)eventObj.transaction_id=
undefined;if(undefined)eventObj.quantity=undefined}eventObj["u1"]=[ensVar1.call(this)];eventObj["u2"]=[ensVar2.call(this)];eventObj["u3"]=[ensVar3.call(this)];eventObj["u4"]=[ensVar4.call(this)];eventObj["u5"]=[ensVar5.call(this)];window[dl]=window[dl]||[];window.gtag=window.gtag||function gtag(){window[dl].push(arguments)};gtag("event","conversion",eventObj)});Bootstrapper.triggerEvent(4179664,613674)},4179664,[2977562],613674,[564146],1108,["Personal Loan Online Application - NAB Personal Loan - Application Form Started",
"Personal Loan Online Application - personal-loan - Application Form Started","Personal Loan Online Full Application - personal-loan - Application Form Started"]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - button-clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65,eVar93";_linkTrackEvents+="event129";_events+="event129";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
tempObject.eVar93=function anon(){return s.parseDataLayer("indexPosition")}.call(this);s.tl(this,"o","button-clicked",tempObject)})},3785225,695644,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - survey-presented",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar46,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event27";_events+="event27";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46="Chat Survey";tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","survey-presented",tempObject)})},3785215,552772,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - read-more",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.pageName=function anon(){var localPageName="";if(typeof s.parseDataLayer("name")!="undefined")localPageName=s.parseDataLayer("name");else localPageName="unknown name";localPageName+=":read-more";return localPageName}.call(this);s.linkTrackVars+=s.linkTrackVars.slice(-1)!=
","?",":"";s.linkTrackVars+="pageName";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="None";s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1459475,395696,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-accepted",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event134"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=s_parseDataLayer("name");if(formAbandonStartedFormName==formAbandonCompletedFormName){var currentTime=
Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);s.prop50="D\x3devents";
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar28=
function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","form-accepted");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar20=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","applicantLiability","form-accepted");if(userType)return userType;return""}catch(err){return""}}.call(this);
s.pageName=function anon(){window.scFormDebug="Form Progessed - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="Form Progessed - Senario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section}else if(typeof s.parseDataLayer("page")!="undefined"&&s.parseDataLayer("page")!="unknown page")if(s.parseDataLayer("page").substring(0,
4)==="nab:"){window.scFormDebug="Form Progessed - Scenario 2: page is set - full path";return s.parseDataLayer("page").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 2: page is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("page").replace(/\s+/g,"-").replace(/39/g,"")}else if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName")if(s.parseDataLayer("pageName").substring(0,4)===
"nab:"){window.scFormDebug="Form Progessed - Scenario 3: pageName is set - full path";return s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 3: pageName is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 4: no match";return false}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+
",":"";s.linkTrackVars+="eVar23,events,prop33,products,prop50,eVar56,eVar28,eVar19,eVar20,pageName";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event134"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4209112,767648,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - proactive-offer|clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event125";_events+="event125";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","proactive-offer|clicked",tempObject)})},3785222,695640,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - form-completed",function(){try{var pageId=s_parseDataLayer("pageId");var formAction=s_parseDataLayer("action");var pageType=s_parseDataLayer("name");var outcome="unknown outcome";if(typeof pageId=="string"&&/pgExit/i.test(pageId))outcome="submitted";else if(typeof formAction=="string"&&/form\-decision/i.test(formAction)){if(s_parseDataLayer("transaction_result")!=
"unknown transaction_result")outcome=s_parseDataLayer("transaction_result");else if(s_parseDataLayer("initial_assessment_result")!="unknown initial_assessment_result")outcome=s_parseDataLayer("initial_assessment_result");else outcome="unknown";pageId="Outcome"}if(typeof pageId=="string"&&!/unknown pageid/i.test(pageId)&&pageId!="")pageId=pageId.replace("pg","");pageType=pageType.replace("REA Home Loan","online");pageType=pageType.replace(/\s+/g,"-");pageType=pageType.toLowerCase();var frame=document.createElement("iframe");
frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+pageId+"\x26pageType\x3d"+pageType+"\x26outcome\x3d"+outcome;document.body.appendChild(frame)}catch(err){}})},2927306,500677,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chatwidget-resumed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event80";_events+="event80";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type=s_parseDataLayer("participantType");if(type!="unknown particpantType")return(action+
":"+type).trim();else return false}.call(this);tempObject.eVar65="D\x3dc65";s.tl(this,"o","chatwidget-resumed",tempObject)})},3785212,533845,55);
Bootstrapper.bindDependencyDOMLoaded(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;window.CS_CONF={"useLambdaBuild":false,"collectionEnabled":true,"useSentry":false,"isSMB":false,"projectId":51360,"status":1,"hostnames":["nab.com.au"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":0,"visitorCookieTimeout":34164E6,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":null,
"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,
"dynamicIdRegex":null,"whitelistedAttributes":["data-styled-version","data-styled-undefined","data-styles"],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingUnmaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},
"asyncSerializerEnabled":1,"pendingInactivityTimeout":5E3,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-us1.az.contentsquare.net",
"malkaRecordingDomain":"k-us1.az.contentsquare.net","staticResourceManagerDomain":"srm.af.contentsquare.net","voc":{"siteId":null,"enabled":0}};window.CS_INTEGRATIONS_CONF={"adobe-target":{}};!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,
"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Adobe Target","dvarPrefix":"AB_AT_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-contentsquare","version":"3.8.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled\x3dtrue")>
-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||
document.location.href.indexOf("csqDebuggerEnabled\x3dtrue")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var c=t(0);const u=function(e){let n,t,i,r;if(o(function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let c="-contentsquare";r=(new RegExp(c+"$")).test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(c="-cap",r=(new RegExp(c+"$")).test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),
r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=u.parameterName,l=u.snippetBuildName,f=u.snippetVersion;o(function(){const e=c.displayName,n=c.dvarPrefix;var t,u;t=e,u=f,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+u);const p=i(s,"customObjectName"),d=p?p.trim():"ttMETA";function g(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(l,`Dynamic variable with ${e} and value ${t} sent`)}
const m=[];function w(e){if(e&&function(e){return Array.isArray(e)}(e))for(const n of e){let e,t;n.CampaignName&&n.RecipeName?(e=n.CampaignName,t=n.RecipeName):n.campaign&&n.experience?(e=n.campaign,t=n.experience):n["activity.name"]&&n["experience.name"]&&(e=n["activity.name"],t=n["experience.name"]),m.length&&m.includes(e+"~~~~"+t)&&(e="",t=""),e&&t&&(m.push(e+"~~~~"+t),g(e,t))}}document.addEventListener("at-request-succeeded",function(e){o(function(){e&&e.detail&&e.detail.responseTokens&&w(e.detail.responseTokens)},
l)}),function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}(d,function(){setTimeout(function(){o(function(){w(window[d])},l)},500)})},l)}]);(()=>{var ie={};ie.d=(s,r)=>{for(var t in r)ie.o(r,t)&&!ie.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ie.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||(new Function("return this"))()}catch{if(typeof window==
"object")return window}}();ie.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ie.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var rn={};ie.r(rn);ie.d(rn,{getRequestParameters:()=>am});function Ge(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t||(t=s[r]),t}var oi=typeof window=="undefined";function oh(){return typeof globalThis!=
"undefined"?globalThis:typeof window!="undefined"?window:typeof ie.g!="undefined"?ie.g:typeof process!="undefined"?process:Function("return this")()}var ct=oh();var da="cs-native-frame",be={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],
imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=Ge(window,"setTimeout");window.csQueueMicrotask=Ge(window,"queueMicrotask");window.csClearTimeout=Ge(window,"clearTimeout");window.csSetInterval=Ge(window,"setInterval");window.csClearInterval=Ge(window,"clearInterval");window.csFileReader=Ge(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+
i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function ah(){let s=document.createElement("iframe");s.id=da,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,
e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function ch(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function lh(s,r,t){let e=ch(s,r);if(!e)return function(){return this[r]};switch(t){case "get":return e.get;case "set":return e.set;case "value":return e.value}}function pa(s){var r,t;Object.keys(be.constructors).forEach(e=>{window[be.constructors[e]]=s[e]instanceof Function&&s[e].prototype==
null?s[e].bind(window):s[e]}),dh(s),("Prototype"in window||uh())&&(window.csMutationObserver=(t=(r=Ge(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),fs("csNode",be.nodeProperties,s.Node.prototype,"get"),fs("csElement",be.elementProperties,s.Element.prototype,"get"),fs("csElement",be.elementPropertiesValues,s.Element.prototype,"value",!1),fs("csHTMLImageElement",be.imageProperties,s.HTMLImageElement.prototype,"set"),fs("csEvent",
be.eventProperties,s.Event.prototype,"get"),fs("csNavigator",be.navigatorProperties,s.navigator,"value")}function fs(s,r,t,e,i=!0){r.forEach(n=>{let a=typeof n!="string"&&"binding"in n,c=a?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=lh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function fa(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function hh(){try{let s=ah();return s?(window.CSPureWindow=s,pa(window.CSPureWindow),
!0):!1}catch(s){return fa("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!hh())try{pa(ct)}catch(s){fa("Critical",`failed to copy references from window: ${s.message}`)}function uh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function dh(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,
9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}var Yi=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(a){return csString.prototype.replace.call(a,/[.*+?^${}()|[\]\\]/g,"\\$\x26")}function e(a){return csString.prototype.replace.call(a,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(a,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(a,c,l);let d=new csRegExp(t(c),"g");
return csString.prototype.replace.call(a,d,l)}r.stringReplaceAll=i;function n(a,c,l=""){return a.length<=c?a:csString.prototype.slice.call(a,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Br(s){return Yi.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function ph(s){let r=s.getAttribute("id");return r&&Yi.escapeInvalidCharacters(r)}function ee(s){return Z(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function ws(s){return s===parseInt(s,10)}function $(s){return Z(s)&&
(typeof s=="string"||s instanceof csString)}function Zn(s){return typeof s=="boolean"}function ti(s){return typeof s=="object"}function Z(s){return typeof s!="undefined"}function Ot(s){return Z(s)&&s!==null}function fh(s,r,t){return ws(s)&&s>=r&&s<=t}function gh(s){for(let r in s)return!1;return!0}function Be(s){return typeof s=="function"}function ai(s){return s instanceof Element}function Fe(s){return s instanceof Error}function mh(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,
t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function rt(s){return s.nodeType===1}function ji(s){return s.nodeType===3}function yh(s){return s.nodeType===8}function ga(s){return rt(s)&&s.localName==="link"}function Eh(s){return rt(s)&&s.localName==="source"}function ma(s){return rt(s)&&s.localName==="a"}function nn(s){return ga(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Sh(s){return rt(s)&&s.localName==="img"}function Xi(s){return rt(s)&&
s.localName==="style"}function Ki(s){return rt(s)&&s.localName==="input"}function on(s){return rt(s)&&s.localName==="textarea"}function Ji(s){return rt(s)&&s.localName==="script"}function vh(s){return rt(s)&&s.localName==="button"}function Is(s){return rt(s)&&"ownerSVGElement"in s}function an(s){return rt(s)&&s.localName==="select"}function _h(s){return rt(s)&&s.localName==="details"}function wh(s){return rt(s)&&s.localName==="summary"}function Ah(s){return Is(s)&&s.localName==="image"}function bh(s){return Is(s)&&
s.localName==="use"}function Th(s){return Is(s)&&s.localName==="feImage"}function Rh(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Ih(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Hi(s){return s.nodeType===9}function ei(s){return Rh(s)&&"host"in s&&"mode"in s}function ya(s){return rt(s)&&!!csElementshadowRoot.apply(s)&&ei(csElementshadowRoot.apply(s))}var Ch=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format",
"font-face-name","missing-glyph"];function Ph(s){return rt(s)&&Ot(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Ch,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var ci="detached";function Ea(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,
r);return Bi(r)&&csArray.prototype.push.call(t,ci),{ancestors:t,selectionRoot:r}}function Oh(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&ma(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Bi(r)&&csArray.prototype.push.call(t,ci),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Bi(s){return he.isValidElement(s)}var ss=(()=>{var s,r;return(r=(s=ct.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==
void 0?r:{}})(),Wt=ss.matches||ss.matchesSelector||ss.mozMatchesSelector||ss.msMatchesSelector||ss.oMatchesSelector||ss.webkitMatchesSelector,to=ss.closest,Sa=9;function Nh(s,r){return r?csArray.prototype.some.call(r,t=>Wt.call(s,t)):!1}function Mh(s,r,t){if(s===ci||s.nodeType===Sa)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Br(r),a=0,c=r.previousElementSibling;for(;c;)(Br(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Nh(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;
return a}function kh(s,r,t){if(s===ci||s.nodeType===Sa)return 0;let e=0,i=r.previousElementSibling;for(;i;)Wt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Dh=[/\d{4}/,/^ember\d+$/],Lh="@",cn="data-cs-override-id",xh="data-cs-dynamic-id";function va(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,a=Br(s);if(n&&n.test(s.localName)&&(a=csString.prototype.replace.call(a,n,`$1${Lh}`)),jh(s,t)){let y=ln(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${cn}="${y}"]`}}let c=
Gh(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Vh(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let d=ph(s);if(Bh(s,d,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${d}`};let g=Uh(s,e);if(g){let y=kh(r,s,g);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${g}](${y})`}}let u=Mh(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${u})`}}function Vh(s,r,t){if(t.uniqueCssSelectors)for(let e of t.uniqueCssSelectors)if(Wt.call(s,
e)&&qh(e,r))return e}function Uh(s,r){if(r.reliableSelectors)for(let t of r.reliableSelectors)if(Wt.call(s,t))return t}function jh(s,r){let t=ln(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&hn(cn,t,r)}function Hh(s){return ln(s)!==null}function ln(s){return s.getAttribute(cn)}function Bh(s,r,t,e){return r&&!Hh(s)&&!Fh(s,r,e)&&$h(r,t)}function Fh(s,r,t){return s.hasAttribute(xh)||zh(r,t)}function zh(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(Dh,e=>e.test(s))||
t)}function $h(s,r){return s&&hn("id",s,r)}function hn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e;}return!1}function qh(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t;}return!1}function Gh(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&hn(e,i,r))return{attributeName:e,
attributeValue:i,success:!0}}return{success:!1}}var Fr=11;function Fi(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return eo(e,t);let i=e,n=s[0],{elementSelector:a,hasUniqueIdentifier:c}=va(i,n,r,t);if(!t.fullPath&&c){let d=s[s.length-1];return`${eo(d,t)}${a}`}let l=Fi(s,r,t);return`${l?`${l}>`:""}${a}`}function eo(s,r){if(s===ci)return"|detached|";if(s.host){let {ancestors:t,selectionRoot:e}=Ea(s.host);return`${Fi(t,e,r)}|shadow-root|`}return s.nodeType===Fr?"|fragment|":""}var _a=
(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Wh=(()=>{class s extends _a{constructor(){super(...arguments),this.oo=!1,this.ao=!1,this.Qa=!1}jm(t,e){return this.oo&&!(e===null&&Bi(t))&&t.nodeType!==Fr&&!t.host}Hm(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.jm(t,
e))return;let a=!1;e===null&&Bi(t)&&(a=!0,this.done=!0);let c=this.ao&&!this.options.fullPath?"":"\x3e",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Qa=!0,this.oo=!1,this.ao=!1),!l&&e===null&&t.nodeType===Fr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.Hm(t))return;let d=e!=null?e:"detached",{elementSelector:g,hasUniqueIdentifier:u}=va(t,d,i,this.options);u&&(this.ao=!0,this.oo=!this.options.fullPath);let y=`${a?`|detached|${c}`:""}${this.oo&&!u?"":g}`,
v=!u&&this.ao&&!this.options.fullPath?"":this.path&&!this.Qa?"\x3e":"";this.Qa=!1,this.path=`${y}${v}${this.path}`}}return s})();function Gt(s,r=Rt.SHOW_ALL){let t=r|Rt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=so(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(n){let d=n;return n=null,d}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=
so(c);if(r&Rt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(yr[c.nodeType]&r)!==0)return c}return null},visitAll(a){yr[s.nodeType]&r&&a(s);let c=this.nextNode();for(;c;){if((yr[c.nodeType]&r)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function so(s){return s&&ya(s)?s.shadowRoot:null}var mr=(()=>{var s;return(s=ct.Node)!==null&&s!==void 0?
s:{}})(),Rt=(()=>{var s;return(s=ct.NodeFilter)!==null&&s!==void 0?s:{}})(),yr={2:Rt.SHOW_ATTRIBUTE,4:Rt.SHOW_CDATA_SECTION,8:Rt.SHOW_COMMENT,11:Rt.SHOW_DOCUMENT_FRAGMENT,9:Rt.SHOW_DOCUMENT,10:Rt.SHOW_DOCUMENT_TYPE,1:Rt.SHOW_ELEMENT,[mr.ENTITY_NODE]:Rt.SHOW_ENTITY,[mr.ENTITY_REFERENCE_NODE]:Rt.SHOW_ENTITY_REFERENCE,[mr.NOTATION_NODE]:Rt.SHOW_NOTATION,7:Rt.SHOW_PROCESSING_INSTRUCTION,3:Rt.SHOW_TEXT},ot={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};
function Yh(s){ot=s}var L=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return ze(n,a.bind(this))(...c)}}};function ze(s,r){return function(...t){try{let e=r.apply(this,t);return Z(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>ot.error(Fe(i)?i:new Error(i),s)):e}catch(e){try{ot.error(Fe(e)?e:new Error(e),s)}catch{}}}}var Cs=(()=>{class s{constructor(){this.co=0}get length(){return this.co}get isEmpty(){return!this.Is}pushAll(t){for(let e=
0;e<t.length;e++)this.push(t[e])}push(t){this.co++,this.Pr?this.Pr=this.Pr[1]=[t,void 0]:this.Pr=this.Is=[t,void 0]}pop(){if(!this.Is)return null;this.co--;let t=this.Is[0];return this.Is=this.Is[1],this.Is||(this.Pr=void 0),t}forEach(t){let e=this.Is;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.co=0,this.Is=this.Pr=void 0}}return s})(),wa=50,Aa=.1;function Xh(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let r="isPerformanceMeasureSupported",t=`${r}_a`;return performance.mark(t),
performance.measure(r,t)!==void 0}var zi=!1,Di=new Cs;function Kh(s=50,r=.1){zi=ot.isPerfLoggingActive()&&Xh(),zi&&(wa=s,Aa=r)}var zr=[],Er=[];function ba(s){csArray.prototype.push.call(zr,s),performance.mark(`${s}-start`)}function Ta(s){let r=performance.measure(s,`${s}-start`);if(!r)return;let t=r.duration;t>=Aa&&csArray.prototype.push.call(Er,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(zr),zr.length===0&&(t>wa&&Di.push(Er),Er=[])}function as(s,r){return function(...t){if(!zi)return s.apply(this,
t);ba(r);let e=s.apply(this,t);return Ta(r),e}}var Nt=function(s){return function(r,t,e){let i=e.value;e.value=function(){if(!zi)return e.value=i,i.apply(this,arguments);ba(s);let n=i.apply(this,arguments);return Ta(s),n}}};var ns=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&ya(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Gt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}r.getAllShadowHosts=as(i,
"getAllShadowHosts")}(s||(s={})),s})(),gt=(()=>{let s;return function(r){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}
r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function a(){let u=window.csScreen.width;return ws(u)&&u>0?u:window.screen.width}r.screenWidth=a;function c(){let u=window.csScreen.height;return ws(u)&&u>0?u:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function d(){return window.pageYOffset}r.windowOffsetY=d;function g(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}r.getRequestParameters=g}(s||
(s={})),s})();function si(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ue(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Jh(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let a=r(s[n]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Ra(s,r){let t=[];return Jh(s,r,e=>csArray.prototype.push.call(t,e)),t}function K(s,r){if(Qh(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=
0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Qh(s){return s.length>=0}function xe(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Zh(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Ia(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function tu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let a=0;a<s.length;a++)i[n++]=s[a];for(let a=
0;a<r.length;a++)i[n++]=r[a];if(!t)return i;for(let a=0;a<t.length;a++)i[n++]=t[a];return i}function io(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Ps(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var Sr=(()=>{var s;return(s=ct.Node)!==null&&s!==void 0?s:Object})(),dt=(()=>{let s;return function(r){let t="isConnected"in Sr.prototype?S=>S.isConnected:S=>!S.ownerDocument||!(S.ownerDocument.compareDocumentPosition(S)&
S.DOCUMENT_POSITION_DISCONNECTED);function e(S,O){for(let V=S;V;V=csNodenextSibling.apply(V))O(S)}r.forEachChild=e;function i(S){return t(S)}r.isConnected=i;function n(S,O){let V=[];for(let H of l(S,O))csArray.prototype.push.call(V,H);return V}r.getAncestors=n;let a=(S,O)=>{var V;return(V=csNodeparentNode.apply(S))!==null&&V!==void 0?V:O&&ei(S)?S.host:null};function c(S,O,V=!1){let H=S;for(;H;){if(O(H))return H;let tt=a(H,V);if(tt&&tt!==H)H=tt;else break}return null}r.findAncestor=c;function*l(S,
O=!1){let V=S;for(;V;){yield V;let H=a(V,O);if(H&&H!==V)V=H;else break}}r.walkUp=l;function d(S,O){if(S===O||O.contains(S))return!0;let V=r.getParentElement(S);return V&&V!==S?d(V,O):!1}r.isDescendantOf=d;function g(S){var O;return S.parentElement?S.parentElement:r.getRootNode(S)?(O=r.getRootNode(S))===null||O===void 0?void 0:O.host:null}r.getParentElement=g;function u(S,O=document){let V=si(window.csquerySelectorAll[O.nodeType].call(O,S)),H=ns.getAllShadowHosts(O);for(let tt of H){let at=ns.getShadowRoot(tt);
if(!at)continue;let At=si(window.csquerySelectorAll[at.nodeType].call(at,S));csArray.prototype.push.call(V,...At)}return V}r.findAllElements=u,r.getRootNode=(()=>{if("getRootNode"in Sr.prototype)return(V,H)=>V.getRootNode(H);function S(V){let H=O(V);return ei(H)?S(H.host):H}function O(V){return csNodeparentNode.apply(V)!=null?O(csNodeparentNode.apply(V)):V}return(V,H)=>typeof H=="object"&&!!H.composed?S(V):O(V)})();function y(S){return S==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(S)}
function E(S){let O=S.getBoundingClientRect();return O.right+gt.windowOffsetX()<0||O.bottom+gt.windowOffsetY()<0}function v(S){var O,V;if(((O=S.checkVisibility)===null||O===void 0?void 0:O.call(S,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!S.offsetParent){if(!S.getBoundingClientRect)return ot.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${S instanceof Sr} Ctor: ${(V=S==null?void 0:S.constructor)===null||V===void 0?void 0:V.name}`),!1;let at=S.getBoundingClientRect();
if(at.width==0&&at.height==0)return!0}let H=window.getComputedStyle(S);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||y(H.color):!0}r.isHiddenByCSS=v;function I(S){if(v(S))return!0;let V=g(S);return V!=null&&I(V)}r.areAncestorsHiddenByCSS=I;function C(S){let O=null,V=S;do if(v(V))O=V;else break;while(V=g(V));return O}r.getTopAncestorHiddenByCSS=C;function b(S){let O=w(S);return O!==null&&
!S.contains(O)&&!O.contains(S)}function w(S){let O=S.getBoundingClientRect(),V=O.left+.5*O.width,H=O.top+.5*O.height;return A(document,V,H)}r.getTopElement=w;function x(S){if(!S.getBoundingClientRect)return null;let O=S.getBoundingClientRect(),V=O.x+O.width/2,H=O.y+O.height/2;return r.getTopElementFromPoint(document,V,H)}r.getElementOnTop=x;function A(S,O,V){let H=S.elementFromPoint(O,V);if(!H)return null;let tt=ns.getShadowRoot(H);return tt&&tt!=r.getRootNode(document.body)&&tt!==S?A(tt,O,V):H}r.getTopElementFromPoint=
A;function k(S){return!E(S)&&!v(S)&&!b(S)}r.isVisibleInDocument=k;function U(S){return v(S)?!1:J(S)}r.isVisibleInViewportInForeground=U;function J(S){let O=w(S);return O===null?!1:S===O?!0:wt(S)?S.textContent!==""&&O.contains(S):S.contains(O)}r.isInViewPort=J;function lt(S,O,V){let H=S.getAttributeNS(O,V);return H===""?S.hasAttributeNS(O,V)?H:null:H}r.getAttributeNS=lt;function Mt(S){return!!(S.hasAttribute("tabIndex")||S.getAttribute("contentEditable")==="true"||ma(S)&&S.hasAttribute("href")||(an(S)||
on(S)||Ki(S)||vh(S))&&!S.hasAttribute("disabled")||_h(S)||wh(S))}r.isElementFocusable=Mt;function wt(S){return S.localName==="span"||S.localName==="a"||S.localName==="b"||S.localName==="i"||S.localName==="button"||S.localName==="input"||S.localName==="label"||S.localName==="cite"||S.localName==="small"||S.localName==="strong"||S.localName==="code"||S.localName==="abbr"||S.localName==="em"||S.localName==="dfn"||S.localName==="time"||S.localName==="output"||S.localName==="object"||S.localName==="sub"}
r.isInlineElement=wt}(s||(s={})),s})(),eu=(()=>{class s{constructor(t){this.Bm=t}run(t){let e=[...this.Bm],i=dt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.Fm(e,a,c,n),this.zm(e),e.length===0)break;i.length===0&&a.host&&(i=dt.getAncestors(a.host,!1),n=i[i.length-1])}}Fm(t,e,i,n){for(let a of t)a.serializeElement(e,i,n)}zm(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),
su=(()=>{class s extends _a{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.$m(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}$m(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.qm(t.id),t.classList&&(e+=this.Gm(csArray.from(t.classList))),t.attributes&&(e+=this.Wm(t)),e}qm(t){return t?
`#${t};`:""}Gm(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Ym(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Is(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Ki(t)&&e==="value"}Xm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Km(t){let e=
{};for(let i of csArray.from(t.attributes))this.Ym(t,i.name)||(e[i.name]=i.value);return e}Wm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.Km(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.Xm(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),he=(()=>{let s;return function(r){r.INVALID_ELEMENT=
"INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,d={fullPath:!1,dynamicIdRegex:null}){let g=a(c);if(g===document)return{path:"",hierarchy:""};if(!t(g))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let u=new Wh(d),y=new su(l);return(new eu([u,y])).run(g),{path:u.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let d=a(c);
if(d===document)return"";if(!t(d))return r.INVALID_ELEMENT;let {ancestors:g,selectionRoot:u}=Ea(d);return Fi(g,u,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let d=a(c);if(d===document)return{path:"",firstAnchorParent:null};if(!t(d))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let {firstAnchorParent:g,ancestors:u,selectionRoot:y}=Oh(d);return{path:Fi(u,y,l),firstAnchorParent:g}}r.getElementPathAndFirstAnchorParent=n;function a(c){return c&&"jquery"in c&&c.length===
1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||he;var iu=Number.MAX_SAFE_INTEGER||9007199254740991;function ro(){}function $e(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ru(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var un=34164E6,As={percentage(){return Math.floor(Math.random()*1E4)/100},boolean(s){return this.percentage()<s},integer(s=iu){return Math.floor(Math.random()*s)}},vr=csSymbol("cachedJson");function nu(s){if(s[vr])return s[vr];
if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+bs(s[0]);for(let t=1;t<s.length;t++)r+=","+bs(s[t]);return r+="]"}return s[vr]=csJSON.stringify(s)}var bs=typeof window.Symbol!="undefined"?nu:csJSON.stringify;var it=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),Ca=["t.contentsquare.net","clicktale"],ou=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Ca,t=>csString.prototype.indexOf.call(s.filename,
t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,j.critical(t)}};window.addEventListener("error",ou);var j=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Ca,t)}static setStrategy(t){s.Vi=t}static computeIsActive(t){s.De=As.boolean(t),s.De?s.Za=As.boolean(10):s.Za=!1}static isLoggingActive(){return s.De}static getStrategy(){return s.Vi}static debug(t,
e=""){s.De&&this.Vi.send(t,e,it.debug)}static warn(t,e=!0,i=""){var n;s.De&&e&&this.Vi.send(t,i,it.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){s.De&&this.Vi.send(t,e,it.implementation)}static error(t,e=""){var i;s.De&&this.Vi.send(t,e,it.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.Vi.send(t,e,it.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Z(window.Promise)&&
n instanceof window.Promise?n.then(a=>a,a=>s.error(Fe(a)?a:new Error(a),t)):n}catch(n){try{s.error(Fe(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.Za}}return s.De=!1,s.Za=!1,s})();var au=/^\d+\.\d+(?:\.\d+)?$/,cu=s=>{if(!au.test(s))return;let [r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},lu=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,hu=(s,
r)=>lu(s,r)>=0,uu=1,du="f553e78fb58e051e51fe8074c4c6e73e",$r=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),pu=(()=>{class s{constructor(t){var e,i,n,a,c,l,d,g,u,y,E,v;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,
this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||un,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,
this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((a=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&a!==void 0)||a),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(d=t.apiErrorsEnabled)!==
null&&d!==void 0?d:0,...t.apiErrors},this.customErrors={enabled:(g=t.customErrorsEnabled)!==null&&g!==void 0?g:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.tc(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.tc(t.replayRecordingUnmaskedUrlRegex),
this.replayRecordingMaskedUrlRegex=this.tc(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,
this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,
this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),
this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5E3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((u=t.uxaDomain)===null||u===void 0?void 0:u.indexOf("staging"))>
-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,
this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(E=t.recordTargetingRules)!==null&&E!==void 0?E:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(v=t.collectTargetText)!==null&&v!==void 0?v:$r.Disabled}getTrackerUri(){return`${this.as()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.as()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${du}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.as()}://${this.malkaRecordingDomain}`}getLegacyQuotaUri(){return`${this.as()}://${this.malkaQuotaServiceDomain}`}getLoggerUri(){return`${this.as()}://${this.loggerDomain}`}getMetricsUri(){return`${this.as()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.as()}://${this.staticResourceManagerDomain}`}getSettingsFileUri(){return this.settingsFileUri?
this.settingsFileUri:`${this.as()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.as()}://${this.paProxyDomainUri}`}as(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===uu}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let [n,a]=i;this.Jm(n,a)}})}Jm(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=
e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="malkaQuotaServiceDomain"&&(this.malkaQuotaServiceDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}tc(t){return t?this.Qm(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=
e),t==="minLogLevel"&&(this.minLogLevel=e)}Qm(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let [,i,n]=e;return new csRegExp(`^${i}$`,n)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:
t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.Hu()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.Hu())return!0;let t=cu(this.getHeapVersion()||"");if(t&&t.major===4&&hu(t,{major:4,minor:23,patch:5}))return!0}return!1}Hu(){var t;
return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===
null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==$r.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===
null||t===void 0)&&t.length)}}return s})(),fu=(()=>{class s{constructor(t,e){this.lo=t,this.Bu=e}init(){this.Fu=this.lo!==this.lo.top,this.zu=this.Bu.isWebView&&this.lo===this.lo.top,this.Bu.iframesTracking&&this.Fu||this.zu?this.$u=!1:this.$u=!0}isInIframeContext(){return this.Fu}isTopWindowTracker(){return this.$u}isInWebViewContext(){return this.zu}}return s})(),ii=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),
"\x26")}r.toQuery=t}(s||(s={})),s})(),Pa=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,
t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ts=(()=>{class s extends Pa{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.sc(t);let e=ii.toQuery(t);this.Zm(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Zm(t){let e=new window.Image(1,1);e.onload=ro,e.onerror=ro,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}sc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,
2,8)}}return s})(),gu=(()=>{class s{constructor(t,e){this.Cs=t,this.ty=e}init(){this.cs=new Ts(this.Cs.getLoggerUri()),this.cs.setRequestParametersProviders(this,this.ty)}send(t){this.ho=t,this.cs.send()}getRequestParameters(){return{a:this.ho.app,l:this.ho.level,m:this.ho.message,s:this.ho.stacktrace}}}return s})();function nt(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,
r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var qr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=
null,nt([L("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Dt=(()=>{class s extends qr{constructor(t,e=100){super(t),this.ey=e,this.Re=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){qr.globalService&&(this.Re&&window.csClearTimeout(this.Re),this.Re=window.csSetTimeout(()=>{this.aggregate(),this.Re=null},this.ey))}}return s})();var ut={counters:{commandsFromIntegrations:new Dt("commands-from-integrations"),commandsFromCSTC:new Dt("commands-from-cstc"),
commandsFromIframe:new Dt("commands-from-iframe"),commandApplied:new Dt("command-applied"),commandError:new Dt("command-error"),commandMisuse:new Dt("command-misuse"),CSTCSnippetUsed:new Dt("cstc-snippet-used"),redactedPII:new Dt("redacted-pii"),pageAnonymisation:new Dt("page-anonymisation"),patchedNativeFunctions:new Dt("patched-native-functions"),pureWindowState:new Dt("pure-window-state"),sensitiveElements:new Dt("sensitive-elements"),cspErrors:new Dt("csp-errors"),networkRequests:new Dt("network-requests")},
setService(s){qr.setGlobalService(s)}},mu=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,yu=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Eu="CS_ANONYMIZED_EMAIL",_r="([-A-Za-z0-9+/\x3d_]|\x3d[^\x3d]|\x3d{3,})+",Su=new csRegExp(`(ey${_r}\\.ey${_r}\\.${_r})`,"g"),vu="CS_ANONYMIZED_JWT",_u=/[0-9]{4}/,wu=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Au="CS_ANONYMIZED_PII",bu="\u2022",Tu=/\d/g,Ru=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,
Iu=/(?:\d{1,3}\.){3}\d{1,3}/,Cu=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Te=(()=>{let s;return function(r){function t(g){return csString.prototype.replace.call(g,mu,Eu)}r.replaceEmail=t;function e(g){return csString.prototype.replace.call(g,Su,vu)}r.replaceJWT=e;function i(g,u){return csString.prototype.replace.call(g,wu,u)}r.replaceCreditCardNumber=i;function n(g){return csString.prototype.replace.call(g,Tu,bu)}r.replaceDigits=n;function a(g){return Iu.test(g)||Cu.test(g)}r.mayHaveIPAddress=a;function c(g){return Ru.test(g)}
r.mayHaveNumberSequence=c;function l(g){return _u.test(g)}r.mayHaveCreditCardNumber=l;function d(g){return yu.test(g)}r.mayHaveEmail=d}(s||(s={})),s})(),li=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.sy(this.ic(t));return e===!0?i=this.iy(i):e===!1&&(i=this.ry(i)),i}anonymizePII(t){return this.ic(t)}anonymizeJwt(t){return Te.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.ic(t[i])}),
t}ic(t){if(Te.mayHaveEmail(t)){let e=Te.replaceEmail(t);return e!==t&&ut.counters.redactedPII.count("email"),e}return t}iy(t){return Te.replaceDigits(t)}ry(t){return Te.mayHaveNumberSequence(t)?Te.replaceDigits(t):t}sy(t){return Te.mayHaveCreditCardNumber(t)?Te.replaceCreditCardNumber(t,(e,i,n,a,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let d=a.length?csArray.prototype.join.call(csString.prototype.split.call(n,a),""):n;if(!this.ny(d))return e;ut.counters.redactedPII.count("cc")}else ut.counters.redactedPII.count("cc-partial");
return`${i}${Au}${c}`}):t}ny(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let a=parseInt(t[n]);n%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),Oa="15.111.0";function dn(){return{v:Oa}}function pn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function no(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}
function Na(s){let r=self.atob(s);return pn(r)}function Gr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function oo(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,
t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){ot.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Na(e[1]):pn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ma=typeof performance!="undefined"&&!!performance.now,ao=Ma?()=>performance.now():csDate.now,Pu=(()=>{var s,r;return Ma?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),D={now(){return Math.round(ao()+
Pu)},elapsed(){return ao()}};function co(){return Math.floor(D.now()/1E3)}function ka(){return typeof window.Promise=="function"}function Ou(){var s;return typeof crypto!="undefined"&&Be((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function lo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function qe(s,r){return csString.prototype.lastIndexOf.call(s,
r,0)===0}function hi(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Da=(()=>{class s{constructor(t,e){this.h=t,this.C=e}getRequestParameters(){return{d:`${D.now()}`,p:this.C.anonymizePII(window.location.href),...this.h.getRequestParameters(),...dn()}}}return s})(),Nu="uxa",ho=5,Mu="No stacktrace",La="snippet-",xa="implementation-snippet-",uo=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),wr={[it.debug]:0,[it.warn]:1,
[it.implementation]:1,[it.error]:2,[it.critical]:3},ku=(()=>{class s{constructor(t,e,i){this.ls=e,this.C=new li,this.qu=wr[it.warn],this.qu=wr[t.minLogLevel||it.warn],this.cs=i||new gu(t,new Da(t,this.C)),this.Gu={[it.debug]:[],[it.warn]:[],[it.implementation]:[],[it.error]:[],[it.critical]:[]},this.uo={implementation:{},dynamic:{}},this.cs.init()}send(t,e="",i=it.warn){if(!this.oy(i,e))return;csArray.prototype.push.call(this.Gu[i],e||"");let n={message:this.ay(t,e),stacktrace:this.cy(t),app:Nu,level:i};
this.cs.send(n)}ay(t,e){let i=Fe(t)?this.C.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}cy(t){return Fe(t)?`${t.stack||Mu} ${this.po()}`:this.po()}po(){let t=this.ls.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ls.getSessionService(),n=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(a)}oy(t,e){if(wr[t]<this.qu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,
xa,0))===0)return this.Wu(e,uo.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,La,0))===0)return this.Wu(e,uo.DYNAMIC);let i=this.Gu[t];return!(i.length>=ho||e&&csArray.prototype.some.call(i,n=>n===e))}Wu(t,e){return t in this.uo[e]?this.uo[e][t]>=ho?!1:(this.uo[e][t]+=1,!0):(this.uo[e][t]=1,!0)}}return s})(),vt=!oi&&document.createElement("a"),Du=/(:443|:80)$/;function je(s){return vt?(vt.href=s,vt.href):""}function Lu(s,r){return(new csURL(s,r)).href}function Va(s){let r=gn(s);
return r===null?"":decodeURIComponent(r.hostname)}function fn(s,r){return csArray.prototype.some.call(r,t=>hi(s,`.${t}`)||s===t||t==="")}function xu(s){return s[0]==="/"?s:`/${s}`}function po(s){return csString.prototype.replace.call(s,Du,"")}function gn(s){return!vt||!qe(s,"http://")&&!qe(s,"https://")?null:(vt.href=s,{hash:vt.hash,host:po(vt.host),hostname:vt.hostname,href:vt.href,origin:vt.origin?vt.origin:po(`${vt.protocol}//${vt.host}`),pathname:xu(vt.pathname),port:vt.port,protocol:vt.protocol,
search:vt.search})}var fo="CS_IFRAME_MESSAGE",Vu=(()=>{let s;return function(r){r.AfterPageView="afterPageView",r.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Jt=(()=>{let s;return function(r){r.Parent="parent",r.Child="child"}(s||(s={})),s})(),X=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",
r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})(),ft=(()=>{let s;return function(r){function t(l,
d,g,u){let y={type:l,from:d,pid:g,signature:fo};return u!==void 0&&u>=0&&(y.id=u),y}r.buildBaseMessage=t;function e(l,d,g,u){let y=Va(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===fo&&l.data.from===d&&l.data.pid===g&&fn(y,u)}r.isMessageValid=e;function i(l,d,g,u){u?l.postMessage(g,d,u):l.postMessage(g,d)}r.sendPostMessage=i;function n(){return new MessageChannel}r.getNewChannelMessage=n;function a(l,d){l.postMessage(d)}r.sendChannelMessage=a;function c(l){l.close()}r.closeChannelPort=
c}(s||(s={})),s})(),Uu=(()=>{class s{constructor(t){this.h=t}send(t,e="",i=it.warn){let n={message:t,errorCode:e,level:i},a=ft.buildBaseMessage(X.ChildLogMessage,Jt.Child,this.h.projectId);a.content=n,ft.sendPostMessage(window.parent,"*",a)}}return s})(),ju=(()=>{class s{setContext(t,e){this.R=t,this.w=e}getVisitorService(){return this.R}getSessionService(){return this.w}}return s})();function Hu(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});
return}s()}function F(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Bu(){let s=new MutationObserver(r=>{r.forEach(t=>{K(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(ut.counters.pureWindowState.count("iframe-deletion"),
ot.warn("\x3ccs-native-frame-holder\x3e deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function go(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Fu(){(!go(MutationObserver)||!go(MutationObserver.prototype.observe))&&ut.counters.patchedNativeFunctions.count("MutationObserver")}function zu(){try{window.CSPureWindow&&Bu(),Fu()}catch{}}var ht=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let g=(new csRegExp(`(^|;)[ ]*${l}=([^;]*)`)).exec(document.cookie);
return g?decodeURIComponent(g[2]):null}r.get=t;function e(l,d,g,u,y,E){let v=encodeURIComponent(`${d}`),I=g===r.CURRENT_DOMAIN?void 0:g,C=i(u),b=C?`;expires=${C.toUTCString()}`:"",w=";path\x3d/",x=Ot(I)?`;domain=${I}`:"",A=`${l}=${v}${b}${w}${x}`;return Z(y)&&y!==ke.NotSet&&(A=`${A};SameSite=${y}`),Z(E)&&E===ae.Yes&&(A=`${A};Secure`),document.cookie=A,!0}r.set=e;function i(l){return ee(l)?new csDate(D.now()+l):l}r.toExpireDate=i;function n(l,d){t(l)&&e(l,"",d,new csDate(0)),t(l)&&e(l,"",d,new csDate(0),
ke.None,ae.Yes)}r.remove=n;function a(){return document.cookie.length>0}r.isCookiePresent=a;function c(l,d){let g="_cs_root-domain",u=t(g);if(u!==null&&u!=="1")return u;let y=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(y);for(;y.length&&(u===null||u==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(y),E],"."),e(g,E,E,void 0,l,d),u=t(g);return n(g,E),E}r.getRootDomain=c}(s||(s={})),s})(),$u=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&
csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),ke=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ae=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Qi=(()=>{class s{constructor(t,e,i){this.h=t,this.A=e,this.ii=i,this.rc=!1,this.Yu=ke.NotSet,this.nc=ae.No}getSameSiteFlag(){return this.Yu}getSecureFlag(){return this.nc}getDomain(){return this.oc}getRootDomain(){return this.Xu}init(){if(this.h.cookielessTrackingEnabled)return;
let t=this.ly(),e=this.hy();this.rc=this.uy(t,e),this.rc?(this.Yu=t,this.nc=e):this.h.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.nc=ae.Yes),this.Xu=this.dy(),this.oc=this.py(this.Xu)}uy(t,e){return $u.browserIsSafariV12()?!1:(ht.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),ht.get(s.COOKIE_TEST_FOR_SAME_SITE)?(ht.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}ly(){return this.A.getUrlProtocol()==="http:"?ke.Lax:this.ii.isSameSiteNoneSecureNeeded()||
this.h.crossDomainTracking?ke.None:ke.Lax}hy(){return this.A.getUrlProtocol()==="http:"?ae.No:this.h.secureCookiesEnabled||this.h.crossDomainTracking||this.ii.isSameSiteNoneSecureNeeded()?ae.Yes:ae.No}isSameSiteSupported(){return this.rc}set(t,e,i){let n=ht.toExpireDate(i);ht.set(t,e,this.oc,n,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=(new csRegExp(`(^|;)[ ]*${t}=([^;]*)`)).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.oc;ht.remove(t,i)}dy(){let t=
this.ii.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?ke.None:void 0,i=t?ae.Yes:void 0;return ht.getRootDomain(e,i)}py(t){return this.h.allowSubdomains?t:ht.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),gs="_cs_t",mo="1",qu=(()=>{class s{constructor(t,e){this.mt=t,this.h=e,this.fo=!1,this.go=!1}init(){if(!this.h.cookielessTrackingEnabled&&this.mt.isTopWindowTracker()&&"cookie"in document){if(!this.mt.isInIframeContext()&&
ht.isCookiePresent()){this.fo=!0,this.go=!1;return}if(ht.set(gs,mo,ht.CURRENT_DOMAIN),ht.get(gs)!==null){this.fo=!0,this.go=!1,ht.remove(gs,ht.CURRENT_DOMAIN);return}ht.set(gs,mo,ht.CURRENT_DOMAIN,void 0,ke.None,ae.Yes),ht.get(gs)!==null&&(this.fo=!0,this.go=!0,ht.remove(gs,ht.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.fo}isSameSiteNoneSecureNeeded(){return this.go}}return s})();function Gu(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?
!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Wu=(()=>{class s{constructor(t,e){this.h=t,this.ii=e}canTrack(){return this.h.isProjectActive()&&this.fy()&&this.Ku()&&this.gy()}canTrackInChild(){return this.h.isProjectActive()&&this.my()&&(this.Ku()||this.yy())}gy(){return this.h.cookielessTrackingEnabled?Gu():this.ii.areCookiesEnabled()}Ku(){return fn(window.location.hostname,this.h.hostnames)}fy(){return!this.Ju()&&this.Ey()}my(){return!this.Ju()&&this.Sy()}yy(){return window.location.protocol===
"about:"&&window.location.hostname===""}Ju(){return"visibilityState"in document&&document.visibilityState==="prerender"}Ey(){return this.Qu()&&this.vy()}Sy(){return this.Qu()}vy(){try{return!!window.localStorage}catch{return!1}}Qu(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&
"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Yu=(()=>{class s{constructor(t,e){this.ac=!1,this.Zu=new Map,this.td=new Map,this.sd=new Map,this.rd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach(t=>{this.queryParams[t]=e[t]})}removeQueryParams(e){e?e.forEach(e=>{delete this.queryParams[e]}):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,e=>null==a[e])?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,e=>this.doSend(c,a,e)):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach(e=>{r.setRequestHeader(e,this.headers[e])}),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach(e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))}),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach(e=>{this.save(e)}),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map(e=>{const t={};e.headers.forEach((e,s)=>{t[s]=e}),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then(e=>({metadata:t,events:e})):e.arrayBuffer().then(e=>({metadata:t,events:e}))}),r=await Promise.all(s);await Promise.all(t.map(e=>this.cache.delete(e))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,e=>{this.setRamStorageStrategy(e)})}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach(e=>{this.storageStrategy.save(e)})}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad(t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}),d.onError(t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout(()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)},r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)})}()})();`;
try{this.hs=this._y(e||i),this.ac=!0,s.isTransferableStreamSupported()&&(this.nd=new ReadableStream({start:n=>{this.cc=n},cancel:()=>{this.cc=null}}),this.hs.postMessage(this.nd,[this.nd]))}catch(n){n.name==="SecurityError"&&ut.counters.cspErrors.count("network-worker"),this.ac=!1}}postMessage(t){t.WORKER_SIGNATURE=this.rd,this.cc?this.cc.enqueue(t):this.hs.postMessage(t)}_y(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);
j.whiteListFilename(c);let l=new n(c);return l.onmessage=d=>{let {type:g,endpoint:u,WORKER_SIGNATURE:y}=d.data;if(y===this.rd)if(g==="onLoad"){let {response:E}=d.data,v=this.Zu.get(u);v&&v(E)}else if(g==="onError"){let {response:E}=d.data,v=this.td.get(u);v&&v(E)}else if(g==="onTimeout"){let E=this.sd.get(u);E&&E()}},l}registerOnLoadCallback(t,e){this.Zu.set(t,e)}registerOnErrorCallback(t,e){this.td.set(t,e)}registerOnTimeoutCallback(t,e){this.sd.set(t,e)}isSupported(){return this.ac}static isTransferableStreamSupported(){try{let t=
new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Xu=(()=>{class s{constructor(t){var e;this.Gt={},this.Wt=t.endpoint,this.ge=t.networkWorker,this.wy=t.compressionOutputType,this.Ay=t.useRetry,this.ge.postMessage({type:"CreatePostRequest",endpoint:this.Wt,compressionOutputType:this.wy,useRetry:this.Ay,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.ge.postMessage({type:"SetQueryParams",endpoint:this.Wt,queryParams:t}),
csArray.prototype.forEach.call(Object.keys(t),e=>{this.Gt[e]=t[e]})}getQueryParams(){return this.Gt}removeQueryParams(t){this.ge.postMessage({type:"RemoveQueryParams",endpoint:this.Wt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Gt[e]})}send(t,e){this.ge.postMessage({type:"Send",endpoint:this.Wt,payload:t,queryParams:e})}abort(){this.ge.postMessage({type:"Abort",endpoint:this.Wt})}onLoad(t){this.ge.registerOnLoadCallback(this.Wt,t)}onError(t){this.ge.registerOnErrorCallback(this.Wt,
t)}setRequestHeader(t,e){this.ge.postMessage({type:"SetHeader",endpoint:this.Wt,headerName:t,headerValue:e})}onTimeout(t,e){this.ge.registerOnTimeoutCallback(this.Wt,t),this.ge.postMessage({type:"SetTimeout",endpoint:this.Wt,timeout:e})}}return s})(),Zi=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Ua=(()=>{class s{constructor(t){this.onError=t}}return s})(),Ku=(()=>{class s{constructor(t){var e;this.Gt={},this.lc={},this.od=i=>{for(let n of i){let {metadata:a,events:c}=
n;this.send(c,a)}},this.Wt=t.endpoint,this.Or=t.compressionOpts,this.Yt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Yt&&this.Yt.recover(this.od)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Gt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Gt[e]}):this.Gt={}}send(t,e){let i=e||{...this.Gt},n=!("ct"in i),a=typeof t!="string"&&!this.by(t);"ct"in i||(!this.Or||!n?i.ct=Zi.UNCOMPRESSED:i.ct=this.Or.compressionType);
let c=a?JSON.stringify(t):t,l=Object.keys(i).map(g=>`${encodeURIComponent(g)}=${encodeURIComponent(i[g])}`).join("\x26"),d=`${this.Wt}?${l}`;if(Zh(this.mandatoryParameters,g=>i[g]==null)){ot.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${d}`);return}this.Or&&n&&typeof c=="string"?this.Or.compressor(c,this.Or.compressionOutputType,g=>this.ad(d,i,g)):this.ad(d,i,c)}onLoad(t){this.Ui=t}onError(t){this.Nr=t}onTimeout(t,e){this.ni=t,this.Mr=e}abort(){this.cd&&this.cd()}setRequestHeader(t,
e){this.lc[t]=e}getQueryParams(){return this.Gt}by(t){return t&&t.byteLength!==void 0}ad(t,e,i){let n=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("\x26");n.open("POST",t),n.onload=()=>{if(this.Yt&&this.Yt.recover(this.od),this.Ui){let c={params:e,responseText:n.responseText,status:n.status};this.Ui(c)}},n.onerror=()=>{this.Yt&&this.Yt.save({key:a,metadata:e,events:i}),this.Nr&&this.Nr({params:e})},this.Mr&&this.ni&&(n.timeout=this.Mr,n.ontimeout=
()=>{this.ni()}),this.cd=()=>n.abort(),Object.keys(this.lc).forEach(c=>{n.setRequestHeader(c,this.lc[c])}),n.send(i)}}return s})(),ja=(()=>{class s{constructor(t){this.hc=t,this.ge=new Yu(this.hc)}create(t,e,i,n,a=[]){if(this.ge.isSupported()&&e)return new Xu({networkWorker:this.ge,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:a});{let c=i?{compressor:this.hc.compress,compressionOutputType:i,compressionType:this.hc.algorithm}:void 0;return new Ku({endpoint:t,compressionOpts:c,
recoveryStorage:n})}}}return s})(),Ju=(()=>{class s{constructor(t,e,i,n,a){this.R=t,this.w=e,this.Ge=i,this.vt=n,this.h=a}get(){return{exclusion:this.Ge.getAppliedTrackingDraw(),visitor:this.R.getVisitor(),session:this.w.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Ge.exclude(this.h),this.R.removeVisitor(),this.w.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.Ge.removeExclusion(),this.R.setVisitor(t.visitor),
t.session?this.w.setSession(t.session):this.w.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),$i=".",mn="__DOT__",Qu=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Ha="x";function Zu(s){let [r,t,e,i,n,a,c,l,d]=rd(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(a),expires:Number(c),allowSubdomains:l===void 0?void 0:
!!Number(l),identityPrint:d===void 0||d===Ha?null:d}}function td(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Ha],csString),sd),$i)}function ed(s){return Qu.test(s)}function sd(s){return csString.prototype.replace.call(s,/\./g,mn)}function id(s){return csString.prototype.replace.call(s,
new csRegExp(mn,"g"),$i)}function rd(s){return csString.prototype.indexOf.call(s,mn)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,$i),id):csString.prototype.split.call(s,$i)}var nd=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})();var od=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Ba=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,
Fa=".";function ad(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.etrState,s.etrStatus],Fa)}function cd(s){if(!yn(s))return null;let r=Wr(s);return r!==null?za(r):null}function za(s){var r,t;let [e,i,n,a]=csString.prototype.split.call(s,Fa);return{collectState:i,etrState:(r=n)!==null&&r!==void 0?r:nd.ETR_OFF,etrStatus:(t=a)!==null&&t!==void 0?t:od.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function yn(s){return Ba.test(s)}function Wr(s){if(!s)return null;let r=(()=>{var t;
return(t=csString.prototype.match.call(s,Ba))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var ne="_cs_ex",yo=2592E6,ld=/^[0-9]+$/,hd=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.oi=t}onCookieToRemove(t){this.ai=t}get(){return this.h.cookielessTrackingEnabled?Number(this.Xt.getItem(ne)):Number(this.M.get(ne))}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem(ne,t):(this.M.set(ne,t,yo),(e=this.oi)===null||e===void 0||e.call(this,ne,t,yo))}remove(){var t;
this.h.cookielessTrackingEnabled?this.Xt.removeItem(ne):(this.M.delete(ne),(t=this.ai)===null||t===void 0||t.call(this,ne))}static isValidExclusionString(t){return ld.test(t)}}return s})(),Re="_cs_cvars",ud=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.oi=t}onCookieToRemove(t){this.ai=t}get(){return this.h.cookielessTrackingEnabled?this.Xt.getItem(Re):this.M.get(Re)}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem(Re,t):(this.M.set(Re,t),(e=this.oi)===
null||e===void 0||e.call(this,Re,t))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(Re):(this.M.delete(Re),(t=this.ai)===null||t===void 0||t.call(this,Re))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var dd="spki",Eo="RSA-OAEP",pd="SHA-256",So="AES-CTR",fd="SHA-1",vo=190,Gs=(()=>{let s;return function(r){var t;let e=!1,i=null,n,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=ct.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=
100;function l(){return!e}r.isKeyImported=l;function d(){return i}r.getCryptoKey=d;function g(){var A,k;return((k=(A=ct.self.crypto)===null||A===void 0?void 0:A.subtle)===null||k===void 0?void 0:k.encrypt)!=null&&ct.self.CryptoKey!=null}r.isSupported=g;async function u(A){n=r.crypto.importKey(dd,Na(A),{name:Eo,hash:pd},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||ot.warn(`Fail to import public key '${A}'`)}r.importKey=u;async function y(A){if(!g()||e)return null;await n;let k=pn(A);
k.byteLength>vo&&(k=k.slice(0,vo));try{let U=await r.crypto.encrypt({name:Eo},i,k);return no(U)}catch{return null}}r.asymmetricEncrypt=y;async function E(A,k){if(!g()||e)return null;let U={counter:k.initializationVector,name:So,length:64},J=a.encode(A);try{let lt=await r.crypto.encrypt(U,k.cryptoKey,J);return no(lt)}catch{return null}}r.symmetricEncrypt=E;async function v(A){let k=await I(A);if(!k)throw new Error("Export secret failed");let U=await y(k);if(!U)throw new Error("Encrypt secret failed");
return U}r.encryptSecret=v;async function I(A){var k;if(!g())return null;try{return(k=(await r.crypto.exportKey("jwk",A)).k)!==null&&k!==void 0?k:null}catch{return null}}async function C(){if(!g()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:So,length:128},!0,["encrypt","decrypt"]),initializationVector:ct.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=C;function b(A){c=A}r.setDigestSalt=b;async function w(A){A=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(A)),
c&&(A=`${A}:${c}`);let k=a.encode(A);try{let U=await r.crypto.digest(fd,k);return Gr(U)}catch{return null}}r.digest=w;function x(){return ct.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=x}(s||(s={})),s})();function gd(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(\x3canonymous\x3e)")===-1):[];if(r.length===0)return"";let t=yd(r);return t===""||(r=Ed(r,t),r.length===0)?"":$a(r[0])}function md(s){return csString.prototype.indexOf.call(s,"@")!==-1}function yd(s){return s.length>0?$a(s[0]):""}function Ed(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,
r)===-1)}function $a(s){let r="",t;md(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Sd=s=>s;function vd(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let a=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let d=Reflect.get(c,l);return typeof d=="function"?d.bind(c):d},set:(c,
l,d)=>{let g=c[l],u=Reflect.set(c,l,d);return e.forEach(y=>y(this,d,g,"subproperty")),u}}):this[i]=a,this[i])},set(){var n;let a=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,a);delete this[i];try{e.forEach(d=>d(this,a[0],c,"property"))}catch(d){ot.error(d)}return l}})}function _d(s,r,t){let e=wd(s,r);if(!e)return null;let i=(n,a,c,l)=>t(n,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function wd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,
i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,vd(s,r,i,e),e):(ot.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(ot.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Ad(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ot.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),
null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ps(i),g=>g(c))}catch(g){ot.error(g)}let d=n.apply(this,c);try{for(let g=0;g<l.length;g++)l[g]({result:d,context:this,args:c})}catch(g){ot.error(g)}return d};Td(a,n),s[r]=a}return i}function is({target:s,methodName:r,hook:t,hookPrepareArgs:e=Sd,options:i}){let n=Ad(s,r);if(!n)return null;let a=c=>{let l=e(c),d=i!=null&&i.withCallerName?{callerName:gd()}:{};return g=>
t({...g,...d,args:l})};return{activate:()=>{n.add(a)},deactivate:()=>{n.delete(a)}}}function bd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let a=arguments,c=this[r],l=(n=i.set)===null||n===void 0?void 0:n.apply(this,a);try{e.forEach(d=>d(this,a[0],c,"property"))}catch(d){ot.error(d)}return l}}),e):(ot.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),
null):e}function qi(s,r,t){let e=bd(s,r);if(!e)return null;let i=(n,a,c)=>t(n,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Td(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Os=(()=>{var s;class r{static Cy(e){this.Ps.forEach(i=>{e(i,"initial")})}static kr(e){if(this.P||(this.P=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&K(n.addedNodes,this.Py),K(n.removedNodes,this.Oy)})),csArray.prototype.push.call(this.Ee,
e),!this.B){this.B=!0,this.P.observe(document,this.Dr);for(let i of ns.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ps.add(n),this.P.observe(n,this.Dr)}this.yc||(this.yc=is({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.dd(i.result)})),this.yc.activate()}this.Cy(e)}static Lr(e){var i,n;this.Ee=csArray.prototype.filter.call(this.Ee,a=>a!==e),this.Ee.length===0&&(this.Ee=[],this.B=!1,(i=this.P)===null||i===void 0||i.disconnect(),(n=this.yc)===
null||n===void 0||n.deactivate(),this.Ps.clear())}constructor(e){this.S=e,this.S=ze("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Ps(s.Ps)}takeRecords(){var e,i;return(i=(e=s.P)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ns.isSupported()&&s.kr(this.S)}disconnect(){ns.isSupported()&&s.Lr(this.S)}}return s=r,r.Ee=[],r.Ps=new Set,r.B=!1,r.Dr={childList:!0,subtree:!0},r.dd=t=>{s.Ps.has(t)||(s.P.observe(t,s.Dr),s.Ps.add(t),K(s.Ee,e=>e(t,
"added")))},r.Py=t=>{Gt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.dd)},r.Oy=t=>{t.isConnected||Gt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ps.has(e)&&(s.Ps.delete(e),K(s.Ee,i=>i(e,"removed")))})},nt([L()],r.prototype,"observe",null),nt([L()],r.prototype,"disconnect",null),r})(),qa=!0;function Ct(s,r=qa){s.boundElement.addEventListener(s.type,s.listener,r)}function Pt(s,r=qa){s.boundElement.removeEventListener(s.type,s.listener,r)}function Lt(s,r=0){let t=Math.pow(10,r);return Math.round(s*
t)/t}var _o=!1;function _t(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&_o||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&_o||e.call(this,i,n)}}}}function tr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],a=null,c=0,l,d=()=>{c=D.now(),a=null,l=s.apply(i,n),n=[],i=null},g=function(...u){if(i=this!==null&&this!==void 0?this:ct,n=[...u],e==="trailing")return a||
(a=ct.csSetTimeout(d,t)),l;let y=D.now(),E=t-(y-c);return E<=0||E>t?(c=y,l=s.apply(i,n),a?(ct.csClearTimeout(a),a=null):n=[]):a||(a=ct.csSetTimeout(d,E)),l};return g.cancel=()=>{a&&(ct.csClearTimeout(a),c=0,a=null,n=[])},g.flushPending=()=>{a&&(ct.csClearTimeout(a),d())},g}var En=s=>(r,t,e)=>{e.value=tr(e.value,s)};function Rd(s){return s.nodeType===1}function mt(s){let r=csEventtarget.apply(s);return r&&Rd(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:
r}function Id(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Cd(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(mt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function Pd(s){if(!$(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Od=!!window.chrome,wo="data-cs-scroll-container";function Nd(s){try{if(Ot(csEventtarget.apply(s)))return!0}catch{}return!1}
var Ss=(()=>{let s;return function(r){function t(i){return!!(Ot(i)&&Nd(i)&&ai(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(wo)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${wo}]`)}r.getScrollContainer=e}(s||(s={})),s})();function Md(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Li=Md(),G=(()=>
{let s;return function(r){function t(l,d,g){var u;l instanceof Node?Li.set(l,d,g):((u=l.props)!==null&&u!==void 0||(l.props={}),l.props[d]=g)}r.setProperty=t;function e(l,d){var g;return l instanceof Node?Li.get(l,d):(g=l.props)===null||g===void 0?void 0:g[d]}r.getProperty=e;function i(l){return l instanceof Node?Li.getStore(l):l.props}r.getProperties=i;function n(l,d){let g=null;return a(l,(u,y,E)=>d(u)&&(g=u)&&!!E()),g}r.findDescendant=n;function a(l,d){c(l,void 0,d)}r.traverse=a;function c(l,d,
g){let u=!1;if(g(l,d,()=>u=!0),u)return;let E=l.shadowRoot;E&&c(E,l,g);let v=l.children;if(v!=null&&v.length)for(let I of v)if(I&&(c(I,l,g),u))break}}(s||(s={})),s})(),Ga=1,Ws=csSymbol("nodeIdentifier");function kd(s=!1){s&&(Ga=1),Ws=csSymbol("nodeIdentifier")}function Dd(s){return G.getProperty(s,Ws)}function et(s){let r=G.getProperty(s,Ws);return r!=null?r:(G.setProperty(s,Ws,Ga++),G.getProperty(s,Ws))}var Ar;function Ys(s){if(Ar||(Ar=document.createElement("div")),!(!!s&&$(s)))return ot.warn(`isValidSelector: invalid selector provided '${s}'`),
!1;try{return Wt.call(Ar,s),!0}catch{return ot.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Yr(s,r){if(to)return to.call(s,r);let t=s;do{if(Wt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var N=(()=>{let s;return function(r){let t;(function(b){b[b.NotMasked=0]="NotMasked",b[b.Parent=1]="Parent",b[b.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";
function e(b){return ti(b)&&"Attributes"in b&&"PIISelectors"in b?b.Attributes instanceof Array&&b.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(b){if(!ti(b)||b===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in b||(b.Attributes=[]),"PIISelectors"in b||(b.PIISelectors=[]),b}r.sanitizeSelectorUserInput=i;function n(b){var w;return(w=G.getProperty(b,r.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}}r.getMaskedElementDetails=n;function a(b){var w;
return(w=G.getProperty(b,r.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}}r.getMaskedAttributeDetails=a;function c(b){let w=G.getProperty(b,r.maskedProp);return(w==null?void 0:w.state)===t.Parent}r.isMaskedElement=c;function l(b){let w=G.getProperty(b,r.maskedProp);return(w==null?void 0:w.state)===t.Child}r.isMaskedElementChild=l;function d(b,w){let x=G.getProperty(b,r.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:
x.attributes,w))>-1}r.isMaskedAttribute=d;function g(b,w){G.setProperty(b,r.maskedProp,w)}r.setMaskedElementProperty=g;function u(b){G.setProperty(b,r.maskedProp,void 0)}r.unsetMaskedElementProperty=u;function y(b,w){G.setProperty(b,r.maskedAttributeProp,w)}r.setMaskedAttributeProperty=y;function E(b,w){let x=csArray.prototype.filter.call(b.PIISelectors,U=>Ys(U));w.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(w.elementSelector,","));let A=C([...x]),k={elementSelector:csArray.prototype.join.call(A,
","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(b.Attributes,U=>{U!=null&&U.attrName&&(U!=null&&U.selector)&&Ys(U.selector)&&!v(k.attrSelectors,U)&&csArray.prototype.push.call(k.attrSelectors,U)}),k.attrSelector=I(k.attrSelectors),k}r.getComputedSelectorSettings=E;function v(b,w){return csArray.prototype.some.call(b,x=>x.selector===w.selector&&x.attrName===w.attrName)}function I(b){let w="";return csArray.prototype.forEach.call(b,x=>{let A=csString.prototype.split.call(x.selector,
",");csArray.prototype.forEach.call(A,k=>{Ys(k)&&(w&&(w+=","),w+=k)})}),w}function C(b){if(b.length<=1)return b;let w=[];for(let x of b){let A=csString.prototype.split.call(x,",");for(let k of A)csArray.prototype.indexOf.call(w,k)===-1&&csArray.prototype.push.call(w,k)}return w}}(s||(s={})),s})(),M=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",
r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",
r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",
r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",
r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=
72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s=
{})),s})();var Bs=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),vs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]=
"ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),Ld=33,xd=(()=>{class s{constructor(){this.eventType="user",this.Ec=[],this.Ny=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),
boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.My=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.mo=[{type:"click",listener:e=>this.clickListener(e),
boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),
boundElement:document}],this.Sc=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Pd(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Sc,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.re=new Os((e,i)=>{switch(i){case "initial":case "added":this.ci(e);break;case "removed":this.li(e);break}})}init(){this.ky(),this.Dy(),this.vc()}onEvent(t){csArray.prototype.push.call(this.Ec,t)}Kt(t,e=!1){csArray.prototype.forEach.call(this.Ec,
i=>i(t,e))}start(){this._c(),this.ci(document),this.re.observe()}stop(){this.li(document),this.re.disconnect(),this.Ec=[]}Dy(){this.Ly()&&csArray.prototype.push.call(this.mo,...this.Ny)}ky(){this.xy()&&csArray.prototype.push.call(this.mo,...this.My)}ci(t){Hi(t)?csArray.prototype.forEach.call(this.mo,e=>Ct(e)):csArray.prototype.forEach.call(this.Sc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ct(i)})}li(t){Hi(t)?csArray.prototype.forEach.call(this.mo,e=>Pt(e)):csArray.prototype.forEach.call(this.Sc,
e=>{let i={type:e.type,listener:e.listener,boundElement:t};Pt(i)})}Ly(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}xy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}_c(){this.Vy()}Vy(){let t=Ss.getScrollContainer()||document,e=et(t),i=this.pd(t);if(i.top!==0||i.left!==0){let n={type:M.SCROLL,args:[e,i.left,i.top],date:D.now()};this.Kt(n,!0)}}pd(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(N.isMaskedElement(t)||
N.isMaskedElementChild(t))return;let e=et(t),i=this.pd(t),n={type:M.SCROLL,args:[e,i.left,i.top],date:D.now()};this.Kt(n)}mouseOverListener(t){if(N.isMaskedElementChild(t.target))return;let e=et(t.target),i={type:M.MOUSE_OVER,args:[e],date:D.now()};this.Kt(i)}clickListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLICK,args:[i],date:D.now()};this.Kt(n)}keyUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.D[t.key];if(n===void 0)return;
let a={type:M.KEY_UP,args:[i,n],date:D.now()};this.Kt(a)}keyDownListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n=this.D[t.key];if(n===void 0)return;let a={type:M.KEY_DOWN,args:[i,n],date:D.now()};this.Kt(a)}copyListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,vs.COPY],date:D.now()};this.Kt(n)}cutListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,vs.CUT],date:D.now()};
this.Kt(n)}pasteListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,vs.PASTE],date:D.now()};this.Kt(n)}pointerUpListener(t){let e=mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_UP,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button],date:D.now()};this.Kt(n)}pointerMoveListener(t){let e={type:M.POINTER_MOVE,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1)],date:D.now()};this.Kt(e)}pointerDownListener(t){let e=
mt(t);if(N.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_DOWN,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button,{pageX:Lt(t.pageX,1),pageY:Lt(t.pageY,1)}],date:D.now()};this.Kt(n)}touchStartListener(t){if(!t.changedTouches)return;let {changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_START,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:D.now()};this.Kt(a)}}touchMoveListener(t){if(!t.changedTouches)return;let {changedTouches:e}=
t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_MOVE,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:D.now()};this.Kt(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let {changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:t.type==="touchend"?M.TOUCH_END:M.TOUCH_CANCEL,args:[n.identifier,Lt(n.clientX,1),Lt(n.clientY,1)],date:D.now()};this.Kt(a)}}vc(){this.D={},this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Backspace=q.BACKSPACE,this.D.Enter=q.ENTER,
this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,this.D.Tab=q.TAB,this.D.Escape=q.ESCAPE,this.D.Esc=q.ESCAPE,this.D.End=q.END,this.D.Alt=q.ALT,this.D.Control=q.CTRL,this.D.Meta=q.META}}return F([Nt("RecordingPageEvents.start")],s.prototype,"start",null),F([L("scroll")],s.prototype,
"scrollListener",null),F([L("mouseOver"),_t(),Cd()],s.prototype,"mouseOverListener",null),F([L("click"),_t()],s.prototype,"clickListener",null),F([L("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([L("Event handler type: keydown")],s.prototype,"keyDownListener",null),F([L("Event handler type: copy")],s.prototype,"copyListener",null),F([L("Event handler type: cut")],s.prototype,"cutListener",null),F([L("Event handler type: paste")],s.prototype,"pasteListener",null),F([L("Event handler type: pointerup"),
_t()],s.prototype,"pointerUpListener",null),F([L("Event handler type: pointermove"),_t(),En({wait:Ld})],s.prototype,"pointerMoveListener",null),F([L("Event handler type: pointerdown"),_t()],s.prototype,"pointerDownListener",null),F([L("Event handler type: touchstart"),_t()],s.prototype,"touchStartListener",null),F([L("Event handler type: touchmove"),_t()],s.prototype,"touchMoveListener",null),F([L("Event handler type: touchend-cancel"),_t()],s.prototype,"touchEndCancelListener",null),s})(),Vd=2,Sn=
(()=>{class s{constructor(t){this.Uy=t,this.yo=0}addString(t){this.yo+=t.length*Vd}addArrayBuffer(t){this.yo+=t.byteLength}isThresholdReached(){return this.yo>this.Uy}reset(){this.yo=0}}return s})(),Ud=2*1E3*1024,jd=200,Hd=(()=>{class s{constructor(t=[],e=Ud){this.Ot=t,this.wc=new Sn(e)}addEvent(t){this.wc.addString(bs(t)),csArray.prototype.push.call(this.Ot,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ot.length&&!(this.Ot[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ot,e,0,t)}eventsCount(){return this.Ot.length}clearEvents(){this.wc.reset(),
this.Ot=[]}isFull(){return this.eventsCount()>=jd}isThresholdReached(){return this.wc.isThresholdReached()}getEvents(){return this.Ot}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ot,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Ot=i,e}stringifyEvents(){return bs(this.Ot)}hI(t){t.type===M.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return F([Nt("RecordingBatch.addEvent")],
s.prototype,"addEvent",null),s})(),Bd=(()=>{class s{constructor(){this.Eo=1}getCurrentIndex(){return this.Eo}increment(){this.Eo+=1}reset(){this.Eo=1}getRequestParameters(){return{ri:`${this.Eo}`}}}return s})(),Wa=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.jy}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.Hy();if(i===null)return null;let {bubbles:n=!1,cancelable:a=
!1,detail:c}=e;return i.initCustomEvent(t,n,a,c),i}static Hy(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.jy="cs.tracking.",s})(),jt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),xi="null",De=null,Ya=[],Fd=()=>{var s;return oi||!!(!((s=document.body)===
null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!oi&&Fd()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],De=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Xr({type:"UXA_EVENT",event:s.detail})}),De.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===xi)return;xi=s.data.sessionId,csArray.prototype.forEach.call(Ya,r=>r()),De==null||De.postMessage({type:"CONNECTED",sessionId:xi})}}));function zd(s){oi||
(xi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Ya,s)))}function Xr(s){De==null||De.postMessage(s)}var er=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ts=(()=>{class s extends er{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Ao=(()=>{class s extends er{constructor(t){super(t,"Living intances: {instances}\x3cbr/\x3eAdded: {added}\x3cbr/\x3eRemoved: {removed}"),
this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),br=(()=>{class s extends er{constructor(t){super(t,"Count: {count}\x3cbr/\x3eAverage: {average}ms\x3cbr/\x3eTotal: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=D.elapsed();t(),this.count++,this.total+=D.elapsed()-
e}asyncMeasure(){let t=D.elapsed();return()=>{this.count++,this.total+=D.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),se={general:{category:"General",nbEvents:new ts("Nb of Events"),pendingTasks:new ts("Pending Tasks"),pendingEvents:new ts("Pending Tasks"),nbOfMutationObservers:new Ao("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new br("Initial DOM"),pendingMutations:new ts("Nb of Mutations scheduled"),serializedMutations:new br("Serialized Mutations"),
count:new ts("Mutation Count"),elementMutationObserved:new Ao("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new br("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ts("Nb of Hidden Elements "),nbElements:new ts("Nb of  Elements")}},bo=null;zd(()=>{let s=i=>Object.keys(i),r=csArray.prototype.map.call(s(se),i=>se[i]),t=csArray.prototype.map.call(r,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),n=>i[n]),n=>n instanceof
er));Xr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(r,(i,n)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[n],a=>({name:a.name,format:a.format}))}))}),!bo&&(bo=csSetInterval(()=>{let i=Ra(Ue(t,n=>Ue(n,a=>a.getData())),n=>n);Xr({type:"UXA_PERFORMANCE_COUNTER",event:i})},1E3))});var P=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING=
"5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),It=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),He=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Tt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION=
"9"}(s||(s={})),s})();function ue(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function Zt(s){return qe(s,"data:")}function $d(s){return qe(s,"#")}function qd(s){return!!s&&(hi(s,".css")||qe(s,"https://fonts.googleapis.com/css"))}function vn(s){let r=
csString.prototype.trim.call(s);if(s==="")return[];let [t,e]=Gd(r);return e?(hi(t,",")||(e=Wd(e)),[To(t),...vn(e)]):[To(t)]}function Gd(s){return csString.prototype.split.call(s,/\s(.+)/)}function To(s){return csString.prototype.split.call(s,/,$/)[0]}function Wd(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Yd=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Xd(s,r){return csString.prototype.replace.call(s,Yd,(...e)=>{let i=e[3]||
e[4],n=e[9]||e[10]||e[11],a=Jd((i||n).trim()),c=i?"@import ":"",l=r(a)||a;return`${c}url(${Kd(l)})`})}function Kd(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Xs(s){let r=new Set;return Xd(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ps(r)}function Jd(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,
r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\ufffd":csString.fromCodePoint(a)})}var Ro=new Map,Tr=!oi&&document.implementation.createHTMLDocument("");function Xa(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Qd(s){if(!Xi(s))return null;let r=Ka(s);if(r===null||r.length===0)return null;let t="";if(mh(s.textContent))K(r,e=>t+=
e.cssText);else{let e=Zd(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,a=0;n<r.length;n+=1,a+=1)i[a]=r[n];K(i,n=>t+=n.cssText)}return t}function Zd(s){if(!Tr)return 0;let r=Ro.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Tr.head.appendChild(t);let e=Ka(t);return r=e?e.length:0,Ro.set(s.textContent,r),Tr.head.removeChild(t),r}function Ka(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!==
"SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var zs=s=>s instanceof HTMLFormElement?"form":s.localName;var cs=(()=>{class s{constructor(t){this.csId=et(t),this.props=Li.getStore(t)}}return s})(),Ja=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),_s=(()=>{class s extends cs{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=1,this.localName=zs(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=
[];let a=Qd(t);if(a){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(a),l=new Ja(c);csArray.prototype.push.call(this.children,l)}Is(t)&&G.setProperty(this,"SVG",!0),(Xi(t)||nn(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return xe(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||
i===void 0?void 0:i.value}}return s})(),_n=(()=>{class s{constructor(t){this.type="asyncEvent",this.Ac=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Ac)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Os=t,this.Ac=!0,this.S&&this.S(this.Os)}complete(t){this.Ac&&t(this.Os),this.S=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function tp(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,
e}var Kr=csQueueMicrotask||csSetTimeout,Ti=new Cs,Fs=new Cs,Io=1;function Ut(s,r="high"){let t=Io;Ti.isEmpty&&Fs.isEmpty&&Qa(()=>{if(Io!==t)return;let n=as(()=>{for(;!Fs.isEmpty;)Fs.pop()();for(;!Ti.isEmpty;)Ti.pop()();Fs.isEmpty||n()},"groupMicrotask.run");n()});let e=s.name||s.toString(),i=ze(`groupMicrotask:${r}:${e}`,s);r==="high"?Fs.push(i):Ti.push(i)}function Qa(s,r=10){Kr(r===0?s:()=>Qa(s,r-1))}async function Za(s=1){for(let r=0;r<s;r++)await new Promise(t=>Ut(t))}var sr=(()=>{class s{constructor(){this.set=
new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Ps(this.set)}get count(){return this.set.size}}return s})(),ep=(()=>{class s extends sr{constructor(t="high"){super(),this.By=t}add(t){this.set.add(t),this.set.size===1&&Ut(()=>{this.set.clear()},this.By)}}return s})();function ir(s,r=!1){let t=new sr;return{push(e){t.count===0&&(r?Ut:csSetTimeout)(()=>{s(t.values()),
t.clear()}),t.add(e)}}}var ce=csSymbol(),wn=(()=>{class s{constructor(t){var e,i,n,a,c,l,d,g,u,y,E,v,I;this.S=t,this.bc=null,this.Tc=null,this.Rc=null,this.Ic=null,this.Cc=null,this.Fy=ir(C=>this.processUpdateRulesInATick(C)),this.Pc=null,this.Oc=null,this.Nc=null,this.S=C=>Ut(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.bc=is({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,
args:b})=>{this.processInsertRule(C,b)}})),typeof((a=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.Tc=is({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:b})=>{this.processDeleteRule(C,b)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Rc=is({target:window.CSSGroupingRule.prototype,methodName:"insertRule",
hook:({context:C})=>this.processUpdateRule(C)})),typeof((g=(d=window.CSSGroupingRule)===null||d===void 0?void 0:d.prototype)===null||g===void 0?void 0:g.deleteRule)=="function"&&(this.Ic=is({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((u=window.StyleSheet)===null||u===void 0)&&u.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Cc=qi(window.StyleSheet.prototype,"disabled",(C,b,w)=>{b!==w&&this.zy(C,b)})),typeof((E=(y=
window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Pc=is({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let b=C.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),typeof((I=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||I===void 0?void 0:I.removeProperty)=="function"&&(this.Oc=is({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",
hook:({context:C})=>{let b=C.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Nc=_d(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,a,c,l,d;(t=this.bc)===null||t===void 0||t.activate(),(e=this.Tc)===null||e===void 0||e.activate(),(i=this.Rc)===null||i===void 0||i.activate(),(n=this.Ic)===null||n===void 0||n.activate(),(a=this.Cc)===null||a===void 0||a.activate(),
(c=this.Pc)===null||c===void 0||c.activate(),(l=this.Oc)===null||l===void 0||l.activate(),(d=this.Nc)===null||d===void 0||d.activate()}disconnect(){var t,e,i,n,a,c,l,d;(t=this.bc)===null||t===void 0||t.deactivate(),(e=this.Tc)===null||e===void 0||e.deactivate(),(i=this.Rc)===null||i===void 0||i.deactivate(),(n=this.Ic)===null||n===void 0||n.deactivate(),(a=this.Cc)===null||a===void 0||a.deactivate(),(c=this.Pc)===null||c===void 0||c.deactivate(),(l=this.Oc)===null||l===void 0||l.deactivate(),(d=this.Nc)===
null||d===void 0||d.deactivate()}processInsertRule(t,[e,i]){if(t[ce]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.S(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Fy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(si(i.cssRules),e);if(n===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};
this.S(a)}}processDeleteRule(t,[e]){if(t[ce]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.S(i)}zy(t,e){if(t[ce]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.S(i)}}return nt([L()],s.prototype,"observe",null),nt([L()],s.prototype,"disconnect",null),nt([L()],s.prototype,"processInsertRule",null),nt([L()],s.prototype,"processUpdateRule",null),nt([L()],s.prototype,"processUpdateRulesInATick",null),nt([L()],s.prototype,"processDeleteRule",
null),s})(),sp=(()=>{class s{constructor(t){this.$y=1,this.So=new Set,this.Mc=null,this.kc=null,this.Dc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.qy=e=>{let i=e.sheet;if(this.So.has(i))if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[ce],rule:e.rule,index:e.index};this.S(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[ce],index:e.index};this.S(n)}else if(e.type==="cssRuleUpdated"){let n=
{type:"adoptedStyleSheetRuleUpdated",sheetId:i[ce],rule:e.rule,index:e.index};this.S(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[ce],disabled:e.disabled};this.S(n)}},this.S=e=>Ut(async()=>{await Za(2),t(e)}),this.re=new Os(this.Dc),"adoptedStyleSheets"in Document.prototype&&(this.Mc=qi(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.kc=
qi(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.gd=new wn(this.qy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.re.observe(),(t=this.Mc)===null||t===void 0||t.activate(),(e=this.kc)===null||e===void 0||e.activate(),this.gd.observe()}disconnect(){var t,e;this.So.clear(),this.re.disconnect(),(t=this.Mc)===null||t===void 0||t.deactivate(),(e=this.kc)===null||e===void 0||e.deactivate(),this.gd.disconnect()}setStyleSheets(t,
e){if(!e.length)return;this.Gy(e);let i=Ue(e,a=>a[ce]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.S(n)}Gy(t){K(t,e=>{if(this.So.has(e))return;let i=this.$y++;e[ce]=i,this.So.add(e);let n=this.Wy(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.S(a)})}Wy(t){let e=[];try{e=Ue(t.cssRules,i=>i.cssText)}catch{}return e}}return nt([L()],s.prototype,"observe",null),nt([L()],s.prototype,"disconnect",null),nt([L()],s.prototype,"setStyleSheets",
null),s})(),ip=as(ap,"optimizeMutations"),rp=csSymbol.for("ignoreNextSerialization");function np(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,a=new Map,c=new Set,l=new Set,d=new Map,g=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){g.delete(u),s.add(u)},isDetachedMove(u){return!!dt.findAncestor(u,y=>g.has(y),!0)},isAddedNode(u){let y=dt.findAncestor(u,E=>r.has(E)||l.has(E)||s.has(E),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!dt.findAncestor(u,
y=>r.has(y)||l.has(y),!0)},markAsAddedNode(u){g.delete(u),l.delete(u),r.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!dt.findAncestor(u,y=>t.has(y),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,y){let E=y==="previous"?n:i;return u&&E.has(u)?E.get(u)||null:u},getSiblings(u){let y=u.addedNodes.length,E=this.getPlaceholder(u.previousSibling,"previous"),v=this.getPlaceholder(u.nextSibling,
"next");if(y){let I=E,C=v,b=u.previousSibling!==E,w=u.nextSibling!==v;for(let x=0;x<y;x++){let A=u.addedNodes[x],k=u.addedNodes[y-x-1];this.isLatestNodeMutation(A,u)?(n.delete(A),u.previousSibling&&b&&(i.set(u.previousSibling,A),b=!1),I=A):n.set(A,I),this.isLatestNodeMutation(k,u)?(i.delete(k),u.nextSibling&&w&&(n.set(u.nextSibling,k),w=!1),C=k):i.set(k,C)}}else u.previousSibling&&u.previousSibling!==E&&i.set(u.previousSibling,v),u.nextSibling&&u.nextSibling!==v&&n.set(u.nextSibling,E);return{previousSibling:E,
nextSibling:v}},setAttributeMutation(u,y){let E=a.get(u)||new Set;E.add(y),a.set(u,E)},isAttributeMutated(u,y){var E;return!!(!((E=a.get(u))===null||E===void 0)&&E.has(y))},setLatestNodeMutation(u,y){d.set(u,y)},isLatestNodeMutation(u,y){return d.get(u)===y},markAsFutureAddedNode(u){d.has(u)||g.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function op(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,
s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function ap(s){let r=np(),t=[];for(let e of s)e.type==="childList"&&op(e,r);for(let e of s)switch(e.type){case "attributes":lp(e,r,t);break;case "characterData":cp(e,r,t);break;case "childList":dp(e,r,t);break}return t}function cp(s,r,t=[]){let e=s.target;return dt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!up(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}
function lp(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return dt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var hp=30;function up(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=D.now(),n=s[e];return n&&i<n?!0:(s[e]=i+hp,!1)}function dp(s,r,t=[]){let e=dt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),a=r.getSiblings(s),c=a.nextSibling,l=a.previousSibling,
d=null,g=()=>{if(d){let {childListType:E,movedNodes:v,...I}=d;csArray.prototype.push.call(t,E==="added"?I:{...I,movedNodes:v}),d=null}},u=E=>E===(d==null?void 0:d.childListType)?d:(g(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let v=s.addedNodes[E];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(d=u("moved"),csArray.prototype.push.call(d.movedNodes,v)):(r.markAsAddedNode(v),
n||(d=u("added"),csArray.prototype.push.call(d.addedNodes,v))),l=v):dt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}g()}let y=Ia(s.removedNodes,E=>{if(dt.isConnected(E)){if(!i&&!r.isPendingInsert(E)){if(r.isDetachedMove(E))return!0;r.markAsMovedNode(E),r.isMovedNodeIntoAddedNode(E)&&(E[rp]=!0)}return!1}return r.isUselessNode(E)?!1:(r.markAsRemovedNode(E),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],
target:s.target,nextSibling:c,previousSibling:l}),t}var Co={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},We=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Lc(e){if(s.shadowRootFilters.length>0&&ei(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Co)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&
(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Ut(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,Co)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ns.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),
"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Lc(document),this.shadowRootObserver=new Os(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,K(this.shadowRootObserver.shadowRoots,n=>{this.Lc(n)}))}static disconnect(e,i){var n,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=
[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.S=e,this.md=i;let n=ir(a=>e(a,this),!0);this.S=ze("DocumentMutationObserver:callback",a=>{K(a,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===
null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?tu(i,n):i!=null?i:n}observe(){s.observe(this.S,this.md)}disconnect(){s.disconnect(this.S,this.md)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{se.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{K(s.shadowRootCallbacks,
i=>i(t,e)),e!=="removed"?s.Lc(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,nt([L()],r.prototype,"observe",null),nt([L()],r.prototype,"disconnect",null),r})(),pp=(()=>{class s{constructor(t){this.S=t,this.Yy=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.S({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,
index:e.index}):e.type==="cssStyleSheetDisabled"&&this.S({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.S=e=>Ut(()=>t(e)),this.yd=new wn(e=>Ut(async()=>{await Za(),this.Yy(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Ed=new sp(t))}observe(){var t;this.P=new We(e=>this.Xy(e),(e,i)=>{i==="added"&&this.Ky(e)}),this.P.observe(),this.yd.observe(),(t=this.Ed)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.P)===null||t===void 0||t.disconnect(),this.yd.disconnect(),
(e=this.Ed)===null||e===void 0||e.disconnect()}Xy(t){let e=ip(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){ot.error("processRawMutations: empty record");continue}switch(n.type){case "attributes":this.processAttributeChanged(n);break;case "characterData":this.processCharacterDataChanged(n);break;case "childList":this.processChildListChanged(n);break;default:ot.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,
attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:dt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.S(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.S(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};
this.S(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:si(t.addedNodes)};this.S(a)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let a={type:"nodesRemoved",target:t.target,nodes:Ue(t.removedNodes,c=>c)};this.S(a)}}Ky(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.S(e)}}return nt([L()],s.prototype,"processAttributeChanged",null),nt([L()],s.prototype,"processCharacterDataChanged",
null),nt([L()],s.prototype,"processChildListChanged",null),s})(),fp=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),gp=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),mp=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),yp=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),
this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Ep=(()=>{class s extends cs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Sp=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=
t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let a=e[n];i[n]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&nn(t)&&(i[n].value=Xa(t))}return i}}return s})(),Po={workTime:40,async:!0,initialDOM:!0};var Ks=csSymbol("InitialDom"),Oo=csSymbol.for("ignoreNextSerialization");function tc(s){return s[Oo]?(delete s[Oo],!0):!1}function vp(s=Po){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Po.workTime);let n=ze("serialize:callback",y=>e(y)),a=new Cs,c=
(y,E)=>{y.hasChildNodes()&&a.push({node:y,serializedNode:E});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let I=E.shadowRoot=Js(v);s.async&&s.initialDOM&&G.setProperty(v,Ks,!0),c(v,I)}},l,d=!0,g=8,u=ze("work",()=>{var y;if(d)l=Js(t),s.async&&s.initialDOM&&G.setProperty(t,Ks,!0),c(t,l),d=!1;else if(a.isEmpty)return;let E=Ap(100);for(;!a.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--g<=0&&csSetTimeout(u);return}let {node:v,serializedNode:I}=a.pop(),C=(y=I.children)!==null&&y!==
void 0?y:[];if(Ji(v))continue;let b=0;for(let w=csNodefirstChild.apply(v);w;w=csNodenextSibling.apply(w)){if(tc(w))continue;let x=Js(w);s.async&&s.initialDOM&&G.setProperty(w,Ks,!0),C[b++]=x,c(w,x)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let y=0;y<g;y++)csSetTimeout(u,1)}}function _p(s){let r=Js(s),t=r;if(Ji(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))tc(n)||(t.children[e++]=Jr(n));let i=s.shadowRoot;return i&&(t.shadowRoot=
Jr(i)),r}var Jr=as(_p,"serializeSync");function Js(s){let r,t;switch(s.nodeType){case 1:t=r=new _s(s),r.attributes=bp(s);break;case 3:t=new Ja(s);break;case 4:t=new fp(s);break;case 8:t=new gp(s);break;case 10:t=new mp(s);break;case 9:t=new yp(s);break;case 11:t=new Ep(s);break;default:throw new Error("Node type not supported: "+s.nodeType);}return t}function wp(){Ks=csSymbol("InitialDom")}function Ap(s){if(s<1)throw new Error("Precision should be \x3e\x3d 1");let r=0,t=performance.now();return{started:t,
elapsed(){return++r%s===0&&(t=performance.now()),t-this.started}}}function bp(s){return Ji(s)?[]:Sp.create(s)}var de=(()=>{class s{constructor(){this.ne=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:D.now(),t.timestamp==null&&(t.timestamp=D.now()),csArray.prototype.forEach.call(this.ne,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ne=[])}stopForInactivity(){this.isStarted&&
(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ne,t),()=>{let e=csArray.prototype.indexOf.call(this.ne,t);csArray.prototype.splice.call(this.ne,e,1)}}}return s})(),Tp=vp(),Rp=(()=>{class s extends de{constructor(){super(...arguments),this.vo=!1}onStart(){this.vo=!0,this.S=tp(this.Jy,this),this.F=new pp(this.S),this.F.observe();let t=se.mutations.initialDOM.asyncMeasure(),e=()=>{this.vo=!1,wp(),t()};this.produceEvent(new _n(i=>Tp(document,n=>{e(),i({type:"DomEvent",
domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.vo=!1,(t=this.S)===null||t===void 0||t.cancel(),(e=this.F)===null||e===void 0||e.disconnect()}xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=et(e.target),i.targetProps=G.getProperties(e.target)),[e,i]}Jy(t){if(!this.Qy(t))switch(t.type){case "attributeChanged":{let [e,i]=this.xt(t.type,t);i.attribute=e.attribute,i.isSvg=Is(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=
e.oldValue,i.localName=zs(e.target),i.linkRel=ga(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?zs(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case "characterDataChanged":{let [e,i]=this.xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?zs(e.target.parentElement):null,i.parentProps=e.target.parentElement?G.getProperties(e.target.parentElement):
void 0,this.produceEvent(i)}break;case "nodesAdded":{let [e,i]=this.xt(t.type,t);i.targetLocalName=rt(e.target)?zs(e.target):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.previousSibling=e.previousSibling?et(e.previousSibling):null,se.mutations.serializedMutations.measure(()=>{i.nodes=Ue(e.nodes,Jr)}),this.produceEvent(i);break}case "nodesMoved":{let [e,i]=this.xt(t.type,t);i.previousSibling=e.previousSibling?et(e.previousSibling):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,
i.nodesIds=Ue(e.nodes,et),this.produceEvent(i);break}case "nodesRemoved":{let [e,i]=this.xt(t.type,t);i.nodesIds=Ue(e.nodes,et),this.produceEvent(i);break}case "shadowRootAttached":{let [e,i]=this.xt(t.type,t);i.shadowRoot=Js(e.shadowRoot),this.produceEvent(i);break}case "cssRuleInserted":{let [e,i]=this.xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case "cssRuleDeleted":{let [e,i]=this.xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case "cssRuleUpdated":{let [e,i]=
this.xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case "cssStyleSheetDisabled":{let [e,i]=this.xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case "adoptedStyleSheetRegistered":{let [e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case "adoptedStyleSheetsSet":{let [e,i]=this.xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case "adoptedStyleSheetRuleInserted":{let [e,i]=this.xt(t.type,
t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case "adoptedStyleSheetRuleDeleted":{let [e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case "adoptedStyleSheetRuleUpdated":{let [e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case "adoptedStyleSheetDisabled":{let [e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}_o(t){return this.vo&&
!G.getProperty(t,Ks)}Qy(t){switch(t.type){case "nodesAdded":case "nodesMoved":case "nodesRemoved":case "shadowRootAttached":return this._o(t.target)||N.isMaskedElement(t.target)||N.isMaskedElementChild(t.target);case "characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this._o(e)||N.isMaskedElement(e)||N.isMaskedElementChild(e))}case "attributeChanged":return this._o(t.target)||N.isMaskedElementChild(t.target)||N.isMaskedAttribute(t.target,t.attribute);case "cssRuleInserted":case "cssRuleDeleted":case "cssRuleUpdated":case "cssStyleSheetDisabled":return this._o(t.target)||
N.isMaskedElementChild(t.target);default:return!1}}}return s})(),ui=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),di=(()=>{class s{constructor(){this.ne=[]}start(){}stop(){this.ne.length=0,this.ne=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ne;csSetTimeout(()=>{let n=ze("Processor:processEvent",a=>this.processEvent(a))(t);n!=null&&csArray.prototype.forEach.call(e,a=>a(n)),s.pendingEvents--})}else csSetTimeout(()=>
{csArray.prototype.forEach.call(this.ne,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ne,t),()=>{this.ne=csArray.prototype.filter.call(this.ne,e=>e!==t)}}emitEvent(t){Ut(()=>csArray.prototype.forEach.call(this.ne,e=>e(t)))}}return s.pendingEvents=0,s})(),No=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.Zy(t);if(!n)return null;let a=await s.Sd(n),c=Zt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:n}};return c&&
(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let a=await s.tE(t,n),c=je(t),l=a.get(c);if(!l)return null;let d={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(d.nestedResources=[],a.forEach(g=>{g&&csArray.prototype.push.call(d.nestedResources,{hash:g.hash,data:g.data})})),d}static async Sd(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.xr,e);return Gr(i)}static async Zy(t){let e;
if(!Zt(t))e=await (await window.fetch(t)).blob();else{let i=oo(t);if(!i)return null;e=i}return e}static async tE(t,e){let i=new Map,n=je(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Zt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=
await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=Xs(l.data));let u=!1,y=!1;for(let E of l.nestedResources){let v=Zt(E)?E:l.resourceAbsolutePath?Lu(E,l.resourceAbsolutePath):je(E),I=i.get(v);if(I!==void 0){if(I!==null){let b=s.eE(I,E);l.data=Yi.stringReplaceAll(l.data,E,b)}continue}xe(c,b=>b.resourceAbsolutePath===v)!==void 0||(u=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:v}))}if(!u){let E=
await s.sE(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let u;if(!Zt(l.resourceAbsolutePath))u=await (await fetch(l.resourceAbsolutePath)).blob();else{let E=oo(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}u=E}let y=await s.Sd(u);i.set(l.resourceAbsolutePath,{hash:y,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static eE(t,e){let i=`cs://resources/${t.hash}`;return Zt(e)||(i+=`?${s.xc}=${e}`),i}static async sE(t){let e=new Blob([t],
{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.xr,i);return{data:e,hash:Gr(n)}}}return s.xr="SHA-256",s.xc="original-resource-name",s})(),Qr=(()=>{class s extends di{constructor(){super(),this.wo="cssrm://",this.oe=0,this.us=!1}isListening(t){return!s.isSupported()||!ui.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case "initialDOM":case "nodesAdded":this.iE(t);
break;case "attributeChanged":this.rE(t);break;case "characterDataChanged":this.nE(t);break}return t}disableOnlineAssets(){this.us=!1}enableOnlineAssets(){this.us=!0}isOnlineAssetsActivated(){return this.us}iE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)G.traverse(i,(n,a)=>{if(n.nodeType===3&&a){this.oE(n,a.localName);return}if(!_s.isElement(n))return;let c=xe(n.attributes,l=>l.name==="style");if(c&&(c.value=this.Ao(c.value)),this.aE(n)||this.cE(n,a)){let l=xe(n.attributes,
g=>g.name==="src");l&&l.value&&(l.value=this.vd(l.value));let d=xe(n.attributes,g=>g.name==="srcset");if(d){d.value=this._d(d.value);return}}if(this.lE(n)&&this.us){let l=xe(n.attributes,d=>d.name==="href");if(!l||!l.value)return;this.oe++,this.ji(je(l.value),this.oe,!0),this.hE(n,l,this.oe)}})}hE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.wo+i}oE(t,e){if(!t||e!=="style")return;let i=this.Ao(t.data);i!==null&&(t.data=
i)}nE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Ao(t.newValue);e!==null&&(t.newValue=e)}rE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Ao(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.vd(t.newValue)),i&&(t.newValue=this._d(t.newValue)))}vd(t){return Zt(t)||this.us?
(this.oe++,this.ji(t,this.oe,!1,D.now()),this.wo+this.oe):t}_d(t){if(!this.us)return t;let e=t,i=vn(t),n=D.now();for(let a of i)this.oe++,this.ji(je(a),this.oe,!1,n),e=csString.prototype.replace.call(e,a,this.wo+this.oe);return e}Ao(t){let e=Xs(t),i=t,n=D.now();for(let a of e){let c=Zt(a);if(!(c||this.us)||this.uE(a))continue;this.oe++,i=csString.prototype.replace.call(i,a,this.wo+this.oe);let l=qd(a);c?this.ji(a,this.oe,!1,n):this.us&&(l?this.ji(a,this.oe,!0,n):this.ji(je(a),this.oe,!1,n))}return i}ji(t,
e,i,n=D.now()){let a=i?No.toCSSStaticResourceEvent:No.toStaticResourceEvent,c=new _n(async l=>{try{let d=await a(t,e,n,this.us);l(d||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(d){l({type:"warning",message:d})}});this.emitEvent(c)}aE(t){return t.localName==="img"}cE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}lE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return ka()&&
Ou()&&!!csArray.from}uE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return ue([Nt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Bt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),ec=(()=>{class s{constructor(){this.N=!1,this.Ns=t=>{try{switch(t.type){case "visibilitychange":return document.visibilityState===
"hidden"?this.Jt(Bt.Hidden):this.Jt(Bt.Visible);case "pagehide":return document.visibilityState==="hidden"?this.Jt(Bt.PagehideHidden):this.Jt(Bt.PagehideVisible);case "blur":return this.Jt(Bt.Blur);case "navigate":return this.dE(t)?this.Jt(Bt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.N||(this.N=!0,this.Vc(),this.pE(),this.fE(),lo()&&this.gE())}stop(){this.N&&(this.N=!1,this.Uc(),this.mE(),this.yE(),lo()&&this.EE())}onEvent(t){this.Jt=t}gE(){window.navigation.addEventListener("navigate",
this.Ns)}EE(){window.navigation.removeEventListener("navigate",this.Ns)}Vc(){document.addEventListener("visibilitychange",this.Ns)}Uc(){document.removeEventListener("visibilitychange",this.Ns)}pE(){window.addEventListener("pagehide",this.Ns)}mE(){window.removeEventListener("pagehide",this.Ns)}fE(){window.addEventListener("blur",this.Ns)}yE(){window.removeEventListener("blur",this.Ns)}dE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),bt=(()=>{let s;return function(r){r[r.Active=
0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),Ip=(()=>{class s{constructor(t,e,i=[]){this.Hi=t,this.jc=e,this.SE=i,this.bo=null,this._t=bt.Active,this.K=[]}reset(){this.bo=null,this.K=[],this._t=bt.Active}disconnect(){this._t=bt.Stopped}vE(){this.jc(bt.Paused),this._t=bt.Paused,csSetTimeout(()=>{this._t===bt.Paused&&this.Hc()},s.STOP_TIMEOUT)}_E(){this.jc(bt.Active),this._t=bt.Active,K(this.K,this.Hi),this.K=[]}Hc(){this.K=[],this.jc(bt.Stopped),this._t=bt.Stopped}pushEvent(t,
e){if(e.isUserEvent&&(this.bo=t.date,this._t!==bt.Active)){this._E(),this.Hi(t);return}if(this.wE(t)){this.Hi(t);return}switch(this._t){case bt.Active:if(this.AE(t,e)){this.vE(),csArray.prototype.push.call(this.K,t);return}this.Hi(t);break;case bt.Paused:csArray.prototype.push.call(this.K,t);break;case bt.Stopped:break}}AE(t,e){return!e.isUserEvent&&this.bo!==null&&t.date-this.bo>s.INACTIVITY_TIMEOUT}wE(t){return csArray.prototype.indexOf.call(this.SE,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5E3,s.STOP_TIMEOUT=
5E3,s})(),Cp=2E3,Pp=(()=>{class s extends jt{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,I,C=[],b,w,x,A,k){super(),this.h=t,this.j=e,this.bE=i,this.Le=n,this.X=a,this.w=c,this.xe=l,this.ut=d,this.Ie=g,this.Q=u,this.V=y,this.Rt=E,this.yt=v,this.Ce=I,this.Pe=C,this.wd=b,this.Vt=w,this.Vr=x,this.ds=A,this.ps=k,this.Ms=0,this.ks=new Wa,this.Bi={allowFromQuotaService:!0,allowFromSerialization:!0},this.Ad=tr(()=>{this.j.eventsCount()>0&&this.bd()},Cp),this.fs=U=>this.processBrowserEvent(U),this.Ur=U=>this.It(U),
this.Td=0,this.To=0,this.Ve=new ec,this.Bc=!1,this.Rd=50*1024,this.hi=!1,this.jr=!1,this.pi=[],this.Ro=new Ip(U=>this.G(U),U=>{switch(U){case bt.Active:this.TE();break;case bt.Stopped:this.RE();break}},[M.RESOURCE_HASHES,M.TEXT_VISIBILITY,M.API_ERROR,M.JAVASCRIPT_ERROR]),this.Id=U=>{this.Rt.removeBatchInProgress(`${U.params.sn}.${U.params.pn}.${U.params.ri}`)}}init(){this.Fc(),this.V.onLoad(this.Id),this.V.onError(this.Id)}TE(){csArray.prototype.forEach.call(this.wd,t=>t.start())}RE(){csArray.prototype.forEach.call(this.wd,
t=>t.stopForInactivity())}Fc(){var t,e,i;this.Ce.onEvent(this.fs,this.Ur),(t=this.Q)===null||t===void 0||t.onInputNodeToEncrypt(this.Ur),(e=this.Q)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.Cd(n)}),(i=this.Q)===null||i===void 0||i.onUserIdentifierToEncrypt(this.fs),this.Ve.onEvent(n=>{if(csSetTimeout(()=>this.fi("page-state",n)),n!==Bt.Visible){if(n===Bt.Blur)return this.Pd();if(!this.Bc)return this.Bc=!0,csSetTimeout(()=>{this.Bc=!1}),n===Bt.Hidden?this.Pd():this.IE()}})}isRecording(){return this.w.hasValidSession()&&
this.isStarted}Pd(){if(!this.canSendEvents())return;this.Ce.flush(),this.Rt.saveBatchesInProgress(),K(this.Pe,a=>{var c,l;return K((l=(c=a.getPendingEvents)===null||c===void 0?void 0:c.call(a))!==null&&l!==void 0?l:[],d=>this.j.addEvent(d))});let t=this.j.getEvents();if(t.length===0)return;this.fi("pending-events",this.Ce.pendingEvents);let e=this.V.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.Le.getCurrentIndex();e.ri=i.toString(),
this.yt.removeQueryParams(),this.yt.setQueryParams(e),this.To=t[t.length-1].date;let n=this.j.stringifyEvents();if(n.length>this.Rd){let a=this.Od();if(a.length>0){let c=bs(a);this.yt.send(c)||this.Rt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Le.increment()}if(this.j.eventsCount()>0){e.ri=this.Le.getCurrentIndex().toString();let c=this.j.stringifyEvents();this.Rt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Le.increment()}}else this.yt.send(n)||
this.Rt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:n}),this.Le.increment();this.yt.removeQueryParams(),this.j.clearEvents()}IE(){if(!this.canSendEvents())return;this.Ce.flush();let t=this.V.getQueryParams();this.Rt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.yt.removeQueryParams(),K(this.Pe,n=>{var a,c;return K((c=(a=n.getPendingEvents)===null||a===void 0?void 0:a.call(n))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});
let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();return}this.fi("pending-events",this.Ce.pendingEvents),this.To=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.yt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Rd){let n=this.Od();if(n.length>0){let a=bs(n);this.yt.send(a)||this.Rt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,
delete t.rst,delete t.ri,this.yt.removeQueryParams(),this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.Le.getCurrentIndex();t.ri=a.toString();let c=this.j.stringifyEvents();this.Rt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.Le.increment()}}else this.yt.send(i)||(this.Rt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,
datatype:"json"},events:i}),this.Le.increment());this.yt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!0}canSendEvents(){return this.Bi.allowFromQuotaService&&this.Bi.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.xe&&
this.ds){(e=this.xe)===null||e===void 0||e.anonymize(t);let i=this.ds.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:D.now(),type:"JSError"});i&&this.fs(i)}}onIframeCustomError(t){if(this.ps){let e=this.ps.translate({...t,timestamp:D.now(),type:"CustomError"});e&&this.fs(e)}}onIframeDetailedApiError(t){this.Nd(t)}onIframeRecordingUserEvent(t){for(let e of t)this.It(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.X.isCurrentPageviewValid()&&
this.Ro.pushEvent(t,{isUserEvent:!1})}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.Ro.pushEvent(t,{isUserEvent:!0})}G(t){se.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.Ad(),this.Md(t)}Md(t){this.h.emitDebugEvents&&this.ks.emit("recordingEvent",{...t,typeName:M[t.type]})}onStart(){var t;this.fi("tag-version","15.111.0"),this.fi("page-state",document.visibilityState),this.Ro.reset(),this.Ve.start(),this.initStates(),
this.Ce.start(),this.ut&&this.Ie&&this.ut.subscribe(s.Nt,e=>this.Nd(e),{detailedEvent:!0}),this.h.emitDebugEvents&&this.ks.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.pi,e=>this.kd(e)),this.pi=[],this.hi&&((t=this.Vt)===null||t===void 0||t.enableOnlineAssets(),this.hi=!1)}onStop(){var t;this.Ve.stop(),this.ut&&this.ut.unsubscribe(s.Nt),this.Ce.stop(),this.Ro.disconnect(),(t=this.Vt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Ce.flush(),this.Ad.cancel(),this.pushEvents(),
this.V.removeQueryParams()}initStates(){this.Td=D.now(),this.Le.reset(),this.Ms=0,this.V.setQueryParams(this.bE.getRequestParameters())}pushEvents(){K(this.Pe,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.bd():this.j.clearEvents())}bd(){if(!this.canSendEvents())return;let t=this.j.getEvents();this.To=t[t.length-1].date;let e=this.Le.getCurrentIndex();this.V.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),
let:this.getRecordingLastEventTimestamp()});let i=this.V.getQueryParams();this.Rt.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.V.getQueryParams(),t),this.V.send(t),this.Le.increment(),this.j.clearEvents(),this.Dd&&this.Dd()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Md(t)}Nd(t){if(this.Vr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Vr.truncate(t),
this.Q){this.Q.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Cd(t)}Cd(t){if(this.Ms<s.CE){let e={type:M.API_ERROR,date:D.now(),args:[this.Ie.anonymize(t)]};this.fs(e),this.Ms=this.Ms+1,ut.counters.networkRequests.count("collected")}}PE(t){t===He.ETR_SESSION?this.V.setQueryParams({[s.OE]:s.Ld}):t===He.ETR_PAGE&&this.V.setQueryParams({[s.NE]:s.Ld})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;
let i=(e=this.ds)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:D.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.fs(i)}onCustomErrorEvent(t){var e;let i=(e=this.ps)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:D.now(),message:t.message,attributes:t.attributes});i&&this.fs(i)}onPageEvent(t){this.xd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:D.now(),keyId:this.h.encryptionPublicKeyId};(e=this.Q)===null||
e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.kd({eventName:t,eventType:e}):csArray.prototype.push.call(this.pi,{eventName:t,eventType:e})}kd(t){this.PE(t.eventType),this.xd(t.eventName),this.pushEvents()}xd(t){let e={type:M.PAGE_EVENT,date:D.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.ME)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:D.now(),type:M.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t=
{date:D.now(),type:M.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.fi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.fi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.jr=!0}getStaticResourceManagerStatus(){return this.Vt?{isStarted:this.h.useStaticResourceManager&&Qr.isSupported(),onlineAssets:{activated:this.Vt.isOnlineAssetsActivated(),enabledOnNextPageview:this.jr}}:null}resetOnlineAssetsOnPageview(){this.hi=!1,this.jr=
!1}updateOnlineAssetsOnPageview(){this.Vt&&this.jr&&(this.hi=!0,this.jr=!1)}onRecordingRequestSent(t){this.Dd=t}getRecordingStartTimestamp(){return this.Td.toString()}getRecordingLastEventTimestamp(){return this.To.toString()}onOptOut(){K(this.Pe,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}fi(t,e){if(!this.h.emitRecordInfoEvents)return;let i={date:D.now(),type:M.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}Od(){return this.j.extractEvents(M.API_ERROR,
M.JAVASCRIPT_ERROR,M.CUSTOM_ERROR,M.TEXT_VISIBILITY,M.POINTER_DOWN)}}return s.Nt="RecordingService",s.ME=255,s.CE=20,s.NE="etrp",s.OE="etrs",s.Ld="1",F([Nt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Op=(()=>{class s extends jt{constructor(t,e,i){super(),this.Yt=t,this.yt=e,this.V=i,this.zc=!1,this.Hr={},this.kE=n=>{if(n.length!==0)for(let a of n){let {metadata:c,events:l}=a;this.DE(c.rt)&&this.V.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Hr={}}onStop(){}recover(){this.Yt.recover(this.kE)}addBatchInProgress(t,
e,i){this.Hr[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Hr[t]}blockSendingLastMessage(){this.zc=!1}allowSendingLastMessage(){this.zc=!0}sendLastMessageBeacon(){if(this.zc){let {ri:t,rst:e,let:i,...n}=this.V.getQueryParams();n.hlm="true",this.yt.setQueryParams(n),this.yt.send()}}DE(t){return!!t&&csString.prototype.indexOf.call(t,P.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Hr),t=>{let {metadata:e,events:i}=this.Hr[t];
this.Yt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Yt.save(t)}}return F([L("RecordingRecovery")],s.prototype,"recover",null),s})(),ri=(()=>{class s{constructor(...t){this.Vd=t}addProvider(t){csArray.prototype.push.call(this.Vd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Vd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Np=(()=>{class s{constructor(t,e){this.Tt=t,this.C=e,this.Ds=[{boundElement:window,
type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.O=t}start(){this.ci(),this.triggerInitialEvents()}stop(){this.li()}ci(){csArray.prototype.forEach.call(this.Ds,t=>Ct(t))}li(){csArray.prototype.forEach.call(this.Ds,t=>Pt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:M.HASH_CHANGE,args:[this.C.anonymizePII(this.Tt.href)],date:D.now()};this.O(t)}visibilityChangeListener(){let t=
{type:M.VISIBILITY_CHANGE,args:[document.visibilityState],date:D.now()};this.O(t)}}return F([L("hashChange")],s.prototype,"hashChangeListener",null),F([L("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Mp=(()=>{class s{constructor(){}onScannedAsset(t){this.Io=t}scanCssString(t){this.$c(Xs(t))}scanElement(t,e){N.getMaskedElementDetails(t).state!==N.MaskedElementState.NotMasked||e&&N.isMaskedAttribute(t,e)||(Xi(t)?this.LE(t):nn(t)?this.xE(t,e):(this.VE(t,e),this.UE(t,e),this.jE(t,
e)))}xE(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:Xa(t)};this.Io({type:"stylesheet",asset:a})}}LE(t){var e;let i=new Set;if(t.textContent)for(let a of Xs(t.textContent))i.add(a);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||j.error(a.message)}if(n)for(let a=0;a<n.length;a++){let c=n.item(a).cssText;for(let l of Xs(c))i.add(l)}this.$c(Ps(i))}qc(t){return!this.HE(t)&&
!Zt(t)&&!$d(t)}VE(t,e){if(Sh(t)||Eh(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.qc(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Io({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.BE(t.srcset)}}UE(t,e){if(t.nodeType!==1){ot.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i==
"string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML);}}BE(t){this.$c(vn(t))}jE(t,e){if((Ah(t)||bh(t)||Th(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.qc(i)){let n={assetId:je(i),assetRawPath:i,assetBasePath:window.location.href};this.Io({type:"asset",asset:n})}}}$c(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.qc(e)),e=>({rawUrl:e,absoluteUrl:je(e)})),
e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Io({type:"asset",asset:i})})}HE(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),kp=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.Ls=[],this.K=[],this.FE=t}next(t){this.K.length===this.FE&&csArray.prototype.shift.call(this.K),csArray.prototype.push.call(this.K,t),this.K.length===1&&csSetTimeout(()=>this.clear());for(let e of this.Ls)e(t)}subscribe(t){if(xe(this.Ls,i=>t===i))return()=>{this.Ls=
csArray.prototype.filter.call(this.Ls,i=>i!==t)};csArray.prototype.push.call(this.Ls,t);for(let i of this.K)t(i);return()=>{this.Ls=csArray.prototype.filter.call(this.Ls,i=>i!==t)}}clear(){this.K=[]}hasObservers(){return this.Ls.length>0}}return s})(),sc=(()=>{var s;class r{constructor(e){this.S=e}observe(){this.zE=s.Br.subscribe(e=>this.S(e)),s.Co||(s.Co=!0,s.Fr.observe(),Gt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.gs.add(i),s.Br.next(i)}))}disconnect(){s.Co&&(this.zE(),s.Br.hasObservers()||
(s.Co=!1,s.Fr.disconnect(),s.Br.clear(),s.gs.clear()))}}return s=r,r.gs=new sr,r.Br=new kp,r.$E=as(t=>{Ut(()=>{for(let e of t)e.type==="childList"&&K(e.addedNodes,i=>{Gt(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.gs.has(a)||(s.gs.add(a),s.Br.next(a))})})})},"ElementObserver.findAllElements"),r.Co=!1,r.Fr=new We(s.$E),nt([L()],r.prototype,"observe",null),nt([L()],r.prototype,"disconnect",null),r})(),Dp=1,Lp=0,ic=(()=>{class s{constructor(t,e=Dp,i=Lp){this.qE=t,this.GE=e,this.WE=i,this.Ue=new Cs,this.De=
!1,this.Gc=0,this.Ud=()=>{for(this.Gc=0;this.Ue.length;){if(this.Gc>=this.GE){csSetTimeout(this.Ud,this.WE);return}let n=D.elapsed(),a=this.Ue.pop();if(!a)break;this.runTask(a);let c=D.elapsed()-n;this.Gc+=c}this.De=!1}}schedule(t,e=!1){if(!this.qE||e){t();return}se.general.pendingTasks.increase(),this.Ue.push(t),this.YE()}YE(){this.De||(this.De=!0,csSetTimeout(()=>{this.Ud()}))}runTask(t){se.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ue.forEach(t=>{this.runTask(t)}),this.Ue.clear()}clearQueue(){se.general.pendingTasks.clear(),
se.mutations.pendingMutations.clear(),this.Ue.clear()}isEmpty(){return this.Ue.length===0}}return F([L("TaskScheduler"),Nt("runTask")],s.prototype,"runTask",null),F([Nt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),xp=(()=>{class s{constructor(){this.B=!1,this.jd=new wn(t=>t.type==="cssRuleInserted"&&this.XE(t)),this.KE=ir(t=>{this.B&&t.length>0&&this.I.schedule(()=>K(t,e=>this.zr.scanElement(e)))}),this.JE=({type:t,asset:e})=>{var i,n,a;t==="stylesheet"&&((i=this.QE)===null||i===
void 0||i.call(this,e)),(n=this.ZE)===null||n===void 0||n.call(this,e);let c={date:D.now(),type:M.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.O)===null||a===void 0||a.call(this,c)},this.I=new ic(!0,30,0),this.$r=new sc(t=>this.tS(t)),this.P=new We(t=>this.Po(t)),this.zr=new Mp,this.zr.onScannedAsset(this.JE)}onEvent(t){this.O=t}onAsset(t){this.ZE=t}onStyleSheetFound(t){this.QE=t}start(){this.B||(this.B=!0,this.jd.observe(),this.$r.observe(),this.P.observe())}stop(){this.B&&(this.jd.disconnect(),
this.$r.disconnect(),this.P.disconnect(),this.B=!1)}XE(t){!t.rule||!this.B||this.zr.scanCssString(t.rule)}tS(t){this.B&&N.getMaskedElementDetails(t).state===N.MaskedElementState.NotMasked&&this.KE.push(t)}Po(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case "attributes":this.zr.scanElement(e.target,e.attributeName);break;case "characterData":this.eS(e.target);break;case "childList":}})}eS(t){ji(t)&&csNodeparentNode.apply(t)&&Xi(csNodeparentNode.apply(t))&&this.zr.scanCssString(t.data)}}return s})(),
rc=(()=>{class s{constructor(t){this.Hd=[],this.Bd=[],this.Gt={},this.Wt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Gt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Gt[e]}):this.Gt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Hd,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Bd,t)}send(t){let e=ii.toQuery({...this.Gt,ct:Zi.UNCOMPRESSED}),i=this.sS(e,t);return i?csArray.prototype.forEach.call(this.Hd,n=>n()):csArray.prototype.forEach.call(this.Bd,
n=>n(this.Gt)),i}sS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Wt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Wt}?${t}`,e||"")}}return s})(),Vp=(()=>{class s{constructor(t){this.Oo={},this.Se=new Sn(t)}save({key:t,metadata:e,events:i}){this.Se.isThresholdReached()||(this.Se.addString(t),typeof i=="string"?this.Se.addString(i):this.Se.addArrayBuffer(i),!this.Se.isThresholdReached()&&
(this.Oo[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.iS(),i=>{let n=this.Oo[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.rS(i))}),e.length!==0&&(t(e),this.Se.reset())}iS(){return Object.keys(this.Oo)}rS(t){delete this.Oo[t]}}return s})(),Ie=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),Up=(()=>
{class s{constructor(t,e,i){this.Fi=t,this.nS=i,this.gi=Ie.NOT_STARTED,this.Mo=[],this.Wc=0,this.oS=self.origin,this.ve=typeof window=="object"?"":"worker-",this.Se=new Sn(e),this.Yc()}async Yc(){await this.Fd(),this.gi===Ie.READY?this.aS():this.nS(this.Mo)}aS(){csArray.prototype.forEach.call(this.Mo,t=>{this.save(t)}),this.Mo=[]}async save(t){try{if(this.gi===Ie.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Mo,t);return}if(this.gi!==Ie.READY||this.Se.isThresholdReached())return;let {key:e,metadata:i,
events:n}=t;if(this.Se.addString(e),typeof n=="string"?this.Se.addString(n):this.Se.addArrayBuffer(n),this.Se.isThresholdReached())return;await this.Qt.put(`${this.oS}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.Qt&&(await this.Fd(),this.gi!==Ie.READY)||this.cS(t)}async Fd(){try{this.gi=Ie.OPEN_IN_PROGRESS,this.Qt=await self.caches.open(`${this.ve}${this.Fi}`),this.gi=Ie.READY}catch{this.gi=Ie.OPEN_FAILED}}async cS(t){try{if(this.Wc++,this.Wc>1)return;let e=await this.Qt.keys();
if(e.length===0)return;let i=await this.Qt.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((g,u)=>{l[u]=g}),delete l["content-type"];let d=l.datatype;return delete l.datatype,d==="json"||d==="base64"?c.text().then(g=>({metadata:l,events:g})):c.arrayBuffer().then(g=>({metadata:l,events:g}))}),a=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.Qt.delete(c))),t(a),this.Se.reset()}catch{}finally{this.Wc--}}}return s})(),jp=(()=>{class s{constructor(t){try{this.lS(t)}catch{this.Xc()}}lS(t){self.caches?
this.hS(t):this.Xc()}save(t){this.ko.save(t)}recover(t){this.ko.recover(t)}hS(t){this.ko=new Up(t,s.zd,e=>{this.Xc(e)})}Xc(t){this.ko=new Vp(s.zd),t&&csArray.prototype.forEach.call(t,e=>{this.ko.save(e)})}}return s.zd=1024*1024*16,s})(),Rr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var Hp=(()=>{class s extends di{isListening(t){return ui.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=
0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof _s){let c=N.getMaskedAttributeDetails(n);n.attributes=this.Lo(n,c)}if(N.getMaskedElementDetails(n).state===N.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}G.traverse(n,c=>{if(c instanceof _s){let l=N.getMaskedAttributeDetails(c);c.attributes=this.Lo(c,l);let d=N.getMaskedElementDetails(c);d.state===N.MaskedElementState.Parent&&(this.Jc(c,
d),e++)}})}return e>0&&ut.counters.sensitiveElements.count("masked-elements",e),t}Lo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Jc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),_s.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,
{name:"data-cs-mask",value:"",namespaceURI:""})}}return ue([Nt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),le=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return G.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){G.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){G.setProperty(n,
r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Bp=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Fp="\uff41",zp=/[^\uff41\s]/g,$p="a";function Ir(s){let r=csString.prototype.replace.call(s,Bp,Fp);return csString.prototype.replace.call(r,zp,$p)}var qp=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],
nc=s=>{let r=new Set(qp);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Gp=["svg","slot"],Wp=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Gp,s)>-1,oc={href:new Set(["a"]),src:new Set(["iframe"])},Yp=s=>oc.hasOwnProperty(s),Xp=(s,r,t)=>{var e;return((e=oc[r])===null||e===void 0?void 0:e.has(s))&&!Zt(t)},Kp=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value",Jp=(()=>{class s{constructor(t,e,i,n=null){this.We=t,this.ES=e,this.C=i,this.xo=n,this.SS=
nc(this.ES)}sanitize(t,e){return G.traverse(t,(i,n)=>{if(i.anonymized=this.We,i.nodeType===3){let {anonymizedValue:a,withAnonymization:c}=this.getAnonymizedValue(i.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?G.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=c,i.data=a;return}if(_s.isElement(i))return this.vS(i);if(i.nodeType===4){i.data=this.We?Ir(i.data):this.C.checkAndAnonymizePII(i.data,this.xo);return}}),t}setAnonymization(t){this.We=t}getAnonymizedValue(t,
e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[le.ANONYMIZED_TEXT_STATUS_PROP])===le.WHITELISTED_STATUS;return this.We&&!n?{anonymizedValue:Ir(t),withAnonymization:!0}:{anonymizedValue:this.C.checkAndAnonymizePII(t,this.xo),withAnonymization:!1}}vS(t){if(G.getProperty(t,"SVG"))return;let e=xe(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.We,n.value=this.getAnonymizedAttributeValue(t.localName,
n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){return this._S(t,e,n)?i:Yp(e)?Xp(t,e,i)?this.C.anonymizePII(i):i:this.We&&Kp(t,e,n)?Ir(i):this.We?"":this.C.checkAndAnonymizePII(i,null)}_S(t,e,i){return Wp(t,e,i)||this.SS.has(e)}}return s})();var Qp=()=>(s,r,t)=>{t.value=tf(t.value)},Zp=csQueueMicrotask||csSetTimeout;function tf(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let a=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,a[r])return;a[r]=!0,Zp(()=>{a[r]=!1,s.apply(a,
t)})};return i.oncePerTickSymbol=r,i}Qp.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var ef=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return G.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){G.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){G.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),Me=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";
function t(n){return G.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){G.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){G.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var Mo=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),sf=(()=>{class s extends di{constructor(t,e,i,n=null){super(),this.C=i,this.xo=n,this.Ho=new Jp(t,e,i,n)}setAnonymization(t){this.Ho.setAnonymization(t)}isListening(t){return Mo.isTextVisibilityEvent(t)||
ui.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(Mo.isTextVisibilityEvent(t))return t.text=this.C.checkAndAnonymizePII(t.text,this.xo),t;switch(t.domEvent){case "initialDOM":case "nodesAdded":this.il(t);break;case "attributeChanged":this.IS(t);break;case "characterDataChanged":this.CS(t);break}return t}il(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&
(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Ho.sanitize(n,i)}IS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Ho.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}CS(t){t.newValue=this.Ho.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return ue([Nt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var rf=(()=>{class s extends di{constructor(t){super(),
this.J=t}isListening(t){return ui.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.J.anonymizeUrl(t.initialDOM.baseURI)),t}}return ue([Nt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Cr="textarea",nf=(()=>{class s extends di{isListening(t){return ui.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case "initialDOM":this.OS(t);
break;case "nodesAdded":this.NS(t);break;case "characterDataChanged":this.MS(t);break}return t}OS(t){G.traverse(t.initialDOM,(e,i)=>{(this.Kd(e,i)||this.Jd(e))&&(e.data=this.rl(e.data))})}NS(t){for(let e of t.nodes)G.traverse(e,(i,n)=>{(this.kS(i,n,t)||this.Jd(i))&&(i.data=this.rl(i.data))})}MS(t){var e;(t.parentLocalName===Cr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.rl(t.newValue))}rl(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}kS(t,e,i){return this.DS(t,
i)||this.Kd(t,e)}DS(t,e){return t.nodeType===3&&e.targetLocalName===Cr}Kd(t,e){return t.nodeType===3&&Z(e)&&e.localName===Cr}Jd(t){return t.nodeType===3&&Me.isEditableNode(t)}}return ue([Nt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),of=(()=>{class s{constructor(t){this.S=t,this.Ut={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.S=t}observe(){Ct(this.Ut),this._c()}_c(){this.resizeListener()}disconnect(){Pt(this.Ut)}resizeListener(){let t=
{width:gt.windowWidth(),height:gt.windowHeight()};this.S(t)}}return nt([L("resize")],s.prototype,"resizeListener",null),s})(),Oe=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),Ri=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ii=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",
r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),af=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=ct.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in ct;function e(){return Oe.LANDSCAPE}function i(){var c;switch((c=ct.screen.orientation)===null||c===void 0?void 0:c.type){case Ri.PORTRAIT_PRIMARY:case Ri.PORTRAIT_SECONDARY:return Oe.PORTRAIT;
case Ri.LANDSCAPE_PRIMARY:case Ri.LANDSCAPE_SECONDARY:return Oe.LANDSCAPE;default:return Oe.PORTRAIT}}function n(){switch(window.orientation){case Ii.PORTRAIT:case Ii.PORTRAIT_REVERSE:return Oe.PORTRAIT;case Ii.LANDSCAPE:case Ii.LANDSCAPE_REVERSE:return Oe.LANDSCAPE;default:return Oe.PORTRAIT}}function a(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=a}(s||(s={})),s})(),cf=(()=>{class s extends de{constructor(){super(...arguments),
this.nl=null,this.ol=null,this.Us=new of(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=af.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.LS(t);if(e!==this.nl||i!==this.ol){this.nl=e,this.ol=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}LS(t){let e,i,n=gt.screenWidth(),a=gt.screenHeight();return t===Oe.PORTRAIT?(e=n,i=a):(e=Math.max(n,a),i=Math.min(n,a)),{screenWidth:e,screenHeight:i}}onStart(){this.Us.observe()}onStop(){this.nl=
null,this.ol=null,this.Us.disconnect()}}return s})();function lf(s){let r=csEventtarget.apply(s);return r&&rt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Rs=(()=>{class s{get selectors(){return this.He===""?null:this.He}constructor(t,e={closest:!1}){this.S=t,this.Et=e,this.He="",this.Xr=new sr,this.Po=as(i=>{if(this.He==="")return;let n=[];for(let a of Ra(i,c=>c.addedNodes)){if(!(Ih(a)||this.Et.closest&&ji(a)))continue;let c=this.Et.closest?this.xS(a,
this.He):this.findMatchingElements(a,this.He);io(c,n)}n.length&&this.S(n,"added")},"SelectorObserver.processMutations"),this.VS=(i,n)=>{if(this.He===""||n!=="added")return;let a=this.findMatchingElements(i,this.He);a.length&&this.S(a,"added")},this.F=new We(this.Po,this.VS)}observe(t){this.He===""?this.F.observe():this.He+=",",this.He+=t;let e=this.findMatchingElements(document,t);for(let i of this.F.shadowRoots){let n=this.findMatchingElements(i,t);io(n,e)}e.length&&(K(e,i=>{this.Xr.add(i)}),this.S(e,
"initial"))}processPendingMutations(){this.Po(this.F.takeRecords())}disconnect(){this.F.disconnect(),this.Xr.clear(),this.He=""}xS(t,e){let i=[];if(ji(t)){if(t.parentElement){let n=Yr(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Xr.has(n)===!1)}else{if(ai(t)){let n=Yr(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,a=>this.Xr.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=
si(window.csquerySelectorAll[t.nodeType].call(t,e));return rt(t)&&Wt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Xr.has(n)===!1)}}return nt([L()],s.prototype,"observe",null),nt([L()],s.prototype,"disconnect",null),nt([Nt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),hf=(()=>{class s extends de{constructor(){super(),this.Qd=t=>{let e=lf(t);e&&this.al(e,t.type)},this.re=new Os((t,e)=>{switch(e){case "initial":case "added":this.Zd(t);
break;case "removed":this.tp(t);break}}),this.U=new Rs((t,e)=>{(e==="initial"||e==="added")&&this.US(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&dt.isConnected(t)&&!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Zd(document),this.re.observe(),this.U.observe("video")}onStop(){this.tp(document),this.re.disconnect(),this.U.disconnect()}al(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=et(t),
a={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),Kr(()=>this.produceEvent(a))}}US(t){for(let e of t)this.al(e,"seeked"),s.isPlaying(e)&&this.al(e,"play")}Zd(t){for(let e of["play","pause","seeked"])Ct({type:e,listener:this.Qd,boundElement:t})}tp(t){for(let e of["play","pause","seeked"])Pt({type:e,listener:this.Qd,boundElement:t})}}return s})();function uf(s){return s.nodeName==="SELECT"}function An(s){return s.nodeName==="INPUT"}function df(s){return s.nodeName===
"TEXTAREA"||An(s)&&!ac(s)&&!cc(s)}function ac(s){return An(s)&&s.type==="number"}function cc(s){return An(s)&&(s.type==="checkbox"||s.type==="radio")}var pf=(()=>{class s extends de{constructor(t){super(),this.Q=t,this.cl=new ep("low"),this.zi=e=>this.inputHandler(e),this.mi=[],this.jS(),this.HS(),this.U=new Rs(e=>{for(let i of e)this.ll(i)&&Ut(()=>{this.ul(i,et(i))},"low")}),this.re=new Os((e,i)=>{switch(i){case "initial":case "added":Ct({type:"change",listener:this.zi,boundElement:e});break;case "removed":Pt({type:"change",
boundElement:e,listener:this.zi});break}})}onStart(){Ct({type:"keyup",boundElement:document,listener:this.zi}),Ct({type:"change",boundElement:document,listener:this.zi}),K(this.mi,t=>t.activate()),this.U.observe(csArray.prototype.join.call(s.BS,",")),this.re.observe()}onStop(){Pt({type:"keyup",boundElement:document,listener:this.zi}),Pt({type:"change",boundElement:document,listener:this.zi}),K(this.mi,t=>t.deactivate()),this.U.disconnect(),this.re.disconnect(),this.cl.clear()}ul(t,e){var i,n,a;if(this.cl.has(t))return;
if(this.cl.add(t),uf(t)){let d={type:"InputEvent",inputType:"select",target:et(t),selectedIndex:t.selectedIndex,timestamp:D.now()};this.produceEvent(d);return}if(cc(t)){let d={type:"InputEvent",inputType:"checkable",target:et(t),checked:t.checked,timestamp:D.now()};this.produceEvent(d);return}let c=df(t),l=ac(t);if(c||l){let d=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.Q)===null||n===void 0)&&n.shouldEncrypt(t)){(a=this.Q)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:d,
date:D.now()});return}let g=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:et(t),value:csString.prototype.replace.call(d,/\S/g,g),timestamp:D.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=mt(t),i=et(e);!i||!this.ll(e)||dt.isConnected(e)&&Ut(()=>{this.ul(e,i)},"low")}jS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}HS(){this.trackChanges(HTMLSelectElement,"selectedIndex"),
this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=qi(t.prototype,e,(a,c,l)=>{if(l!==c&&dt.isConnected(a)){let d=i?a.parentElement:a;this.FS(d)}});n&&csArray.prototype.push.call(this.mi,n)}ll(t){return!N.isMaskedElement(t)&&!N.isMaskedElementChild(t)&&(Ki(t)||an(t)||on(t))}FS(t){if(this.isStarted&&dt.isConnected(t)){let e=et(t);e&&this.ll(t)&&Ut(()=>{this.ul(t,e)},"low")}}}return s.BS=["textarea","input:not([type])",'input[type\x3d"text"]',
'input[type\x3d"email"]','input[type\x3d"search"]','input[type\x3d"tel"]','input[type\x3d"url"]','input[type\x3d"password"]','input[type\x3d"number"]','input[type\x3d"checkbox"]','input[type\x3d"radio"]',"select"],ue([_t()],s.prototype,"inputHandler",null),ue([L()],s.prototype,"trackChanges",null),s})();var ff=(()=>{class s extends de{constructor(){super(),this.ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.zS=
ze("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)N.isMaskedElement(i)||N.isMaskedElementChild(i)||Ph(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=ir(this.zS);this.$r=new sc(e=>t.push(e)),this.Vs=new Set}onStart(){this.ms&&this.$r.observe()}onStop(){this.Vs.clear(),this.$r.disconnect()}async register(t){this.Vs.has(t)||(this.Vs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}
return ue([L()],s.prototype,"register",null),s})(),ko=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static ep(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>
s.$S(t))}static $S(t){let i=t.getEntriesByType("navigation")[0];i&&(this.yi=i,s.$i(i))}static kr(t){this.qS(t),this.yi&&t(this.yi),this.Oe||this.GS()}static qS(t){this.Ct.add(t)}static WS(t){this.Ct.delete(t)}static GS(){if(this.Kr||(this.Kr=this.ep()),!this.Kr){this.yi||(this.yi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.$i(this.yi);return}this.Kr.observe({type:"navigation",buffered:!0}),this.Oe=!0}static $i(t){this.Ct.forEach(e=>
e(t))}static Lr(t){this.WS(t),this.Ct.size===0&&this.Gr()}static Gr(){var t;this.Oe&&((t=this.Kr)===null||t===void 0||t.disconnect(),this.Oe=!1,this.yi=null,this.Kr=this.ep())}constructor(t){this.S=t}observe(){s.kr(this.S)}disconnect(){s.Lr(this.S)}}return s.Oe=!1,s.Ct=new Set,s.yi=null,s})(),gf=(()=>{class s extends de{constructor(){super(...arguments),this.Bo=null,this.sp=new ko(t=>{if(this.Bo)return;let e=this.YS(t);e&&(this.Bo=e,this.produceEvent(e))})}onStart(){if(this.Bo){this.produceEvent(this.Bo);
return}this.sp.observe()}onStop(){this.sp.disconnect()}YS(t){let e=ko.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:D.now()}}}return s})(),yt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Ci=(()=>{let s;return function(r){r[r.UP=1]=
"UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),mf=(()=>{class s{compute(t,e){let i=this.js(e.x)-this.js(t.x),n=this.js(e.y)-this.js(t.y),a=e.time-t.time;return{duration:a,distance:this.ip(i,n),direction:this.XS(i,n),velocity:this.KS(i,n,a)}}computePinchMetrics(t,e){let i=this.js(e.x)-this.js(t.x),n=this.js(e.y)-this.js(t.y);return{duration:e.time-t.time,distance:this.ip(i,n)}}getScale(t,e){return Math.abs(e/t-1)}js(t){return t/window.devicePixelRatio}ip(t,e){return Math.round(Math.sqrt(t*
t+e*e))}KS(t,e,i){let n=i/1E3,a=t/n,c=e/n;return Math.round(Math.abs(a)+Math.abs(c))}XS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Ci.RIGHT:Ci.LEFT:e>0?Ci.DOWN:Ci.UP}}return s})(),lc=typeof performance!="undefined"&&!!performance.now,Do=lc?()=>performance.now():csDate.now,yf=(()=>{var s;return lc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Pi={now(){return Math.round(Do()+yf)},elapsed(){return Do()}};function Lo(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Ef=
1E3,Sf=100,vf=.1,Zr=(()=>{class s{constructor(){this.jt={},this.dl=()=>{},this.Fo=new mf,this._e()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.dl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.JS(t))return;this.QS(t)&&this._e();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Pi.now()};if(t.touches.length===1)this.jt.startPinchTime=e.time,this.jt.firstTouch=e;else if(t.touches.length===
2&&(this.jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Pi.now()},this.jt.firstTouch&&this.jt.secondTouch)){let i=this.Fo.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.qi=i.distance}csArray.prototype.push.call(this.Jr,e),this.zo=mt(t)}processActionMove(){this.pl=!0}processActionUp(t){if(this.ZS(t)){if(csArray.prototype.push.call(this.Jr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Pi.now()}),this.sv(t)&&this.jt.startPinchTime){let e={x:t.touches[0].clientX,
y:t.touches[0].clientY,time:this.jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Pi.now()};this.jt.firstTouch&&(this.jt.firstTouch=e,this.jt.secondTouch=i),this.iv(t)}this.qi||this.rv()&&this.nv(t)}}_e(){this.Jr=[],this.zo=null,this.pl=!1,this.qi=null,this.Qr=!0}nv(t){let e=this.Fo.compute(this.Jr[0],this.Jr[1]);this.Qr=t.isTrusted;let i=this.pl?this.ov(e):this.av(e);if(this.cv(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Lo(n.pageX,1),i.pageY=
Lo(n.pageY,1)}this.dl(i,t)}iv(t){if(!(this.jt.firstTouch&&this.jt.secondTouch))return;let e=this.Fo.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.Qr=t.isTrusted;let i=this.lv(e);i&&this.dl(i,t)}lv(t){return!this.qi||this.Fo.getScale(this.qi,t.distance)<vf?void 0:{type:this.qi>t.distance?yt.PINCH_IN:yt.PINCH_OUT,target:this.zo,distance:t.distance,isTrusted:this.Qr}}ov(t){return{type:t.velocity<Sf?yt.DRAG:yt.FLICK,target:this.zo,velocity:t.velocity,distance:t.distance,direction:t.direction,
isTrusted:this.Qr}}av(t){return{type:t.duration<Ef?yt.TAP:yt.LONG_PRESS,target:this.zo,isTrusted:this.Qr}}cv(t,e){return t===yt.TAP&&e&&e.length===1}QS(t){return t.touches.length===1}rv(){return this.Jr.length===2}JS(t){return t.touches.length>0}ZS(t){return t.changedTouches.length>0}sv(t){return this.pl&&!!this.qi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),_f="touchstart",wf="touchmove",Af="touchend",bf=(()=>{class s{constructor(t){this.S=t}observe(){s.rp&&s.gl(this.S)}disconnect(){s.rp&&
s.ml(this.S)}static hv(t,e){csArray.prototype.forEach.call(Ps(s.Ct),i=>i(t,e))}static gl(t){s.Ct.has(t)||(s.Ct.add(t),s.Ct.size===1&&(s.Zr.onGesture(s.hv),csArray.prototype.forEach.call(s.Ds,e=>Ct(e))))}static ml(t){s.Ct.delete(t),s.Ct.size===0&&csArray.prototype.forEach.call(s.Ds,e=>Pt(e))}static yl(t){if(s.Zr.isValidTouchEvent(t))switch(t.type){case "touchstart":s.Zr.processActionDown(t);break;case "touchmove":s.Zr.processActionMove();break;case "touchend":s.Zr.processActionUp(t);break}}}return s.Ds=
[{boundElement:ct.document,type:_f,listener:r=>s.yl(r)},{boundElement:ct.document,type:wf,listener:r=>s.yl(r)},{boundElement:ct.document,type:Af,listener:r=>s.yl(r)}],s.rp=Zr.isGestureDetectionSupported(),s.Ct=new Set,s.Zr=new Zr,s})(),Tf=(()=>{class s extends de{constructor(){super(),this.tn=new bf(this.El.bind(this))}onStart(){this.tn.observe()}onStop(){this.tn.disconnect()}El(t){let e=this.uv(t);e&&this.produceEvent(e)}uv(t){if(!this.pv(t))return null;let e=Dd(t.target);return e?{type:"Gesture",
targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}pv(t){return t.target!==null&&!(rt(t.target)&&N.isMaskedElementChild(t.target))}}return s})();var ys=[],tn=!1,hc=as(If,"executeTasks");function Rf(s){if(csArray.prototype.push.call(ys,s),!tn){for(let r=0;r<3;r++)csSetTimeout(hc);tn=!0}}function If(){let s=csDate.now();for(let r=0;r<ys.length;r++)if(ys[r](),csDate.now()-s>=35){ys=csArray.prototype.slice.call(ys,r+1),csSetTimeout(hc);
return}ys=[],tn=!1}var Ce=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),uc=(()=>{class s{constructor(){this.At=new Cs,this._t=Ce.Stopped,this.S=null,this.ap=t=>{this._t===Ce.Stopped||!t||(this.S(t),this.cp())}}get queueLength(){return this.At.length}start(t){if(this.S)throw new Error("callback already set");this._t=Ce.Started,this.S=t}push(t){this.At.push(t),this.bl()}stop(){this.S=null,
this._t=Ce.Stopped,this.At.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(d=>{c.pushEvent(d)}),csArray.prototype.push.call(n,l),K(i,d=>d.subscribe(g=>l.push(g))),i=[c]}let a=new Cf(n);return K(i,c=>c.subscribe(l=>a.push(l))),a}lp(){return this._t===Ce.Stopped}Ye(){return this._t===Ce.Processing}cp(){if(!this.lp()){if(this.At.isEmpty){this._t=Ce.Completed;return}this._t=Ce.Processing,Rf(()=>{let t=this.At.pop();t instanceof _n?t.complete(this.ap):this.ap(t)})}}bl(){this.lp()||
this.Ye()||this.cp()}}return s})(),Cf=(()=>{class s extends uc{constructor(t){super(),this.hp=t}get queueLength(){return csArray.prototype.reduce.call(this.hp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),K(this.hp,t=>t.stop())}}return s})(),Pf=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.B=!1,this.Ct=[]}get pendingEvents(){var t,e;return(e=(t=this.At)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.B)throw new Error("Recording is already started.");
let t=this.Ct;this.At=uc.pipe(this.producers,this.processors),this.At.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),K(this.producers,e=>e.start()),K(this.processors,e=>e.start()),this.B=!0}stop(){this.At.stop(),this.Ct.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.B=!1,this.Ct=[]}subscribe(t){if(this.B)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Ct,t),()=>this.Ct=csArray.prototype.filter.call(this.Ct,e=>
e!==t)}}return s})(),Of=(()=>{class s extends de{constructor(t){super(),this.Pe=t}subscribe(t){return super.subscribe(t)}onStart(){K(this.Pe,t=>{t.onEvent(e=>{var i;return this.Hi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),K(this.Pe,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){K(this.Pe,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){this.produceEvent({timestamp:D.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function Nf(s,r,
t){let {timestamp:e}=s;switch(s.domEvent){case "initialDOM":{let {initialDOM:i}=s,n={type:M.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case "nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:M.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case "nodesMoved":{for(let i of s.nodesIds)r({type:M.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case "nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:M.MUTATION_REMOVE,date:e,
args:[i]})});break}case "attributeChanged":{let {target:i,namespace:n,attribute:a,newValue:c}=s;r({type:M.MUTATION_ATTRIBUTE,date:e,args:[i,n,a,c]});break}case "characterDataChanged":{let {target:i,newValue:n}=s;r({type:M.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case "cssRuleInserted":{let {target:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:M.STYLESHEET_RULE_INSERT,date:e,args:c});break}case "cssRuleDeleted":{let {target:i,index:n}=s;r({type:M.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});
break}case "cssRuleUpdated":{let {target:i,rule:n,index:a}=s;r({type:M.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,a]});break}case "cssStyleSheetDisabled":{let {target:i,disabled:n}=s;r({type:M.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case "shadowRootAttached":{let {target:i,shadowRoot:n}=s;r({type:M.ATTACH_SHADOW,date:e,args:[i,n]});break}case "adoptedStyleSheetRegistered":{let {sheetId:i,cssRules:n,disabled:a}=s;r({type:M.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:a}]});break}case "adoptedStyleSheetsSet":{let {target:i,
sheetsIds:n}=s;r({type:M.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case "adoptedStyleSheetRuleInserted":{let {sheetId:i,rule:n,index:a}=s,c=Z(a)?[i,n,a]:[i,n];r({type:M.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case "adoptedStyleSheetRuleDeleted":{let {sheetId:i,index:n}=s;r({type:M.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case "adoptedStyleSheetRuleUpdated":{let {sheetId:i,rule:n,index:a}=s,c=[i,n,a];r({type:M.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case "adoptedStyleSheetDisabled":{let {sheetId:i,
disabled:n}=s,a=[i,n];r({type:M.ADOPTED_STYLESHEET_DISABLED,date:e,args:a});break}default:j.error("translateDOMEvent: DOMEvent not supported");break}}function Mf(s){let r=kf(s.data);return{type:M.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function kf(s){let r={type:Df(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Df(s){switch(s){case yt.DRAG:case yt.FLICK:return Bs.SWIPE;case yt.LONG_PRESS:return Bs.LONG_PRESS;case yt.TAP:return Bs.TAP;case yt.PINCH_IN:return Bs.PINCH_IN;
case yt.PINCH_OUT:return Bs.PINCH_OUT}}function Lf(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var xf=20;function Vf(s){return Lf(r=>{let t={visibleInViewPort:r},e={type:M.TEXT_VISIBILITY,date:D.now(),args:[t]};s(e)},{batchSize:xf,autoFlushDelay:1E3})}function Uf(s){return{type:M.PERFORMANCE_TIMINGS,
args:[{performanceTiming:Rr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Rr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Rr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function jf(s){switch(s.inputType){case "text":return{type:M.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case "select":return{type:M.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case "checkable":return{type:M.INPUT_CHECKABLE,args:[s.target,
s.checked],date:s.timestamp}}}var Hf=500,Pr=0;function Bf(){return{processEvent(s,r){if(s.originalEvent.type===M.PERFORMANCE_RESOURCE_TIMING)return Pr>=Hf?null:(Pr+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Pr=0}}}function Ff(s){switch(s.videoEventType){case "play":return{type:M.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case "pause":return{type:M.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case "seeked":{let r=s;return{type:M.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],
date:s.timestamp}}default:return null}}var zf=(()=>{class s{get pendingEvents(){return this.qo.pendingEvents}constructor(t,e,i,n,a){this.qo=t,this.E=e,this.we=i,this.ds=n,this.ps=a,this.Zt=()=>{},this.Go=()=>{},this.up=Vf(c=>this.Zt(c))}start(){var t,e;this.dp=Bf(),this.qo.subscribe(i=>{var n,a,c,l,d,g;let u=i,{timestamp:y}=u;switch(u.type){case "Legacy":{let E=u.eventType==="user"?(n=this.Go)!==null&&n!==void 0?n:()=>{}:this.Zt;this.dp.processEvent(u,E)}break;case "CustomElementRegistration":{this.Zt({type:M.CUSTOM_ELEMENT_REGISTRATION,
date:y,args:[u.tagName]});break}case "DomEvent":{Nf(u,this.Zt,this.E);break}case "InputEvent":{let E=jf(u);(a=this.Go)===null||a===void 0||a.call(this,E);break}case "encryptedCharacterDataChanged":{let {target:E,rawData:v,encryptedData:I,encryptionMetadata:C}=u;this.Zt({type:M.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[E,v,I,C]});break}case "StaticResource":{let {url:E}=u;this.Zt({type:M.STATIC_RESOURCE_URL,date:y,args:[E]});break}case "ResizeMaskedElement":{let {target:E,width:v,height:I}=u;
this.Zt({type:M.MUTATION_ATTRIBUTE,date:y,args:[E,"","style",`width:${v}px !important;height:${I}px !important;`]});break}case "Gesture":{let E=Mf(i);(c=this.Go)===null||c===void 0||c.call(this,E);break}case "TextVisibility":{this.up.push(u.text);break}case "StaticResourceManagerEvent":{(l=this.we)===null||l===void 0||l.processEvent(u);break}case "screenResize":{let {width:E,height:v}=u,I={type:M.SCREEN_RESIZE,date:y,args:[E,v]};this.Zt(I);break}case "viewportResize":{let {width:E,height:v}=u,I={type:M.RESIZE,
date:y,args:[E,v]};this.Zt(I);break}case "PerformanceTiming":{this.Zt(Uf(u));break}case "CustomError":{let E=(d=this.ps)===null||d===void 0?void 0:d.translate(u);E&&this.Zt(E);break}case "JSError":{let E=(g=this.ds)===null||g===void 0?void 0:g.translate(u);E&&this.Zt(E);break}case "VideoEvent":{let E=Ff(u);E&&this.Zt(E);break}case "warning":{j.warn(u.message);break}default:j.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.E.emitInitialDomStart(),(t=this.ds)===null||
t===void 0||t.start(),(e=this.ps)===null||e===void 0||e.start(),this.qo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.qo.stop(),(t=this.we)===null||t===void 0||t.flushEvents(),(e=this.ds)===null||e===void 0||e.stop(),(i=this.ps)===null||i===void 0||i.stop()}flush(){this.up.flush()}onEvent(t,e){var i;this.Zt=t,this.Go=e,(i=this.we)===null||i===void 0||i.onEvent(n=>this.Zt(n))}reset(){this.dp.reset()}}return s})(),$f=(()=>{class s{constructor(t=100){this.Sv=t,this.Wo={},this.rn=null,this.xc=
"original-resource-name"}onEvent(t){this.vv=t}processEvent(t){this._v(t.resourceId,t.resource.hash,t.originalResourceName),this.wv(t)}flushEvents(){this.rn&&csClearTimeout(this.rn),this.pp()}onSendStaticResource(t){this.wv=t}pp(){if(!Object.keys(this.Wo).length)return;let t={type:M.RESOURCE_HASHES,date:D.now(),args:[this.Wo]};this.rn=null,this.Wo={},this.vv(t)}_v(t,e,i){let n=e;i&&(n+=`?${this.xc}=${i}`),this.Wo[t]=n,!this.rn&&(this.rn=window.csSetTimeout(()=>this.pp(),this.Sv))}}return s})(),qf=
(()=>{class s{constructor(t,e,i){this.E=t,this.w=e,this.Av=i,this.nn=Tt.ETR_DISABLED,this.Yo=Tt.ETR_PENDING,this.Xo=!0}getEtrStatus(t){t===void 0&&(t=this.w.getSession());let e=t==null?void 0:t.etrStatus;return this.Tl()&&e===Tt.ETR_SAVED_SESSION?e:this.nn}onEventTriggerRecording(t,e){switch(e){case He.ETR_PAGE:this.fp(Tt.ETR_SAVED_PAGE);break;case He.ETR_LEGACY:case He.ETR_SESSION:this.fp(Tt.ETR_SAVED_SESSION);break}}handleCollectStateChange(t){this.Xo=!1,t?this.an(this.Yo):this.an(Tt.ETR_DISABLED)}handleArtificialPageview(){this.Av?
(this.Xo=!0,this.an(Tt.ETR_DISABLED)):this.Tl()&&this.an(Tt.ETR_PENDING)}handleSessionRenewal(){this.Xo=!0,this.an(Tt.ETR_DISABLED)}an(t){this.nn=t,this.Yo=Tt.ETR_PENDING,this.gp(t),this.E.emitRecordingContextChange()}fp(t){this.Xo?Number(t)>Number(this.Yo)&&(this.Yo=t):this.Tl()&&Number(t)>Number(this.nn)&&(this.nn=t,this.gp(t),this.E.emitRecordingContextChange())}gp(t){let e=this.w.getSession();e!==null&&e.etrStatus===Tt.ETR_NOT_SAVED_SESSION&&t===Tt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.w.setSession(e))}Tl(){return this.nn!==
Tt.ETR_DISABLED}}return s})();function en(s,r){let t,e,i,n,a=null,c=d=>{let g=D.elapsed();if(!d&&a!==null){let y=r-(g-a);if(y>0){e=window.csSetTimeout(c,y);return}}let u=g-i;e=null,a=null,i=null,n=s(u,...t)},l=(...d)=>{if(t=[...d],i){a=D.elapsed();return}return i=D.elapsed(),e=window.csSetTimeout(c,r),n};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{a=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var Gf=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||
(s={})),s})(),Wf=8*1024*1024,Yf=(()=>{class s extends jt{constructor(t,e,i){super(),this.we=t,this.mp=e,this.et=i,this.Rl={},this.yp=new Set,this.Ye=!1}initState(){ka()&&(this.Ne=this.et.getRequestParameters(),this.bv=`${this.mp}/exist?${ii.toQuery(this.Ne)}`,this.Tv=`${this.mp}/putTag?${ii.toQuery(this.Ne)}`,this.Ep=en(async()=>{if(this.Ye){this.Ep();return}this.Ye=!0;try{await this.Rv()}finally{this.Ye=!1}},300),this.we.onSendStaticResource(t=>{this.Sp(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Sp(t)}Sp(t){this.vp(t.resource.hash,
t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.vp(e.hash,e.data)})}vp(t,e){this.yp.has(t)||(this.yp.add(t),this.Rl[t]=e,this.Ep())}async Rv(){let t=this.Rl;this.Rl={};let e=await this.Iv(t);if(!e.length)return;let i=this.Cv(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.Tv,{method:"POST",body:n})))}async Pv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ne.pid,filter:Gf.NOT_EXIST,
hashes:e,touch:!0};return await (await window.fetch(this.bv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Iv(t){let e=[],i=await this.Pv(t);return csArray.prototype.forEach.call(i,n=>{let a=t[n];a?csArray.prototype.push.call(e,{hash:n,data:a}):j.warn("SRM: received unknown hash: "+n)}),e}Cv(t){let e=0,i=[new FormData];for(let n of t){let {data:a,hash:c}=n,l=i.length-1;if(e=e+a.size,e<Wf)i[l].append("",a,c);else{let d=new FormData;d.append("",a,c),e=a.size,csArray.prototype.push.call(i,
d)}}return i}}return s})();var Xf="csPersisted",xo="v2/recording",Kf=["isRecording"],Jf=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Qf=["replay:resourceManager:getStatus","cssrm:getStatus"],Zf=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,I,C,b,w,x,A,k,U,J){this.Bs=t,this.w=e,this.h=i,this.Ne=n,this.f=a,this.C=c,this.X=l,this.Ht=d,this.xe=g,this.ut=u,this.Ie=y,this.ft=E,this.E=v,this.Fs=I,this._p=C,this.te=b,this.Mt=w,this.J=
x,this.Vr=A,this.nt=k,this.uI=U,this.Q=J}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new Hp),this.yn=new sf(this.nt.shouldUseAnonymization(),this.h.whitelistedAttributes,this.C,this.h.anonymizeDigits),this.vi();let a=new jp(Xf);this.Nv(a);let c=new Bd;this.j=new Hd;let l=new xp;csArray.prototype.push.call(i,l),this.h.useStaticResourceManager&&Qr.isSupported()&&(this.Vt=new Qr,this.we=new $f,this.wp=new Yf(this.we,this.h.getStaticResourceManagerUri(),this.Ne),this._p.addListener(this.wp),
csArray.prototype.push.call(n,this.Vt));let d=new ri(c,this.Ne,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")})}),g=new rc(`${this.h.getRecordingUri()}/${xo}`);csArray.prototype.push.call(n,this.yn),csArray.prototype.push.call(n,new rf(this.J)),csArray.prototype.push.call(n,new nf),
this._i=new xd,this._i.init(),csArray.prototype.push.call(i,this._i),this.Rt=new Op(a,g,this.V),csArray.prototype.push.call(i,new Np(window.location,this.C));let u=new Rp,y=new cf,E=new hf,v=new pf(this.Q),I=new ff,C=[y,this.Ht,u,new Of(csArray.prototype.filter.call(i,A=>A)),I,new gf,new Tf,v,E],b=new Pf(C,n),w=new zf(b,this.E,this.we,this.ds,this.ps),x=[u,y,E,v,I];this.recordingService=new Pp(this.h,this.j,d,c,this.X,this.w,this.xe,this.ut,this.Ie,this.Q,this.V,this.Rt,g,w,i,x,this.Vt,this.Vr,this.ds,
this.ps),this.Fs.addListener(this.recordingService),this._p.addListener(this.recordingService),this.recordingService.init(),this.f.register(Kf,()=>this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()),this.f.register(Jf,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.E.emitRecordingContextChange()}),this.f.register(Qf,()=>this.recordingService.getStaticResourceManagerStatus()),this.wi=new qf(this.E,this.w,this.h.malkaUrlEnabled),this.Fs.addListener(this.wi),this.Bs.enableRecordingContext(this.recordingService,
this.w,this.wi),this.Il()}onAfterNaturalPageView(){var t;this.te.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.wp)===null||t===void 0||t.initState()}onStartTracking(){this.Rt.recover(),this.vi(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Cl())}onArtificialPageViewEnd(){this.w.isReplayRecorded()&&
!this.te.isUrlExcludedForSessionReplay()&&!this.w.isTemporarilyRecorded()&&this.Rt.sendLastMessageBeacon(),this.recordingService.clearStates()}onBeforeArtificialPageView(){this.wi.handleArtificialPageview()}onAfterArtificialPageView(){this.vi(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()?(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.kv()):(this.recordingService.resetOnlineAssetsOnPageview(),
this.Gi())}onBeforeSessionRenewal(){this.wi.handleSessionRenewal(),this.recordingService.clearStates(),this.Gi()}onOptout(){this.Gi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.vi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.E.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.vi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.E.emitRecordingContextChange()}onCollectStateChange(t,e){if(t===P.QUOTA_REACHED||
t===P.ANALYTICS_ONLY&&e===It.ETR_OFF)this.recordingService.clearEvents(),this.Gi();else{this.V.setQueryParams({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents();let i=t===P.ANALYTICS_ONLY&&e===It.ETR_ON;this.wi.handleCollectStateChange(i)}}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Rt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),
this.recordingService.addInitialDom(t),this.Rt.allowSendingLastMessage(),this._i.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Cl(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),
this.recordingService.clearStates(),this.Gi())}Il(){var t,e,i,n;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(n=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;K(a,c=>{Ys(c)&&We.setShadowRootFilter(l=>{try{return Wt.call(l.host,c)}catch{return!1}})})}}Cl(){this.recordingService.start(),this.Rt.start(),this.E.emitRecordingContextChange()}Gi(){kd(),
this.recordingService.stop(),this.Rt.stop(),this.E.emitRecordingContextChange()}kv(){this.Gi(),this.Cl()}Nv(t){let e="byteArray";this.V=this.Mt.create(`${this.h.getRecordingUri()}/${xo}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}vi(){var t;let e=this.nt.shouldUseAnonymization();this.yn.setAnonymization(e),(t=this.Mv)===null||t===void 0||t.setAnonymization(e)}}return F([Nt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),F([Nt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),
s})(),Oi=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ve=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===P.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===
P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),tg=(()=>{class s{constructor(t,e,i,n){this.R=t,this.w=e,this.h=i,this.Xe=n,this.Ap=!1}isNaturalPageViewSent(){return this.Ap}setNaturalPageViewSent(t){this.Ap=t}getTrackingContext(){let t=this.w.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.h.projectId,n=this.h.uxaDomain,a=t.pageNumber,c=this.Xe.getPageViewType(),l=this.w.isReplayRecorded(),d=this.Dv(t);return{projectId:i,sessionKey:e,
pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:d,...this.h.smbConfig}}getSessionKey(){let t=this.R.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Dv(t){return Ve.isReplayConsentNeeded(this.h)?t.collectState===P.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Oi.NOT_EXPRESSED:t.collectState===P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Oi.WITHDRAWN:Oi.GRANTED:Oi.NOT_NEEDED}}return s})(),eg=(()=>{class s{constructor(t){this.St=t,this.ee=[]}handleCommand(t){if(Be(t)&&(this.En(t),
this.St.isNaturalPageViewSent())){let e=this.St.getTrackingContext();e!==null&&this.kt(t,e)}}En(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.St.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.kt(e,t))}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),sg=(()=>{class s{constructor(t){this.St=t,this.Ai=[]}handleCommand(t){if(this.St.isNaturalPageViewSent())return this.Lv(t);this.Sn(t)}Lv(t){let e=this.St.getSessionKey();return this.bp(t)&&e!==
null&&this.kt(t.callback,e),e}Sn(t){this.bp(t)&&csArray.prototype.push.call(this.Ai,t.callback)}flushPendingCallbacks(){let t=this.St.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ai,e=>{this.kt(e,t)}),this.Ai=[]}bp(t){return t&&typeof t.callback=="function"}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),ig=(()=>{class s{constructor(t,e){this.Y=t,this.St=e}onTrackingContextRequestCallback(t){let e=this.St.getTrackingContext();e!==null&&this.Y.sendToChildren(X.TrackingContextResultMessage,
{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.St.isNaturalPageViewSent())return;let e=this.St.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(X.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.St.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:Vu.AfterPageView};this.Y.sendToChildren(X.IntegrationCallback,e)}}return s})();function rg(s,r){let {isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:a,
csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),d;if(t&&l){let [,g,u]=l;n?d=`${c}/sites/${n}/player?uu=${g}&sn=${u}&pn=${e}`:d=`${a}/quick-playback/index.html?pid=${i}&uu=${g}&sn=${u}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(d+=`&t=${D.now()-r.recordingStartTimestamp}`)}return{replayLink:d,isRecording:t}}var ng=(()=>{class s{constructor(t){this.St=t}handleCommand(t,e){ti(t)&&Be(e)&&this.kt(t,e)}kt(t,e){csSetTimeout(()=>{let i=this.St.getTrackingContext();if(i){let n=rg(i,t);e(n)}})}}return s})(),
og=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!Be(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.ve=e,this.Tp(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.xv(t)&&(this.ve=t,this.ee.forEach(e=>this.Tp(e,t)))}Tp(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}xv(t){let {isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:a,collectState:c}=t;return this.ve&&(this.ve.isRecording!==e||this.ve.recordingStartTimestamp!==i||this.ve.etrState!==n||this.ve.etrStatus!==
a||this.ve.collectState!==c)}}return s})(),ag=["afterPageView"],cg=["getSessionKey"],lg=["onRecordingContextChange","onRecordingStateChange"],hg=["replay:link:generate"],ug=(()=>{class s{constructor(t,e,i,n,a,c,l,d){this.R=t,this.w=e,this.f=i,this.at=n,this.Y=a,this.h=c,this.Xe=l,this.Bs=d}init(){this.St=new tg(this.R,this.w,this.h,this.Xe),this.Pl=new eg(this.St),this.Rp=new sg(this.St),this.vn=new og,this.Uv=new ng(this.St),this.Ol=new ig(this.Y,this.St),this.at.addListener(this.Ol),this.f.register(cg,
t=>this.Rp.handleCommand(t)),this.f.register(ag,t=>this.Pl.handleCommand(t)),this.f.register(lg,t=>this.vn.handleCommand(t,this.Bs.getRecordingContext())),this.f.register(hg,(t,e)=>{this.Wi&&this.Uv.handleCommand({...t,recordingStartTimestamp:this.Bs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.St.setNaturalPageViewSent(!0),this.Rp.flushPendingCallbacks(),this.Pl.executeRegisteredCallbacks(),this.Ol.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Pl.executeRegisteredCallbacks(),
this.Ol.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.vn.executeCallbacks(this.Bs.getRecordingContext())}setRecordingService(t){this.Wi=t}}return F([En({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),dg=512,pg=255,Or=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,
0,dg),this.value=$(e)?csString.prototype.slice.call(e,0,pg):e}static isKeyValid(t){return $(t)}static isValueValid(t){return $(t)||ws(t)}}return s})(),fg=(()=>{class s extends jt{constructor(t,e){super(),this.Bt=t,this.C=e,this.Nl=[]}onStart(){csArray.prototype.forEach.call(this.Nl,t=>this.Ip(t.key,t.value)),this.Nl=[]}onStop(){}Ip(t,e){let i=this.C.anonymizePII(t),n=ws(e)?e:this.C.anonymizePII(e);this.Bt.add(new Or(i,n))}trackDynamicVariable(t,e){if(Or.isKeyValid(t)&&Or.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Nl,
{key:t,value:e});return}this.Ip(t,e)}else throw new Error(`Command misuse: ${dc[0]}`);}}return s})(),gg=(()=>{class s{constructor(t){this.ae=t,this.Bt=[]}add(t){csArray.prototype.push.call(this.Bt,t),this.setBatchReadyCall()}clear(){this.Bt=[]}onBatchReady(t){this.jv=t}getRequestParameters(){let t={};for(let e of this.Bt)t[e.key]=e.value;return{dv:this.ae.compressSync(csJSON.stringify(t),"base64"),ct:this.ae.algorithm}}setBatchReadyCall(){this.jv()}}return F([En({wait:0,mode:"trailing"}),L("dynamicVariablesBatchReady")],
s.prototype,"setBatchReadyCall",null),s})(),mg="dvar",dc=["trackDynamicVariable"],yg=(()=>{class s{constructor(t,e,i,n,a,c){this.f=t,this.w=e,this.h=i,this.Ne=n,this.ae=a,this.C=c,this.cs=new Ts(this.h.getTrackerUri(),mg),this.Bt=new gg(this.ae),this.Ke=new fg(this.Bt,this.C)}init(){this.cs.setRequestParametersProviders(this.Ne,this.Bt),this.w.setDynamicVariablesService(this.Ke),this.Bt.onBatchReady(()=>this.cs.send()),this.cs.after(()=>this.Bt.clear()),this.f.register(dc,({key:t,value:e}={})=>{this.Ke.trackDynamicVariable(t,
e)})}onStartTracking(){this.Ke.start()}}return s})(),Vo=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),$(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Ot(t)&&ee(t.revenue)&&$(t.currency)&&t.currency.length<=10&&
(!Ot(t.id)||$(t.id))}}return s})(),pc=100,Eg=100,Sg=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Ml(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Z(t.sku)&&(e.sku=t.sku),Z(t.category)&&(e.category=t.category),Z(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,pc)),e}static Ml(t){return Ot(t)&&$(t.id)&&$(t.name)&&ee(parseFloat(t.price))&&ws(parseInt(t.quantity,10))&&(!Z(t.sku)||
$(t.sku))&&(!Z(t.category)||$(t.category))&&(!Z(t.merchant)||$(t.merchant))}}return s})(),vg=(()=>{class s extends jt{constructor(t,e,i){super(),this.C=t,this.Cp=e,this.X=i,this.kl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.kl,t=>{this.ce=t.transaction,this._n=t.transactionItems,this.sendTransaction()}),this.kl=[]}onStop(){}addTransaction(t){let e=this.C.anonymizeFields(t,["id"]);this.ce=Vo.from(e)}getTransaction(){return this.ce}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.kl,
{transaction:this.ce,transactionItems:[...this._n]}),this.clear();return}if(!(this.Cp===null||this.X===null)&&(this.X.refreshSession(),!!this.X.isSessionValid())){if(!this.ce.hasValidRevenue()){j.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Cp.send()}}addItem(t){if(Be(t))throw new Error(`Command misuse: ${fc[1]}`);let e=this.C.anonymizeFields(t,["id","name","sku","category"]),i=Sg.from(e);i!==null&&csArray.prototype.push.call(this._n,i)}getItems(){return this._n}clear(){this.ce=
Vo.from({revenue:NaN}),this._n=[]}getRequestParameters(){let t={id:this.ce.id?`${this.ce.id}`:"",revenue:`${this.ce.revenue}`};return Z(this.ce.tax)&&(t.tax=`${this.ce.tax}`),Z(this.ce.shipping)&&(t.shipping=`${this.ce.shipping}`),Z(this.ce.currency)&&(t.cu=`${this.ce.currency}`),t.items=window.csJSON.stringify(this._n),t}}return s})(),_g=(()=>{class s extends jt{constructor(t,e){super(),this.Hv=t,this.X=e,this.Ae=null,this.Dl=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>{this.Ae=t,this.Pp()}),
this.Dl=[]}onStop(){}addToCart(t){let e={};$(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Eg)),$(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,pc)),(e.sku||e.merchant)&&(this.Ae=e,this.Pp())}getCartItem(){return this.Ae}Pp(){if(!this.isStarted&&this.Ae!==null){csArray.prototype.push.call(this.Dl,this.Ae),this.clear();return}this.X.refreshSession(),this.X.isSessionValid()&&this.Hv.send()}clear(){this.Ae=null}getRequestParameters(){if(!this.Ae)return{};let t={};return $(this.Ae.sku)&&
this.Ae.sku.length>0&&(t.sku=this.Ae.sku),$(this.Ae.merchant)&&this.Ae.merchant.length>0&&(t.me=this.Ae.merchant),t}}return s})(),wg=["ecommerce:addToCart","ec:cart:add"],Ag=["ecommerce:addTransaction","ec:transaction:create"],fc=["ecommerce:addItem","ec:transaction:items:add"],bg=["ecommerce:send","ec:transaction:send"],Tg=(()=>{class s{constructor(t,e,i,n,a,c,l){this.h=t,this.et=e,this.R=i,this.f=n,this.C=a,this.X=c,this.A=l}init(){let t=new Ts(this.h.getTrackerUri(),"transaction"),e=new Ts(this.h.getTrackerUri(),
"addtocart");this.Je=new vg(this.C,t,this.X),this.Ko=new _g(e,this.X);let i=new ri(this.et,this.R,this.A,this.Je);t.setRequestParametersProviders(i),t.after(()=>{this.Je.clear()});let n=new ri(this.et,this.R,this.A,this.Ko);e.setRequestParametersProviders(n),e.after(()=>{this.Ko.clear()}),this.f.register(Ag,a=>{this.Je.addTransaction(a)}),this.f.register(fc,a=>this.Je.addItem(a)),this.f.register(bg,()=>this.Je.sendTransaction()),this.f.register(wg,a=>{this.Ko.addToCart(a)})}onStartTracking(){this.Je.start(),
this.Ko.start()}}return s})(),Rg=(()=>{class s{constructor(t){this.Jo=t.performance}getRequestParameters(){if(this.Bv())return{};let t=this.Fv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}Fv(){let t=this.Jo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}Bv(){return!(this.Jo&&this.Jo.timing&&this.Jo.timing.loadEventEnd>
0)}}return s})(),xt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,a)=>a.enhanceAnalysisEvent(t,n),e)}}return s})(),z=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",
r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=
35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Nr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})();function Ig(s){return s.tgtHM!==void 0}function gc(s){return s.tgt!==void 0}function Cg(s){return s.tgtLk!==void 0}function Pg(s){return s.x!==void 0&&s.y!==void 0}function Og(s){return s===Nr.SUCCESS||s===Nr.FAILURE||s===Nr.ATTEMPT}var Ng=(()=>{class s{constructor(t,e,i){this.se=t,this.Dt=e,this.Et=i}processGesture(t,e){switch(t.type){case yt.TAP:this.zv(e);
break;case yt.FLICK:this.$v(t,e);break;case yt.DRAG:this.qv(t,e);break;default:break}}zv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=xt.build(t,e,this.se);i.tgt!==he.INVALID_ELEMENT&&this.O(i)}qv(t,e){var i,n;let a={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Et)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=xt.build(e,a,this.se);c.tgt!==he.INVALID_ELEMENT&&this.O(c)}$v(t,e){var i,
n;let a={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.Et)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=xt.build(e,a,this.se);c.tgt!==he.INVALID_ELEMENT&&this.O(c)}onEvent(t){this.O=t}start(){this.Dt.subscribe(s.Op,(t,e)=>this.processGesture(t,e))}stop(){this.Dt.unsubscribe(s.Op)}}return s.Op="AnalysisGestureTracker",F([_t()],s.prototype,"processGesture",null),s})(),Mg=(()=>{class s{constructor(t,
e,i,n=["submit"]){this.se=t,this.lt=e,this.Lt=i,this.Gv=n,this.Np="select, select *, input, textarea",this.Wv="select, select *, input, textarea",this.Mp="a, a *, button, button *, select, select *, input, textarea",this.wn="input, select, textarea",this.Yv="form",this.Qo=150,this.Xv=400,this.kp=!1,this.An=en((a,c)=>this.scrollListener(a,c),this.Qo),this.Dp=en(a=>this.resizeListener(a),this.Qo),this.Kv=tr(a=>this.mouseMoveListener(a),this.Xv),this.Jv=[{boundElement:window,type:"resize",listener:()=>
this.Dp()},{boundElement:document,type:"scroll",listener:a=>this.An(a)},{boundElement:window,type:"mousemove",listener:a=>{this.Kv(Id(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.Lp=[{type:"change",listener:this.Lt.on(this.Wv,a=>this.changeListener(a))},{type:"submit",listener:this.Lt.on(this.Yv,a=>this.submitListener(a))}],
this.Qv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.Mp,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.Mp,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.Np,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.Np,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.wn,a=>this.keyUpListener(a))},{boundElement:document,
type:"keydown",listener:this.Lt.on(this.wn,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.Lt.on(this.wn,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.Lt.on(this.wn,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.Lt.on(this.wn,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.Lp,a=>({...a,boundElement:document}))],this.D={},this.Dc=(a,c)=>{switch(c){case "initial":case "added":this.ci(a);break;case "removed":this.li(a);
break}},this.re=new Os(this.Dc),this.vc()}ci(t){if(Hi(t)){let e=this.xp();csArray.prototype.forEach.call(e,i=>Ct(i))}else{let e=this.Vp();csArray.prototype.forEach.call(e,i=>{Ct({...i,boundElement:t})})}}li(t){if(Hi(t)){let e=this.xp();csArray.prototype.forEach.call(e,i=>Pt(i))}else{let e=this.Vp();csArray.prototype.forEach.call(e,i=>{Pt({...i,boundElement:t})})}}onEvent(t){this.O=t}start(){this.re.observe(),this.ci(document),this.resizeListener()}stop(){this.li(document),this.re.disconnect()}flushPendingDebouncedListeners(){this.An.flushPending(),
this.Dp.flushPending()}Up(t){return csArray.prototype.some.call(this.Gv,e=>e===t)}Vp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Lp,t=>!this.Up(t.type)):(j.warn("Element.matches is not implemented yet"),[])}xp(){let t=[];return csArray.prototype.push.call(t,...this.Jv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.Qv):j.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Up(e.type))}resizeListener(t){let e=
Ss.getScrollContainer(),i=ai(e);i&&(this.kp=!0);let n={type:z.RESIZE,ts:0,x:i?e.clientWidth:gt.windowWidth(),y:i?e.clientHeight:gt.windowHeight()};t!==void 0&&(n.d=t),this.O(n)}scrollListener(t,e){let i=Ss.isEventOnScrollContainer(e);!this.kp&&i&&this.resizeListener();let n={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:gt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:gt.windowOffsetY(),d:t},a=xt.build(e,n,this.se);this.O(a)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,
y:t.pageY},i=xt.build(t,e,this.se);this.O(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.se);this.le(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.se);this.le(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.se);this.le(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=xt.build(t,e,this.se);this.le(i)}mouseOutListener(t){let e=
{type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.lt.getEventTargetPath(t)},i=xt.build(t,e,this.se);this.le(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.lt.getEventTargetPath(t)},i=xt.build(t,e,this.se);this.le(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.lt.getEventTargetPath(t)},i=xt.build(t,e,this.se);this.le(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=xt.build(t,e,this.se);this.le(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=xt.build(t,e,this.se);
this.le(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:vs.COPY};this.le(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:vs.CUT};this.le(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.lt.getEventTargetPath(t),key:vs.PASTE};this.le(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.lt.getEventTargetPath(t),key:this.jp(t)};this.le(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.lt.getEventTargetPath(t),key:this.jp(t)};
this.le(e)}jp(t){let e=this.D[t.key];return e===void 0?q.ALPHANUMERICAL:e}le(t){gc(t)&&t.tgt!==he.INVALID_ELEMENT&&this.O(t)}vc(){this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Enter=q.ENTER,this.D.Backspace=q.BACKSPACE,this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,
this.D.Tab=q.TAB}}return F([L("Event handler type: resize")],s.prototype,"resizeListener",null),F([L("Event handler type: scroll")],s.prototype,"scrollListener",null),F([L("Event handler type: mouseMove"),_t()],s.prototype,"mouseMoveListener",null),F([L("Event handler type: mouseDown"),_t()],s.prototype,"mouseDownListener",null),F([L("Event handler type: mouseUp"),_t()],s.prototype,"mouseUpListener",null),F([L("Event handler type: click"),_t()],s.prototype,"clickListener",null),F([L("Event handler type: mouseOver"),
_t()],s.prototype,"mouseOverListener",null),F([L("Event handler type: mouseOut"),_t()],s.prototype,"mouseOutListener",null),F([L("Event handler type: focusIn")],s.prototype,"focusInListener",null),F([L("Event handler type: focusOut")],s.prototype,"focusOutListener",null),F([L("Event handler type: change")],s.prototype,"changeListener",null),F([L("Event handler type: submit"),_t()],s.prototype,"submitListener",null),F([L("Event handler type: copy")],s.prototype,"copyListener",null),F([L("Event handler type: cut")],
s.prototype,"cutListener",null),F([L("Event handler type: paste")],s.prototype,"pasteListener",null),F([L("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([L("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),kg=(()=>{class s{constructor(){this.Hp=100,this.bn=0,this.Tn=gt.documentHeight(),this.Bp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.bn=this.Ll(Ss.getScrollContainer()).maxScrollRate}onEvent(t){this.O=t}start(){Ct(this.Bp)}stop(){Pt(this.Bp)}reset(){let t=
Ss.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ll(t);this.Tn=i,this.bn=e,this.O()}Ll(t){let e=0,i=0;if(t===null)i=gt.documentHeight(),e=this.Zv(i);else{let n=this.t_(t);i=this.Fp(t,n),e=this.e_(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ss.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let {maxScrollRate:i,maxDocumentHeight:n}=this.Ll(e);(i>this.bn||n>this.Tn)&&(this.bn=i,n>this.Tn&&(this.Tn=n),this.O())}Zv(t){let e=Math.round(this.s_()/
t*100);return Math.min(e,this.Hp)}s_(){let t=gt.windowHeight();return gt.windowOffsetY()+t}e_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Fp(t,e),a=Math.round(i/n*100);return Math.min(a,this.Hp)}t_(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Fp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.bn}`,mdh:`${this.Tn}`}}}return F([L("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",
null),s})();var Dg=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,I,C,b,w,x,A,k,U){this.h=t,this.zs=e,this.Dt=i,this.Yi=n,this.xl=a,this.Be=c,this.Qe=l,this.zp=d,this.X=g,this.Yt=u,this.W=y,this.Vl=E,this.Ve=v,this.V=I,this.Zo=C,this.ys=b,this.Es=w,this.Ul=x,this.bi=A,this.Ti=k,this.Ri=U,this.ks=new Wa,this.ta=!1}init(){var t,e,i,n,a,c,l;this.zs.onEvent(d=>this.It(d)),this.Dt.onEvent(d=>this.It(d)),this.Yi.onEvent(()=>{let d=this.Yi.getRequestParameters();this.V.setQueryParams(d),this.Qe.setQueryParams(d)}),
this.Vl.onEvent(d=>this.Fe(d)),this.jl(),(t=this.Zo)===null||t===void 0||t.onEvent(d=>this.It(d)),(e=this.bi)===null||e===void 0||e.onEvent(d=>this.It(d)),(i=this.ys)===null||i===void 0||i.onEvent(d=>this.It(d)),(n=this.Es)===null||n===void 0||n.onEvent(d=>this.It(d)),this.i_(),(a=this.Ul)===null||a===void 0||a.onEvent(d=>this.Fe(d)),(c=this.Ti)===null||c===void 0||c.onEvent(d=>this.Fe(d)),(l=this.Ri)===null||l===void 0||l.onEvent(d=>this.Fe(d))}i_(){this.Qe.onBeaconSuccess(()=>{this.Be.clearEvents()}),
this.Qe.onBeaconFailure(t=>{this.r_(t)})}initStates(){let t=this.zp.getRequestParameters(),e=this.xl.getRequestParameters(),i=this.Yi.getRequestParameters();this.V.setQueryParams(t),this.V.setQueryParams(e),this.V.setQueryParams(i),this.Qe.setQueryParams(t),this.Qe.setQueryParams(e),this.Qe.setQueryParams(i),this.Hl()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),
t?(this.Bl(),this.sendLastMessageBeacon()):this.sendEvents(),this.Yi.reset(),this.V.removeQueryParams()}start(t){var e,i,n,a,c,l,d;t||(e=this.Ul)===null||e===void 0||e.start(),this.Ve.start(),this.zs.start(),this.Yi.start(),this.Dt.start(),(i=this.Zo)===null||i===void 0||i.start(),(n=this.Es)===null||n===void 0||n.start(),t||this.Vl.start(),(a=this.ys)===null||a===void 0||a.start(),(c=this.bi)===null||c===void 0||c.start(),(l=this.Ti)===null||l===void 0||l.start(),(d=this.Ri)===null||d===void 0||
d.start()}collectInitialEvents(){var t;(t=this.Zo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Fe(t)}onIframeAnalysisUserEvent(t){this.It(t)}onExternalEvent(t){this.G(t)}Fe(t){this.X.isCurrentPageviewValid()&&this.G(t)}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.G(t)}G(t){this.Be.addEvent(this.n_(t)),this.Be.isFull()&&this.sendEvents(),this.h.emitDebugEvents&&this.ks.emit("analysisEvent",{...t,typeName:z[t.type]})}n_(t){return t.ts=this.Ii(),t}Bl(){this.Qe.setQueryParams({hlm:"true"}),
this.ta=!0}sendLastMessageBeacon(){this.Qe.setQueryParams(this.xl.getRequestParameters()),this.Qe.send(this.Be.stringifyEvents()),this.Qe.removeQueryParams(["hlm"]),this.ta=!1}sendEvents(){this.Be.isEmpty()||(this.V.setQueryParams(this.zp.getRequestParameters()),this.V.setQueryParams(this.xl.getRequestParameters()),this.V.send(this.Be.getEvents()),this.Be.clearEvents())}stop(){var t,e,i,n,a,c,l;this.Ve.stop(),this.zs.stop(),this.Yi.stop(),this.Dt.stop(),this.Vl.stop(),(t=this.Zo)===null||t===void 0||
t.stop(),(e=this.ys)===null||e===void 0||e.stop(),(i=this.Es)===null||i===void 0||i.stop(),(n=this.bi)===null||n===void 0||n.stop(),this.Be.empty(),(a=this.Ul)===null||a===void 0||a.stop(),(c=this.Ti)===null||c===void 0||c.stop(),(l=this.Ri)===null||l===void 0||l.stop()}Hl(){this.Ze=D.now()}Ii(){return D.now()-this.Ze}jl(){this.Ve.onEvent(t=>{var e,i;t!==Bt.Visible&&((e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),
t===Bt.PagehideVisible?this.Bl():t===Bt.PagehideHidden?(this.Bl(),this.sendLastMessageBeacon()):(!this.Be.isEmpty()||this.ta)&&this.sendLastMessageBeacon())})}r_(t){try{(!this.Be.isEmpty()||this.ta)&&this.Yt.save({requestParameters:t,events:this.Be.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Og(t)||!ai(e))throw new Error(`Command misuse: ${Rc}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.W.getElementPath(e)};i.tgt!==he.INVALID_ELEMENT&&this.Fe(i)}}return s})(),Lg=(()=>{class s{constructor(t,
e){this.Yt=t,this.V=e,this.$p=()=>{document.visibilityState==="visible"&&this.qp()}}start(){this.qp(),this.Vc()}stop(){this.Uc()}getRecoveryStorage(){return this.Yt}qp(){let t=this.Yt.recover();if(t!==null){let {requestParameters:e,events:i}=t;this.V.send(i,e)}}Vc(){document.addEventListener("visibilitychange",this.$p)}Uc(){document.removeEventListener("visibilitychange",this.$p)}}return s})(),xg=(()=>{class s{constructor(t){this.Fi=t}save(t){localStorage.setItem(this.Fi,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Fi)}recover(){let t=
localStorage.getItem(this.Fi);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{j.error(`Invalid item in localStorage.
         (key:${this.Fi}; value:${t})`)}finally{this.clear()}return e}}return s})(),Vg=(()=>{class s{constructor(t){this.Xi=t,this.Ki=e=>this.processMetric(e),this.N=!1}onEvent(t){this.O=t}start(){this.N||(this.N=!0,this.Xi.onFCP(this.Ki),this.Xi.onCLS(this.Ki),this.Xi.onFID(this.Ki),this.Xi.onLCP(this.Ki),this.Xi.onTTFB(this.Ki),this.Xi.onINP(this.Ki))}stop(){this.N=!1}processMetric(t){if(!this.N)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.O(e)}}return F([L("Performance metric handler")],
s.prototype,"processMetric",null),s})(),Le,Qs,mc,Gi,sn,yc=-1,ls=function(s){addEventListener("pageshow",function(r){r.persisted&&(yc=r.timeStamp,s(r))},!0)},bn=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},rr=function(){var s=bn();return s&&s.activationStart||0},Ft=function(s,r){var t=bn(),e="navigate";return yc>=0?e="back-forward-cache":t&&(document.prerendering||rr()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=
t.type.replace(/_/g,"-"))),{name:s,value:r===void 0?-1:r,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1E12),navigationType:e}},Ns=function(s,r,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var e=new PerformanceObserver(function(i){Promise.resolve().then(function(){r(i.getEntries())})});return e.observe(Object.assign({type:s,buffered:!0},t||{})),e}}catch{}},zt=function(s,r,t,e){var i,n;return function(a){r.value>=0&&
(a||e)&&((n=r.value-(i||0))||i===void 0)&&(i=r.value,r.delta=n,r.rating=function(c,l){return c>l[1]?"poor":c>l[0]?"needs-improvement":"good"}(r.value,t),s(r))}},Tn=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},nr=function(s){var r=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||s(t)};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},Rn=function(s){var r=!1;return function(t){r||(s(t),r=!0)}},Es=
-1,Uo=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Wi=function(s){document.visibilityState==="hidden"&&Es>-1&&(Es=s.type==="visibilitychange"?s.timeStamp:0,Ug())},jo=function(){addEventListener("visibilitychange",Wi,!0),addEventListener("prerenderingchange",Wi,!0)},Ug=function(){removeEventListener("visibilitychange",Wi,!0),removeEventListener("prerenderingchange",Wi,!0)},In=function(){return Es<0&&(Es=Uo(),jo(),ls(function(){setTimeout(function(){Es=Uo(),jo()},
0)})),{get firstHiddenTime(){return Es}}},pi=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},Ho=[1800,3E3],Ec=function(s,r){r=r||{},pi(function(){var t,e=In(),i=Ft("FCP"),n=Ns("paint",function(a){a.forEach(function(c){c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<e.firstHiddenTime&&(i.value=Math.max(c.startTime-rr(),0),i.entries.push(c),t(!0)))})});n&&(t=zt(s,i,Ho,r.reportAllChanges),ls(function(a){i=Ft("FCP"),t=zt(s,i,Ho,r.reportAllChanges),
Tn(function(){i.value=performance.now()-a.timeStamp,t(!0)})}))})},Bo=[.1,.25],jg=function(s,r){r=r||{},Ec(Rn(function(){var t,e=Ft("CLS",0),i=0,n=[],a=function(l){l.forEach(function(d){if(!d.hadRecentInput){var g=n[0],u=n[n.length-1];i&&d.startTime-u.startTime<1E3&&d.startTime-g.startTime<5E3?(i+=d.value,n.push(d)):(i=d.value,n=[d])}}),i>e.value&&(e.value=i,e.entries=n,t())},c=Ns("layout-shift",a);c&&(t=zt(s,e,Bo,r.reportAllChanges),nr(function(){a(c.takeRecords()),t(!0)}),ls(function(){i=0,e=Ft("CLS",
0),t=zt(s,e,Bo,r.reportAllChanges),Tn(function(){return t()})}),setTimeout(t,0))}))},$s={passive:!0,capture:!0},Hg=new Date,Fo=function(s,r){Le||(Le=r,Qs=s,mc=new Date,vc(removeEventListener),Sc())},Sc=function(){if(Qs>=0&&Qs<mc-Hg){var s={entryType:"first-input",name:Le.type,target:Le.target,cancelable:Le.cancelable,startTime:Le.timeStamp,processingStart:Le.timeStamp+Qs};Gi.forEach(function(r){r(s)}),Gi=[]}},Bg=function(s){if(s.cancelable){var r=(s.timeStamp>1E12?new Date:performance.now())-s.timeStamp;
s.type=="pointerdown"?function(t,e){var i=function(){Fo(t,e),a()},n=function(){a()},a=function(){removeEventListener("pointerup",i,$s),removeEventListener("pointercancel",n,$s)};addEventListener("pointerup",i,$s),addEventListener("pointercancel",n,$s)}(r,s):Fo(r,s)}},vc=function(s){["mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return s(r,Bg,$s)})},zo=[100,300],Fg=function(s,r){r=r||{},pi(function(){var t,e=In(),i=Ft("FID"),n=function(l){l.startTime<e.firstHiddenTime&&(i.value=
l.processingStart-l.startTime,i.entries.push(l),t(!0))},a=function(l){l.forEach(n)},c=Ns("first-input",a);t=zt(s,i,zo,r.reportAllChanges),c&&nr(Rn(function(){a(c.takeRecords()),c.disconnect()})),c&&ls(function(){var l;i=Ft("FID"),t=zt(s,i,zo,r.reportAllChanges),Gi=[],Qs=-1,Le=null,vc(addEventListener),l=n,Gi.push(l),Sc()})})},_c=0,Mr=1/0,Ni=0,zg=function(s){s.forEach(function(r){r.interactionId&&(Mr=Math.min(Mr,r.interactionId),Ni=Math.max(Ni,r.interactionId),_c=Ni?(Ni-Mr)/7+1:0)})},wc=function(){return sn?
_c:performance.interactionCount||0},$g=function(){"interactionCount"in performance||sn||(sn=Ns("event",zg,{type:"event",buffered:!0,durationThreshold:0}))},$o=[200,500],Ac=0,qo=function(){return wc()-Ac},te=[],kr={},Go=function(s){var r=te[te.length-1],t=kr[s.interactionId];if(t||te.length<10||s.duration>r.latency){if(t)t.entries.push(s),t.latency=Math.max(t.latency,s.duration);else{var e={id:s.interactionId,latency:s.duration,entries:[s]};kr[e.id]=e,te.push(e)}te.sort(function(i,n){return n.latency-
i.latency}),te.splice(10).forEach(function(i){delete kr[i.id]})}},qg=function(s,r){r=r||{},pi(function(){var t;$g();var e,i=Ft("INP"),n=function(c){c.forEach(function(g){g.interactionId&&Go(g),g.entryType==="first-input"&&!te.some(function(u){return u.entries.some(function(y){return g.duration===y.duration&&g.startTime===y.startTime})})&&Go(g)});var l,d=(l=Math.min(te.length-1,Math.floor(qo()/50)),te[l]);d&&d.latency!==i.value&&(i.value=d.latency,i.entries=d.entries,e())},a=Ns("event",n,{durationThreshold:(t=
r.durationThreshold)!==null&&t!==void 0?t:40});e=zt(s,i,$o,r.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),nr(function(){n(a.takeRecords()),i.value<0&&qo()>0&&(i.value=0,i.entries=[]),e(!0)}),ls(function(){te=[],Ac=wc(),i=Ft("INP"),e=zt(s,i,$o,r.reportAllChanges)}))})},Wo=[2500,4E3],Dr={},Gg=function(s,r){r=r||{},pi(function(){var t,e=In(),i=Ft("LCP"),n=function(l){var d=l[l.length-1];d&&d.startTime<
e.firstHiddenTime&&(i.value=Math.max(d.startTime-rr(),0),i.entries=[d],t())},a=Ns("largest-contentful-paint",n);if(a){t=zt(s,i,Wo,r.reportAllChanges);var c=Rn(function(){Dr[i.id]||(n(a.takeRecords()),a.disconnect(),Dr[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(c,0)},!0)}),nr(c),ls(function(l){i=Ft("LCP"),t=zt(s,i,Wo,r.reportAllChanges),Tn(function(){i.value=performance.now()-l.timeStamp,Dr[i.id]=!0,t(!0)})})}})},Yo=[800,1800],Wg=function s(r){document.prerendering?
pi(function(){return s(r)}):document.readyState!=="complete"?addEventListener("load",function(){return s(r)},!0):setTimeout(r,0)},Yg=function(s,r){r=r||{};var t=Ft("TTFB"),e=zt(s,t,Yo,r.reportAllChanges);Wg(function(){var i=bn();if(i){var n=i.responseStart;if(n<=0||n>performance.now())return;t.value=Math.max(n-rr(),0),t.entries=[i],e(!0),ls(function(){t=Ft("TTFB",0),(e=zt(s,t,Yo,r.reportAllChanges))(!0)})}})},Xg=(()=>{class s{onFCP(t){Ec(t,{reportAllChanges:!0})}onCLS(t){jg(t,{reportAllChanges:!0})}onFID(t){Fg(t,
{reportAllChanges:!0})}onLCP(t){Gg(t,{reportAllChanges:!0})}onTTFB(t){Yg(t,{reportAllChanges:!0})}onINP(t){qg(t,{reportAllChanges:!0})}}return s})();var or=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Kg=(()=>{class s extends or{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.P_=["text","email",
"number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=mt(t);return Ki(i)&&csArray.prototype.indexOf.call(this.P_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var bc=(()=>{class s extends or{constructor(t){super(),this.lt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.lt.getEventTargetPath(t)),e}}return s})(),Xo=65535,Jg=(()=>{let s;return function(r){function t(e){let i=
mt(e);if(!i||!rt(i)||!Be(i.getBoundingClientRect)||!Ot(e.pageX)||!Ot(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),a=e.pageX-n.left-gt.windowOffsetX(),c=e.pageY-n.top-gt.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),d=Math.max(i.scrollHeight,n.height),g=Math.round(a/l*Xo),u=Math.round(c/d*Xo);return{xRel:g,yRel:u,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Qg=(()=>{class s extends or{constructor(t,
e){super(),this.Cs=t,this.lt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Kl=""}baseEnhanceAnalysisEvent(t,e){let {valid:i,xRel:n,yRel:a}=Jg.getRelativePosition(t);if(i){let c=this.lt.getEventTargetPath(t);c!==he.INVALID_ELEMENT&&(e.xRel=n,e.yRel=a,e.type===z.MOUSEMOVE&&(c!==this.Kl||this.Cs.iframesTracking?(this.Kl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Kl="");return e}}return s})(),Ne=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",
r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Ko=100,Tc=(()=>{class s extends or{constructor(t,e,i){super(),this.h=t,this.he=e,this.C=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}O_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,an(n.parentElement)||on(n.parentElement)||this.he.getElementSensitiveStatus(n.parentElement)!==Ne.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Ko)break;n=i.nextNode()}return!1}N_(t){let e=
Yr(t,"button,a");return e||(this.h.collectTargetText===$r.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(ai(csEventtarget.apply(t))){let i=this.N_(csEventtarget.apply(t));if(i&&$(i.textContent)&&!this.O_(i)&&!this.C.hasPII(i.textContent,this.h.anonymizeDigits)){let n=Yi.truncate(csString.prototype.trim.call(i.textContent),Ko);n.length>0&&(e.text=n)}}return e}}return s})();function Zg(s,r,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Qg(s,r)),s.isCollectTargetTextEnabled()&&
csArray.prototype.push.call(e,new Tc(s,t,new li)),csArray.prototype.push.call(e,new Kg,new bc(r)),e}function tm(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Tc(s,t,new li)),csArray.prototype.push.call(e,new bc(r)),e}var em=50,sm=(()=>{class s{constructor(t=[]){this.Ot=t}stringifyEvents(){return csJSON.stringify(this.Ot)}addEvent(t){csArray.prototype.push.call(this.Ot,t)}eventsCount(){return this.Ot.length}clearEvents(){this.Ot=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=
em}isEmpty(){return this.Ot.length===0}getEvents(){return this.Ot}}return s})(),im="csAnalysisEventsPersisted",Jo="v2/events",Rc=["submit"],rm=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E){this.h=t,this.et=e,this.R=i,this.W=n,this.Lt=a,this.f=c,this.X=l,this.Dt=d,this.at=g,this.Mt=u,this.Z=y,this.he=E}init(){let t=new sm,e=this.Mt.create(`${this.h.getTrackerUri()}/${Jo}`,!0,"base64");this.na=this.M_(e),this.Me=this.k_(t,this.na.getRecoveryStorage(),e),this.Me.init(),this.Z.addListener(this.Me),
this.at.addListener(this.Me),this.f.register(Rc,(i,n)=>{this.Me.pushSubmitCommandEvent(i,n)})}onStartTracking(t){this.na.start(),this.Me.start(t)}onAfterNaturalPageView(){this.Me.initStates()}onAfterArtificialPageView(){this.Me.initStates(),this.Me.collectInitialEvents()}onArtificialPageViewEnd(){this.Me.clearStates(!0)}onBeforeSessionRenewal(){this.Me.clearStates(),this.Me.stop(),this.na.stop()}onOptout(){this.Me.stop(),this.na.stop()}k_(t,e,i){var n;let a=new Rg(window),c=new kg,l=Zg(this.h,this.W,
this.he),d=[];this.h.collectSubmit||csArray.prototype.push.call(d,"submit");let g=new Mg(l,this.W,this.Lt,d),u=tm(this.h,this.W,this.he),y=new Ng(u,this.Dt),E=new Vg(new Xg),v=new ec,I,C,b,w=new rc(`${this.h.getTrackerUri()}/${Jo}`),x=new ri(this.et,this.R),A,k,U,J;return new Dg(this.h,g,y,c,a,t,w,x,this.X,e,this.W,E,v,i,I,C,b,A,k,U,J)}M_(t){return new Lg(new xg(im),t)}}return s})(),Vi=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),nm=(()=>{class s extends jt{constructor(t,
e,i,n,a){super(),this.E=t,this.Z=e,this.Jl=i,this.A=n,this.Xe=a}init(){this.D_()}onStart(t){t?this.L_():this.x_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.ff(t,e):Ot(t)&&this.A.overridePath(t,e),this.isStarted||(this.Z.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}x_(){this.Xe.setPageViewType(Vi.Natural),this.E.emitBeforeNaturalPageView(),this.Jl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterNaturalPageView()}L_(){this.Xe.setPageViewType(Vi.Renewal),
this.E.emitBeforeNaturalPageView(),this.Jl.send(),this.E.emitAfterNaturalPageView()}ff(t,e){this.Xe.setPageViewType(Vi.Artificial),this.E.emitArtificialPageViewEnd(),Ot(t)&&this.A.overridePath(t,e),this.E.emitBeforeArtificialPageView(),this.Jl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterArtificialPageView()}D_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.ff()})}}return s})(),om=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||
window.navigator.systemLanguage||"unknown";function am(){return{la:om}}var cm=(()=>{class s{constructor(t,e){this.J=t,this.ft=e,this.Ql=!1}getRequestParameters(){return{dr:this.Zl()}}addUrlMaskingPattern(t){this.ft.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Ql=!0}disableRemoveQueryString(){this.Ql=!1}Zl(){let t=this.Ql?this.J.removeQueryString(this.gf()):this.gf();return this.J.anonymizeUrl(t,{maskingPatterns:this.ft.getUrlMaskingPatterns()})}gf(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=
window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),lm=99999,hm=(()=>{class s{constructor(t){this.w=t,this.V_=this.U_()&&window.CSCurrentScript}j_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.H_(e)?null:Math.round(e.responseEnd-e.fetchStart)}H_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.V_||
this.B_()!==1)return{};let t=this.j_();return t===null?{}:{dt:`${Math.min(t,lm)}`}}B_(){var t;return((t=this.w.getSession())===null||t===void 0?void 0:t.pageNumber)||null}U_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Ic=":";function Qo(s){let r=[],t=um(s),e=csString.prototype.split.call(t,"/");for(let i of e)$e(i,Ic)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,
1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function um(s){let r=s;return $e(s,"/")&&(r=csString.prototype.substring.call(r,1)),hi(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var dm=(()=>{class s{constructor(){this.mf=new Set,this.yf=[],this.th=new Set,this.eh=[]}addUrlMaskingPattern(t){if(this.mf.has(t))return;this.mf.add(t);let e=Qo(t);csArray.prototype.push.call(this.yf,e)}getUrlMaskingPatterns(){return this.yf}resetPartialUrlMaskingPatterns(){this.th.clear(),this.eh=
[]}addPartialUrlMaskingPattern(t){if(this.th.has(t))return;this.th.add(t);let e=Qo(t);csArray.prototype.push.call(this.eh,e)}getPartialUrlMaskingPatterns(){return this.eh}}return s})(),pm=["trackPageview"],Zo=["setPath"],ta=["setQuery"],ea=["referrer:maskUrl"],fm=["referrer:removeQueryString"],gm=["referrer:keepQueryString"],mm=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,I,C){this.h=t,this.f=e,this.E=i,this.Ne=n,this.R=a,this.w=c,this.ue=l,this.vt=d,this.J=g,this.A=u,this.te=y,this.Xe=E,this.Z=
v,this.qs=I,this.tr=C}init(){var t;let e=new Ts(this.h.getTrackerUri(),"pageview");this.er=new nm(this.E,this.Z,e,this.A,this.Xe);let i=new cm(this.J,new dm);this.er.init();let n=new ri(this.Ne,this.R,gt,i,this.A,this.ue,rn,this.vt,this.Xe,new hm(this.w),this.te);this.qs&&n.addProvider(this.qs),this.tr&&n.addProvider(this.tr);let a=this.h.isCsCrosswritingHeap();if(a||this.h.isCsSideloadingHeap()||this.h.isHeapSideloadsCs()){let c=(t=this.h.heapEnvironment)===null||t===void 0?void 0:t.env_id;n.addProvider({getRequestParameters(){let l=
{cw:a?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(n),this.f.register(pm,(c,l)=>{if(!$(c)){this.er.triggerArtificialPageView();return}this.ih(l)?this.er.triggerArtificialPageView(c,l):this.er.triggerArtificialPageView(c)}),this.f.register(Zo,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${Zo[0]}`);this.ih(l)?this.A.overridePath(c,l):this.A.overridePath(c)}),this.f.register(ta,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${ta[0]}`);this.ih(l)?this.A.overrideQuery(c,
l):this.A.overrideQuery(c)}),this.f.register(ea,c=>{if(!$(c))throw new Error(`Command misuse: ${ea[0]}`);i.addUrlMaskingPattern(c)}),this.f.register(fm,()=>i.enableRemoveQueryString()),this.f.register(gm,()=>i.disableRemoveQueryString())}start(t){this.er.start(t)}onBeforeSessionRenewal(){this.er.stop()}ih(t){return ti(t)&&t!==null}}return s})(),ym=(()=>{class s{constructor(t){this.lt=t}on(t,e){return i=>{this.lt.hasValidEventTarget(i)&&this.F_(i,t)&&e(i)}}F_(t,e){let i=mt(t);return Wt.call(i,e)}isMatchesSelectorSupported(){return!!Wt}}
return s})(),Em=(()=>{class s{constructor(){}onLoad(t){this.Ui=t}onLoadCallbackExecute(){this.Ui()}start(){let t=this.onLoadCallbackExecute.bind(this);this.z_(t)}z_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return F([L("onLoad")],s.prototype,
"onLoadCallbackExecute",null),s})(),Sm=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.w=i,this.Ze=D.now()}resetStartTime(){this.Ze=D.now()}getSessionData(){let {projectId:t}=this.h,e=this.R.getVisitor();e==null&&j.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let {id:i,visitsCount:n}=e!=null?e:{},a=this.w.getSession();a===null&&j.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");
let {pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:D.now()-this.Ze}}}return s})(),vm=["clearSession"],_m=["extendSession"];var wm=["getSessionData"],Am=["session:start:newVisitor"],bm=["session:clear:visitor"],Tm=(()=>{class s{constructor(t,e,i,n){this.h=t,this.R=e,this.w=i,this.f=n}init(){this.rh=new Sm(this.h,this.R,this.w),this.f.register(vm,()=>this.w.removeSession()),this.f.register(_m,()=>this.w.extendSessionPeriodically(),{disableApplyPending:!0}),
this.f.register(wm,()=>this.rh.getSessionData(),{disableApplyPending:!0}),this.f.register(Am,()=>this.R.renewVisitor()),this.f.register(bm,()=>{this.R.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onBeforeArtificialPageView(){this.w.abortQuotaServiceRequest(),this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onAfterNaturalPageView(){this.rh.resetStartTime()}onAfterArtificialPageView(){this.rh.resetStartTime()}onOptout(){this.R.removeVisitor(),
this.w.removeSession()}onCollectStateChange(t,e){this.w.updateCollectState(t,e)}}return s})(),Rm=60*1E3,Im=30*1E3,Cm=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.nh=!1,this.$_=tr(()=>this.w.refreshSession(),Im)}onSessionExpired(t){this.q_=t}isSessionValid(){return this.nh?!0:!(!this.w.hasValidSession()||this.w.pollCacheRefreshEvent()&&this.R.isSessionRenewed())}isCurrentPageviewValid(){let t=this.w.hasValidSession();return this.w.pollCacheRefreshEvent(!1)?!this.R.isSessionRenewed():t}refreshSession(){this.isSessionValid()?
this.$_():this.G_()&&(this.Ef=D.now(),this.renewSession())}renewSession(){this.nh=!0,this.q_(),this.nh=!1}G_(){return!Z(this.Ef)||D.now()-this.Ef>Rm}}return s})();var os;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(os||(os={}));function Cc(s){return s.tagDeploymentMode===
os.DualCollectionReview||s.tagDeploymentMode===os.DualCollection}function Pm(s){return Cc(s)||s.tagDeploymentMode===os.LoadClicktalePtc}var sa=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&
window.ClickTaleEvent(c)}r.sendPageEvent=n;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=a}(s||(s={})),s})();var Om="@ETP@",ia="@user-identifier@",Nm=(()=>{class s extends jt{constructor(t,e,i,n){super(),this.h=t,this.Dw=e,this.ae=i,this.Z=n,this.ah=[],this.pi=[]}onStart(){csArray.prototype.forEach.call(this.ah,t=>this.Mf(t)),this.ah=[],csArray.prototype.forEach.call(this.pi,t=>this.kf(t)),this.pi=[]}onStop(){}Mf(t){this.Lw(t)?Gs.isSupported()&&
this.xw(t):this.Vw(t)}trackPageEvent(t){if(!s.Df(t))throw new Error(`Command misuse: ${Pc[0]}`);this.isStarted?this.Mf(t):csArray.prototype.push.call(this.ah,t)}Lw(t){return $e(t,ia)}async xw(t){if(!this.h.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,ia.length);if(e.length>Gs.MAX_DIGEST_INPUT_SIZE){j.warn("UserIdentifier event: invalid user identifier");return}let i=await Gs.digest(e);i?(this.ar={eventName:i,isETR:!1,isCustomHashId:!0},this.da()):j.warn("Page event: unable to compute customHashId"),
this.h.encryptionEnabled&&this.Z.emitUserIdentifierEvent(e)}Vw(t){this.Z.emitPageEvent(t),this.ar={eventName:t,isETR:!1,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===os.LoadClicktalePtc&&sa.sendPageEvent(t)}kf(t){this.h.malkaEtrEnabled?this.Uw(t):this.jw(t)}trackEventTriggerRecording(t){if(!s.Df(t))throw new Error(`Command misuse: ${Oc[0]}`);this.isStarted?this.kf(t):csArray.prototype.push.call(this.pi,t)}Uw(t){$e(t,Om)?this.Z.emitEventTriggerRecording(t,He.ETR_PAGE):this.Z.emitEventTriggerRecording(t,
He.ETR_SESSION),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.da()}jw(t){Pm(this.h)&&(this.Z.emitEventTriggerRecording(t,He.ETR_LEGACY),this.ar={eventName:t,isETR:!0,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===os.LoadClicktalePtc&&sa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ae.compressSync(this.ar.eventName,"base64"),ct:this.ae.algorithm,isETR:`${this.ar.isETR}`,isCustomHashId:`${this.ar.isCustomHashId}`}}da(){this.Dw.send()}static Df(t){return $(t)&&
!!csString.prototype.trim.call(t)}}return s})(),Pc=["trackPageEvent"],Oc=["trackEventTriggerRecording"],Mm=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.f=e,this.ae=i,this.Ne=n,this.Z=a}init(){let t=new Ts(this.h.getTrackerUri(),"pageEvent");this.pa=new Nm(this.h,t,this.ae,this.Z),t.setRequestParametersProviders(this.pa,this.Ne),this.f.register(Pc,e=>{this.pa.trackPageEvent(e)}),this.f.register(Oc,e=>{this.pa.trackEventTriggerRecording(e)})}onStartTracking(){this.pa.start()}}return s})(),km=
(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})();var Dm=(()=>{class s{constructor(t){this.f=t}init(){this.Lf(s.zw,xa),this.Lf(s.$w,La)}Lf(t,e){this.f.register([t],(i,n)=>{!$(i)||!($(n)||Fe(n))||j.error(n,`${e}${i}`)})}}return s.$w="logSnippetError",s.zw="logImplementationSnippetError",
s})(),Lm=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.Y=e,this.Bs=i,this.he=n,this.at=a}init(){this.Y.onChildMessage((t,e,i)=>this.at.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.he.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Bs.getRecordingContext())}onStartTracking(){this.h.iframesTracking&&this.Y.start()}onOptout(){this.h.iframesTracking&&this.Y.stop()}onSensitiveStatusChange(){if(this.h.iframesTracking){let t=this.he.getSensitiveStatus();this.Y.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.h.iframesTracking){let t=
this.Bs.getRecordingContext();this.Y.onRecordingContextChange(t)}}}return s})(),xm=(()=>{class s extends jt{constructor(t){super(),this.h=t,this.ch=0,this.Te=new Map,this.xf={boundElement:window,type:"message",listener:e=>this.lh(e)}}onChildMessage(t){this.Vf=t}setRecordingContextCallback(t){this.qw=t}setSentiveStatusCallback(t){this.Gw=t}onSensitiveStatusChange(t){let e=ft.buildBaseMessage(X.SensitiveStatus,Jt.Parent,this.h.projectId);e.content=t;let i=ft.buildBaseMessage(X.SensitiveStatus,Jt.Parent,
this.h.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Te.forEach(n=>{if(n.port){let a=this.fa(n)?i:e;this.hh(n,a)}})}onRecordingContextChange(t){let e=ft.buildBaseMessage(X.RecordingContext,Jt.Parent,this.h.projectId);e.content=t,this.Te.forEach(i=>{!this.fa(i)&&i.port&&this.hh(i,e)})}sendToChildren(t,e){let i=ft.buildBaseMessage(t,Jt.Parent,this.h.projectId);i.content=e,this.Ww(i)}onStart(){Ct(this.xf,!1),this.Uf()}onStop(){this.Yw(),Pt(this.xf,!1),this.Xw()}Uf(){let t=
this.Kw();this.Jw(t),csArray.prototype.forEach.call(t,e=>{if(this.Qw(e)===null){let n={iframe:e};this.Te.set(this.ch,n),this.ch+=1}}),this.Zw()}Kw(){return csArray.prototype.filter.call(dt.findAllElements("iframe"),t=>this.tA(t))}Jw(t){this.Te.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.eA(i,e)})}eA(t,e){e.port&&ft.closeChannelPort(e.port),this.Te.delete(t)}Xw(){this.Te.forEach(t=>{t.port&&ft.closeChannelPort(t.port)}),this.Te.clear()}Qw(t){let e=null;return this.Te.forEach((i,
n)=>{e===null&&i.iframe===t&&(e=n)}),e}tA(t){return t.id!==da&&(!t.src||qe(t.src,"about:")||fn(Va(t.src),this.h.hostnames))}Ww(t){this.Te.forEach(e=>{this.hh(e,t)})}hh(t,e){let i=e.type===X.SensitiveStatus||e.type===X.RecordingContext;t.port&&(!i||t.initialStatusSent)&&ft.sendChannelMessage(t.port,e)}Zw(){this.Te.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.sA(e);ft.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Yw(){let t=this.iA();this.Te.forEach(e=>{e.port?ft.sendChannelMessage(e.port,
t):e.iframe.contentWindow&&ft.sendPostMessage(e.iframe.contentWindow,"*",t)})}sA(t){return ft.buildBaseMessage(X.Discovery,Jt.Parent,this.h.projectId,t)}iA(){return ft.buildBaseMessage(X.Stop,Jt.Parent,this.h.projectId)}rA(t,e){let i=this.Te.get(t);if(i===void 0){j.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.ch})`);return}i.port=e,i.port.onmessage=n=>{this.uh(n,i)}}nA(t){if(!t.port)return;let e=ft.buildBaseMessage(X.SensitiveStatus,Jt.Parent,this.h.projectId),
i=this.Gw();this.fa(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,ft.sendChannelMessage(t.port,e)}oA(t){if(!t.port)return;let e=ft.buildBaseMessage(X.RecordingContext,Jt.Parent,this.h.projectId),i=this.qw();this.fa(t)&&(i.isRecording=!1),e.content=i,ft.sendChannelMessage(t.port,e)}uh(t,e){if(e===void 0){j.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,n=t.data.content;i===X.EndOfBufferedMessages?
(this.nA(e),this.oA(e),e.initialStatusSent=!0):this.Vf(e.iframe,i,n)}lh(t){if(ft.isMessageValid(t,Jt.Child,this.h.projectId,this.h.hostnames))switch(t.data.type){case X.Discovery:if(t.data.id===void 0){this.Uf();return}if(t.ports&&t.ports.length===1&&this.Te.has(t.data.id)){this.rA(t.data.id,t.ports[0]);return}j.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case X.ChildLogMessage:this.Vf(null,X.ChildLogMessage,t.data.content);break;
default:j.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}fa(t){return N.isMaskedElement(t.iframe)||N.isMaskedElementChild(t.iframe)}}return s})();var Vm=(()=>{class s extends km{constructor(t){super(),this.pA=t,this.Ds=[{boundElement:document,type:"touchstart",listener:e=>this.G(e)},{boundElement:document,type:"touchmove",listener:e=>this.G(e)},{boundElement:document,type:"touchend",listener:e=>this.G(e)}],this.Ln=new Zr,this.Ln.onGesture((e,
i)=>this.El(e,i))}El(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,t=>Ct(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,t=>Pt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}G(t){this.pA.tryToExecute("process gesture event",()=>{if(this.Ln.isValidTouchEvent(t))switch(t.type){case "touchstart":this.Ln.processActionDown(t);break;case "touchmove":this.Ln.processActionMove();
break;case "touchend":this.Ln.processActionUp(t);break}})()}static isSwipe(t){return t.type===yt.FLICK||t.type===yt.DRAG}}return s})(),Um=(()=>{class s extends jt{constructor(t,e){super(),this.V=t,this.fh=e,this.Bf=0}onStart(){j.isPerfLoggingActive()&&(this.Nn=window.csSetInterval(()=>this.Ff(),s.fA))}onStop(){j.isPerfLoggingActive()&&(this.Ff(),csClearInterval(this.Nn))}Ff(){if(Di.isEmpty||this.Bf>=s.gA)return;this.Bf++;let t={a:s.mA,l:s.yA,...this.fh.getRequestParameters()},e=[];Di.forEach(i=>{csArray.prototype.forEach.call(i,
n=>{csArray.prototype.push.call(e,{...n,...t})})}),this.V.send(e),Di.clear()}}return s.mA="uxa",s.yA="perf",s.fA=5E3,s.gA=5,s})(),jm=(()=>{class s{constructor(t,e,i){this.h=t,this.fh=e,this.Mt=i}init(){this.zf=new Um(this.Mt.create(this.h.getLoggerUri(),!0),this.fh)}onStartTracking(){this.zf.start()}onOptout(){this.zf.stop()}}return s})(),Hm=(()=>{class s{constructor(t){this.he=t,this.$f=!1}enableRecordingContext(t,e,i){this.$f=!0,this.Wi=t,this.w=e,this.wi=i}getRecordingContext(){var t,e,i,n;if(!this.$f)return{isRecording:!1,
recordingStartTimestamp:0,etrState:It.ETR_OFF,etrStatus:Tt.ETR_DISABLED,collectState:P.ANALYTICS_ONLY};let a=this.w.getSession();return{isRecording:this.Wi.isRecording(),useAnonymization:this.he.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Wi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Wi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Wi.getRecordingStartTimestamp(),
10),etrState:(i=a==null?void 0:a.etrState)!==null&&i!==void 0?i:It.ETR_OFF,etrStatus:this.wi.getEtrStatus(a),collectState:(n=a==null?void 0:a.collectState)!==null&&n!==void 0?n:P.ANALYTICS_ONLY}}}return s})(),ni=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var Bm=(()=>{class s{constructor(){this.vh=Vi.Natural}setPageViewType(t){this.vh=
t}getPageViewType(){return this.vh}getRequestParameters(){return{pvt:this.vh}}}return s})(),Fm=(()=>{class s{constructor(t){this.X=t}onAfterVisitorRenewal(){this.X.renewSession()}}return s})();var zm=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),a=(new csDate).getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let d=(a+Math.random()*16)%16|0;return a=Math.floor(a/
16),(l==="x"?d:d&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let a=0;a<i.length;a+=1)n=csString.prototype.charCodeAt.call(i,a)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var oe;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules=
"replayRecordingMaskedUrlRegexRules"})(oe||(oe={}));var Qt;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(Qt||(Qt={}));var $m=(()=>{class s{constructor(t,e,i,n){this.ue=t,this.h=e,this.A=i,this.Hn=n}init(){this.LA()}shouldMaskNonTextElements(){if(this.h.anonymisationMethod!==oe.replayRecordingMaskedUrlRegexRules)return!1;if(this.h.isSMB)return this.shouldUseAnonymization();
let t=this.Hn.getMatchingRules(this.A.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.ue.isReplayUnanonymizedAllowedByConsent()){switch(this.h.anonymisationMethod){case null:case oe.replayRecordingMaskedUrlRegex:return!!(this.h.replayRecordingMaskedUrlRegex&&this.h.replayRecordingMaskedUrlRegex.test(this.A.getAnonymizedUrl()));case oe.replayRecordingMaskedUrlRegexRules:return this.Hn.evaluateUrl(this.A.getAnonymizedUrl())}return!1}else{switch(this.h.anonymisationMethod){case null:case oe.replayRecordingUnmaskedUrlRegex:return!(this.h.replayRecordingUnmaskedUrlRegex&&
this.h.replayRecordingUnmaskedUrlRegex.test(this.A.getAnonymizedUrl()));case oe.replayRecordingUnmaskedUrlRegexRules:return!this.Hn.evaluateUrl(this.A.getAnonymizedUrl())}return!0}}LA(){this.h.anonymisationMethod===oe.replayRecordingMaskedUrlRegexRules&&this.h.replayRecordingMaskedUrlRegexRules?this.Hn.setRegexRules(this.h.replayRecordingMaskedUrlRegexRules):this.h.anonymisationMethod===oe.replayRecordingUnmaskedUrlRegexRules&&this.h.replayRecordingUnmaskedUrlRegexRules&&this.Hn.setRegexRules(this.h.replayRecordingUnmaskedUrlRegexRules)}}
return s})(),qm=(()=>{class s{constructor(){this.Rh=[]}setRegexRules(t){this.Rh=csArray.prototype.map.call(t,e=>this.xA(e))}evaluateUrl(t){return csArray.prototype.some.call(this.Rh,e=>this.Kf(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Rh,e=>this.Kf(t,e))}Kf(t,e){var i,n;let a=this.VA(t,e);return!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):!((n=e.regex)===null||n===void 0)&&n.test(a))}VA(t,e){let i=gn(t);return i?e.ignoreQueryParams&&e.ignoreURIFragments?
`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}va(t){return t.ignoreCaseSensitivity?"i":""}xA(t){switch(t.operator){case Qt.NOT_START:t.notOperator=!0;case Qt.START:t.regex=new csRegExp(`^${t.value}`,this.va(t));break;case Qt.NOT_END:t.notOperator=!0;case Qt.END:t.regex=new csRegExp(`${t.value}$`,this.va(t));break;case Qt.NOT_CONTAIN:t.notOperator=!0;case Qt.CONTAIN:t.regex=new csRegExp(`${t.value}`,
this.va(t));break;case Qt.NOT_EXACT:t.notOperator=!0;case Qt.EXACT:t.regex=new csRegExp(`^${t.value}$`,this.va(t));break;default:j.warn(`buildRegexWithRule, unknown type: ${t.operator}`)}return t}}return s})();var Gm=(()=>{class s extends de{constructor(t){super(),this.U=null,this.Aa=null,this.P=null,this.Us=null,this.ig=["value","checked","src","data","alt"],this.ba={state:N.MaskedElementState.Child},this.bb=e=>{for(let i of e){if(N.isMaskedElement(i.target)||N.isMaskedElementChild(i.target))for(let n=
0;n<i.addedNodes.length;n+=1){let a=i.addedNodes[n];N.isMaskedElement(a)||N.isMaskedElementChild(a)||rt(a)&&this.rg(a)}for(let n=0;n<i.removedNodes.length;n+=1){let a=i.removedNodes[n];dt.isConnected(a)||this.ng(a)}}},this.Tb=t}setMaskedElementSettings(t){this.As=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.As||(ot.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),
this.As={elementSelector:"",attrSelector:"",attrSelectors:[]});let {elementSelector:a,attrSelector:c,attrSelectors:l}=this.As;(t=this.Us)!==null&&t!==void 0||(this.Us=this.Rb()),a.length!==0&&((e=this.U)!==null&&e!==void 0||(this.U=this.Ib()),this.U.observe(a)),c.length!==0&&((i=this.Aa)!==null&&i!==void 0||(this.Aa=this.Cb(l)),this.Aa.observe(c)),(n=this.P)!==null&&n!==void 0||(this.P=new We(this.bb,(d,g)=>g==="added"&&this.Pb(d))),this.P.observe(),csSetTimeout(this.Tb)}onStop(){var t,e,i;this.U&&
(this.ng(document),this.U.disconnect()),(t=this.Aa)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect(),(i=this.Us)===null||i===void 0||i.disconnect()}Rb(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}Ib(){return new Rs(t=>{csArray.prototype.forEach.call(t,e=>{this.Ob(e)?this.rg(e):(this.Nb(e),this.Mb(e))})})}Cb(t){return new Rs(e=>{csArray.prototype.forEach.call(e,i=>this.kb(i,t))})}resizeObserverCallback(t){let e=
t.target.getBoundingClientRect(),i=N.getMaskedElementDetails(t.target);if(i.state!==N.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:et(t.target),width:e.width,height:e.height})}Mb(t){!this.Us||!rt(t)||Ji(t)||this.Us.observe(t)}Ob(t){let e=csNodeparentNode.apply(t);return e?N.isMaskedElement(e)||N.isMaskedElementChild(e):
ei(t)?N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host):!1}Pb(t){(N.isMaskedElement(t.host)||N.isMaskedElementChild(t.host))&&N.setMaskedElementProperty(t,this.ba)}ng(t){Gt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{N.unsetMaskedElementProperty(i)})}Nb(t){let e=t.getBoundingClientRect(),i={state:N.MaskedElementState.Parent,width:e.width,height:e.height};N.setMaskedElementProperty(t,i),this.Db(t),Gt(t).visitAll(n=>n!=t&&N.setMaskedElementProperty(n,this.ba))}rg(t){N.setMaskedElementProperty(t,
this.ba),Gt(t).visitAll(e=>e!=t&&N.setMaskedElementProperty(e,this.ba))}Db(t){var e;let i=(e=G.getProperty(t,N.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.ig.length;n+=1){let a=this.ig[n];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&N.setMaskedAttributeProperty(t,i)}kb(t,e){var i;let n=(i=G.getProperty(t,N.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=
1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Wt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&N.setMaskedAttributeProperty(t,n)}}return ue([L()],s.prototype,"resizeObserverCallback",null),s})(),Wm=(()=>{class s{constructor(){this.Oh=0,this.N=!1,this.og="data-cs-capture",this.Ws=t=>{for(let e of t){if(le.isWhitelistedElement(e.target))for(let i=
0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];le.isWhitelistedElement(n)||rt(n)&&this.ag(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];dt.isConnected(n)||this.cg(n)}}}}start(){this.Oh++,!this.N&&(this.N=!0,this.Lb())}Lb(){this.U||(this.U=new Rs(e=>K(e,i=>this.ag(i))));let t=this.Nh?`[${this.og}], ${this.Nh}`:`[${this.og}]`;this.U.observe(t),this.P||(this.P=new We(this.Ws,(e,i)=>i==="added"&&this.xb(e))),this.P.observe()}stop(){this.N&&(this.Oh--,this.Oh===0&&(this.N=!1,
this.Vb()))}Vb(){this.U&&(this.cg(document),this.U.disconnect()),this.P&&this.P.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ys(t))this.Nh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector");}getWhitelistedElementsSelector(){return this.Nh}ag(t){Gt(t).visitAll(e=>{le.whitelistElement(e)})}xb(t){le.isWhitelistedElement(t.host)&&le.whitelistElement(t)}cg(t){Gt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{le.removeWhitelistElement(i)})}}return s})(),Ym=(()=>{class s{constructor(){this.U=
null,this.P=null,this.N=!1,this.Ws=t=>{for(let e of t)if(Me.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Me.isEditableNode(n)){if(ji(n)||yh(n)){Me.markEditableNode(n);continue}rt(n)&&this.lg(n)}}}}start(){this.N||(this.N=!0,this.U=new Rs(t=>K(t,e=>{this.lg(e)})),this.U.observe("[contenteditable]"),this.P=new We(this.Ws,(t,e)=>e==="added"&&this.Ub(t)),this.P.observe())}stop(){var t,e;this.N&&(this.N=!1,(t=this.U)===null||t===void 0||t.disconnect(),this.U=
null,(e=this.P)===null||e===void 0||e.disconnect(),this.P=null)}lg(t){Gt(t).visitAll(e=>{Me.markEditableNode(e)})}Ub(t){Me.isEditableNode(t.host)&&Me.markEditableNode(t)}}return s})();var Xm=s=>{let r=s*60*1E3;return`${Math.floor(csDate.now()/r)}`},Km=5E3,Jm=(()=>{class s extends Pa{constructor(t,e,i){super(t,e),this.mr=null,this.Hb=(i==null?void 0:i.type)||"json",this.ug=i==null?void 0:i.cacheMinutes,this.Mr=i==null?void 0:i.timeout}onLoad(t){this.Ui=t}onError(t){this.Nr=t}onTimeout(t,e){this.ni=
t,this.Mr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.sc(t);let e=ii.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.Zl(i,this.Hb)}abort(){this.mr&&(this.mr.abort(),this.mr=null)}isInProgress(){return this.mr!==null}Zl(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var a;return(a=this.Nr)===null||a===void 0?void 0:a.call(this,n)},n.ontimeout=()=>{var a;return(a=this.ni)===
null||a===void 0?void 0:a.call(this,n)},n.onload=()=>{var a,c;n.status>=200&&n.status<400?((a=this.Ui)===null||a===void 0||a.call(this,this.Bb(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Nr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.mr=null},n.timeout=(i=this.Mr)!==null&&i!==void 0?i:Km,this.mr=n,n.send()}Bb(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),
"json")>0}sc(t){let e;this.ug?e=`${Xm(this.ug)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var Qm=(()=>{class s{constructor(t,e,i,n,a){this.nt=t,this.gt=e,this.pe=i,this.Pt=n,this.Q=a}getSensitiveStatus(){var t,e;return{started:this.pe.isStarted,useAnonymization:this.nt.shouldUseAnonymization(),capturedElementSelector:this.Pt.getWhitelistedElementsSelector(),maskedElementSettings:this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),
encryptionSelectors:(e=this.Q)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.pe.isStarted,i=this.nt.shouldUseAnonymization();return e?N.isMaskedElement(t)||N.isMaskedElementChild(t)?Ne.MASKED:ef.shouldEncrypt(t)?Ne.ENCRYPTED:Me.isEditableNode(t)?Ne.ANONYMIZED:i?le.isWhitelistedElement(t)?Ne.CAPTURED:Ne.ANONYMIZED:Ne.CAPTURED:Ne.ANONYMIZED}}return s})(),Zm=["setEncryptionSelectors"],Nc=["setPIISelectors"],ty=["setCapturedElementsSelector"],ey=(()=>{class s{constructor(t,
e,i,n,a,c,l){this.E=t,this.f=e,this.gt=i,this.pe=n,this.Pt=a,this.Q=c,this.Sr=l}init(){var t,e;this.Sr&&this.Q&&((t=this.Sr)===null||t===void 0||t.addSelector((e=this.Q)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ot()}onStartTracking(t){this.pe.start(),this.E.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.pe.stop(),this.E.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.pe.start(),this.E.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.pe.stop(),
this.E.emitSensitiveStatusChange()}onOptout(){this.pe.stop(),this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.E.emitSensitiveStatusChange()}ot(){this.f.register(Nc,t=>{this.gt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()}),this.f.register(ty,t=>{this.Pt.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(Zm,t=>{var e,i;(e=this.Q)===
null||e===void 0||e.setEncryptionSelectors(t),(i=this.Sr)===null||i===void 0||i.addSelector(t)})}}return s})(),sy=(()=>{class s extends jt{constructor(t,e,i,n,a,c){super(),this.Ht=t,this.gt=e,this.Pt=i,this.Sr=n,this.vr=a,this.nt=c}onStart(){var t,e,i;this.Pt.start(),this.Ht.setMaskedElementSettings(this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Ht.startIdentifier(),(e=this.Sr)===null||e===void 0||e.start(),(i=this.vr)===null||i===void 0||
i.start()}onStop(){var t,e;this.Pt.stop(),this.Ht.stopIdentifier(),(t=this.Sr)===null||t===void 0||t.stop(),(e=this.vr)===null||e===void 0||e.stop()}}return s})();var ra=(()=>{let s;return function(r){function t(u,y){for(let E of u)if(i(E,y))return!0;return!1}r.isUrlMatching=t;function e(u,y){if($(y))for(let E of u){if(i(E,y))return!0}else if(Zn(y))for(let E of u)if(i(E,csString(y)))return!0;return!1}r.isMatching=e;function i(u,y){let E=n(u,y);return u.negate?!E:E}function n(u,y){switch(u.rule_type===
"date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(y=((new csDate(y)).valueOf()/1E3).toFixed(0)),u.match_operation){case "exact":switch(u.rule_type){case "string":return $(u.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(u.pattern):!1;case "boolean":return y===u.pattern||y===csString(u.pattern);case "number":return Ot(y)?Number(y)===Number(u.pattern):!1;default:return y===u.pattern}case "starts_with":return $(u.pattern)?csString.prototype.indexOf.call(y,
u.pattern)===0:!1;case "ends_with":return $(u.pattern)?hi(y,u.pattern):!1;case "contains":return $(u.pattern)?csString.prototype.indexOf.call(y,u.pattern)!==-1:!1;case "regex":if(!$(u.pattern))return!1;try{return(new csRegExp(u.pattern)).test(y)}catch(E){return j.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case "simple":return $(u.pattern)?g(y)===g(u.pattern):!1;case "greater_than":return Number(y)>Number(u.pattern);case "less_than":return Number(y)<Number(u.pattern);
case "exact_date":{let E=Number(u.pattern);if(!ee(E))return!1;let v=new csDate(E*1E3);return(new csDate(y)).toDateString()===v.toDateString()}case "exact_days_ago":return a(u,y);case "more_than_days_ago":return c(u,y);case "less_than_days_ago":return l(u,y);case "unknown":return d(y);default:return j.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function a(u,y){let E=new csDate,v=E.setDate(E.getDate()-Number(u.pattern)),I=new csDate(v);return(new csDate(y)).toDateString()===
I.toDateString()}function c(u,y){let E=Number(u.pattern);if(!ee(E))return!1;let v=Number(E)+1,I=new csDate,C=new csDate(I);return C.setDate(I.getDate()-v),(new csDate(y)).getTime()<=C.getTime()}function l(u,y){let E=Number(u.pattern);if(!ee(E))return!1;if(E===0)return a(u,y);let v=new csDate,I=new csDate(v);return I.setDate(v.getDate()-E),(new csDate(y)).getTime()>=I.getTime()}function d(u){return Ot(u)?$(u)?csString.prototype.trim.call(u)==="":Zn(u)?u===!0:ee(u)?u!==0:!1:!0}function g(u){let y=qe(u,
"http://")||qe(u,"https://")?u:`https://${u}`,E=gn(y);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):u}}(s||(s={})),s})(),iy=(()=>{class s{constructor(){this.yg=[],this.Eg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.yg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Eg,e)}matchUrl(t){return ra.isUrlMatching(this.yg,t)}matchTrigger(t){return ra.isMatching(this.Eg,t)}}return s})(),ry=(()=>{class s extends jt{constructor(t,
e,i){super(),this.Ra=t,this.Uh=e,this.A=i}init(){this.jh=new iy,this.Ra&&this.jh.setTargetingRules(this.Ra)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Hh(t,"url")&&this.Uh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Hh(t,"url")&&this.Uh()}onExternalEvent(t){this.isStarted&&this.Hh(t.name,"trigger")&&this.Uh()}Hh(t,e){var i,n;return e==="url"&&$(t)&&(!((i=this.jh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.jh)===
null||n===void 0)&&n.matchTrigger(t)))}}return s})(),ny=(()=>{class s{constructor(t,e,i,n,a,c){this.Ra=t,this.tT=e,this.E=i,this.tt=n,this.Z=a,this.A=c}init(){this.Fn=new ry(this.Ra,this.tT,this.A),this.Z.addListener(this.Fn),this.Fn.init()}start(){this.Fn.start()}stop(){this.Fn.stop()}checkInitialUrlTargetingRules(){this.Fn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.tt.getInitialCollectState();t===P.ANALYTICS_ONLY?this.E.emitCollectStateChange(P.ANALYTICS_ONLY_RULES_TARGETING,
It.ETR_OFF):t===P.RECORDING_GLOBAL_SAMPLING&&this.E.emitCollectStateChange(P.RECORDING_RULES_TARGETING,It.ETR_OFF)}}return s})();var oy=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),ay=(()=>{class s{constructor(){}static init(t){(!this.Bh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Bh=new Map,i){let n=csString.prototype.split.call(i,".");
for(let a=0;a<n.length;a++){let [c,l]=csString.prototype.split.call(n[a],"\x3d");this.Bh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Bh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(oy.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,d=n.value;cy(s.getString("debugLog"),
t)&&(n.value=function(...g){return console.log(l,...g),d.bind(this)(...g)})}}}return s})();function cy(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function na(){function i(o){let p=o.length;for(;--p>=0;)o[p]=0}let n=0,a=1,c=2,l=3,d=258,g=29,u=256,y=u+1+g,E=30,v=19,I=2*y+1,C=15,b=16,w=7,x=256,A=16,k=17,U=18,J=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),lt=new Uint8Array([0,
0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Mt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=512,O=new Array((y+2)*2);i(O);let V=new Array(E*2);i(V);let H=new Array(S);i(H);let tt=new Array(d-l+1);i(tt);let at=new Array(g);i(at);let At=new Array(E);i(At);function pe(o,p,f,m,h){this.static_tree=o,this.extra_bits=p,this.extra_base=f,this.elems=m,this.max_length=h,this.has_stree=o&&o.length}let Ye,
ar,hs;function fe(o,p){this.dyn_tree=o,this.max_code=0,this.stat_desc=p}let Ms=o=>o<256?H[o]:H[256+(o>>>7)],re=(o,p)=>{o.pending_buf[o.pending++]=p&255,o.pending_buf[o.pending++]=p>>>8&255},Et=(o,p,f)=>{o.bi_valid>b-f?(o.bi_buf|=p<<o.bi_valid&65535,re(o,o.bi_buf),o.bi_buf=p>>b-o.bi_valid,o.bi_valid+=f-b):(o.bi_buf|=p<<o.bi_valid&65535,o.bi_valid+=f)},kt=(o,p,f)=>{Et(o,f[p*2],f[p*2+1])},ks=(o,p)=>{let f=0;do f|=o&1,o>>>=1,f<<=1;while(--p>0);return f>>>1},cr=o=>{o.bi_valid===16?(re(o,o.bi_buf),o.bi_buf=
0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},lr=(o,p)=>{let f=p.dyn_tree,m=p.max_code,h=p.stat_desc.static_tree,T=p.stat_desc.has_stree,_=p.stat_desc.extra_bits,R=p.stat_desc.extra_base,Y=p.stat_desc.max_length,B,Vt,Ae,st,Ze,ps,bi=0;for(st=0;st<=C;st++)o.bl_count[st]=0;for(f[o.heap[o.heap_max]*2+1]=0,B=o.heap_max+1;B<I;B++)Vt=o.heap[B],st=f[f[Vt*2+1]*2+1]+1,st>Y&&(st=Y,bi++),f[Vt*2+1]=st,!(Vt>m)&&(o.bl_count[st]++,Ze=0,Vt>=R&&(Ze=_[Vt-R]),ps=
f[Vt*2],o.opt_len+=ps*(st+Ze),T&&(o.static_len+=ps*(h[Vt*2+1]+Ze)));if(bi!==0){do{for(st=Y-1;o.bl_count[st]===0;)st--;o.bl_count[st]--,o.bl_count[st+1]+=2,o.bl_count[Y]--,bi-=2}while(bi>0);for(st=Y;st!==0;st--)for(Vt=o.bl_count[st];Vt!==0;)Ae=o.heap[--B],!(Ae>m)&&(f[Ae*2+1]!==st&&(o.opt_len+=(st-f[Ae*2+1])*f[Ae*2],f[Ae*2+1]=st),Vt--)}},Ds=(o,p,f)=>{let m=new Array(C+1),h=0,T,_;for(T=1;T<=C;T++)m[T]=h=h+f[T-1]<<1;for(_=0;_<=p;_++){let R=o[_*2+1];R!==0&&(o[_*2]=ks(m[R]++,R))}},On=()=>{let o,p,f,m,h,
T=new Array(C+1);for(f=0,m=0;m<g-1;m++)for(at[m]=f,o=0;o<1<<J[m];o++)tt[f++]=m;for(tt[f-1]=m,h=0,m=0;m<16;m++)for(At[m]=h,o=0;o<1<<lt[m];o++)H[h++]=m;for(h>>=7;m<E;m++)for(At[m]=h<<7,o=0;o<1<<lt[m]-7;o++)H[256+h++]=m;for(p=0;p<=C;p++)T[p]=0;for(o=0;o<=143;)O[o*2+1]=8,o++,T[8]++;for(;o<=255;)O[o*2+1]=9,o++,T[9]++;for(;o<=279;)O[o*2+1]=7,o++,T[7]++;for(;o<=287;)O[o*2+1]=8,o++,T[8]++;for(Ds(O,y+1,T),o=0;o<E;o++)V[o*2+1]=5,V[o*2]=ks(o,5);Ye=new pe(O,J,u+1,y,C),ar=new pe(V,lt,0,E,C),hs=new pe(new Array(0),
Mt,0,v,w)},Nn=o=>{let p;for(p=0;p<y;p++)o.dyn_ltree[p*2]=0;for(p=0;p<E;p++)o.dyn_dtree[p*2]=0;for(p=0;p<v;p++)o.bl_tree[p*2]=0;o.dyn_ltree[x*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},Mn=o=>{o.bi_valid>8?re(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},Uc=(o,p,f,m)=>{Mn(o),m&&(re(o,f),re(o,~f)),o.pending_buf.set(o.window.subarray(p,p+f),o.pending),o.pending+=f},kn=(o,p,f,m)=>{let h=p*2,T=f*2;return o[h]<o[T]||o[h]===o[T]&&m[p]<=m[f]},hr=(o,p,f)=>
{let m=o.heap[f],h=f<<1;for(;h<=o.heap_len&&(h<o.heap_len&&kn(p,o.heap[h+1],o.heap[h],o.depth)&&h++,!kn(p,m,o.heap[h],o.depth));)o.heap[f]=o.heap[h],f=h,h<<=1;o.heap[f]=m},Dn=(o,p,f)=>{let m,h,T=0,_,R;if(o.last_lit!==0){do m=o.pending_buf[o.d_buf+T*2]<<8|o.pending_buf[o.d_buf+T*2+1],h=o.pending_buf[o.l_buf+T],T++,m===0?kt(o,h,p):(_=tt[h],kt(o,_+u+1,p),R=J[_],R!==0&&(h-=at[_],Et(o,h,R)),m--,_=Ms(m),kt(o,_,f),R=lt[_],R!==0&&(m-=At[_],Et(o,m,R)));while(T<o.last_lit)}kt(o,x,p)},ur=(o,p)=>{let f=p.dyn_tree,
m=p.stat_desc.static_tree,h=p.stat_desc.has_stree,T=p.stat_desc.elems,_,R,Y=-1,B;for(o.heap_len=0,o.heap_max=I,_=0;_<T;_++)f[_*2]!==0?(o.heap[++o.heap_len]=Y=_,o.depth[_]=0):f[_*2+1]=0;for(;o.heap_len<2;)B=o.heap[++o.heap_len]=Y<2?++Y:0,f[B*2]=1,o.depth[B]=0,o.opt_len--,h&&(o.static_len-=m[B*2+1]);for(p.max_code=Y,_=o.heap_len>>1;_>=1;_--)hr(o,f,_);B=T;do _=o.heap[1],o.heap[1]=o.heap[o.heap_len--],hr(o,f,1),R=o.heap[1],o.heap[--o.heap_max]=_,o.heap[--o.heap_max]=R,f[B*2]=f[_*2]+f[R*2],o.depth[B]=
(o.depth[_]>=o.depth[R]?o.depth[_]:o.depth[R])+1,f[_*2+1]=f[R*2+1]=B,o.heap[1]=B++,hr(o,f,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],lr(o,p),Ds(f,Y,o.bl_count)},Ln=(o,p,f)=>{let m,h=-1,T,_=p[0*2+1],R=0,Y=7,B=4;for(_===0&&(Y=138,B=3),p[(f+1)*2+1]=65535,m=0;m<=f;m++)T=_,_=p[(m+1)*2+1],!(++R<Y&&T===_)&&(R<B?o.bl_tree[T*2]+=R:T!==0?(T!==h&&o.bl_tree[T*2]++,o.bl_tree[A*2]++):R<=10?o.bl_tree[k*2]++:o.bl_tree[U*2]++,R=0,h=T,_===0?(Y=138,B=3):T===_?(Y=6,B=3):(Y=7,B=4))},xn=(o,p,f)=>{let m,h=-1,
T,_=p[0*2+1],R=0,Y=7,B=4;for(_===0&&(Y=138,B=3),m=0;m<=f;m++)if(T=_,_=p[(m+1)*2+1],!(++R<Y&&T===_)){if(R<B){do kt(o,T,o.bl_tree);while(--R!==0)}else T!==0?(T!==h&&(kt(o,T,o.bl_tree),R--),kt(o,A,o.bl_tree),Et(o,R-3,2)):R<=10?(kt(o,k,o.bl_tree),Et(o,R-3,3)):(kt(o,U,o.bl_tree),Et(o,R-11,7));R=0,h=T,_===0?(Y=138,B=3):T===_?(Y=6,B=3):(Y=7,B=4)}},jc=o=>{let p;for(Ln(o,o.dyn_ltree,o.l_desc.max_code),Ln(o,o.dyn_dtree,o.d_desc.max_code),ur(o,o.bl_desc),p=v-1;p>=3&&o.bl_tree[wt[p]*2+1]===0;p--);return o.opt_len+=
3*(p+1)+5+5+4,p},Hc=(o,p,f,m)=>{let h;for(Et(o,p-257,5),Et(o,f-1,5),Et(o,m-4,4),h=0;h<m;h++)Et(o,o.bl_tree[wt[h]*2+1],3);xn(o,o.dyn_ltree,p-1),xn(o,o.dyn_dtree,f-1)},Bc=o=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&o.dyn_ltree[f*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(f=32;f<u;f++)if(o.dyn_ltree[f*2]!==0)return 1;return 0},Vn=!1,Fc=o=>{Vn||(On(),Vn=!0),o.l_desc=new fe(o.dyn_ltree,Ye),o.d_desc=new fe(o.dyn_dtree,ar),o.bl_desc=new fe(o.bl_tree,
hs),o.bi_buf=0,o.bi_valid=0,Nn(o)},Un=(o,p,f,m)=>{Et(o,(n<<1)+(m?1:0),3),Uc(o,p,f,!0)},zc=o=>{Et(o,a<<1,3),kt(o,x,O),cr(o)},$c=(o,p,f,m)=>{let h,T,_=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=Bc(o)),ur(o,o.l_desc),ur(o,o.d_desc),_=jc(o),h=o.opt_len+3+7>>>3,T=o.static_len+3+7>>>3,T<=h&&(h=T)):h=T=f+5,f+4<=h&&p!==-1?Un(o,p,f,m):o.strategy===4||T===h?(Et(o,(a<<1)+(m?1:0),3),Dn(o,O,V)):(Et(o,(c<<1)+(m?1:0),3),Hc(o,o.l_desc.max_code+1,o.d_desc.max_code+1,_+1),Dn(o,o.dyn_ltree,o.dyn_dtree)),Nn(o),
m&&Mn(o)},qc=(o,p,f)=>(o.pending_buf[o.d_buf+o.last_lit*2]=p>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=p&255,o.pending_buf[o.l_buf+o.last_lit]=f&255,o.last_lit++,p===0?o.dyn_ltree[f*2]++:(o.matches++,p--,o.dyn_ltree[(tt[f]+u+1)*2]++,o.dyn_dtree[Ms(p)*2]++),o.last_lit===o.lit_bufsize-1);var Gc=Fc,Wc=Un,Yc=$c,Xc=qc,Kc=zc,Jc={_tr_init:Gc,_tr_stored_block:Wc,_tr_flush_block:Yc,_tr_tally:Xc,_tr_align:Kc},jn=(o,p,f,m)=>{let h=o&65535|0,T=o>>>16&65535|0,_=0;for(;f!==0;){_=f>2E3?2E3:f,f-=_;do h=h+p[m++]|
0,T=T+h|0;while(--_);h%=65521,T%=65521}return h|T<<16|0};let Qc=()=>{let o,p=[];for(var f=0;f<256;f++){o=f;for(var m=0;m<8;m++)o=o&1?3988292384^o>>>1:o>>>1;p[f]=o}return p},Zc=new Uint32Array(Qc());var ge=(o,p,f,m)=>{let h=Zc,T=m+f;o^=-1;for(let _=m;_<T;_++)o=o>>>8^h[(o^p[_])&255];return o^-1},gi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,
Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let {_tr_init:tl,_tr_stored_block:el,_tr_flush_block:sl,_tr_tally:me,_tr_align:il}=Jc,{Z_NO_FLUSH:Xe,Z_PARTIAL_FLUSH:rl,Z_FULL_FLUSH:nl,
Z_FINISH:ye,Z_BLOCK:Bn,Z_OK:Yt,Z_STREAM_END:Fn,Z_STREAM_ERROR:Ht,Z_DATA_ERROR:ol,Z_BUF_ERROR:dr,Z_DEFAULT_COMPRESSION:al,Z_FILTERED:cl,Z_HUFFMAN_ONLY:mi,Z_RLE:ll,Z_FIXED:hl,Z_DEFAULT_STRATEGY:ul,Z_UNKNOWN:dl,Z_DEFLATED:yi}=Hn,pl=9,fl=15,gl=8,pr=256+1+29,ml=30,yl=19,El=2*pr+1,Sl=15,W=3,Ee=258,$t=Ee+W+1,vl=32,Ei=42,fr=69,Si=73,vi=91,_i=103,Ke=113,Ls=666,pt=1,xs=2,Je=3,us=4,_l=3,Se=(o,p)=>(o.msg=gi[p],p),zn=o=>(o<<1)-(o>4?9:0),ve=o=>{let p=o.length;for(;--p>=0;)o[p]=0},_e=(o,p,f)=>(p<<o.hash_shift^f)&
o.hash_mask,we=o=>{let p=o.state,f=p.pending;f>o.avail_out&&(f=o.avail_out),f!==0&&(o.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),o.next_out),o.next_out+=f,p.pending_out+=f,o.total_out+=f,o.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},St=(o,p)=>{sl(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,p),o.block_start=o.strstart,we(o.strm)},Q=(o,p)=>{o.pending_buf[o.pending++]=p},Vs=(o,p)=>{o.pending_buf[o.pending++]=p>>>8&255,o.pending_buf[o.pending++]=
p&255},wl=(o,p,f,m)=>{let h=o.avail_in;return h>m&&(h=m),h===0?0:(o.avail_in-=h,p.set(o.input.subarray(o.next_in,o.next_in+h),f),o.state.wrap===1?o.adler=jn(o.adler,p,h,f):o.state.wrap===2&&(o.adler=ge(o.adler,p,h,f)),o.next_in+=h,o.total_in+=h,h)},$n=(o,p)=>{let f=o.max_chain_length,m=o.strstart,h,T,_=o.prev_length,R=o.nice_match,Y=o.strstart>o.w_size-$t?o.strstart-(o.w_size-$t):0,B=o.window,Vt=o.w_mask,Ae=o.prev,st=o.strstart+Ee,Ze=B[m+_-1],ps=B[m+_];o.prev_length>=o.good_match&&(f>>=2),R>o.lookahead&&
(R=o.lookahead);do if(h=p,!(B[h+_]!==ps||B[h+_-1]!==Ze||B[h]!==B[m]||B[++h]!==B[m+1])){m+=2,h++;do;while(B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&B[++m]===B[++h]&&m<st);if(T=Ee-(st-m),m=st-Ee,T>_){if(o.match_start=p,_=T,T>=R)break;Ze=B[m+_-1],ps=B[m+_]}}while((p=Ae[p&Vt])>Y&&--f!==0);return _<=o.lookahead?_:o.lookahead},Qe=o=>{let p=o.w_size,f,m,h,T,_;do{if(T=o.window_size-o.lookahead-o.strstart,o.strstart>=p+(p-$t)){o.window.set(o.window.subarray(p,
p+p),0),o.match_start-=p,o.strstart-=p,o.block_start-=p,m=o.hash_size,f=m;do h=o.head[--f],o.head[f]=h>=p?h-p:0;while(--m);m=p,f=m;do h=o.prev[--f],o.prev[f]=h>=p?h-p:0;while(--m);T+=p}if(o.strm.avail_in===0)break;if(m=wl(o.strm,o.window,o.strstart+o.lookahead,T),o.lookahead+=m,o.lookahead+o.insert>=W)for(_=o.strstart-o.insert,o.ins_h=o.window[_],o.ins_h=_e(o,o.ins_h,o.window[_+1]);o.insert&&(o.ins_h=_e(o,o.ins_h,o.window[_+W-1]),o.prev[_&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=_,_++,o.insert--,
!(o.lookahead+o.insert<W)););}while(o.lookahead<$t&&o.strm.avail_in!==0)},Al=(o,p)=>{let f=65535;for(f>o.pending_buf_size-5&&(f=o.pending_buf_size-5);;){if(o.lookahead<=1){if(Qe(o),o.lookahead===0&&p===Xe)return pt;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let m=o.block_start+f;if((o.strstart===0||o.strstart>=m)&&(o.lookahead=o.strstart-m,o.strstart=m,St(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-$t&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=
0,p===ye?(St(o,!0),o.strm.avail_out===0?Je:us):(o.strstart>o.block_start&&(St(o,!1),o.strm.avail_out===0),pt)},gr=(o,p)=>{let f,m;for(;;){if(o.lookahead<$t){if(Qe(o),o.lookahead<$t&&p===Xe)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=W&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+W-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),f!==0&&o.strstart-f<=o.w_size-$t&&(o.match_length=$n(o,f)),o.match_length>=W)if(m=me(o,o.strstart-o.match_start,o.match_length-W),o.lookahead-=
o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=W){o.match_length--;do o.strstart++,o.ins_h=_e(o,o.ins_h,o.window[o.strstart+W-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=_e(o,o.ins_h,o.window[o.strstart+1]);else m=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(m&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=
o.strstart<W-1?o.strstart:W-1,p===ye?(St(o,!0),o.strm.avail_out===0?Je:us):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:xs},ds=(o,p)=>{let f,m,h;for(;;){if(o.lookahead<$t){if(Qe(o),o.lookahead<$t&&p===Xe)return pt;if(o.lookahead===0)break}if(f=0,o.lookahead>=W&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+W-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=W-1,f!==0&&o.prev_length<o.max_lazy_match&&o.strstart-
f<=o.w_size-$t&&(o.match_length=$n(o,f),o.match_length<=5&&(o.strategy===cl||o.match_length===W&&o.strstart-o.match_start>4096)&&(o.match_length=W-1)),o.prev_length>=W&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-W,m=me(o,o.strstart-1-o.prev_match,o.prev_length-W),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=_e(o,o.ins_h,o.window[o.strstart+W-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=
0,o.match_length=W-1,o.strstart++,m&&(St(o,!1),o.strm.avail_out===0))return pt}else if(o.match_available){if(m=me(o,0,o.window[o.strstart-1]),m&&St(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return pt}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(m=me(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<W-1?o.strstart:W-1,p===ye?(St(o,!0),o.strm.avail_out===0?Je:us):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:xs},bl=(o,p)=>{let f,m,h,
T,_=o.window;for(;;){if(o.lookahead<=Ee){if(Qe(o),o.lookahead<=Ee&&p===Xe)return pt;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=W&&o.strstart>0&&(h=o.strstart-1,m=_[h],m===_[++h]&&m===_[++h]&&m===_[++h])){T=o.strstart+Ee;do;while(m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&m===_[++h]&&h<T);o.match_length=Ee-(T-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=W?(f=me(o,1,o.match_length-W),o.lookahead-=o.match_length,
o.strstart+=o.match_length,o.match_length=0):(f=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),f&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,p===ye?(St(o,!0),o.strm.avail_out===0?Je:us):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:xs},Tl=(o,p)=>{let f;for(;;){if(o.lookahead===0&&(Qe(o),o.lookahead===0)){if(p===Xe)return pt;break}if(o.match_length=0,f=me(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,f&&(St(o,!1),o.strm.avail_out===0))return pt}return o.insert=0,
p===ye?(St(o,!0),o.strm.avail_out===0?Je:us):o.last_lit&&(St(o,!1),o.strm.avail_out===0)?pt:xs};function Xt(o,p,f,m,h){this.good_length=o,this.max_lazy=p,this.nice_length=f,this.max_chain=m,this.func=h}let Us=[new Xt(0,0,0,0,Al),new Xt(4,4,8,4,gr),new Xt(4,5,16,8,gr),new Xt(4,6,32,32,gr),new Xt(4,4,16,16,ds),new Xt(8,16,32,32,ds),new Xt(8,16,128,128,ds),new Xt(8,32,128,256,ds),new Xt(32,128,258,1024,ds),new Xt(32,258,258,4096,ds)],Rl=o=>{o.window_size=2*o.w_size,ve(o.head),o.max_lazy_match=Us[o.level].max_lazy,
o.good_match=Us[o.level].good_length,o.nice_match=Us[o.level].nice_length,o.max_chain_length=Us[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=W-1,o.match_available=0,o.ins_h=0};function Il(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=
0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(El*2),this.dyn_dtree=new Uint16Array((2*ml+1)*2),this.bl_tree=new Uint16Array((2*yl+1)*2),ve(this.dyn_ltree),
ve(this.dyn_dtree),ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Sl+1),this.heap=new Uint16Array(2*pr+1),ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*pr+1),ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let qn=o=>{if(!o||!o.state)return Se(o,Ht);o.total_in=o.total_out=0,o.data_type=dl;let p=o.state;
return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Ei:Ke,o.adler=p.wrap===2?0:1,p.last_flush=Xe,tl(p),Yt},Gn=o=>{let p=qn(o);return p===Yt&&Rl(o.state),p},Cl=(o,p)=>!o||!o.state||o.state.wrap!==2?Ht:(o.state.gzhead=p,Yt),Wn=(o,p,f,m,h,T)=>{if(!o)return Ht;let _=1;if(p===al&&(p=6),m<0?(_=0,m=-m):m>15&&(_=2,m-=16),h<1||h>pl||f!==yi||m<8||m>15||p<0||p>9||T<0||T>hl)return Se(o,Ht);m===8&&(m=9);let R=new Il;return o.state=R,R.strm=o,R.wrap=_,R.gzhead=null,R.w_bits=m,R.w_size=
1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=h+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+W-1)/W),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<h+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=p,R.strategy=T,R.method=f,Gn(o)},Pl=(o,p)=>Wn(o,p,yi,fl,gl,ul),Ol=(o,p)=>{let f,m;if(!o||!o.state||
p>Bn||p<0)return o?Se(o,Ht):Ht;let h=o.state;if(!o.output||!o.input&&o.avail_in!==0||h.status===Ls&&p!==ye)return Se(o,o.avail_out===0?dr:Ht);h.strm=o;let T=h.last_flush;if(h.last_flush=p,h.status===Ei)if(h.wrap===2)o.adler=0,Q(h,31),Q(h,139),Q(h,8),h.gzhead?(Q(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),Q(h,h.gzhead.time&255),Q(h,h.gzhead.time>>8&255),Q(h,h.gzhead.time>>16&255),Q(h,h.gzhead.time>>24&255),Q(h,h.level===9?2:h.strategy>=
mi||h.level<2?4:0),Q(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(Q(h,h.gzhead.extra.length&255),Q(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(o.adler=ge(o.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=fr):(Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,0),Q(h,h.level===9?2:h.strategy>=mi||h.level<2?4:0),Q(h,_l),h.status=Ke);else{let _=yi+(h.w_bits-8<<4)<<8,R=-1;h.strategy>=mi||h.level<2?R=0:h.level<6?R=1:h.level===6?R=2:R=3,_|=R<<6,h.strstart!==0&&(_|=vl),_+=31-_%31,h.status=Ke,Vs(h,
_),h.strstart!==0&&(Vs(h,o.adler>>>16),Vs(h,o.adler&65535)),o.adler=1}if(h.status===fr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size));)Q(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,
h.status=Si)}else h.status=Si;if(h.status===Si)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.name.length?m=h.gzhead.name.charCodeAt(h.gzindex++)&255:m=0,Q(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.gzindex=0,h.status=vi)}else h.status=vi;if(h.status===vi)if(h.gzhead.comment){f=
h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),we(o),f=h.pending,h.pending===h.pending_buf_size)){m=1;break}h.gzindex<h.gzhead.comment.length?m=h.gzhead.comment.charCodeAt(h.gzindex++)&255:m=0,Q(h,m)}while(m!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=ge(o.adler,h.pending_buf,h.pending-f,f)),m===0&&(h.status=_i)}else h.status=_i;if(h.status===_i&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&we(o),h.pending+2<=h.pending_buf_size&&
(Q(h,o.adler&255),Q(h,o.adler>>8&255),o.adler=0,h.status=Ke)):h.status=Ke),h.pending!==0){if(we(o),o.avail_out===0)return h.last_flush=-1,Yt}else if(o.avail_in===0&&zn(p)<=zn(T)&&p!==ye)return Se(o,dr);if(h.status===Ls&&o.avail_in!==0)return Se(o,dr);if(o.avail_in!==0||h.lookahead!==0||p!==Xe&&h.status!==Ls){let _=h.strategy===mi?Tl(h,p):h.strategy===ll?bl(h,p):Us[h.level].func(h,p);if((_===Je||_===us)&&(h.status=Ls),_===pt||_===Je)return o.avail_out===0&&(h.last_flush=-1),Yt;if(_===xs&&(p===rl?il(h):
p!==Bn&&(el(h,0,0,!1),p===nl&&(ve(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),we(o),o.avail_out===0))return h.last_flush=-1,Yt}return p!==ye?Yt:h.wrap<=0?Fn:(h.wrap===2?(Q(h,o.adler&255),Q(h,o.adler>>8&255),Q(h,o.adler>>16&255),Q(h,o.adler>>24&255),Q(h,o.total_in&255),Q(h,o.total_in>>8&255),Q(h,o.total_in>>16&255),Q(h,o.total_in>>24&255)):(Vs(h,o.adler>>>16),Vs(h,o.adler&65535)),we(o),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Yt:Fn)},Nl=o=>{if(!o||!o.state)return Ht;let p=
o.state.status;return p!==Ei&&p!==fr&&p!==Si&&p!==vi&&p!==_i&&p!==Ke&&p!==Ls?Se(o,Ht):(o.state=null,p===Ke?Se(o,ol):Yt)},Ml=(o,p)=>{let f=p.length;if(!o||!o.state)return Ht;let m=o.state,h=m.wrap;if(h===2||h===1&&m.status!==Ei||m.lookahead)return Ht;if(h===1&&(o.adler=jn(o.adler,p,f,0)),m.wrap=0,f>=m.w_size){h===0&&(ve(m.head),m.strstart=0,m.block_start=0,m.insert=0);let Y=new Uint8Array(m.w_size);Y.set(p.subarray(f-m.w_size,f),0),p=Y,f=m.w_size}let T=o.avail_in,_=o.next_in,R=o.input;for(o.avail_in=
f,o.next_in=0,o.input=p,Qe(m);m.lookahead>=W;){let Y=m.strstart,B=m.lookahead-(W-1);do m.ins_h=_e(m,m.ins_h,m.window[Y+W-1]),m.prev[Y&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Y,Y++;while(--B);m.strstart=Y,m.lookahead=W-1,Qe(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=W-1,m.match_available=0,o.next_in=_,o.input=R,o.avail_in=T,m.wrap=h,Yt};var kl=Pl,Dl=Wn,Ll=Gn,xl=qn,Vl=Cl,Ul=Ol,jl=Nl,Hl=Ml,Bl="pako deflate (from Nodeca project)",
js={deflateInit:kl,deflateInit2:Dl,deflateReset:Ll,deflateResetKeep:xl,deflateSetHeader:Vl,deflate:Ul,deflateEnd:jl,deflateSetDictionary:Hl,deflateInfo:Bl};let Fl=(o,p)=>Object.prototype.hasOwnProperty.call(o,p);var zl=function(o){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let m in f)Fl(f,m)&&(o[m]=f[m])}}return o},$l=o=>{let p=0;for(let m=0,h=o.length;m<h;m++)p+=o[m].length;let f=new Uint8Array(p);
for(let m=0,h=0,T=o.length;m<T;m++){let _=o[m];f.set(_,h),h+=_.length}return f},Yn={assign:zl,flattenChunks:$l};let Xn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xn=!1}let Hs=new Uint8Array(256);for(let o=0;o<256;o++)Hs[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;Hs[254]=Hs[254]=1;var ql=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return(new TextEncoder).encode(o);let p,f,m,h,T,_=o.length,R=0;for(h=0;h<_;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+
1<_&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),R+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(R),T=0,h=0;T<R;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<_&&(m=o.charCodeAt(h+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),h++)),f<128?p[T++]=f:f<2048?(p[T++]=192|f>>>6,p[T++]=128|f&63):f<65536?(p[T++]=224|f>>>12,p[T++]=128|f>>>6&63,p[T++]=128|f&63):(p[T++]=240|f>>>18,p[T++]=128|f>>>12&63,p[T++]=128|f>>>6&63,p[T++]=128|f&63);return p};let Kn=(o,p=o.length)=>
{if(p<65534&&o.subarray&&Xn)return String.fromCharCode.apply(null,o.length===p?o:o.subarray(0,p));let f="";for(let m=0;m<p;m++)f+=String.fromCharCode(o[m]);return f};var Gl=(o,p)=>{let f=p||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return(new TextDecoder).decode(o.subarray(0,p));let m,h,T=new Array(f*2);for(h=0,m=0;m<f;){let _=o[m++];if(_<128){T[h++]=_;continue}let R=Hs[_];if(R>4){T[h++]=65533,m+=R-1;continue}for(_&=R===2?31:R===3?15:7;R>1&&m<f;)_=_<<6|o[m++]&63,R--;
if(R>1){T[h++]=65533;continue}_<65536?T[h++]=_:(_-=65536,T[h++]=55296|_>>10&1023,T[h++]=56320|_&1023)}return Kn(T,h)},Wl=(o,p)=>{p=p||o.length,p>o.length&&(p=o.length);let f=p-1;for(;f>=0&&(o[f]&192)===128;)f--;return f<0||f===0?p:f+Hs[o[f]]>p?f:p},Jn={string2buf:ql,buf2string:Gl,utf8border:Wl};function Yl(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Xl=
Yl;let Qn=Object.prototype.toString,{Z_NO_FLUSH:Kl,Z_SYNC_FLUSH:Jl,Z_FULL_FLUSH:Ql,Z_FINISH:Zl,Z_OK:wi,Z_STREAM_END:th,Z_DEFAULT_COMPRESSION:eh,Z_DEFAULT_STRATEGY:sh,Z_DEFLATED:ih}=Hn;function Ai(o){this.options=Yn.assign({level:eh,method:ih,chunkSize:16384,windowBits:15,memLevel:8,strategy:sh},o||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Xl,this.strm.avail_out=
0;let f=js.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==wi)throw new Error(gi[f]);if(p.header&&js.deflateSetHeader(this.strm,p.header),p.dictionary){let m;if(typeof p.dictionary=="string"?m=Jn.string2buf(p.dictionary):Qn.call(p.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(p.dictionary):m=p.dictionary,f=js.deflateSetDictionary(this.strm,m),f!==wi)throw new Error(gi[f]);this._dict_set=!0}}Ai.prototype.push=function(o,p){let f=this.strm,m=this.options.chunkSize,
h,T;if(this.ended)return!1;for(p===~~p?T=p:T=p===!0?Zl:Kl,typeof o=="string"?f.input=Jn.string2buf(o):Qn.call(o)==="[object ArrayBuffer]"?f.input=new Uint8Array(o):f.input=o,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(m),f.next_out=0,f.avail_out=m),(T===Jl||T===Ql)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=js.deflate(f,T),h===th)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=js.deflateEnd(this.strm),
this.onEnd(h),this.ended=!0,h===wi;if(f.avail_out===0){this.onData(f.output);continue}if(T>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Ai.prototype.onData=function(o){this.chunks.push(o)},Ai.prototype.onEnd=function(o){o===wi&&(this.result=Yn.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function rh(o,p){p=p||{};let f=new Ai(p);if(f.push(o,!0),f.err)throw f.msg||gi[f.err];return f.result}function nh(o,
p){return p=p||{},p.gzip=!0,rh(o,p)}return(o,p,f)=>{let m=nh(o);return p==="base64"?m=btoa(Kn(m)):m=m.buffer,f&&f(m),m}}var ly=(()=>{class s extends Ua{constructor(t){super(t),this.algorithm=Zi.GZIP,this._g=na(),this.sT=(i,n,a)=>{let c=this._g(i,n);a(c)},this.compress=oa(),typeof CompressionStream!="undefined"&&Od||(this.compress=this.sT,this.getCompressorSourceCode=()=>na.toString())}compressSync(t,e){return this._g(t,e)}getCompressorSourceCode(){return oa.toString()}}return s})();function oa(){let s=
r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=(new Response(r)).body.pipeThrough(new CompressionStream("gzip")),n=(new Response(i)).arrayBuffer();if(t==="base64"){n.then(a=>s(a)).then(a=>e(a));return}n.then(a=>e(a))}}var hy=(()=>{class s extends Ua{constructor(){super(...arguments),this.algorithm=Zi.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,
e,i)=>i(t)}.toString()}}return s})(),Mc=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!ay.isCompressionEnabled()?new hy(t):this.instance=new ly(t)}}return s})();var uy=(()=>{class s{constructor(t,e,i,n,a,c,l,d,g,u,y,E,v,I,C,b,w,x,A,k,U,J,lt,Mt,wt,S,O,V,H){this.et=t,this.ae=e,this.R=i,this.w=n,this.E=a,this.f=c,this.zh=l,this.h=d,this.$h=g,this.Xs=u,this.$n=y,this.ue=E,this.C=v,this.W=I,this.J=C,this.A=b,this.cT=w,this.Z=x,this.at=A,this.vt=k,this.Ag=U,this.te=J,this.lT=
lt,this.I=Mt,this.Mt=wt,this.M=S,this.Ft=O,this.tt=V,this.gt=H,this.hT=(tt=!1)=>{let at=this.w.getSession();at===null?(this._r=new ny(this.h.recordTargetingRules,this.bg,this.E,this.tt,this.Z,this.A),this._r.init(),this._r.start()):(at.collectState===P.RECORDING_RULES_TARGETING||at.collectState===P.ANALYTICS_ONLY_RULES_TARGETING)&&this.bg(tt)},this.bg=(tt=!1)=>{this.wr.onLoad(()=>{var at,At;(at=this._r)===null||at===void 0||at.emitTargetingCollectState(),(At=this._r)===null||At===void 0||At.stop(),
this.E.emitStartTracking(tt)}),this.Oa(tt)},this.Oa=(tt=!1)=>{this.Xs.isActive()||(this.gt.init(),this.qh.start(tt),this.wr.start())},this.uT=()=>{this.E.emitBeforeSessionRenewal(),this.Ar(!0),this.E.emitAfterSessionRenewal()},this.dT=()=>{this.E.emitBeforeSessionRenewal(),this.tt.refreshQuota(),this.tt.onQuotaReady(tt=>{tt!==P.QUOTA_REACHED&&(this.Ar(!0),this.E.emitAfterSessionRenewal())})}}start(){var t;if(this.$h.init(),this.Xs.init(),this.Xs.isActive())return;let e,i,n,a,c,l,d,g,u,y,E,v,I,C,b,
w,x,A,k,U;this.I.schedule(()=>{I=new Cm(this.w,this.R),w=new Fm(I),v=new ym(this.W),C=new Gm(()=>{}),x=new Wm,U=new Ym;let J=new sy(C,this.gt,x,k,U,this.Gh());b=new Qm(this.Gh(),this.gt,J,x,A);let lt=new ey(this.E,this.f,this.gt,J,x,A,k);lt.init(),this.E.addListener(lt),e=new rm(this.h,this.et,this.R,this.W,v,this.f,I,new Vm(j),this.at,this.Mt,this.Z,b),i=new yg(this.f,this.w,this.h,this.et,this.ae,this.C),E=new Hm(b);let Mt=new xm(this.h);y=new Lm(this.h,Mt,E,b,this.at),y.init();let wt=new Bm;n=
new ug(this.R,this.w,this.f,this.at,Mt,this.h,wt,E),a=new Tg(this.h,this.et,this.R,this.f,this.C,I,this.A);let S;this.qh=new mm(this.h,this.f,this.E,this.et,this.R,this.w,this.ue,this.vt,this.J,this.A,this.te,wt,this.Z,this.qs,S),this.Tg=new Tm(this.h,this.R,this.w,this.f),d=new Mm(this.h,this.f,this.ae,this.et,this.Z),g=new Dm(this.f),u=new jm(this.h,new Da(this.h,this.C),this.Mt),this.wr=new Em}),this.I.schedule(()=>{this.$n.init()}),this.I.schedule(()=>{n.init()}),this.I.schedule(()=>{i.init()}),
this.I.schedule(()=>{a.init()}),this.I.schedule(()=>{this.Ag.init()}),this.I.schedule(()=>{this.qh.init()}),this.I.schedule(()=>{this.Tg.init()}),this.I.schedule(()=>{d.init()}),this.I.schedule(()=>{this.cT.init()}),this.I.schedule(()=>{g.init()}),this.I.schedule(()=>{u.init()}),this.I.schedule(()=>{this.lT.init()}),this.I.schedule(()=>{this.E.addListener(this.Tg),this.E.addListener(this.zh),this.E.addListener(e),this.E.addListener(this.$n),this.E.addListener(n),this.E.addListener(a),this.E.addListener(this.Ag),
this.E.addListener(this.qh),this.E.addListener(d),this.E.addListener(i),this.E.addListener(y),this.E.addListener(u),this.E.addListener(w)}),ni.isRecordingSupported()&&this.I.schedule(()=>{let J=new Zf(E,this.w,this.h,this.et,this.f,this.C,I,C,this.xe,this.ut,this.Ie,this.ft,this.E,this.Z,this.at,this.te,this.Mt,this.J,this.Vr,this.Gh(),this.cr,A);J.init(),this.E.addListener(J),n.setRecordingService(J.recordingService)}),this.I.schedule(()=>{e.init()}),this.I.schedule(()=>{this.h.isQuotaEnabled()?
I.onSessionExpired(()=>{this.dT()}):I.onSessionExpired(()=>{this.uT()}),this.Ar()})}Ar(t=!1){var e;if(this.h.hasTargetingRules()){this.hT(t),this.f.start(),this._r&&this._r.checkInitialUrlTargetingRules();return}this.f.start(),this.wr.onLoad(()=>{this.E.emitStartTracking(t)}),(!Cc(this.h)||t)&&this.Oa(t)}Gh(){if(this.nt)return this.nt;let t=new qm;return this.nt=new $m(this.ue,this.h,this.A,t),this.nt.init(),this.nt.shouldUseAnonymization()&&ut.counters.pageAnonymisation.count("anonymized-on-start"),
this.nt}}return s})(),dy=(()=>{class s{constructor(t,e,i,n,a,c,l,d){this.h=t,this.R=e,this.Ge=i,this.Rg=n,this.pT=a,this.fT=c,this.gT=l,this.Wh=d}compute(t){var e,i;this.h.crossDomainTracking&&!this.h.cookielessTrackingEnabled?this.h.crossDomainSingleIframeTracking?(e=this.gT)===null||e===void 0||e.start(()=>this.Yh(t)):(i=this.fT)===null||i===void 0||i.applyUpToDate(()=>this.Yh(t)):this.Yh(t)}Yh(t){this.pT.handle(),this.Rg.clear(),this.mT()?(this.Rg.restoreClearedVisitor(),t(!0)):(this.Ge.exclude(this.h),
t(!1))}mT(){let t=As.boolean(this.h.sampleRate);return this.Wh.isForceIncluded()||!this.Ge.isExcluded()&&this.R.doesVisitorExist()||!this.Ge.isExcluded()&&t}}return s})(),py=(()=>{class s{constructor(t,e,i,n){this.h=t,this.it=e,this.E=i,this.w=n,this.yT=10*1E3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.ET(),(t=this.w)===null||t===void 0||t.removeSession()),this.ST(e),this.setVisitor(e)}ET(){return{id:zm.generate(),visitsCount:0,appliedTrackingDraw:this.h.lastTrackingDraw,
creationTimestamp:co(),lastVisitTimestamp:0,hitTimestamp:0,expires:D.now()+this.h.visitorCookieTimeout,allowSubdomains:this.h.allowSubdomains,identityPrint:null}}ST(t){let e=co();this.w&&!this.w.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.h.lastTrackingDraw,this.Ig=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.it.get()}setVisitor(t){this.it.set(t)}doesVisitorExist(){return this.it.get()!==
null}resetVisitor(){this.Cg(),this.E.emitAfterVisitorCleared()}removeVisitor(){this.it.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.h.allowSubdomains:!1}handleSubdomainChange(){this.it.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Ig===void 0?!1:t.visitsCount!==this.Ig}vT(){return!Z(this.Pg)||D.now()-this.Pg>this.yT}renewVisitor(){this.vT()?(this.Pg=D.now(),this.Cg(),this.E.emitAfterVisitorRenewal()):j.warn("session:start:newVisitor is trying to renew visitor under time limit")}Cg(){this.E.emitBeforeVisitorRenewal(),
this.removeVisitor()}}return s})(),qt="_cs_s",Ui=18E5,Lr=".",fy=13,Mi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),gy=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i,this.Qt=null,this.Xh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?za(e):null}getRawSession(t){if(t){let g=this.Kh();return Wr(g)}let {sessionString:e,status:i}=this._T(),n=Wr(e);if(i!==Mi.EXPIRED)return n;if(this.h.cookielessTrackingEnabled)return null;
let a=this.Kh();if(!a)return null;let c=csString.prototype.split.call(a,Lr);if(!s.Og(c))return a;let l=c[c.length-1],d=parseInt(l,10);return isNaN(d)||this.wT(d),n}onCookieToSet(t){this.oi=t}onCookieToRemove(t){this.ai=t}set(t,e=Ui){var i;let n=D.now()+e,a=ad(t);a+=`${Lr}${n}`,this.AT(a,n),this.h.cookielessTrackingEnabled?this.Xt.setItem(qt,a):(this.M.set(qt,a,e),(i=this.oi)===null||i===void 0||i.call(this,qt,a,e))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(qt):(this.M.delete(qt),
(t=this.ai)===null||t===void 0||t.call(this,qt)),this.bT()}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.h.allowSubdomains?this.M.delete(qt,Qi.CURRENT_DOMAIN):this.M.delete(qt,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&yn(t)}AT(t,e){this.Qt={sessionString:t,expires:e}}_T(){return this.Qt?this.Qt&&D.now()<=this.Qt.expires?{sessionString:this.Qt.sessionString,status:Mi.FOUND}:{sessionString:this.Qt.sessionString,status:Mi.EXPIRED}:
{sessionString:this.Kh(),status:Mi.NOT_FOUND}}bT(){this.Qt=null}wT(t){this.Qt&&(this.Qt.expires=t,this.Xh=!0)}isCacheRefreshed(){return this.Xh}resetCacheRefreshed(){this.Xh=!1}Kh(){if(this.h.cookielessTrackingEnabled){let e=this.Xt.getItem(qt);return!e||this.Ng(e)?null:e}let t=this.M.get(qt);return!t||this.Ng(t)?null:t}Ng(t){let e=csString.prototype.split.call(t,Lr);if(!s.Og(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&D.now()>i}static Og(t){return t[t.length-1].length===fy}}return s})(),
Cn=60*1E3,my=60*Cn,yy=4*my-Cn,ms=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),Ey=(()=>{class s{constructor(t,e){this.fe=t,this.tt=e,this.qn=null,this.Jh=0,this.Gn=ms.NO}setDynamicVariablesService(t){this.TT=t}createOrUpdateSession(){this.Qh(),this.RT=D.now(),this.Jh=0;let t=this.Mg();t===null?(t=this.IT(),this.kg(t),this.Na(t)):(t=this.tt.sanitizeSessionCollectState(t),this.kg(t),t.collectState=this.tt.getEligibleCollectState(t)),
this.setSession(t)}grantReplayRecording(t){t.collectState=this.tt.getInitialCollectState(),t.collectState=this.tt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Gn=ms.GRANTED}withdrawnReplayRecording(t){t.collectState=this.tt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Gn=ms.WITHDRAWN}Na(t){this.Gn===ms.WITHDRAWN?(t.collectState=this.tt.getRecordingConsentWithdrawn(),
this.setSession(t)):this.Gn===ms.GRANTED?t.collectState=this.tt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.tt.computeInitialCollectState(t),this.Gn=ms.NO}IT(){return{pageNumber:0,collectState:this.tt.getInitialCollectState(),etrState:It.ETR_OFF,etrStatus:Tt.ETR_NOT_SAVED_SESSION}}kg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.tt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===
P.RECORDING_TEMPORARILY}abortQuotaServiceRequest(){this.tt.abortQuotaServiceRequest()}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.fe.get()}Mg(){return this.fe.get(!0)}doesSessionExist(){return this.fe.get()!==null}setSession(t){this.fe.set(t)}refreshSession(){let t=this.Mg();t&&this.setSession(t)}removeSession(){this.fe.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==P.ANALYTICS_ONLY&&
csArray.prototype.push.call(e,t.collectState===P.RECORDING_RULES_TARGETING?P.RECORDING_GLOBAL_SAMPLING:t.collectState),t.etrState===It.ETR_ON&&csArray.prototype.push.call(e,P.RECORDING_ETR_SAMPLING)),e}updateCollectState(t,e){let i=this.getSession();i!==null&&(i.collectState=t,i.etrState=e,this.setSession(i))}hasValidSession(){let t=this.fe.getRawSession();return this.fe.isValid(t)}handleSubdomainChange(){this.fe.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.fe.isCacheRefreshed();
return e&&t&&this.fe.resetCacheRefreshed(),e}extendSessionPeriodically(){this.qn||this.Dg()}extendSession(){let t=this.getSession();return t===null?(j.warn("extendSession is trying to extend an expired session"),this.Qh(),!1):(this.fe.set(t,Ui),!0)}Dg(){if(this.CT()){this.Qh();return}this.extendSession()&&(this.PT(),this.OT())}OT(){this.qn=window.csSetTimeout(()=>{this.Dg()},Ui-Cn)}CT(){return yy-(D.now()+Ui-this.RT)<0}Qh(){this.qn&&(window.csClearTimeout(this.qn),this.qn=null)}PT(){this.Jh+=1,this.TT.trackDynamicVariable("session_expiry_update",
this.Jh)}}return s})(),Sy=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.Ge=i}clear(){this.NT()&&(this.Lg=this.R.getVisitor(),this.R.removeVisitor()),this.MT()&&this.Ge.removeExclusion()}NT(){return this.R.doesVisitorExist()&&this.R.getVisitor().appliedTrackingDraw!==this.h.lastTrackingDraw}MT(){return this.Ge.getAppliedTrackingDraw()!==this.h.lastTrackingDraw}restoreClearedVisitor(){this.Lg&&this.R.setVisitor(this.Lg)}}return s})(),vy=(()=>{class s{constructor(t,e,i){this.R=t,this.w=e,this.kT=
i}handle(){this.R.hasAllowSubdomainsChanged()&&(this.R.handleSubdomainChange(),this.w.handleSubdomainChange(),this.kT.handleSubdomainChange())}}return s})(),Pe="_cs_c",es=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),_y=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Ft.getItem(Pe):t=this.M.get(Pe),
t===null?t:Number(t)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(Pe,csString(t)):this.M.set(Pe,csString(t),un)}remove(){this.h.cookielessTrackingEnabled?this.Ft.removeItem(Pe):this.M.delete(Pe)}handleSubdomainChange(){this.h.cookielessTrackingEnabled||(this.h.allowSubdomains?this.M.delete(Pe,Qi.CURRENT_DOMAIN):this.M.delete(Pe,this.M.getRootDomain()))}}return s})(),wy=(()=>{class s{constructor(t,e,i){this.h=t,this.w=e,this.E=i}grantReplayConsent(){if(!Ve.isReplayConsentNeeded(this.h))return;
let t=this.w.getSession();if(!t){this.w.grantReplayRecordingBeforeSessionStart();return}Ve.isRecordingBlockedByConsent(t)&&(this.w.grantReplayRecording(t),this.E.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ve.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.withdrawnReplayRecordingBeforeSessionStart();return}Ve.isRecordingWithDrawn(t)||(this.w.withdrawnReplayRecording(t),this.E.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),Ay=["replay:consent:unanonymized:granted",
"trackConsentGranted"],by=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Ty=["replay:consent:startForSession:granted"],Ry=["replay:consent:startForSession:withdrawn"],Iy=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.f=e,this.ue=i,this.w=n,this.E=a}init(){this.xg=new wy(this.h,this.w,this.E),this.ue.setInitialConsent(),this.ot()}ot(){this.f.register(Ay,()=>{this.ue.grantReplayAnonymizationConsent()}),this.f.register(by,()=>{this.ue.withdrawReplayAnonymizationConsent()}),this.f.register(Ty,
()=>{this.xg.grantReplayConsent()}),this.f.register(Ry,()=>{this.xg.withdrawReplayConsent()})}onOptout(){this.ue.removeAllConsents()}onBeforeVisitorRenewal(){this.ue.removeAllConsents()}onAfterVisitorRenewal(){this.ue.setInitialConsent()}onAfterVisitorCleared(){this.ue.setInitialConsent()}}return s})(),Cy=(()=>{class s{constructor(t,e,i){this.h=t,this.it=e,this.E=i}setInitialConsent(){let t=this.it.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=
this.h.consentRequired;return e&&t===es.NOT_REQUIRED||!e&&t!==es.NOT_REQUIRED}handleSubdomainChange(){this.it.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.h.consentRequired?es.NOT_EXPRESSED:es.NOT_REQUIRED;this.it.set(t)}grantReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(es.GRANTED),this.E.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(es.WITHDRAWN),this.E.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.it.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired||
this.it.get()===es.GRANTED}getRequestParameters(){return{uc:`${this.it.get()}`}}}return s})(),Py=(()=>{class s{constructor(t,e,i,n,a,c,l){this.E=t,this.f=e,this.zh=i,this.$h=n,this.Xs=a,this.DT=c,this.$n=l}start(){this.E.addListener(this.DT),this.E.addListener(this.$n),this.E.addListener(this.zh),this.$n.init(),this.$h.init(),this.Xs.init(),!this.Xs.isActive()&&this.f.start()}}return s})(),Oy=(()=>{class s{constructor(t,e){this.Tt=t,this.it=e}exclude(t){this.it.set(csString(t.lastTrackingDraw))}removeExclusion(){this.it.remove()}isExcluded(){return this.LT()||
this.xT()}LT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.it.get()}xT(){return csString.prototype.indexOf.call(this.Tt.href,ne)>0}}return s})(),Ny=(()=>{class s{constructor(t){this.Ke=t}onOptout(){this.Ke.removeExclusion()}}return s})(),xr=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),My=".^",ky=".*",Dy=(()=>{class s{constructor(t){this.A=t,this.Zh=new csRegExp(`${My}`)}setExcludeUrlForSessionReplay(t){try{this.Zh=new csRegExp(t)}catch{j.warn(`excludeURLforReplay - invalid regex '${t}'`),
this.Zh=new csRegExp(`${ky}`)}}Vg(){return this.Zh.test(this.A.getAnonymizedUrl())?xr.SessionReplay:xr.None}isUrlExcludedForSessionReplay(){return this.Vg()===xr.SessionReplay}getRequestParameters(){return{ex:this.Vg()}}}return s})(),Ly=["excludeURLforReplay"],xy=(()=>{class s{constructor(t,e){this.Ke=t,this.f=e}init(){this.f.register(Ly,t=>{if($(t))this.Ke.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay");})}}return s})(),Vr="_cs_inc",Vy=(()=>{class s{constructor(t,
e){this.Tt=t,this.M=e}isForceIncluded(){return this.VT()||this.UT()}isForceReplayRecorded(){return this.jT(P.RECORDING_GLOBAL_SAMPLING)}VT(){return this.M.get(Vr)!==null}jT(t){return this.M.get(Vr)===t}UT(){return csString.prototype.indexOf.call(this.Tt.href,Vr)>0}}return s})(),qs="_cs_optout",Uy=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){return this.h.cookielessTrackingEnabled?this.Ft.getItem(qs):this.M.get(qs)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(qs,t):
this.M.set(qs,t,un)}}return s})(),aa="1",jy=(()=>{class s{constructor(t,e,i){this.E=t,this.Tt=e,this.it=i}init(){!this.isActive()&&this.HT()&&this.activate()}isActive(){return this.it.get()===aa}activate(){this.E.emitOptout(),this.it.set(aa)}HT(){return csString.prototype.indexOf.call(this.Tt.href,qs)>0}}return s})(),Hy=["optout"];var By=(()=>{class s{constructor(t,e){this.f=t,this.Xs=e}init(){this.f.register(Hy,()=>{this.Xs.activate()})}}return s})();var Fy=(()=>{class s{constructor(t,e){this.f=
t,this.at=e}init(){this.at.addListener(this.f)}onOptout(){this.f.stop()}onBeforeSessionRenewal(){this.f.stop()}}return s})();var zy=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),$y=(()=>{class s extends jt{constructor(t){super(),this.tu=t,this.ns={}}register(t,e,i){for(let n of t){let a=(...c)=>{try{let l=e(...c);return ut.counters.commandApplied.count(n),l}catch(l){ut.counters.commandMisuse.count(n),j.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Fe(l)?
l.stack:l}`)}};this.ns[n]={callback:a,configuration:i},this.ns}}onStart(){this.FT(),this.zT()}onStop(){for(let t of this.tu)window[t]=[]}applyFromIntegration(t,e,i){this.Ug(t,e,`Commands.apply.from.integration: ${i}`),ut.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Ug(t,e,`Commands.apply.from.implementation: ${i}`),ut.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.$T(e.name,e.params,t.iframePath),ut.counters.commandsFromIframe.count(e.name)}Ug(t,
e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}j.tryToExecute(i,()=>{if(this.ns[t])return this.ns[t].callback(...e)})()}$T(t,e,i){j.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.ns[t])return this.ns[t].callback(...e)})()}FT(){for(let t of this.tu)window[t].forEach(([e,...i])=>this.jg(e,i,!1))}zT(){for(let t of this.tu)window[t]={push:([e,...i])=>this.jg(e,i,!0)}}jg(t,e,i){var n,a;if(this.ns[t]){if(((n=this.ns[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&
!i||((a=this.ns[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.ns[t].callback(...e)}catch(l){ut.counters.commandError.count(t),j.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var qy=(()=>{class s{constructor(t,e,i,n){this.h=t,this.R=e,this.w=i,this.Xg=n}getRequestParameters(){var t;let e={...dn(),...this.h.getRequestParameters()},i=this.w.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.R.getVisitor();if(n&&(e.sn=
`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.Xg)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Xg.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}
return s})(),Gy=(()=>{class s{constructor(t,e){this.f=t,this.Cs=e}init(){this.f.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Cs.updateDynamicFields("emitDebugEvents",t)})}}return s})();function ca(s,r,t){if(!Z(r)&&!Z(t))return s.href;let e=Z(r)?kc(r):s.pathname,i=Z(t)?Dc(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function kc(s){return $e(s,"/")?s:`/${s}`}function Dc(s){return $e(s,"?")||s===""?s:`?${s}`}var Ur=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=
2]="onNextPageviewOnly"}(s||(s={})),s})(),Wy=(()=>{class s{constructor(t,e){this.Tt=t,this.J=e,this.KT=10}overridePath(t,e){if(t===""){this.br=void 0;return}let i=this.Kg(e);i&&(this.iu=i),this.br=e?this.Jg(t,e):t}overrideQuery(t,e){let i=this.Kg(e);i&&(this.ru=i),this.Yn=e?this.Jg(t,e):t}computeOverriddenUrl(t){return this.JT(t)?this.getAnonymizedUrl():t}QT(t){return(typeof t=="string"||typeof t=="number")&&t in Ur}JT(t){let e=this.Qg(this.Tt.href);return this.Qg(t)===e}Qg(t){return ru(t,"/")?csString.prototype.slice.call(t,
0,-1):t}Kg(t){return Z(t==null?void 0:t.lifespan)&&this.QT(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}ZT(){return this.iu&&this.iu in Ur}tR(){return this.ru&&this.ru in Ur}cleanupOverrideLifespan(){this.ZT()&&(this.br=void 0,this.iu=void 0),this.tR()&&(this.Yn=void 0,this.ru=void 0)}getAnonymizedUrl(){let t=ca(this.Tt,this.br,this.Yn);return this.J.anonymizeUrl(t)}getUrl(){return ca(this.Tt,this.br,this.Yn)}getAnonymizedPathAndQuery(){let t=Z(this.br)?kc(this.br):this.Tt.pathname,e=
Z(this.Yn)?Dc(this.Yn):this.Tt.search;return this.J.anonymizeUrl(t+e)}getUrlProtocol(){return this.Tt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Jg(t,e){return this.eR(e)?this.sR(t):this.iR(e)?this.rR(t):t}iR(t){return!!t.decodeURI}rR(t){return this.Zg(t,1,!1)}eR(t){return!!t.decodeURIDeep}sR(t){return this.Zg(t,this.KT,!0)}Zg(t,e,i){let n=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&j.warn(`decodeURIDeep limit reached: ${n}`),
n}}return s})(),Pn=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),Yy=(()=>{class s extends Pn{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&
e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),Zs="|iframe|",Xy=(()=>{class s extends Pn{constructor(t,e,i,n){super(),this.nR=t,this.oR=
e,this.aR=i,this.cR=n}emitIframeEvent(t,e,i){if(this.lR(e)&&t===null){j.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case X.ChildLogMessage:this.hR(i);break;case X.AnalysisEvent:{let n=i,a=this.nR.transformEvent(t,n);a.isUserEvent?this.uR(a.event):this.dR(a.event);break}case X.RecordingEvent:{let n=i,a=this.cR.transformEvents(t,n);if(a.events.length===0)return;a.containsUserEvent?this.pR(a.events):this.fR(a.events);break}case X.JavascriptError:this.gR(i);
break;case X.ApiError:this.mR(i);break;case X.DetailedApiError:this.yR(i);break;case X.CustomError:this.ER(i);break;case X.EmerchandisingMessage:{let n=this.aR.transformEvent(t,i);this.SR(n);break}case X.Commands:{let n=this.oR.transformEvent(t,i);this.vR(n);break}case X.IntegrationCallback:this._R(i);break;case X.StaticResource:this.wR(i);break;case X.TrackingContextRequestMessage:this.AR(i);break;default:j.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}lR(t){let e=
[X.AnalysisEvent,X.RecordingEvent,X.EmerchandisingMessage,X.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}hR(t){let {message:e,errorCode:i,level:n}=t;switch(n){case it.debug:j.debug(e,i);break;case it.warn:j.warn(e,!0,i);break;case it.implementation:j.implementation(e,i);break;case it.error:j.error(e,i);break;case it.critical:j.critical(e,i);break}}uR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}dR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&
e.onIframeAnalysisBrowserEvent(t)}pR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}fR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}gR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}mR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}yR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}SR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&
e.onIframeEmerchandisingMessage(t)}vR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}_R(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}wR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}AR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}ER(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),
Ky=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),Jy=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Lc=["setCustomVariable"],Qy=(()=>{class s{constructor(t,e){this.f=t,this.vt=e}init(){this.f.register(Lc,(t,e,i,n)=>{this.vt.set(t,e,i,n)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),
this.vt.removeCustomVariablesPage()}}return s})(),la=512,ha=255,jr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},Zy=(()=>{class s{constructor(t,e){this.C=t,this.it=e,this.$t={},this.ke={}}set(t,e,i,n){let a,c;if((ee(t)||$(t))&&Number(t)>0&&Ot(e)&&Ot(i)&&!Be(e)&&!Be(i)&&this.bR(n)){let l=this.C.anonymizePII(csString(e)),d=this.C.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,la),csString.prototype.slice.call(d,0,ha)],c=i!=="",!Z(n)||csArray.prototype.indexOf.call(jr.SESSION,
n)>=0){let g=this.getCustomVariablesSession();c?g[t]=a:delete g[t],this.setCustomVariableSession(g)}(!Z(n)||csArray.prototype.indexOf.call(jr.PAGE,n)>=0)&&(c?this.$t[t]=a:delete this.$t[t]),Z(n)&&csArray.prototype.indexOf.call(jr.NEXT_PAGE_ONLY,n)>=0&&(c?this.ke[t]=a:delete this.ke[t])}else throw new Error(`Command misuse: ${Lc[0]}`);}getCustomVariablesSession(){let t=this.it.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&ti(e)?e:{}}setCustomVariableSession(t){this.it.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.it.remove()}removeCustomVariablesPage(){this.$t=
{}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.ke)this.ke.hasOwnProperty(i)&&(this.$t[i]=this.ke[i]);for(let i in this.$t)this.$t.hasOwnProperty(i)&&(t[i]=this.$t[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.tm(t)};return this.$t&&window.csJSON.stringify(this.$t).length>2&&(e.cvarp=this.tm(this.$t)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.ke).length>0)for(let t in this.ke)this.ke[t]===this.$t[t]&&(delete this.$t[t],delete this.ke[t])}em(t){for(let e in t)if(t.hasOwnProperty(e)){let i=
parseInt(e,10),n=t[e],a=n[0],c=n[1];(!fh(i,1,20)||a.length>la||c.length>ha)&&delete t[e]}}tm(t){this.em(t);let e=gh(t)?[]:t;return window.csJSON.stringify(e)}bR(t){return!Z(t)||$(t)||ee(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.ke)this.ke.hasOwnProperty(e)&&(this.$t[e]=this.ke[e]);for(let e in this.$t)this.$t.hasOwnProperty(e)&&(t[e]=this.$t[e]);return this.em(t),t}}return s})(),Kt="_cs_id",tE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.oi=
t}onCookieToRemove(t){this.ai=t}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Xt.getItem(Kt):t=this.M.get(Kt),t?(ed(t)||j.warn(`Invalid visitor string: ${t}`),Zu(t)):null}set(t){var e;let i=td(t);if(this.h.cookielessTrackingEnabled)this.Xt.setItem(Kt,i);else{let n=new csDate(t.expires);this.M.set(Kt,i,n),(e=this.oi)===null||e===void 0||e.call(this,Kt,i,n)}}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(Kt):(this.M.delete(Kt),(t=this.ai)===null||t===void 0||t.call(this,
Kt))}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.h.allowSubdomains,this.h.allowSubdomains?this.M.delete(Kt,Qi.CURRENT_DOMAIN):this.M.delete(Kt,this.M.getRootDomain()),this.set(t))}}return s})(),eE=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,sE="$1CS_ANONYMIZED_NAME",iE=(()=>{class s{constructor(t){this.C=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||
[],a=this.C.anonymizePII(t);if(a=this.C.anonymizeJwt(a),e.maskNames){let d=a;a=this.Dn(a),a!==d&&(ut.counters.redactedPII.count("name"),ut.counters.redactedPII.count("name-in-url"))}let c=this.TR(a,i);if(c!==a)return ut.counters.redactedPII.count("url"),c;let l=this.RR(a,n);return l!==a&&ut.counters.redactedPII.count("url"),l}removeQueryString(t){let {path:e,queryString:i}=this.nu(t);return i!==""?`${e}?`:e}nu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,
0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}TR(t,e){if(e.length===0)return t;let {path:i,queryString:n}=this.nu(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.IR(a,c);if(l!==null)return`${l}${n}`}return t}IR(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let a=t[n];if(n>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[n].key;if(this.sm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(a===
c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}RR(t,e){if(e.length===0)return t;let {path:i,queryString:n}=this.nu(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.CR(a,c);return`${csArray.prototype.join.call(a,"/")}${n}`}CR(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let d=t[l],g=e[n].key;if(this.sm(g)&&l>=c){let u=e[n].value;csArray.prototype.push.call(i,d.length>0?u:""),n++,n===e.length&&
(n=0);continue}if(d===g){csArray.prototype.push.call(i,d),n++,n===e.length&&(n=0);continue}for(let u=0;u<n;u++){let y=l-n+u;i[y]=t[y]}n=0,csArray.prototype.push.call(i,d)}for(let l=0;l<n;l++){let d=t.length-n+l;i[d]=t[d]}return i}sm(t){return $e(t,Ic)}Dn(t){return csString.prototype.replace.call(t,eE,sE)}}return s})(),rE=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid",
"id","maxlength","onclick","onsubmit","style"],nE=1024,oE=1024,aE=(()=>{class s{constructor(t,e){this.lt=t,this.h=e}getEventTargetPathAndHierarchy(t,e){let i=mt(t),n={isNodeSensitive(a){return N.isMaskedElement(a)||N.isMaskedElementChild(a)},isAttributeSensitive(a,c){return N.isMaskedAttribute(a,c)},allWhitelistedAttributes:nc(this.h.whitelistedAttributes),attributeIgnoreTokens:rE,useAnonymization:e,attrMaxLength:oE,hierarchyMaxLength:nE};return this.lt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.h.dynamicIdRegex,
...this.h.pathComputationRules})}getEventTargetPath(t){let e=mt(t);return this.lt.getElementPath(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=mt(t),{path:i,firstAnchorParent:n}=this.lt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules}),a=this.PR(n)?n.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=mt(t);return this.lt.isValidElement(e)}getElementPath(t){return this.lt.getElementPath(t,
{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}PR(t){var e;return t!==null&&t.hasAttribute("href")&&!$e((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),cE=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){this.NR(t,e.event);let i=this.W.getElementPath(t);return this.MR(i,e.event),e}NR(t,e){if(Pg(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+gt.windowOffsetX()),e.y=Math.round(i.top+e.y+gt.windowOffsetY())}}MR(t,e){gc(e)&&(e.tgt=
`${t}${Zs}${e.tgt}`),Ig(e)&&(e.tgtHM=`${t}${Zs}${e.tgtHM}`),Cg(e)&&(e.tgtLk=`${t}${Zs}${e.tgtLk}`)}}return s})(),lE=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){let i=this.W.getElementPath(t);return{iframePath:e.iframePath?`${i}${Zs}${e.iframePath}`:i,commands:e.commands}}}return s})(),hE=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.W.getElementPath(t),n=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${Zs}${a.targetPath}`}));
return{...e,products:n}}}return s})(),uE=(()=>{class s{constructor(){this.kR={clientX:2,clientY:3},this.DR={clientX:1,clientY:2},this.LR=[M.POINTER_DOWN,M.POINTER_MOVE,M.POINTER_UP],this.xR=[M.TOUCH_START,M.TOUCH_MOVE,M.TOUCH_END]}transformEvents(t,e){if(!dt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==M.VISIBILITY_CHANGE),e.events.length===0||(j.warn(`IframeRecordingEventsTransformer received event ${X.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=et(t),n=null;csArray.prototype.some.call(e.events,c=>this.im(c)||this.rm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.im(c)?this.VR(n,c):this.rm(c)&&this.UR(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}UR(t,e){this.nm(this.DR,t,e)}VR(t,e){this.nm(this.kR,t,e)}nm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+
i.args[t.clientY]))}im(t){return csArray.prototype.indexOf.call(this.LR,t.type)!==-1}rm(t){return csArray.prototype.indexOf.call(this.xR,t.type)!==-1}}return s})(),dE=(()=>{class s{constructor(t){this.ou=t}start(){this.ou.onEvent(t=>this.G(t)),this.ou.start()}stop(){this.ou.stop()}G(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;j.warn(e)}}return s})(),pE=(()=>{class s{constructor(){this.Ut={boundElement:document,type:"securitypolicyviolation",
listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.au,"localhost"),csArray.prototype.push.call(s.au,"fake-tracker.content-square.fr")}start(){Ct(this.Ut)}stop(){Pt(this.Ut)}onEvent(t){this.O=t}jR(t){if(!t)return!1;let e=t.disposition;return $(t.sourceFile)&&csArray.prototype.some.call(s.au,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.jR(t)&&this.O({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}
return s.au=["contentsquare","cdnssl.clicktale.net"],F([L("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),fE=(()=>{class s{init(){this.om=new dE(new pE),this.om.start()}onOptout(){this.om.stop()}}return s})();var {toString:BE}=Object.prototype;function xc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);
let a=s.apply(this,e);return t.cache=n.set(i,a)||n,a};return t.cache=new (xc.Cache||Map),t}xc.Cache=Map;var {hasOwnProperty:FE}=Object.prototype;var Vc=(()=>{class s{constructor(t){this.configuration=t}}return s})(),gE=(()=>{class s extends Vc{constructor(t,e,i){super(t),this.configuration=t,this.Zn=e,this.E=i,this.o0=P.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.to=void 0,this.Va()}onQuotaReady(t){this.Em=t}init(){this.a0()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&
t.collectState!==P.QUOTA_REACHED}computeInitialCollectState(t){return this.to?(this.E.emitCollectStateChange(this.to,It.ETR_OFF),this.to):(j.warn("Quota file error computeInitialCollectState() called before quota answered"),P.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===P.QUOTA_REACHED?P.QUOTA_REACHED:!ni.isRecordingSupported()&&this.isReplayRecorded(t)?P.ANALYTICS_ONLY:t.collectState===P.RECORDING_RULES_TARGETING?P.RECORDING_RULES_TARGETING:t.collectState===P.ANALYTICS_ONLY_RULES_TARGETING?
P.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===P.RECORDING_GLOBAL_SAMPLING?P.RECORDING_GLOBAL_SAMPLING:P.ANALYTICS_ONLY}abortQuotaServiceRequest(){}isReplayRecorded(t){return t.collectState===P.RECORDING_GLOBAL_SAMPLING||t.collectState===P.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.to||P.QUOTA_REACHED}setVisitorService(t){}computeInitialCollectStateFromRecordingConsentGranted(t){return P.ANALYTICS_ONLY}eo(t){this.to=t,this.Em&&this.Em(t)}a0(){this.Zn.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),
this.Zn.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Zn.onLoad(t=>this.quotaFileHandler(t))}Va(){this.Zn.isInProgress()||this.Zn.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.c0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;j.warn(e),this.eo(this.o0)}c0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType===
"RECORDING"&&n.value&&As.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ni.isRecordingSupported()?this.eo(P.RECORDING_GLOBAL_SAMPLING):this.eo(P.ANALYTICS_ONLY):e&&!i?this.eo(P.ANALYTICS_ONLY):this.eo(P.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return P.ANALYTICS_ONLY}}return F([L("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),F([L("Quota File: onerror")],s.prototype,
"quotaServiceErrorHandler",null),s})(),mE=3E3,yE=(()=>{class s extends Vc{constructor(t,e,i,n,a){super(t),this.configuration=t,this.so=e,this.E=i,this.Wh=n,this.A=a,this.$e=[]}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.l0()}sanitizeSessionCollectState(t){return(t.collectState===P.QUOTA_REACHED||t.collectState===P.RECORDING_RULES_TARGETING||t.collectState===P.RECORDING_TEMPORARILY)&&(t.collectState=P.ANALYTICS_ONLY),t}computeInitialCollectState(t){return Ve.isReplayConsentNeeded(this.configuration)?
P.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Na(t)}computeInitialCollectStateFromRecordingConsentGranted(t){return this.Na(t)}Na(t){return ni.isRecordingSupported()?(this.$e=[],As.percentage()<this.configuration.replayRecordingRate||this.Wh.isForceReplayRecorded()?csArray.prototype.push.call(this.$e,P.RECORDING_GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.$e,P.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,
P.RECORDING_ETR_SAMPLING),this.$e.length>0?(this.Va(t),P.RECORDING_TEMPORARILY):P.ANALYTICS_ONLY):P.ANALYTICS_ONLY}getEligibleCollectState(t){return ni.isRecordingSupported()?Ve.isRecordingBlockedByConsent(t)?t.collectState===P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:P.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.collectState===P.RECORDING_GLOBAL_SAMPLING?P.RECORDING_GLOBAL_SAMPLING:(this.$e=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.$e,
P.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,P.RECORDING_ETR_SAMPLING)),this.$e.length>0?(this.Va(t),P.RECORDING_TEMPORARILY):(t.etrState===It.ETR_ON&&this.E.emitCollectStateChange(P.ANALYTICS_ONLY,It.ETR_ON),P.ANALYTICS_ONLY)):P.ANALYTICS_ONLY}Va(t){var e;let i=(e=this.R)===null||e===void 0?void 0:e.getVisitor();this.so.send({recordingTypes:csArray.prototype.map.call(this.$e,Number),url:this.A.getAnonymizedUrl(),projectId:this.configuration.projectId,
uu:(i==null?void 0:i.id)||"",sn:(i==null?void 0:i.visitsCount)||"",pn:(t==null?void 0:t.pageNumber)||""})}abortQuotaServiceRequest(){this.so.abort()}isReplayRecorded(t){return Ve.isRecordingBlockedByConsent(t)?!1:t.collectState===P.RECORDING_TEMPORARILY||t.collectState===P.RECORDING_GLOBAL_SAMPLING||t.collectState===P.RECORDING_URL_SAMPLING||t.etrState===It.ETR_ON}l0(){this.so.onError(()=>this.quotaServiceErrorHandler("NetworkError")),this.so.onTimeout(()=>this.quotaServiceTimeoutHandler(),mE),this.so.onLoad(t=>
this.quotaServiceLoadHandler(t))}quotaServiceErrorHandler(t){this.Sm(`error - ${t}`)}quotaServiceTimeoutHandler(){this.Sm("timeout")}Sm(t){let e=P.ANALYTICS_ONLY;this.vm(this.$e)?(e=P.RECORDING_GLOBAL_SAMPLING,j.warn(`Quota Service: request ${t} - bypassed by GLOBAL_SAMPLING`)):j.warn(`Quota Service: request ${t}`),this.E.emitCollectStateChange(e,It.ETR_OFF)}quotaServiceLoadHandler(t){if(t.status!==200){this.quotaServiceErrorHandler(`Status code: ${t.status}`);return}let e;try{e=csJSON.parse(t.responseText)}catch{this.quotaServiceErrorHandler(`Unable to parse the quota service response: ${t.responseText}`);
return}let i=e.allowedRecordingTypes==null?void 0:csArray.prototype.map.call(e.allowedRecordingTypes,csString);if(!i){this.quotaServiceErrorHandler("recording types missing from quota service response");return}let n=It.ETR_OFF,a=P.ANALYTICS_ONLY;this.vm(i)?a=P.RECORDING_GLOBAL_SAMPLING:this.h0(i)&&(a=P.RECORDING_URL_SAMPLING),this.u0(i)&&(n=It.ETR_ON),this.E.emitCollectStateChange(a,n)}vm(t){return csArray.prototype.some.call(t,e=>e===P.RECORDING_GLOBAL_SAMPLING)}h0(t){return csArray.prototype.some.call(t,
e=>e===P.RECORDING_URL_SAMPLING)}u0(t){return csArray.prototype.some.call(t,e=>e===P.RECORDING_ETR_SAMPLING)}setVisitorService(t){this.R=t}getInitialCollectState(){return P.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return P.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return F([L("Quota Service: onerror")],s.prototype,"quotaServiceErrorHandler",null),F([L("Quota Service: ontimeout")],s.prototype,"quotaServiceTimeoutHandler",null),F([L("Quota Service: onload")],s.prototype,"quotaServiceLoadHandler",
null),s})();function EE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function SE(){return[{selector:".ctHidden,input:not([type\x3dbutton]):not([type\x3dsubmit])",attrName:"value"}]}var vE=(()=>{class s{constructor(){this.d0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.As={elementSelector:"",
attrSelector:"",attrSelectors:[]};let t={PIISelectors:EE(),Attributes:SE()};this.As=N.getComputedSelectorSettings(t,this.As)}init(){this.p0()}setMaskedElementSettingsFromCommand(t){if(t=N.sanitizeSelectorUserInput(t),!N.isSelectorUserInput(t))throw new Error(`Command misuse: ${Nc[0]}`);this.Su(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Su(e)}getMaskedElementSettings(t){return t?this._m(this.d0):
this.As}p0(){var t,e,i,n,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(d=>
{$(d.attr)&&$(d.rule)&&l.Attributes.push({selector:d.rule,attrName:d.attr})}),this.Su(l)}Su(t){this.As=this._m(t)}_m(t){return N.getComputedSelectorSettings(t,this.As)}}return s})();var _E=(()=>{class s{constructor(t,e,i,n,a){this.h=t,this.ii=e,this.ls=i,this.I=n,this.E=a,this.f0=()=>{var c;let l=ht.get(qt);l!==null&&yn(l)?this.tt.canCollect(cd(l))?this.init():!((c=this.h.voc)===null||c===void 0)&&c.enabled:(this.tt.onQuotaReady(d=>{var g;d!==P.QUOTA_REACHED?this.init():!((g=this.h.voc)===null||g===
void 0)&&g.enabled}),this.tt.refreshQuota())}}initWithQuota(){var t;if(!this.h.collectionEnabled){!((t=this.h.voc)===null||t===void 0)&&t.enabled;return}let e=new Jm(this.h.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.tt=new gE(this.h,e,this.E),this.tt.init(),this.f0()}init(){Gs.isSupported()&&Gs.setDigestSalt(this.h.projectId.toString());let t,e,i,n,a,c,l,d,g,u,y,E,v,I,C,b,w,x,A,k,U,J,lt,Mt,wt,S,O,V,H,tt,at,At,pe,Ye,ar;this.I.schedule(()=>{t=new li,e=new iE(t),n=new Wy(window.location,
e),i=new Qi(this.h,n,this.ii),i.init()}),this.I.schedule(()=>{a=new Ky,c=new Jy,w=new Vy(window.location,i),(new fE).init(),x=Mc.create(j.warn),b=new ja(x);let fe=b.create(`${this.h.getLegacyQuotaUri()}/quota`,!0);this.tt===void 0&&(this.tt=new yE(this.h,fe,this.E,w,n),this.tt.init())}),this.I.schedule(()=>{l=new gy(this.h,i,a),g=new Ey(l,this.tt)}),this.I.schedule(()=>{u=new tE(this.h,i,a),y=new py(this.h,u,this.E,g),this.ls.setContext(y,g),this.tt.setVisitorService(y)}),this.I.schedule(()=>{Ye=
new Cy(this.h,new _y(this.h,i,c),this.E),E=new vy(y,g,Ye),v=new hd(this.h,i,a),I=new Oy(window.location,v),C=new Ny(I),U=new Sy(this.h,y,I),At=new aE(he,this.h),O=new cE(At),V=new lE(At),H=new hE(At),tt=new uE,at=new Xy(O,V,H,tt),S=new $y([zy.UXA]),J=new Fy(S,at),lt=new Dy(n),Mt=new xy(lt,S);let hs=new ud(this.h,i,a);pe=new Zy(t,hs),wt=new Qy(S,pe);let fe=new Ju(y,g,I,pe,this.h)}),this.I.schedule(()=>{(new dy(this.h,y,I,U,E,A,d,w)).compute(fe=>{this.I.schedule(()=>{J.init();let Ms=new Yy,re=new Iy(this.h,
S,Ye,g,this.E),Et=new Uy(this.h,i,c),kt=new jy(this.E,window.location,Et),ks=new By(S,kt),cr=new Gy(S,this.h),lr=new qy(this.h,y,g,k);if(fe){this.E.emitInitTracking();let Ds=new vE;(new uy(lr,x,y,g,this.E,S,J,this.h,ks,kt,re,Ye,t,At,e,n,cr,Ms,at,pe,wt,lt,Mt,this.I,b,i,c,this.tt,Ds)).start()}else(new Py(this.E,S,J,ks,kt,C,re)).start()})})})}}return s})(),rs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v\x3d{version}",e,i={loadBundle(w){let x=w.source,A=w.data;if(c(A)){let k=()=>
{let U=n(t,A);y(U,()=>x.postMessage("csBundleLoaded",w.origin))};e=A.token,b(i.loadBundle),l(w.origin)&&k()}}};function n(w,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function a(){return e}r.getToken=a;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&g(w.version)&&d(w.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;
function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||r.hjDomainRegex.test(w)}r.isAuthorizedDomain=l;function d(w){return/^[a-zA-Z0-9]+$/.test(w)}r.isAuthorizedToken=d;function g(w){return/^[a-zA-Z0-9\.]+$/.test(w)}r.isAuthorizedTagVersion=g;function u(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}r.isActivable=u;function y(w,x){let A=document.createElement("script");A.type="text/javascript",A.async=!0,A.src=
w,A.onload=x,A.charset="utf-8",document.head.appendChild(A)}r.addScript=y;function E(w){let x=document.createElement("link");x.rel="stylesheet",x.href=w,document.head.appendChild(x)}r.addStyle=E;function v(w){return`${w}?cb=${(new csDate).getTime()}`}r.addCacheBusting=v;function I(){C(i.loadBundle)}r.waitForBundleInjection=I;function C(w){window.addEventListener("message",w,!1)}r.listen=C;function b(w){window.removeEventListener("message",w,!1)}r.removeListener=b}(s||(s={})),s})(),ua="_hp_ved",wE=
18E5,fi="https://heapanalytics.com",AE=`${fi}/js/ved.js`,bE=`${fi}/css/ved.css`,TE=`${fi}/js/ved.css`,RE=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),IE=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Hr=(()=>{let s;return function(r){let t=!1;function e(){let g=[bE,TE];csArray.prototype.forEach.call(g,u=>{rs.addStyle(u)})}function i(g){let u=new csRegExp("(^|;)[ ]*"+g+"\x3d([^;]*)"),y=u.exec(document.cookie);return y?
decodeURIComponent(y[2]):null}function n(g,u,y){let E=encodeURIComponent(g)+"\x3d"+encodeURIComponent(u),v=new csDate;v.setTime(v.getTime()+y);let I=E+"; expires\x3d"+v.toUTCString()+"; path\x3d/";document.cookie=I}function a(){n(ua,"on",wE)}function c(){return i(ua)==="on"}r.isVLCookieEnabled=c;function l(g){window.heapV=Object.assign({},window.heap,{source:g==null?void 0:g.source,uri:fi,loadArgs:g==null?void 0:g.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=l;function d(g){var u;if(g){let y=
{type:RE.StatusUpdate,value:IE.ReceivedInitMessage},E={targetOrigin:g==null?void 0:g.origin};(u=g==null?void 0:g.source)===null||u===void 0||u.postMessage(y,E)}t||(t=!0,a(),l(g),window.heapV&&(rs.addScript(AE),e()))}r.init=d}(s||(s={})),s})(),CE=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,
/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,rs.hjDomainRegex],a,c,l={initHeapVisualLabeler(A){var k;A.origin===fi&&((k=A.data)===null||k===void 0?void 0:k.message)==="init"&&A.source&&(Hr.init(A),b(l.initHeapVisualLabeler))},ping(A){typeof A.data=="string"&&A.data==="ping"&&u(A.origin)&&(c=A.origin,a=rs.hjDomainRegex.test(A.origin)?i:A.origin,b(l.ping),C(l.insertMessageScript),y(rs.addCacheBusting("utils.js")))},insertMessageScript:w(A=>{typeof A.data=="string"&&A.data!=="ping"&&(b(l.insertMessageScript),
y(A.data))})};function d(){return rs.getToken()}r.getToken=d;function g(){return window!==t&&window.addEventListener}r.isActivable=g;function u(A){return csArray.prototype.some.call(n,k=>k.test(A))}r.isAuthorizedDomain=u;function y(A,k){let U=document.createElement("script");U.type="text/javascript",U.async=!0;let J=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");U.src=`${J}/${e}/${A}`,U.onload=k,U.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(U),E(A)}function E(A){csString.prototype.includes.call(A,
"\x26mode\x3d")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(A,"\x26mode\x3d")[1])}function v(){C(l.ping),rs.waitForBundleInjection()}r.waitForConnection=v;function I(){C(l.initHeapVisualLabeler),Hr.isVLCookieEnabled()&&Hr.init()}r.waitForHeapVisualLabeler=I;function C(A){window.addEventListener("message",A,!1)}r.listen=C;function b(A){window.removeEventListener("message",A,!1)}r.removeListener=b;function w(A){return function(k){k.origin===c&&A(k)}}r.secureListener=w;function x(A){c&&
t.postMessage(A,c)}r.post=x}(s||(s={})),s})();var ki=window.CSFrameCommunication||CE;var PE=(()=>{class s extends Pn{constructor(t){super(),this.I=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&
this.I.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){j.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&
t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&
t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&
t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return F([Nt("emitStartTracking")],
s.prototype,"emitStartTracking",null),s})();var OE=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion==
"function")try{let v=window.CSJavascriptBridge.getVersion();if(ee(v))return v}catch{j.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}r.sendAnalysisEvent=n;function a(v){if(window.CSJavascriptBridge.sendSREvent)for(let I of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(I))}
r.sendSREvent=a;function c(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}r.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}r.sendOptIn=l;function d(){window.CSJavascriptBridge.optOut()}r.sendOptOut=d;function g(v,I){window.CSJavascriptBridge.sendDynamicVar(v,I)}r.sendDynamicVariable=g;function u(v,I,C){window.CSJavascriptBridge.sendTransaction(v,I,C)}r.sendTransaction=u;function y(v,I){if(window.CSJavascriptBridge.sendAssets){let C=
csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(C,I||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,C=>C.assetId))}r.sendAssets=y;function E(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}r.sendNativeSREvent=E}(s||(s={})),s})();var NE=(()=>{class s{constructor(t,e,i){this.h=t,this.mt=e,this.ls=i}start(){var t,e,i,n,a;if(window.UXAnalytics)return;
window.UXAnalytics={};let c=new ic(!!(!((t=this.h.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.h.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.h.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new qu(this.mt,this.h);l.init();let d=new Wu(this.h,l);if(this.mt.isTopWindowTracker()&&d.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&j.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),
!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){j.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}zu();let u=new PE(c),y=new _E(this.h,l,this.ls,c,u);this.h.isQuotaEnabled()?y.initWithQuota():y.init()}let g=csString.prototype.indexOf.call(window.location.href,"csDebug\x3d1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(u){return N.isMaskedElement(u)||N.isMaskedElementChild(u)},isAttributeSensitive(u,y){return N.isMaskedAttribute(u,
y)},getSensitiveAttributes(u){return Ia(u.attributes,y=>N.isMaskedAttribute(u,y.name))}},Console:{warn(u){g&&console.warn("cs.tracking.warning",u)},error(u){g&&console.error("cs.tracking.error",u)}},Version:Oa},window.CSFrameCommunication||(window.CSFrameCommunication=ki,ki.isActivable()&&ki.waitForConnection(),this.h.isCsCrosswritingHeap()&&ki.waitForHeapVisualLabeler())}}return F([Nt("main.start"),L("main.start")],s.prototype,"start",null),s})(),ME=(()=>{class s{constructor(){}send(t,e,i=it.warn){let n=
{message:t,errorCode:e,level:i};OE.sendLog(n)}}return s})();var kE=(()=>{class s{constructor(t,e,i){this.V=t,this.C=e,this.cI=i,this.At=[],this.Re=null,this.lI=dn().v}Um(){this.At.length!==0&&(this.V.send({m:csArray.prototype.map.call(this.At,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.C.anonymizePII(window.location.pathname),pid:this.cI,v:this.lI}),this.At=[])}push(t){if(csArray.prototype.push.call(this.At,...t),this.Re&&(csClearTimeout(this.Re),this.Re=null),this.At.length>=s.MAX_QUEUE_SIZE){this.Um();
return}this.Re=window.csSetTimeout(()=>{this.Um(),this.Re=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5E3,s.MAX_QUEUE_SIZE=100,s})();function DE(s,r){let t=s.validationRate/10,e=As.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let a=Mc.create(j.warn,r.isTopWindowTracker()),l=(new ja(a)).create(s.getMetricsUri(),!0),d=new li,g=new kE(l,d,s.projectId);ut.setService(g)}catch(a){j.warn(`Error initializing metrics: ${a.message}`)}}function LE(){var s;let r=new pu(window.CS_CONF);
window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new fu(window,r);t.init();let e=new ju;if(Yh(j),j.computeIsActive(r.validationRate),t.isTopWindowTracker()){let a=new ku(r,e);j.setStrategy(a)}else if(t.isInIframeContext()){let n=new Uu(r);j.setStrategy(n)}else if(t.isInWebViewContext()){let n=new ME;j.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ge(window,"MutationObserver")),
Kh(),DE(r,t),(new NE(r,t,e)).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Hu(LE)}catch{}})})()},4179265,[4193413,3960553],667725,[663838,664338],24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-initiated",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event23";_events+=
"event23";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65=
"D\x3dc65";s.tl(this,"o","virtual-assistant-initiated",tempObject)})},3783961,533844,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chat-input-error",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event122";_events+="event122";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","chat-input-error",tempObject)})},3785218,695637,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - ntb-registration-start",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event139"}.call(this);s.pageName=function anon(){if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,
"-")+":"+s_parseDataLayer("section")}.call(this);s.eVar20=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","applicantLiability","ntb-registration-start");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==
-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","ntb-registration-start");if(userType)return userType;return""}catch(err){return""}}.call(this);s.products=function anon(){try{var products=s.parseDataLayer("product");var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof products=="object"&&typeof products.products=="object"){var productElement="productId";if(/merchant and payments/i.test(s.parseDataLayer("name")))productElement=
"cmsIdentifier";if(productElement)for(var i=0;i<products.products.length;i++)if(typeof products.products[i][productElement]!="undefined")window.sc_products+=";"+products.products[i][productElement]+",";return window.sc_products}else if(/merchant and payments/i.test(s.parseDataLayer("name"))){var plan=s.Util.getQueryParam("products");if(plan!="")window.sc_products=";"+plan;return window.sc_products}else if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!=
"undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!=="")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";else if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")window.sc_products+=";"+productArray[i]["product-id"]+",";return window.sc_products}else if(typeof s_parseDataLayerCustomValue("productName")==
"string"){window.sc_products=";"+s_parseDataLayerCustomValue("productName");return window.sc_products}else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{return s_parseDataLayer("application_id")}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);
s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,eVar19,products,eVar56,eVar87,eVar28";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event139"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4211190,787239,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(/\.nab\.com\.au$/.test(window.location.hostname))Bootstrapper.ensEvent.add("ensEvent - analytics-doPlugins-complete",function(){(function(){var SCV_POLL_WAIT_MS=3E3;SCVIDSyncer.prototype.VERSION="NAB-2016121301";function SCVIDSyncer(){}SCVIDSyncer.prototype.waitForIDSyncEvent=function(){var oThis=this;oThis._syncIdentity()};SCVIDSyncer.prototype._syncIdentity=function(){if(!this._isUserDueToSyncIDs())return;
var oSCVIdentity={};oSCVIdentity.SVI=this._findSiteCatLegacyID();oSCVIdentity.MID=this._findMarketingCloudID();oSCVIdentity.DDXUUID=this._findAudienceManagerUUID();oSCVIdentity.SSC=this._findSSCID();this._sendToDCM(oSCVIdentity)};SCVIDSyncer.prototype._isUserDueToSyncIDs=function(){if(window.s!==undefined&&window.SscCookieHandler!==undefined)if(window.SscCookieHandler.getCookie("sync_scv")==="sync")return false;return true};SCVIDSyncer.prototype._sendToDCM=function(oSCVIdentity){if(this._isSCVIdentityEmpty(oSCVIdentity))return;
oSCVIdentity.SCVSync=1;var sEncodedData=encodeURI(JSON.stringify(oSCVIdentity));document.cookie="sync_scv\x3dsync; path\x3d/; domain\x3d.nab.com.au";var axel=Math.random()+"";var a=axel*1E13;var image=document.createElement("IMG");image.alt="";image.width="1";image.height="1";image.src="https://ad.doubleclick.net/ddm/activity/src\x3d3347639;type\x3dbrand839;cat\x3dvizte001;u18\x3d"+sEncodedData+";dc_lat\x3d;dc_rdid\x3d;tag_for_child_directed_treatment\x3d;ord\x3d"+a+"?";document.body.appendChild(image)};
SCVIDSyncer.prototype._isSCVIdentityEmpty=function(oSCVIdentity){if(!oSCVIdentity||typeof oSCVIdentity!=="object"||Object.keys(oSCVIdentity).length<=0)return true;else if(!oSCVIdentity.SVI&&!oSCVIdentity.MID&&!oSCVIdentity.DDXUUID&&!oSCVIdentity.SSC)return true;else return false};SCVIDSyncer.prototype._findSiteCatLegacyID=function(){if(window.s&&window.s.visitor&&typeof window.s.visitor.getAnalyticsVisitorID==="function")return window.s.visitor.getAnalyticsVisitorID();else return null};SCVIDSyncer.prototype._findMarketingCloudID=
function(){if(window.s&&window.s.visitor&&typeof window.s.visitor.getMarketingCloudVisitorID==="function")return window.s.visitor.getMarketingCloudVisitorID();else return null};SCVIDSyncer.prototype._findAudienceManagerUUID=function(){if(window.aamuuid&&window.aamuuid)return window.aamuuid;else if(window.s&&window.s.eVar76)return window.s.eVar76;else return null};SCVIDSyncer.prototype._findSSCID=function(){if(window.SscCookieHandler&&typeof window.SscCookieHandler.getCookie==="function")return window.SscCookieHandler.getCookie("nab_s_vid");
else return null};(new SCVIDSyncer).waitForIDSyncEvent()})()})},1741739,449709,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - rea - form-page-loaded",function(){try{var pageId=s_parseDataLayer("page");var sectionId=s_parseDataLayer("section");var pageType=s_parseDataLayer("name");var pageToUse="unknown";if(typeof sectionId=="string"&&!/unknown section/i.test(sectionId)&&sectionId!=""){sectionId=sectionId.replace("pg","");sectionId=sectionId.replace("39","");
pageToUse=sectionId}else if(typeof pageId=="string"&&!/unknown page/i.test(pageId)&&pageId!=""){pageId=pageId.replace("pg","");pageId=pageId.replace("39","");pageToUse=pageId}pageToUse=pageToUse.replace(/\s+/g,"-");pageToUse=pageToUse.toLowerCase();pageType=pageType.replace("REA Home Loan","online");pageType=pageType.replace(/\s+/g,"-");pageType=pageType.toLowerCase();var frame=document.createElement("iframe");frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src="https://homeloans.realestate.com.au/nab-analytics/?pageName\x3d"+
pageToUse+"\x26pageType\x3d"+pageType;document.body.appendChild(frame)}catch(err){}})},2728642,500676,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - ntb-registration-complete",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event140"}.call(this);s.pageName=function anon(){if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,
"-")+":ntb-registration-complete"}.call(this);s.eVar20=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","applicantLiability","ntb-registration-complete");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==
-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","ntb-registration-complete");if(userType)return userType;return""}catch(err){return""}}.call(this);s.products=function anon(){try{var products=s.parseDataLayer("product");var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof products=="object"&&typeof products.products=="object"){var productElement="productId";if(/merchant and payments/i.test(s.parseDataLayer("name")))productElement=
"cmsIdentifier";if(productElement)for(var i=0;i<products.products.length;i++)if(typeof products.products[i][productElement]!="undefined")window.sc_products+=";"+products.products[i][productElement]+",";return window.sc_products}else if(/merchant and payments/i.test(s.parseDataLayer("name"))){var plan=s.Util.getQueryParam("products");if(plan!="")window.sc_products=";"+plan;return window.sc_products}else if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!=
"undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!=="")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";else if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")window.sc_products+=";"+productArray[i]["product-id"]+",";return window.sc_products}else if(typeof s_parseDataLayerCustomValue("productName")==
"string"){window.sc_products=";"+s_parseDataLayerCustomValue("productName");return window.sc_products}else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{return s_parseDataLayer("application_id")}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);
s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,eVar19,products,eVar56,eVar87,eVar28";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event140"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4211191,787240,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - chatwidget-ended",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80";_linkTrackEvents+="event84";_events+="event84";var tempObject=
{};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";s.tl(this,"o","chatwidget-ended",tempObject)})},3785214,533849,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;if(/ciatesting/i.test(document.location.href))console.log("Load IB event processor.");window._NABTags={};window._NABTags.debug=[];_NABTags.intialiseOverride=function(){if(typeof window.digitalData.page.pageInfo.customValues=="undefined")window.digitalData.page.pageInfo.customValues=[];window.digitalData.page.pageInfo.customValues["formErrorTracking"]="enabled";if(typeof window.digitalData!=
"undefined"){if(typeof window.digitalData.event=="undefined")window.digitalData.event=[];if(typeof window.digitalData.components=="undefined")window.digitalData.components={};if(window.location.href.includes("/forms/application-tracker?action\x3dprospect-login")&&!window.digitalData.components.formName)window.digitalData.components.formName="NTB Application Tracker";else if(window.location.href.includes("/forms/application-tracker")&&!window.digitalData.components.formName)window.digitalData.components.formName=
"Application Tracker";window.digitalData.event.push=function(){if(/ciatesting/i.test(document.location.href)){var debug=[];debug["eventType"]=arguments[0].eventType;debug["raw_args"]=arguments;_NABTags.debug.push(debug)}var applicationForms=["Personal Loan Online Application"];var result=Array.prototype.push.apply(this,arguments);try{if(result>0&&arguments!=undefined&&arguments.length>0&&arguments[0].eventType&&arguments[0].data){var eventType=arguments[0].eventType;var data=arguments[0].data;var action=
false;if(arguments[0].data.action!="undefined")action=arguments[0].data.action;switch(eventType){case "form-interacted":var formName=arguments[0].data.name;var formType="prospect-form";for(var app=0;app<applicationForms.length;app++)if(applicationForms[app]==formName){formType="application-form";break}var thisFormType=s_parseDataLayer("formType");if(thisFormType=="application")formType="application-form";var formStyle="section";if(typeof window.digitalData.page.pageInfo.customValues=="undefined")window.digitalData.page.pageInfo.customValues=
[];if(window.digitalData.page.pageInfo.customValues["formType"]=="application-form2")formType="application-form";if(window.digitalData.page.pageInfo.customValues["formStyle"]=="page")formStyle="page";if(arguments[0].data.formType=="application-form2")formType="application-form";if(arguments[0].data.formType=="prospect")formType="prospect-form";window.digitalData.page.pageInfo.customValues["formErrorTracking"]="enabled";if(typeof formName=="string")if(typeof window.digitalData.components!="undefined")window.digitalData.components.formName=
formName;if(formName=="Transaction and Savings Online Application"||formName=="Personal Loan Online Application"||formName=="Online Credit Card Application"||formName=="Term Deposit Online Application")if(action=="form-completed")action="end-of-form-reached";if(typeof formName!="undefined"&&formName.match(/NAB Personal Loan (.*) Online Application/))formName="Personal Loan Online Application";switch(action){case "form-started":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");if(formType==
"application-form"){if(formName=="Online Credit Card Application")s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");Bootstrapper.ensEvent.trigger("ensEvent - application-form2-start")}else{s.eVar23="";Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-start")}s_sendTealiumTrackEvent(arguments[0]);break;case "form-completed":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");if(typeof window.sc_formComplete=="undefined"){if(formType=="application-form")Bootstrapper.ensEvent.trigger("ensEvent - application-form2-complete");
else Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");s_sendTealiumTrackEvent(arguments[0])}window.sc_formComplete=true;break;case "ssc-authentication":Bootstrapper.ensEvent.trigger("ensEvent - form - ssc-authentication");s_sendTealiumTrackEvent(arguments[0]);break;case "form-checklist":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-checklist");s_sendTealiumTrackEvent(arguments[0]);break;case "form-progressed":if(typeof s!==
"undefined"&&typeof s.clearVars!=="undefined"){s.events="";s.products=""}if(formStyle!="section")break;if(/(business|financial) snapshot|migrant banking/i.test(formName)===true||/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(s_parseDataLayer("name"))){var currentPageCount=1;if(s_parseDataLayerCustomValueExists("pageCounter")===false){s_parseDataLayerSetCustomValue("pageCounter",currentPageCount);break}else{currentPageCount=s_parseDataLayerCustomValue("pageCounter");
if(currentPageCount){currentPageCount++;s_parseDataLayerSetCustomValue("pageCounter",currentPageCount)}}}Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");if(/REA Home Loan Conditional Approval/i.test(s_parseDataLayer("name")))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-page-loaded");s_sendTealiumTrackEvent(arguments[0]);break;case "form-page-loaded":if(formStyle=="page"){var pageId=_NABTags.s_parseDataLayer("pageId");
_NABTags.legacyFormPageLoadedEvent(formName,pageId,formType)}s_sendTealiumTrackEvent(arguments[0]);break;case "submit-application":Bootstrapper.ensEvent.trigger("ensEvent - form - submit-application");s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");s_sendTealiumTrackEvent(arguments[0]);break;case "form-decision":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - form-decision");s_clearProductsVar();
if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");s_sendTealiumTrackEvent(arguments[0]);break;case "end-of-form-reached":digitalData.event[digitalData.event.length-1].data.pageId="thankyou";Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - form - end-of-form");s_sendTealiumTrackEvent(arguments[0]);break;case "form-initial-assessment":Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");s_clearProductsVar();
if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID");break;case "form-hard-stop":Bootstrapper.ensEvent.trigger("ensEvent - form - application-hard-stop");s_clearProductsVar();break;case "ntb-registration-start":Bootstrapper.ensEvent.trigger("ensEvent - form - ntb-registration-start");break;case "ntb-registration-complete":Bootstrapper.ensEvent.trigger("ensEvent - form - ntb-registration-complete");break;case "application-type-verified":Bootstrapper.ensEvent.trigger("ensEvent - form - application-type-verified");
break;case "field-started":Bootstrapper.ensEvent.trigger("ensEvent - form - field-started");break;case "field-completed":var fieldId=_NABTags.s_parseDataLayer("fieldId");var fieldValue=_NABTags.s_parseDataLayer("fieldValue");if(formName=="Term Deposit Online Application"){if(fieldId=="loanAmount")s_parseDataLayerSetCustomValue("depositAmount",fieldValue);if(fieldId=="tdNtbTerm")s_parseDataLayerSetCustomValue("depositTerm",fieldValue);if(fieldId=="tdExistTerm")s_parseDataLayerSetCustomValue("depositTerm",
fieldValue)}if(formName=="Online Credit Card Application"&&fieldId=="yourNewCard-creditCardLimit")s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");if(formName=="Online Credit Card Application"&&(fieldId=="wCard-preferredCreditCardLimit"||fieldId=="preferredCreditLimit"))s_parseDataLayerSetCustomValue("creditLimitDefault","user defined");var fieldCapture=s_parseDataLayerCustomValueStartsWith("fieldCapture");if(typeof fieldCapture=="string")Bootstrapper.ensEvent.trigger("ensEvent - field-capture");
if(s_parseDataLayerCustomValueExists(fieldId)===true)Bootstrapper.ensEvent.trigger("ensEvent - form - field-capture");_NABTags.legacyDemographicHandle(formName,fieldId,fieldValue);if(formName=="Transaction and Savings Online Application"||formName=="Small Business Lending Online Application"||formName=="Personal Loan Online Application"||formName=="Small Business Lending Online Application"||formName=="Banker Appointment Booking Tool"||formName=="Merchant Onboarding"||formName=="Online Credit Card Application"||
formName=="Business Transaction Account Online Application"||formName=="Merchant Call Back"||formName=="Business Banking Call Back Request"){if(fieldId=="personalDetails-email"||fieldId=="email"||fieldId=="Email"||fieldId=="contactDetails-emailAddress"||fieldId=="yourDetailsColumn-emailAddress")_NABTags.s_hash(fieldValue.trim().toLowerCase()).then(hashedEmail=>sessionStorage.setItem("n_w_aol",hashedEmail)).then(_NABTags.getHashedData());if(fieldId=="personalDetails-phone"||fieldId=="mobileNumber"||
fieldId=="Phone number"||fieldId=="contactDetails-mobileNumber"||fieldId=="mobile"||fieldId=="contactNumber"||fieldId=="ourDetailsColumn-contactNumber"){var phoneE164=fieldValue.replace(/^0/,"61").replace(/\s+/g,"");_NABTags.s_hash(phoneE164).then(hashedPhone=>sessionStorage.setItem("n_w_agb",hashedPhone)).then(_NABTags.getHashedData())}}break;case "error-displayed":var triggerError=true;if(s_parseDataLayerCustomValueExists("errorCounter")===false)s_parseDataLayerSetCustomValue("errorCounter",1);
else{var currentErrorCount=s_parseDataLayerCustomValue("errorCounter");if(currentErrorCount){currentErrorCount++;s_parseDataLayerSetCustomValue("errorCounter",currentErrorCount)}if(currentErrorCount&&currentErrorCount>50)triggerError=false}if(triggerError===true){if(typeof s!=="undefined"&&typeof s.clearVars!=="undefined"){s.list2="";s.prop19="";s.prop60="";s.prop69="";s.eVar69="";s.eVar4=""}Bootstrapper.ensEvent.trigger("ensEvent - form - error-displayed")}break;case "product-started":if(typeof digitalData!=
"undefined"&&typeof digitalData.product=="undefined"){digitalData.product=[];var eventProduct=s_parseDataLayer("product");if(typeof eventProduct.products=="object"&&typeof eventProduct.products[0]=="object")for(i=0;i<eventProduct.products.length;i++)digitalData.product.push(eventProduct.products[i])}Bootstrapper.bindDOMLoaded(function(){Bootstrapper.ensEvent.trigger("ensEvent - form - product-started");s_clearProductsVar()});break;case "product-added":var products=_NABTags.s_parseDataLayer("product");
if(typeof digitalData!="undefined"&&typeof digitalData.product=="object"&&typeof digitalData.product[0]=="object"&&typeof products=="object")digitalData.product.push(products);s_sendTealiumTrackEvent(arguments[0]);break;case "products-selected":Bootstrapper.ensEvent.trigger("ensEvent - form - products-selected");s_sendTealiumTrackEvent(arguments[0]);break;case "product-removed":Bootstrapper.ensEvent.trigger("ensEvent - form - product-removed");s_sendTealiumTrackEvent(arguments[0]);break;case "lead-completed":Bootstrapper.ensEvent.trigger("ensEvent - lead-submitted");
s_clearProductsVar();s_sendTealiumTrackEvent(arguments[0]);break;case "form-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-saved");s_parseDataLayerSetCustomValue("formSaved",true);s_sendTealiumTrackEvent(arguments[0]);break;case "form-retrieved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-retrieved");s_sendTealiumTrackEvent(arguments[0]);break;case "form-resumed":Bootstrapper.ensEvent.trigger("ensEvent - form - form-resumed");s_sendTealiumTrackEvent(arguments[0]);break;case "form-cancelled":Bootstrapper.ensEvent.trigger("ensEvent - form - form-cancelled");
s_sendTealiumTrackEvent(arguments[0]);break;case "form-review":Bootstrapper.ensEvent.trigger("ensEvent - form - form-review");s_sendTealiumTrackEvent(arguments[0]);break;case "form-withdrawn":Bootstrapper.ensEvent.trigger("ensEvent - form - form-withdrawn");s_sendTealiumTrackEvent(arguments[0]);break;case "form-accepted":Bootstrapper.ensEvent.trigger("ensEvent - form - form-accepted");s_sendTealiumTrackEvent(arguments[0]);break;case "form-direct-debit-started":Bootstrapper.ensEvent.trigger("ensEvent - form - form-direct-debit-started");
break;case "form-direct-debit-completed":Bootstrapper.ensEvent.trigger("ensEvent - form - form-direct-debit-completed");break;case "documents-uploaded":var documents=s_parseDataLayer("documents");if(documents!="unknown documents")for(var i=0;i<documents.length;i++){Bootstrapper.ensEvent.trigger("ensEvent - form - document-uploaded");window.digitalData.event[window.digitalData.event.length-1].data.documents[i].adobeSent=1}break;case "entity-added":Bootstrapper.ensEvent.trigger("ensEvent - form - entity-added");
break;case "button-selected":try{var buttonLabel=_NABTags.s_parseDataLayer("buttonLabel");var buttonName=_NABTags.s_parseDataLayer("buttonName");var buttonFormName=_NABTags.s_parseDataLayer("name");digitalData.event[digitalData.event.length-1].data.name="button-selected:"+buttonFormName+":"+buttonName+":"+buttonLabel}catch(e){console.log("button-selected:"+e)}Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "user-question":try{var question=_NABTags.s_parseDataLayer("question");var answer=
_NABTags.s_parseDataLayer("answer");digitalData.event[digitalData.event.length-1].data.name="user-question:"+question+":"+answer}catch(e){console.log("user-question:"+e)}Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "expand-accordion":Bootstrapper.ensEvent.trigger("ensEvent - user_action");break;case "tab-clicked":Bootstrapper.ensEvent.trigger("ensEvent - form - tab-clicked");break;case "request-callback-start":Bootstrapper.ensEvent.trigger("ensEvent - form - request-callback-start");
break;case "request-callback-complete":Bootstrapper.ensEvent.trigger("ensEvent - form - request-callback-complete");break;case "form-dialog-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-dialog-saved");break;case "form-dialog-saved":Bootstrapper.ensEvent.trigger("ensEvent - form - form-dialog-saved");break;case "accounting-data-progressed":Bootstrapper.ensEvent.trigger("accounting-data-progressed");break;case "accounting-data-error":Bootstrapper.ensEvent.trigger("ensEvent - form - accounting-data-error");
s.clearVars("eVar55");s.clearVars("prop19");break;case "file-upload-success":Bootstrapper.ensEvent.trigger("ensEvent - form - file-upload-success");break;case "file-upload-error":Bootstrapper.ensEvent.trigger("ensEvent - form - file-upload-error");break;case "eidv-decision":Bootstrapper.ensEvent.trigger("ensEvent - eidv-decision");break}break;case "page-view":Bootstrapper.ensEvent.trigger("ensEvent - page-view");break;case "user-moment":Bootstrapper.ensEvent.trigger("ensEvent - user-moment");break;
case "calc-interacted":var calcInsightCapture=false;switch(action){case "calc-started":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-started");digitalData.page.pageInfo.customValues.calcStarted="yes";s_sendTealiumTrackEvent(arguments[0]);break;case "calc-progressed":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-progressed");s_sendTealiumTrackEvent(arguments[0]);break;
case "calc-completed":case "calc-complete":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-completed");s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "calc-insight":Bootstrapper.ensEvent.trigger("ensEvent - at-triggerview-start");Bootstrapper.ensEvent.trigger("ensEvent - calc-insight");s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "error-displayed":Bootstrapper.ensEvent.trigger("ensEvent - calc-error-displayed");
break;case "product-selected":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-selected");s_sendTealiumTrackEvent(arguments[0]);break;case "products-viewed":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-viewed");s_sendTealiumTrackEvent(arguments[0]);break;case "product-removed":Bootstrapper.ensEvent.trigger("ensEvent - calc-product-removed");s_sendTealiumTrackEvent(arguments[0]);break;case "field-started":Bootstrapper.ensEvent.trigger("ensEvent - form - field-started");break}try{if(typeof digitalData.page.pageInfo.customValues.calcStarted==
"undefined")if(s_parseDataLayerActionExists("calc-interacted","calc-started")===true){Bootstrapper.ensEvent.trigger("ensEvent - calc-started");try{digitalData.page.pageInfo.customValues.calcStarted="yes"}catch(e){}}}catch(e){}if(action==="field-completed"){var fieldId=s_parseDataLayer("fieldId");if(s_parseDataLayerCustomValueExists(fieldId)===true)Bootstrapper.ensEvent.trigger("ensEvent - calc-insight")}break;case "miniapp-loaded":var miniApp=s_parseDataLayer("name");var pageViewSent=false;if(miniApp==
"NAB Identity component"&&digitalData.page.pageInfo.pageName=="nab:online-forms:application-tracker"){digitalData.event[digitalData.event.length-1].data.pageName=digitalData.page.pageInfo.pageName+":nab-identity-form";if(pageViewSent==false){if(typeof window.digitalData.components!="undefined")window.digitalData.components.formName="Application Tracker";Bootstrapper.ensEvent.trigger("ensEvent - page-view - nab-identity component");pageViewSent=true}}break;case "self-service-start":Bootstrapper.ensEvent.trigger("ensEvent - self-service-start");
break;case "prospect-form-start":var curr_prospect_form_start=s.parseDataLayer("name");if(typeof window.s.omn_prev_prospect_form_start!="undefined"&&typeof curr_prospect_form_start!="undefined")if(window.s.omn_prev_prospect_form_start!=curr_prospect_form_start)delete window.s.omn_prospect_form_start;if(typeof window.s.omn_prospect_form_start=="undefined"||typeof window.s.omn_prospect_form_start==null){Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-start");window.s.omn_prev_prospect_form_start=
s.parseDataLayer("name");window.s.omn_prospect_form_start="true"}break;case "prospect-form-complete":Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");break;case "self-service-complete":Bootstrapper.ensEvent.trigger("ensEvent - self-service-complete");break;case "masthead-click":case "banner-click":try{var runMastheadClickEvent=false;if(typeof s_parseDataLayer("name")!="undefined"&&s_parseDataLayer("name")!="unknown name")runMastheadClickEvent=true;else if(typeof s_parseDataLayer("internalPromo")!=
"undefined"&&s_parseDataLayer("internalPromo")!="unknown internalPromo"&&s_parseDataLayer("internalPromo")!=window._NABTags.prevMhInternalPromo){runMastheadClickEvent=true;if(/ciatesting/i.test(document.location.href))console.log("prevMhInternalPromo: ",window._NABTags.prevMhInternalPromo,", current internal promo: ",s_parseDataLayer("internalPromo"));window._NABTags.prevMhInternalPromo=s_parseDataLayer("internalPromo")}if(runMastheadClickEvent===true){Bootstrapper.ensEvent.trigger("ensEvent - masthead-click");
s_sendTealiumTrackEvent(arguments[0])}}catch(err){}break;case "masthead-click-target":Bootstrapper.ensEvent.trigger("ensEvent - masthead-click");break;case "logout-click":Bootstrapper.ensEvent.trigger("ensEvent - logout-click");break;case "logout-click-target":Bootstrapper.ensEvent.trigger("ensEvent - logout-click");break;case "click_track":if(typeof s_parseDataLayer("name")!="undefined"&&s_parseDataLayer("name")!="unknown name")Bootstrapper.ensEvent.trigger("ensEvent - click_track");break;case "user_action":case "user-action":case "user-question":case "tab-clicked":case "digitalData:user_action":case "credit_cards_compared-category-clicked":case "credit_cards_compared-category-clicked":Bootstrapper.ensEvent.trigger("ensEvent - user_action");
break;case "product-selected":Bootstrapper.ensEvent.trigger("ensEvent - product-selected");break;case "product-recommended":Bootstrapper.ensEvent.trigger("ensEvent - product-recommended");break;case "credit_cards_compared":Bootstrapper.ensEvent.trigger("ensEvent - credit_cards_compared");break;case "click-to-call":Bootstrapper.ensEvent.trigger("ensEvent - click-to-call");break;case "expand-accordion":Bootstrapper.ensEvent.trigger("ensEvent - expand-accordion");break;case "calculator-tab-changed":Bootstrapper.ensEvent.trigger("ensEvent - calculator-tab-changed");
break;case "document-download":Bootstrapper.ensEvent.trigger("ensEvent - document-download");break;case "start-live-chat":Bootstrapper.ensEvent.trigger("ensEvent - start-live-chat");break;case "calculator-used":var curr_calc=s_parseDataLayer("name");if(typeof window.omn_prev_calc!="undefined"&&typeof curr_calc!="undefined")if(window.omn_prev_calc!=curr_calc)delete window.omn_calc_used;if(typeof window.omn_calc_used=="undefined"||typeof window.omn_calc_used==null){Bootstrapper.ensEvent.trigger("ensEvent - calculator-used");
window.omn_prev_calc=s_parseDataLayer("name");window.omn_calc_used="true";s_sendTealiumTrackEvent(arguments[0])}break;case "video-played":case "video-play":Bootstrapper.ensEvent.trigger("ensEvent - video-played");break;case "menu-tab-clicked":Bootstrapper.ensEvent.trigger("ensEvent - menu-tab-clicked");break;case "sticky-nav-clicked":Bootstrapper.ensEvent.trigger("ensEvent - sticky-nav-clicked");break;case "banner-sort":Bootstrapper.ensEvent.trigger("ensEvent - banner-sort");break;case "continue-reading":Bootstrapper.ensEvent.trigger("ensEvent - continue-reading");
break;case "read-more":Bootstrapper.ensEvent.trigger("ensEvent - read-more");break;case "track_clicked":Bootstrapper.ensEvent.trigger("ensEvent - track_clicked");break;case "mega-menu-click":Bootstrapper.ensEvent.trigger("ensEvent - mega-menu-click");break;case "breadcrumb-clicked":Bootstrapper.ensEvent.trigger("ensEvent - breadcrumb-clicked");break;case "sticky-nav-clicked":Bootstrapper.ensEvent.trigger("ensEvent - mega-menu-click");break;case "live-nation-registration":Bootstrapper.ensEvent.trigger("ensEvent - live-nation-registration");
break;case "search-click":Bootstrapper.ensEvent.trigger("ensEvent - search-click");if(window.location.hostname=="propertyinsights.nab.com.au")s_sendTealiumTrackEvent(arguments[0]);if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "search-comparison":Bootstrapper.ensEvent.trigger("ensEvent - search-comparison");if(typeof s!="undefined"){s.eVar4="";s.events=""}break;case "search":if(action=="search")Bootstrapper.ensEvent.trigger("ensEvent - context-search");else if(action=="show-more"||action==
"showMore")Bootstrapper.ensEvent.trigger("ensEvent - context-search-show-more");break;case "track-scroll-as-page":case "view-module":Bootstrapper.ensEvent.trigger("ensEvent - trackPage");break;case "share-content":Bootstrapper.ensEvent.trigger("ensEvent - share-content");break;case "chatwidget-used":var widget_type=s_parseDataLayer("participantType");if(/ciatesting/i.test(document.location.href))console.log("Chat widget used listener triggered");if(typeof s_parseDataLayerSetCustomValue=="function"){if(/ciatesting/i.test(document.location.href))console.log("About to set chatWidgetUsedtriggered custom value - Action: "+
action+" | Widget: "+widget_type);s_parseDataLayerSetCustomValue("chatWidgetUsedtriggered",true)}switch(action){case "chatwidget-available":if(typeof widget_type!="undefined"&&widget_type=="Agent")Bootstrapper.ensEvent.trigger("ensEvent - livechat-offered");else if(typeof widget_type!="undefined"&&widget_type=="Chatbot")Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-offered");break;case "virtual-assistant-initiated":case "chatwidget-opened":Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-initiated");
break;case "chatwidget-resumed":Bootstrapper.ensEvent.trigger("ensEvent - chatwidget-resumed");break;case "virtual-assistant-response":case "message-received":if(s_parseDataLayerCustomValue("virtual-assistant")===false){Bootstrapper.ensEvent.trigger("ensEvent - virtual-assistant-response");s_parseDataLayerSetCustomValue("virtual-assistant","true")}break;case "livechat-offered":Bootstrapper.ensEvent.trigger("ensEvent - livechat-offered");break;case "livechat-started":Bootstrapper.ensEvent.trigger("ensEvent - livechat-started");
break;case "chatwidget-ended":Bootstrapper.ensEvent.trigger("ensEvent - chatwidget-ended");break;case "survey-presented":Bootstrapper.ensEvent.trigger("ensEvent - survey-presented");break;case "survey-completed":Bootstrapper.ensEvent.trigger("ensEvent - survey-completed");break;case "welcome-screen|shown":Bootstrapper.ensEvent.trigger("ensEvent - welcome-screen|shown");break;case "welcome-screen|clicked":Bootstrapper.ensEvent.trigger("ensEvent - welcome-screen|clicked");break;case "chat-input-error":Bootstrapper.ensEvent.trigger("ensEvent - chat-input-error");
break;case "chat-system-error":Bootstrapper.ensEvent.trigger("ensEvent - chat-system-error");break;case "view-chat-history":Bootstrapper.ensEvent.trigger("ensEvent - view-chat-history");break;case "proactive-offer|clicked":Bootstrapper.ensEvent.trigger("ensEvent - proactive-offer|clicked");break;case "proactive-offer|closed":Bootstrapper.ensEvent.trigger("ensEvent - proactive-offer|closed");break;case "quick-reply-clicked":Bootstrapper.ensEvent.trigger("ensEvent - quick-reply-clicked");break;case "carousel-clicked":Bootstrapper.ensEvent.trigger("ensEvent - carousel-clicked");
break;case "button-clicked":Bootstrapper.ensEvent.trigger("ensEvent - button-clicked");break}break;case "modal-survey-used":switch(action){case "modal-survey-presented":Bootstrapper.ensEvent.trigger("ensEvent - modal-survey-presented");break;case "modal-survey-completed":Bootstrapper.ensEvent.trigger("ensEvent - modal-survey-completed");break}break;case "digitalData:spa-action":case "spa-action":switch(action){case "page-displayed":s_pageOverrideUtil(s_parseDataLayer("page"));Bootstrapper.ensEvent.trigger("ensEvent - spa-page-displayed");
break;default:if(/ciatesting/i.test(document.location.href))console.log("spa-action event action: "+action+" is not configured")}break;case "digitalData:scroll-action":case "scroll-action":switch(action){case "horizontal-start":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-start");break;case "horizontal-midpoint":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-midpoint");break;case "horizontal-complete":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-complete");break}break;
case "page-engagement":switch(action){case "vertical-scroll-start":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-start");break;case "vertical-scroll-centre":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-midpoint");break;case "vertical-scroll-end":Bootstrapper.ensEvent.trigger("ensEvent - scroll-action-complete");break}break;case "internal-ad-click":s_runComponentClickEvent("ensEvent - internal-ad-click");break;case "internal-ad-dismissed":s_runComponentClickEvent("ensEvent - internal-ad-dismissed");
break;case "internal-ad-load":s_runComponentClickEvent("ensEvent - internal-ad-load");break;case "feature-content-click":s_runComponentClickEvent("ensEvent - feature-content-click");break;case "link-card-click":s_runComponentClickEvent("ensEvent - link-card-click");break;case "error-displayed":Bootstrapper.ensEvent.trigger("ensEvent - calc-error-displayed");break;case "eidv-interacted":switch(action){case "eidv-started":Bootstrapper.ensEvent.trigger("ensEvent - eidv - eidv-started");break;case "eidv-progressed":Bootstrapper.ensEvent.trigger("ensEvent - eidv - eidv-progressed");
break;case "eidv-decision":Bootstrapper.ensEvent.trigger("ensEvent - eidv - eidv-decision");break;case "eidv-verified":Bootstrapper.ensEvent.trigger("ensEvent - eidv - eidv-verified");break;case "error-displayed":Bootstrapper.ensEvent.trigger("ensEvent - eidv - error-displayed");break;case "field-started":break}break;case "search-action":Bootstrapper.ensEvent.trigger("ensEvent - search-action");break}}else;}catch(e){if(/ciatesting/i.test(document.location.href))console.log("digitalProcessor error: "+
e)}}}};Bootstrapper.bindPageSpecificCompletion(function(){if(typeof digitalData!="undefined"&&digitalData.event.length>0&&typeof digitalData.event[0].eventType!="undefined"&&digitalData.event[0].eventType=="chatwidget-used")if(typeof s_parseDataLayerCustomValueExists=="function"&&s_parseDataLayerCustomValueExists("chatWidgetUsedtriggered")===false)try{if(/ciatesting/i.test(document.location.href))console.log("About to re-push chat widget used event");var localEventHistory=digitalData.event;digitalData.event.push(localEventHistory[0]);
s_parseDataLayerSetCustomValue("chatWidgetUsedtriggered",true)}catch(err){}else if(/ciatesting/i.test(document.location.href))console.log("Chat widget used custom value already exists")});_NABTags.s_parseDataLayer=function(obj_name){if(typeof obj_name=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-1];if(lastEventObject.data[obj_name])return lastEventObject.data[obj_name];
else return"unknown "+obj_name}else return"unknown "+obj_name}catch(err){return"unknown "+obj_name}};_NABTags.processServerSideEvents=function(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var serverSideEvents=[];for(var i=0;i<digitalData.event.length;i++)serverSideEvents.push(digitalData.event[i]);if(/ciatesting/i.test(document.location.href))console.log("serverside events:",serverSideEvents);for(var j=0;j<serverSideEvents.length;j++)digitalData.event.push(serverSideEvents[j])}}catch(e){}};
_NABTags.legacyDemographicHandle=function(formName,fieldId,fieldValue){try{switch(fieldId){case "title":var title=fieldValue;if(title=="Mr")window.sc_applicant_gender="M";else if(title!="Dr"&&!/[0-9]+/.test(title))window.sc_applicant_gender="F";break;case "gender":window.sc_applicant_gender=fieldValue;break;case "dob":var dob=fieldValue;var yob=dob.substr(dob.length-4);var current_year=(new Date).getFullYear();window.sc_applicant_age=parseInt(current_year)-parseInt(yob);try{if(window.sc_applicant_age>
120){var dateFormatCheck1=dob.substr(4,2);var dateFormatCheck2=dob.substr(0,4);if(parseInt(dateFormatCheck1)<13&&parseInt(dateFormatCheck2)>1900){yob=dob.substr(0,4);window.sc_applicant_age=parseInt(current_year)-parseInt(yob)}}}catch(err){}break;case "isNABCust":var customer_status=fieldValue;if(customer_status=="Yes")window.sc_customer_type="Existing";else if(customer_status=="No")window.sc_customer_type="New";break;case "existingCustomer":var customer_status=fieldValue;if(customer_status=="Yes")window.sc_customer_type=
"Existing";else if(customer_status=="No")window.sc_customer_type="New";break;case "state":window.sc_applicant_state=fieldValue;break;case "zipCode":window.sc_applicant_postcode=fieldValue;break;case "applicantNumber":var applicantNumber=fieldValue;if(/1/i.test(applicantNumber))window.sc_applicant_liability="sole";else if(/2/i.test(applicantNumber))window.sc_applicant_liability="joint";break;case "maxCreditLimit":if(fieldValue=="false")s_parseDataLayerSetCustomValue("creditLimitDefault","user defined");
else s_parseDataLayerSetCustomValue("creditLimitDefault","maximum");break;case "existingNCB":window.sc_existing_nbc=fieldValue;break}if(/(business|financial) snapshot/i.test(formName)){if(fieldId=="productOrService")s_parseDataLayerSetCustomValue("productOrServiceAdd",fieldValue);if(fieldId=="contactAcceptance")s_parseDataLayerSetCustomValue("contactAcceptance",formName+":Banker Contact Consent:"+fieldValue)}if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(formName))if(s_parseDataLayer("fieldId")==
"propertyReason")s_parseDataLayerSetCustomValue("propertyReason",fieldValue);if(/REA Home Loan Conditional Approval/i.test(formName))if(fieldId=="consent")s_parseDataLayerSetCustomValue("dataSharingConsent","REA Home Loan Conditional Approval:Data Sharing Consent:"+fieldValue)}catch(e){console.log("_NABTags.legacyDemographicHandle Error:"+e)}};_NABTags.legacyFormPageLoadedEvent=function(formName,pageId,formType){if(pageId=="processing"&&(/cc application|online credit card application/i.test(formName)||
/credit card application/i.test(formName))&&!/pre-approved/i.test(formName));else if(/(business|financial) snapshot|migrant banking/i.test(formName)&&s_parseDataLayerCustomValueExists("formStartTime")===true)Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");else if(/REA Home Loan Conditional Approval|NAB Home Loan Conditional Approval/i.test(formName)&&s_parseDataLayerCustomValueExists("formStartTime")===true)if(/pgExit|pgNext/i.test(pageId)){if(/pgNext/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");
s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID")}else if(/pgPersonalDetails/i.test(pageId)){if(/sectionNextStepsModal/i.test(s_parseDataLayer("sectionId")))Bootstrapper.ensEvent.trigger("ensEvent - form - initial-assessment");else Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");s_clearProductsVar();if(typeof s!="undefined"&&typeof s.clearVars=="function")s.clearVars("purchaseID")}else if(/pgOutcome/i.test(s_parseDataLayer("pageId"))){if(formType==
"application-form")Bootstrapper.ensEvent.trigger("ensEvent - application-form2-complete");else Bootstrapper.ensEvent.trigger("ensEvent - prospect-form-complete");window.sc_formComplete=true;s_clearProductsVar()}else Bootstrapper.ensEvent.trigger("ensEvent - form - form-progressed");else Bootstrapper.ensEvent.trigger("ensEvent - form - form-page-loaded");if(/REA Home Loan Conditional Approval/i.test(formName)&&/pgExit/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-completed");
else if(/REA Home Loan Conditional Approval/i.test(formName)&&!/outcome/i.test(pageId))Bootstrapper.ensEvent.trigger("ensEvent - rea - form-page-loaded")};if(/ciatesting/i.test(document.location.href))console.log("call intialiseOverride()");if(!/www.nab.com.au\/analytics\/personal\/insurance/.test(document.location.href))_NABTags.intialiseOverride();if(/nabhive.nab.com.au/.test(document.location.href)||/sit-merchanthub.ewcs.extnp.nab.com.au/.test(document.location.href)||/dev-merchanthub.ewcs.extnp.nab.com.au/.test(document.location.href))window.setTimeout(_NABTags.processServerSideEvents,
2E3);window._NABTags.loadScriptAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadScriptAsync fired");var s,r,t;r=false;s=document.createElement("script");s.type="text/javascript";s.async=true;s.src=src;s.onload=s.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=true;callback()}};document.getElementsByTagName("body")[0].appendChild(s)};window._NABTags.loadImgPixelAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadImgPixelAsync fired");
var s,r,t;r=false;s=document.createElement("img");s.src=src;s.style.display="none";s.onload=s.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=true;if(typeof callback!="undefined")callback()}};document.getElementsByTagName("body")[0].appendChild(s)};window._NABTags.loadIFrameAsync=function(src,callback){if(/ciatesting/i.test(document.location.href))console.log("window._NABTags.loadIFrameAsync fired");var r,t;r=false;var frame=document.createElement("iframe");
frame.style.display="none";frame.style.width="1px";frame.style.height="1px";frame.src=src;frame.onload=frame.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=true;callback()}};document.getElementsByTagName("body")[0].appendChild(frame)};s_parseDataLayer=function(obj_name){if(typeof obj_name=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-
1];if(lastEventObject.data[obj_name])return lastEventObject.data[obj_name];else return"unknown "+obj_name}else return"unknown "+obj_name}catch(err){return"unknown "+obj_name}};s_parseDataLayerCustomValueExists=function(customValue){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"&&typeof digitalData.page.pageInfo.customValues[customValue]!="undefined")return true;
else return false}catch(err){return false}};s_parseDataLayerFieldCompletedValue=function(fieldId){if(typeof fieldId=="undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined"&&digitalData.event[i].data.action=="field-completed")if(typeof digitalData.event[i].data.fieldId!="undefined"&&digitalData.event[i].data.fieldId==
fieldId)if(typeof digitalData.event[i].data.fieldValue!="undefined")return digitalData.event[i].data.fieldValue;return false}else return false}catch(err){return false}};s_parseDataLayerCustomValue=function(key){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined")if(typeof digitalData.page.pageInfo.customValues[key]!="undefined")return digitalData.page.pageInfo.customValues[key];
else return false};s_parseDataLayerSetCustomValue=function(key,value){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"){if(typeof digitalData.page.pageInfo.customValues=="undefined")digitalData.page.pageInfo.customValues={};digitalData.page.pageInfo.customValues[key]=value;return true}else return false}catch(err){return false}};s_parseDataLayerUserObj=function(eventType,objName,action){if(typeof objName=="undefined"||typeof eventType==
"undefined")return false;try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.user!="undefined")return digitalData.event[i].data.user[objName];else return false;return false}else return false}catch(err){return false}};
s_parseDataLayerProductId=function(eventType,action,getMultipleProducts){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.products!="undefined")if(typeof digitalData.event[i].data.products[0]["product-id"]!=
"undefined")if(typeof getMultipleProducts!="undefined"){var multipleProductsString="";for(var j=0;j<digitalData.event[i].data.products.length;j++)if(typeof digitalData.event[i].data.products[j]["product-id"]!="undefined")multipleProductsString+=",;"+digitalData.event[i].data.products[j]["product-id"];return multipleProductsString.substring(2)}else return digitalData.event[i].data.products[0]["product-id"];else if(typeof digitalData.event[i].data.products[0]["subProduct"]!="undefined")return digitalData.event[i].data.products[0]["subProduct"];
else return false;else return false;return false}else return false}catch(err){console.log(err);return false}};s_parseDataLayerAmountAppliedFor=function(eventType,action){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)if(typeof digitalData.event[i].data.transaction_amount_applied_for!=
"undefined")return digitalData.event[i].data.transaction_amount_applied_for;else return false;return false}else return false}catch(err){return false}};s_clearProductsVar=function(){if(typeof s!="undefined"&&typeof s.products!="undefined")s.products=""};s_parseDataLayerCustomValueStartsWith=function(customValue){try{if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"){for(var obj in digitalData.page.pageInfo.customValues)if(obj.indexOf(customValue)>
-1)return obj;return false}else return false}catch(err){return false}};s_runComponentClickEvent=function(ensEvent){try{var runClickEvent=false;if(typeof s.parseDataLayer("internalPromo")!="undefined"&&s.parseDataLayer("internalPromo")!="unknown internalPromo")runClickEvent=true;if(runClickEvent===true)Bootstrapper.ensEvent.trigger(ensEvent)}catch(err){}};s_parseDataLayerActionExists=function(eventType,action){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){for(var i=
digitalData.event.length-1;i>=0;i--)if(eventType==digitalData.event[i].eventType)if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!="undefined")if(action==digitalData.event[i].data.action)return true;return false}else return false}catch(err){return false}};s_pageOverrideUtil=function(pageName){if(pageName.indexOf("nab-kiosk:personal:")>-1)digitalData.event[digitalData.event.length-1].data.page=pageName.replace("nab-kiosk:personal:","nab-kiosk:personal-banking:");
else if(pageName.indexOf("nab-kiosk:business:")>-1)digitalData.event[digitalData.event.length-1].data.page=pageName.replace("nab-kiosk:business:","nab-kiosk:business-banking:")};s_sendTealiumTrackEvent=function(dataLayerEventObj){try{var tealium_event="undefined tealium_event";if(typeof dataLayerEventObj.data.action!="undefined")tealium_event=dataLayerEventObj.data.action;else if(typeof dataLayerEventObj.eventType!="undefined")tealium_event=dataLayerEventObj.eventType;var page_type="";var page_prefix=
typeof digitalData.page.pageInfo.pageName!="undefined"?digitalData.page.pageInfo.pageName:"undefined page name";var section=typeof dataLayerEventObj.data.section!="undefined"?":"+dataLayerEventObj.data.section.replace(/\s+/g,"-").toLowerCase():"";var form_name="";if(typeof dataLayerEventObj.eventType!="undefined"&&dataLayerEventObj.eventType=="form-interacted"&&typeof dataLayerEventObj.data.name!="undefined")form_name=dataLayerEventObj.data.name;var name="";if(typeof dataLayerEventObj.data.name!=
"undefined"&&form_name=="")name=dataLayerEventObj.data.name;var product_name=[];var product_id=[];if(typeof dataLayerEventObj.data.products=="object")for(var i=0;i<dataLayerEventObj.data.products.length;i++){if(dataLayerEventObj.data.products[i]["product-name"]!="undefined")product_name.push(dataLayerEventObj.data.products[i]["product-name"]);if(dataLayerEventObj.data.products[i]["product-id"]!="undefined")product_id.push(dataLayerEventObj.data.products[i]["product-id"])}var tealiumObj={"tealium_event":tealium_event,
"page_name":page_prefix+section};if(form_name!="")tealiumObj.form_name=form_name;if(name!="")tealiumObj.name=name;if(product_name.length>0)tealiumObj.product_name=product_name;if(product_id.length>0)tealiumObj.product_id=product_id;if(typeof dataLayerEventObj.data.transaction_result!="undefined")tealiumObj.transaction_result=dataLayerEventObj.data.transaction_result;if(typeof dataLayerEventObj.data.application_id!="undefined")tealiumObj.application_id=dataLayerEventObj.data.application_id;if(form_name==
"Transaction and Savings Online Application"||form_name=="Online Credit Card Application"){var phoneSha264=sessionStorage.getItem("n_df_hp");var emailSha264=sessionStorage.getItem("n_df_he");if(typeof phoneSha264=="string")tealiumObj.phoneSha264=phoneSha264;if(typeof emailSha264=="string")tealiumObj.emailSha264=emailSha264}if(tealium_event=="ssc-authentication")tealiumObj.nab_digital_form_ssc=dataLayerEventObj.data.user.ssc;if(tealium_event=="masthead-click"&&typeof window.s_evar47!="undefined"){tealiumObj.targetExperience=
window.s_evar47;tealiumObj.promoCode=s.list1}console.log(tealiumObj);if(typeof utag!="undefined")utag.view(tealiumObj)}catch(e){console.log(e)}};_NABTags.s_hash=function(string){const utf8=(new TextEncoder).encode(string);return crypto.subtle.digest("SHA-256",utf8).then(hashBuffer=>{const hashArray=Array.from(new Uint8Array(hashBuffer));const hashHex=hashArray.map(bytes=>bytes.toString(16).padStart(2,"0")).join("");console.log("Journey 4");return hashHex})};_NABTags.getHashedData=function(){var counti=
0;var matchEmail=false;var i=setInterval(function(){try{var tealium_profile=localStorage.getItem("tealium_va_nab_main");var marketingConsentFlag=tealium_profile!=null&&/"5193"\s*:\s*true/.test(tealium_profile)?true:false;if(marketingConsentFlag==true){if(tealium_profile!=null){var crmHashedEmailMatch=tealium_profile.match(/5175":"([a-z0-9]+)"/);if(crmHashedEmailMatch!=null&&crmHashedEmailMatch[1]!="undefined"){localStorage.setItem("n_aol",crmHashedEmailMatch[1]);matchEmail=true;clearInterval(i)}}counti++;
if(counti>10){if(matchEmail==false){var hashedEmailDigitalForm=sessionStorage.getItem("n_w_aol");if(hashedEmailDigitalForm!=null)localStorage.setItem("n_aol",hashedEmailDigitalForm)}clearInterval(i)}}else if(marketingConsentFlag==false)localStorage.removeItem("n_aol")}catch(e){}},100);var countj=0;var matchPhone=false;var j=setInterval(function(){try{var tealium_profile=localStorage.getItem("tealium_va_nab_main");var marketingConsentFlag=tealium_profile!=null&&/"5193"\s*:\s*true/.test(tealium_profile)?
true:false;if(marketingConsentFlag==true){if(tealium_profile!=null){var crmHashedPhoneMatch=tealium_profile.match(/5177":"([a-z0-9]+)"/);if(crmHashedPhoneMatch!=null&&crmHashedPhoneMatch[1]!="undefined"){localStorage.setItem("n_agb",crmHashedPhoneMatch[1]);matchPhone=true;clearInterval(j)}}countj++;if(countj>10){if(matchPhone==false){var hashedPhoneDigitalForm=sessionStorage.getItem("n_w_agb");if(hashedPhoneDigitalForm!=null)localStorage.setItem("n_agb",hashedPhoneDigitalForm)}clearInterval(j)}}else if(marketingConsentFlag==
false)localStorage.removeItem("n_agb")}catch(e){}},100)}},4210300,639227,24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - product-added",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.products=function anon(){var products=s.parseDataLayer("product");window.sc_products="";if(typeof products!="undefined"&&typeof products.productId!="undefined")window.sc_products=";"+products.productId;return window.sc_products}.call(this);s.events=
"scAdd";s.eVar72=function anon(){return""}.call(this);s.linkTrackVars+=s.linkTrackVars.slice(-1)!=","?",":"";s.linkTrackVars+="products,events,eVar72";s.linkTrackEvents+=s.linkTrackEvents.slice(-1)!=","?",":"";s.linkTrackEvents+="scAdd";s.tl(this,"o","form - products-selected");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},1518059,415149,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-resumed",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event114"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.pageName=
function anon(){window.scFormDebug="Form Progessed - Scenario start";if(typeof s.parseDataLayer("section")=="string"&&s.parseDataLayer("section")!="unknown section"){var section=s.parseDataLayer("section").replace(/\s+/g,"-");window.scFormDebug="Form Progessed - Senario 1: section is set";return digitalData.page.pageInfo.pageName.replace(/:start$/,"").replace(/:privacy$/,"")+":"+section}else if(typeof s.parseDataLayer("page")!="undefined"&&s.parseDataLayer("page")!="unknown page")if(s.parseDataLayer("page").substring(0,
4)==="nab:"){window.scFormDebug="Form Progessed - Scenario 2: page is set - full path";return s.parseDataLayer("page").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 2: page is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("page").replace(/\s+/g,"-").replace(/39/g,"")}else if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName")if(s.parseDataLayer("pageName").substring(0,4)===
"nab:"){window.scFormDebug="Form Progessed - Scenario 3: pageName is set - full path";return s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 3: pageName is set - append";return digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("pageName").replace(/\s+/g,"-")}else{window.scFormDebug="Form Progessed - Scenario 4: no match";return false}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);
s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,pageName,eVar87";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event114"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3628010,685949,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - modal-survey-presented",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";_linkTrackVars+="events,eVar46,prop9,eVar9";_linkTrackEvents+="event27";var _events="event27";var tempObject={};tempObject.linkTrackVars=
_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar46=function anon(){var surveyID=s.parseDataLayer("surveyID");return surveyID}.call(this);tempObject.prop9="D\x3dpageName";tempObject.eVar9="D\x3dpageName";s.tl(this,"o","modal-survey-presented",tempObject)})},2715900,574998,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - welcome-screen|clicked",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event121";_events+="event121";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","welcome-screen|clicked",tempObject)})},3785217,695636,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - form - form-review",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event133"}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,
1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.products=function anon(){try{var productArray=s.parseDataLayer("products");var prodString="";for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")prodString+=",;"+productArray[i]["product-id"];return prodString}catch(err){return""}}.call(this);
s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,"");else return""}else return""}catch(err){return""}}.call(this);s.eVar87=
function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar20=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","applicantLiability","form-review");if(userType)return userType;return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var userType=s_parseDataLayerUserObj("form-interacted","type","form-review");if(userType)return userType;return""}catch(err){return""}}.call(this);s.linkTrackVars=
s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar23,events,products,eVar56,eVar87,eVar20,eVar19";s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event133"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.tl(this,"o","Form Review");s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},4209111,767646,55);
Bootstrapper.bindEventImmediate(function(){var ensEventContext=this;if(ensEventContext==window)ensEventContext=undefined;var Bootstrapper=window["Bootstrapper"];Bootstrapper.currentRuleId=4016917;Bootstrapper.currentDeploymentId=524965;var ensightenOptions=Bootstrapper.ensightenOptions;var ensVar0=function(){return localStorage.getItem("n_aol")};var ensVar1=function(){return localStorage.getItem("n_agb")};var options={},has_valid_value=function(a){return String(typeof a)!=="undefined"&&a!==null&&
a!==""},get_cookie=Bootstrapper.Cookies?Bootstrapper.Cookies.get:function(a){var c=document.cookie.split(";");for(var i=0;i<c.length;i++){var b=c[i].trim().split("\x3d");if(a===b[0]){b.shift();return decodeURIComponent(b.join("\x3d"))}}};options.pixel_id="1349572601822987";options.event_data={};options.event_data.event_name="Lead";options.event_data.event_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)})}();
options.event_data.user_data={};if(has_valid_value(ensVar0.call(this)))options.event_data.user_data.em=ensVar0.call(this);if(has_valid_value(ensVar1.call(this)))options.event_data.user_data.ph=ensVar1.call(this);options.event_data.custom_data={};options.event_data.custom_data.content_name="Personal Loans - Personal Loan - Application Form";options.event_data.custom_data.content_category="Personal Loans";options.event_data.custom_data["Step"]="Start";options.event_data.custom_data["Test"]="0";options.event_data.custom_data["Version"]=
"2";if(!options.event_data.user_data.external_id){var pulse_uuid=get_cookie("uuid");if(pulse_uuid)options.event_data.user_data.external_id=pulse_uuid}!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version="2.0";n.queue=[];t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");
fbq.agent="tmensighten";Bootstrapper.fbq_ids=Bootstrapper.fbq_ids||[];if(!~Bootstrapper.fbq_ids.indexOf(options.pixel_id)){fbq("init",options.pixel_id,options.event_data.user_data);Bootstrapper.fbq_ids.push(options.pixel_id)}fbq("set","autoConfig",false,options.pixel_id);fbq("trackSingle",options.pixel_id,options.event_data.event_name,options.event_data.custom_data,{"eventID":options.event_data.event_id});var sst_options=JSON.parse(JSON.stringify(options)),sha256=function a(b){function c(a,b){return a>>>
b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\u0080";b[h]%64-56;)b+="\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+
(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i},is_sha256=function(a){return/[0-9a-f]{64}/i.test(a)},_fbp=get_cookie("_fbp"),_fbc=get_cookie("_fbc");sst_options.timestamp=(new Date).getTime();if(Array.isArray(sst_options.event_data.custom_data.content_type))sst_options.event_data.custom_data.content_type=
sst_options.event_data.custom_data.content_type.join(",");for(var i in sst_options.event_data.user_data)if(sst_options.event_data.user_data.hasOwnProperty(i))if(is_sha256(sst_options.event_data.user_data[i]))sst_options.event_data.user_data[i]=[sst_options.event_data.user_data[i]];else{var hashed_value=[sha256(sst_options.event_data.user_data[i])];sst_options.event_data.user_data[i]=hashed_value}if(_fbp)sst_options.event_data.user_data.fbp=_fbp;if(_fbc)sst_options.event_data.user_data.fbc=_fbc;Bootstrapper.SST=
Bootstrapper.SST||[];Bootstrapper.SST.push({name:"facebook_conversions_api_integration",data:sst_options,publishPath:"sst"});Bootstrapper.triggerEvent(4016917,524965)},4016917,524965,733,["Personal Loan Online Application - NAB Personal Loan - Application Form Started","Personal Loan Online Application - personal-loan - Application Form Started","Personal Loan Online Full Application - personal-loan - Application Form Started"]);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-complete",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";var depositAmount="";uniqueReference=
s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var applicationSerialise="";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);
applicationSerialise=":"+applicationSerialise}if(s_parseDataLayerAmountAppliedFor("form-interacted","form-completed")!==false){var eventString="";if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob;else eventString="event1,event13"+applicationSerialise+",event14"}else if(applicationSerialise!=""){var dob=s_parseDataLayerUserObj("form-interacted",
"dob","form-completed");eventString="event1,event13"+applicationSerialise+",event14";if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob}else eventString="event1,event13,event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");if(s.parseDataLayer("transaction_amount_accepted")!=
"unknown transaction_amount_accepted"){var acceptedAmount=parseInt(s.parseDataLayer("transaction_amount_accepted"));if(typeof acceptedAmount=="number"&&acceptedAmount>0){eventString+=",event60\x3d"+acceptedAmount;if(s.parseDataLayer("transaction_amount_approved")!="unknown transaction_amount_approved"){var approvedAmount=parseInt(s.parseDataLayer("transaction_amount_approved"));if(typeof approvedAmount=="number"&&approvedAmount>0&&acceptedAmount!=approvedAmount)eventString+=",event61"}}}var eventId=
"";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&
serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}var terminal_event_count="";var formName=s_parseDataLayer("name");if(formName=="Merchant and Payents Online Application"&&typeof digitalData.product[0].quantityField!="undefined"&&typeof digitalData.product[0].quantityField.val!=
"undefined"&&digitalData.product[0].quantityField.val[0]!="undefined")terminal_event_count=",event48\x3d"+digitalData.product[0].quantityField.val[0];if(s_parseDataLayerCustomValueExists("depositAmount")===true)depositAmount=",event89\x3d"+s_parseDataLayerCustomValue("depositAmount");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference")return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount;else if(typeof ticketId!="undefined"&&
ticketId!==""&&ticketId!="unknown ticket_id"){ticketId=ticketId.replace(/NAB\-/i,"");return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}else return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}catch(err){return"event1,event13"}}.call(this);s.pageName=function anon(){if(typeof s.getPageNameFromDL()!="undefined")return s.getPageNameFromDL().replace(/:start$/,"").replace(/:privacy$/,"").replace(/\s+/g,"-")+":thankyou"}.call(this);s.eVar20=function anon(){try{if(s.parseDataLayer("name")==
"Small Business Lending Online Application"||s.parseDataLayer("name")=="Small Business Lending Broker Online Application")if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed")!="undefined")return s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed");else{if(typeof s_parseDataLayerUserObj("form-interacted","applicantLiability","form-completed")!="undefined")return s_parseDataLayerUserObj("form-interacted","applicantLiability",
"form-completed")}else{var applicantLiability=s_parseDataLayerUserObj("form-interacted","applicantLiability","form-completed");var applicantLiabilityDesc=s_parseDataLayerUserObj("form-interacted","applicantLiabilityDescription","form-completed");if(typeof applicantLiability=="string")return applicantLiability.charAt(0).toUpperCase()+applicantLiability.slice(1);else if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-
1];if(lastEventObject.data["user"].applicantLiability)return lastEventObject.data["user"].applicantLiability;else if(typeof applicantLiabilityDesc=="string")return applicantLiabilityDesc;else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}else if(typeof window.sc_applicant_liability!="undefined")return window.sc_applicant_liability;else return""}}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=
s.parseDataLayer("name");var as=sBFP.split("-");for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop33=function anon(){try{var formAbandonStartedFormName=s_parseDataLayerCustomValue("formAbandonStartedFormName");var formStartTime=s_parseDataLayerCustomValue("formStartTime");if(formAbandonStartedFormName!==false&&formStartTime!==false){var formAbandonCompletedFormName=
s_parseDataLayer("name");if(formAbandonStartedFormName==formAbandonCompletedFormName){var currentTime=Math.round((new Date).getTime()/1E3);if(currentTime)return currentTime-formStartTime}}return""}catch(err){return""}}.call(this);s.eVar52=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined")for(var i=digitalData.event.length-1;i>=0;i--){if(digitalData.event[i].eventType=="form-interacted")if(typeof digitalData.event[i].data!="undefined"&&typeof digitalData.event[i].data.action!=
"undefined")if(digitalData.event[i].data.action=="form-completed")if(typeof digitalData.event[i].data.transaction_result!="undefined")return digitalData.event[i].data.transaction_result;else return false}else return false}catch(err){return false}}.call(this);s.eVar15=function anon(){try{var gender=s_parseDataLayerUserObj("form-interacted","gender","form-completed");if(typeof gender=="string")return gender;else if(typeof window.sc_applicant_gender!="undefined")return window.sc_applicant_gender;else return""}catch(err){return""}}.call(this);
s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","form-completed");var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof age!="undefined"&&age!==false)return age;else if(typeof dob!="undefined"&&dob!==false)return dob;else if(typeof window.sc_applicant_age!="undefined")return window.sc_applicant_age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state",
"form-completed");if(typeof state!="undefined")return state;else if(typeof window.sc_applicant_state!="undefined")return window.sc_applicant_state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode","form-completed");if(typeof postcode!="undefined")return postcode;else if(typeof window.sc_applicant_postcode!="undefined")return window.sc_applicant_postcode;else return""}catch(err){return""}}.call(this);s.eVar19=
function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","form-completed");if(typeof type=="string")return type.charAt(0).toUpperCase()+type.slice(1);else if(typeof window.sc_customer_type!="undefined")return window.sc_customer_type;else return""}catch(err){return""}}.call(this);s.products=function anon(){try{var dlName="";if(typeof s_parseDataLayer=="function")dlName=s_parseDataLayer("name");if(s_parseDataLayerProductId("form-interacted","form-completed")!==false){var prodString=
"";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor!="maximum")prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed")+";;;event14\x3d"+dl_AmountAppliedFor;else prodString=";"+s_parseDataLayerProductId("form-interacted","form-completed");var productArray=s.parseDataLayer("products");if(typeof productArray=="object"&&typeof productArray[1]=="object"&&
prodString!="")for(var j=1;j<productArray.length;j++)if(typeof productArray[j]!="undefined")if(typeof productArray[j]["subProduct"]!="undefined"&&productArray[j]["subProduct"]!=="")prodString+=",;"+productArray[j]["subProduct"];else if(typeof productArray[j]["product"]!="undefined"&&productArray[j]["product"]!=="")prodString+=",;"+productArray[j]["product"];else if(typeof productArray[j]["product-id"]!="undefined"&&productArray[j]["product-id"]!=="")prodString+=",;"+productArray[j]["product-id"];
var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount"&&parseInt(balanceTransferAmount)>0)prodString+=",;balanceTransfer"+";;;event74\x3d"+balanceTransferAmount;return prodString}var productText=s.parseDataLayer("productName");if(productText&&productText!="unknown productName")return";"+productText;else if(typeof digitalData!="undefined"&&typeof digitalData.page!=
"undefined"&&typeof digitalData.page.pageInfo!="undefined"&&typeof digitalData.page.pageInfo.customValues!="undefined"&&typeof digitalData.page.pageInfo.customValues["productName"]!="undefined")return";"+digitalData.page.pageInfo.customValues["productName"];else if(typeof digitalData!="undefined"&&typeof digitalData.product!="undefined"&&typeof digitalData.product[0]!="undefined"){var prodString="";for(var iP=0;iP<digitalData.product.length;iP++){var formName=s_parseDataLayer("name");if(formName==
"Merchant and Payments Online Application"&&typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier){prodString+=";"+digitalData.product[iP].cmsIdentifier+",";if(typeof digitalData.product[iP].quantityField!="undefined"&&typeof digitalData.product[iP].quantityField.val!="undefined"&&digitalData.product[iP].quantityField.val[0]!="undefined")prodString+=";terminals,"}else if(typeof digitalData.product[iP].productId!="undefined"&&digitalData.product[iP].productId)prodString+=
";"+digitalData.product[iP].productId+",";else if(typeof digitalData.product[iP].cmsIdentifier!="undefined"&&digitalData.product[iP].cmsIdentifier!="")prodString+=";"+digitalData.product[iP].cmsIdentifier+","}return prodString}else if(typeof window.sc_application_product!="undefined")return";"+window.sc_application_product}catch(err){return""}}.call(this);s.prop50="D\x3devents";s.list3=function anon(){try{var propertyReason=s_parseDataLayerCustomValue("propertyReason");if(typeof propertyReason=="string"&&
propertyReason!="")return propertyReason;else return""}catch(err){return""}}.call(this);s.eVar56=function anon(){try{var refNumber=s.parseDataLayer("application_id");var formName=s.parseDataLayer("name");if(typeof refNumber=="string"&&refNumber!="unknown application_id")return refNumber;else if(typeof formName=="string"&&/upgrade(.*)visa/i.test(formName)){var serialisedId=s.parseDataLayer("serialised_id");if(typeof serialisedId=="string"&&serialisedId!="unknown serialised_id")return serialisedId.replace(/(\D)*(0)*/i,
"");else return""}else return""}catch(err){return""}}.call(this);s.eVar83=function anon(){var depositAmount=s_parseDataLayerCustomValue("depositAmount");var depositTerm=s_parseDataLayerCustomValue("depositTerm");var purpose=s.parseDataLayer("purpose");if(typeof depositAmount==="string"&&typeof depositTerm==="string")return"Term Deposit|"+depositTerm+"|"+depositAmount;else if(typeof purpose=="string"&&purpose!="unknown purpose")return purpose;else if(s.parseDataLayer("purposeAndTerm")!="unknown purposeAndTerm")return s.parseDataLayer("purposeAndTerm");
else return""}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="pageName,eVar20,eVar23,events,prop33,eVar52,eVar15,eVar16,eVar17,eVar18,eVar19,products,prop50,list3,eVar56,eVar83,eVar87,eVar28";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){try{var d=new Date;var serial_append=d.getDate().toString()+d.getMonth().toString()+1+d.getFullYear().toString();var uniqueReference="";var ticketId="";var serialised_id="";var depositAmount="";uniqueReference=s.parseDataLayer("uniqueReference");ticketId=s.parseDataLayer("ticket_id");serialised_id=s.parseDataLayer("serialised_id");var applicationSerialise=
"";var applicationSerialise="";if(s.parseDataLayer("application_id")!="unknown application_id"){applicationSerialise=s.parseDataLayer("application_id").replaceAll("-","");applicationSerialise=applicationSerialise.replaceAll("ORD","");if(applicationSerialise.length>20)applicationSerialise=applicationSerialise.substring(applicationSerialise.length-20,applicationSerialise.length);applicationSerialise=":"+applicationSerialise}if(s_parseDataLayerAmountAppliedFor("form-interacted","form-completed")!==false){var eventString=
"";if(s.parseDataLayer("serialised_id")!="unknown serialised_id"){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");if(typeof dob!="undefined")eventString="event1,event13"+applicationSerialise+",event14,event15\x3d"+dob;else eventString="event1,event13"+applicationSerialise+",event14"}else if(applicationSerialise!=""){var dob=s_parseDataLayerUserObj("form-interacted","dob","form-completed");eventString="event1,event13"+applicationSerialise+",event14";if(typeof dob!="undefined")eventString=
"event1,event13"+applicationSerialise+",event14,event15\x3d"+dob}else eventString="event1,event13,event14";var dl_AmountAppliedFor=s_parseDataLayerAmountAppliedFor("form-interacted","form-completed");if(dl_AmountAppliedFor!==false&&typeof dl_AmountAppliedFor!="undefined"&&dl_AmountAppliedFor=="maximum")eventString=eventString.replace(",event14","");if(s.parseDataLayer("transaction_amount_accepted")!="unknown transaction_amount_accepted"){var acceptedAmount=parseInt(s.parseDataLayer("transaction_amount_accepted"));
if(typeof acceptedAmount=="number"&&acceptedAmount>0){eventString+=",event60\x3d"+acceptedAmount;if(s.parseDataLayer("transaction_amount_approved")!="unknown transaction_amount_approved"){var approvedAmount=parseInt(s.parseDataLayer("transaction_amount_approved"));if(typeof approvedAmount=="number"&&approvedAmount>0&&acceptedAmount!=approvedAmount)eventString+=",event61"}}}var eventId="";if(/small business lending|cc application|online credit card application|home loan conditional approval/i.test(s.parseDataLayer("name"))){var application_id=
s.parseDataLayer("application_id");var serialised_id=s.parseDataLayer("serialised_id");if(/small business lending/i.test(s.parseDataLayer("name"))&&typeof application_id=="string"&&application_id!="unknown application_id"&&application_id!="")eventId=":d"+application_id;else if(typeof serialised_id=="string"&&serialised_id!="unknown serialised_id"&&serialised_id!="")eventId=":d"+serialised_id}var balanceTransferAmount=s.parseDataLayer("balance_transfer_amount");if(typeof balanceTransferAmount!="undefined"&&
balanceTransferAmount!=""&&balanceTransferAmount!="unknown balance_transfer_amount")eventString+=",event74"+eventId;return eventString}var terminal_event_count="";var formName=s_parseDataLayer("name");if(formName=="Merchant and Payents Online Application"&&typeof digitalData.product[0].quantityField!="undefined"&&typeof digitalData.product[0].quantityField.val!="undefined"&&digitalData.product[0].quantityField.val[0]!="undefined")terminal_event_count=",event48\x3d"+digitalData.product[0].quantityField.val[0];
if(s_parseDataLayerCustomValueExists("depositAmount")===true)depositAmount=",event89\x3d"+s_parseDataLayerCustomValue("depositAmount");if(typeof uniqueReference!="undefined"&&uniqueReference!==""&&uniqueReference!="unknown uniqueReference")return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount;else if(typeof ticketId!="undefined"&&ticketId!==""&&ticketId!="unknown ticket_id"){ticketId=ticketId.replace(/NAB\-/i,"");return"event1,event13"+applicationSerialise+terminal_event_count+
depositAmount}else return"event1,event13"+applicationSerialise+terminal_event_count+depositAmount}catch(err){return"event1,event13"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},3965966,374270,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - livechat-started",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop21,eVar21,prop80,prop65,eVar65";_linkTrackEvents+="event83,event5";
_events+="event83,event5";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop21="Live Chat";tempObject.eVar21="D\x3dc21";tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+
":Agent";return prop65}.call(this);tempObject.eVar65="D\x3dc65";s.tl(this,"o","livechat-started",tempObject)})},3785213,533848,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - lead-submitted",function(){s.origLTV=s.linkTrackVars;s.origLTE=s.linkTrackEvents;s.events="";s.events+=""+function anon(){return"event1,event50"}.call(this);s.eVar24="Website";s.eVar23=function anon(){return s.parseDataLayer("name")}.call(this);s.prop9="D\x3dpageName";s.eVar9="D\x3dpageName";s.pageName=function anon(){return"nab:online-forms:"+
s.parseDataLayer("name").replace(/:start$/,"").replace(/\s+/g,"-")+":lead-submitted"}.call(this);s.products=function anon(){try{var prodString="";if(typeof digitalData!="undefined"&&typeof digitalData.product!="undefined"&&typeof digitalData.product[0]!="undefined")for(var iP=0;iP<digitalData.product.length;iP++)if(typeof digitalData.product[iP].productId!="undefined"&&digitalData.product[iP].productId)prodString+=";"+digitalData.product[iP].productId+",";return prodString}catch(err){return""}}.call(this);
s.eVar16=function anon(){try{var age=s_parseDataLayerUserObj("form-interacted","age","lead-completed");if(typeof age!="undefined"&&age!==false)return age;else return""}catch(err){return""}}.call(this);s.eVar17=function anon(){try{var state=s_parseDataLayerUserObj("form-interacted","state","lead-completed");if(typeof state!="undefined"&&state!==false)return state;else return""}catch(err){return""}}.call(this);s.eVar18=function anon(){try{var postcode=s_parseDataLayerUserObj("form-interacted","postcode",
"lead-completed");if(typeof postcode!="undefined"&&postcode!==false)return postcode;else return""}catch(err){return""}}.call(this);s.eVar19=function anon(){try{var type=s_parseDataLayerUserObj("form-interacted","type","lead-completed");if(typeof type!="undefined"&&type!==false)return type;else return""}catch(err){return""}}.call(this);s.linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";s.linkTrackVars+="eVar24,eVar23,events,prop9,eVar9,pageName,products,eVar16,eVar17,eVar18,eVar19";
s.linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";s.linkTrackEvents+="None";s.linkTrackEvents+=","+function anon(){return"event1,event50"}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t();s.linkTrackVars=s.origLTV;s.linkTrackEvents=s.origLTE})},2728681,450596,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - proactive-offer|closed",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar80,prop80,prop65,eVar65";_linkTrackEvents+="event126";_events+="event126";
var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar80=function anon(){return s.parseDataLayer("userId")}.call(this);tempObject.prop80="D\x3dv80";tempObject.prop65=function anon(){var action=s_parseDataLayer("action");var type="Chatbot";return(action+":"+type).trim()}.call(this);tempObject.eVar65="D\x3dc65";
s.tl(this,"o","proactive-offer|closed",tempObject)})},3785221,695641,55);Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;_NABTags.getHashedData()},4021334,[4210300],761774,[639227],24);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - application-form2-start",function(){s.events="";s.events+=""+function anon(){try{var uniqueReference="";uniqueReference=s_parseDataLayer("uniqueReference");var eventString="";if(uniqueReference!="unknown uniqueReference"&&uniqueReference!==""&&/(Home|Home Loan|Car|Landlord|Caravan Trailer) Insurance Application|Travel Insurance/i.test(s_parseDataLayer("name"))){uniqueReference=
uniqueReference.replace(/\-/g,"");eventString="event1,event12:"+uniqueReference}else eventString="event1,event12";return eventString}catch(err){return"event1,event12"}}.call(this);s.pageName=function anon(){window.scFormDebug="Form 2 Started - Scenario 99: return unknown";if(typeof s.parseDataLayer("page")!="undefined"&&s.parseDataLayer("page")!="unknown page")if(s.parseDataLayer("name")=="Merchant Onboarding Online Application")if(s.parseDataLayer("page").substring(0,4)==="nab:")return s.parseDataLayer("page")+
":start";else return digitalData.page.pageInfo.pageName+":"+s.parseDataLayer("page").replace(/\s+/g,"-")+":start";else if(s.parseDataLayer("page").substring(0,4)==="nab:"){window.scFormDebug="Form 2 Started - Scenario 1: page is set - full path";return s.parseDataLayer("page").replace(/\s+/g,"-")}else{window.scFormDebug="Form 2 Started - Scenario 1: page is set - append";var this_pageName=digitalData.page.pageInfo.pageName.replace(/:start$/,"")+":"+s.parseDataLayer("page").replace(/\s+/g,"-");if(this_pageName.lastIndexOf("start")==
-1)this_pageName=this_pageName+"-start";return this_pageName}else if(typeof s.parseDataLayer("pageName")!="undefined"&&s.parseDataLayer("pageName")!="unknown pageName"){if(typeof s.parseDataLayer("section")!="undefined"){window.scFormDebug="Form 2 Started - Scenario 2: join pageName and section";return s.parseDataLayer("pageName")+":"+s.parseDataLayer("section")}else{window.scFormDebug="Form 2 Started - Scenario 3: return pageName";return s.parseDataLayer("pageName")}return"unknown page name"}else try{return digitalData.page.pageInfo.pageName+
"-start"}catch(e){return"unknown page name"}}.call(this);s.eVar20=function anon(){try{if(typeof digitalData!="undefined"&&typeof digitalData.event!="undefined"){var lastEventObject=window.digitalData.event[window.digitalData.event.length-1];if(lastEventObject.data["user"].type)return lastEventObject.data["user"].type;else return""}else return""}catch(err){return""}}.call(this);s.eVar23=function anon(){if(typeof s.parseDataLayer("name")!="undefined"){var sBFP=s.parseDataLayer("name");var as=sBFP.split("-");
for(var iT=0;iT<as.length;iT++)as[iT]=as[iT].substring(0,1).toUpperCase()+as[iT].substring(1);sBFP=as.join(" ");if(sBFP.lastIndexOf("Application")==-1)sBFP=sBFP+" Online Application";return sBFP}else""}.call(this);s.prop66=function anon(){var products=s.parseDataLayer("product");window.sc_products="";if(products instanceof Array){for(var i=0;i<products.length;i++)if(typeof products[i].productInfo!="undefined"&&typeof products[i].productInfo.productName!="undefined")window.sc_products+=products[i].productInfo.productName+
",";else if(typeof products[i].productId!="undefined")window.sc_products+=products[i].productId+",";return window.sc_products}else if(typeof products=="object"&&typeof products.products=="object")for(var i=0;i<products.products.length;i++){if(typeof products.products[i].productId!="undefined")window.sc_products+=products.products[i].productId+","}else return""}.call(this);s.list3="D\x3dc66";s.eVar72=function anon(){if(typeof window.scFormDebugOverride!="undefined")return window.scFormDebugOverride;
else if(typeof window.scFormDebug!="undefined")return window.scFormDebug;else return""}.call(this);s.eVar24="Website";s.products=function anon(){try{var products=s.parseDataLayer("product");var productArray=s.parseDataLayer("products");window.sc_products="";if(typeof products=="object"&&typeof products.products=="object"){var productElement="productId";if(/merchant and payments/i.test(s.parseDataLayer("name")))productElement="cmsIdentifier";if(productElement)for(var i=0;i<products.products.length;i++)if(typeof products.products[i][productElement]!=
"undefined")window.sc_products+=";"+products.products[i][productElement]+",";return window.sc_products}else if(/merchant and payments/i.test(s.parseDataLayer("name"))){var plan=s.Util.getQueryParam("products");if(plan!="")window.sc_products=";"+plan;return window.sc_products}else if(typeof productArray=="object"&&typeof productArray[0]=="object"){for(var i=0;i<productArray.length;i++)if(typeof productArray[i]!="undefined")if(typeof productArray[i]["subProduct"]!="undefined"&&productArray[i]["subProduct"]!==
"")window.sc_products+=";"+productArray[i]["subProduct"]+",";else if(typeof productArray[i]["product"]!="undefined"&&productArray[i]["product"]!=="")window.sc_products+=";"+productArray[i]["product"]+",";else if(typeof productArray[i]["product-id"]!="undefined"&&productArray[i]["product-id"]!=="")window.sc_products+=";"+productArray[i]["product-id"]+",";return window.sc_products}else if(typeof s_parseDataLayerCustomValue("productName")=="string"){window.sc_products=";"+s_parseDataLayerCustomValue("productName");
return window.sc_products}else return""}catch(err){return""}}.call(this);s.eVar65=function anon(){try{if(s_parseDataLayer("name")=="Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var customAction="";var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")customAction=s_parseDataLayer("name")+" : Retrieved Quote";return customAction}else return""}catch(err){return""}}.call(this);
s.eVar86=function anon(){try{if(s_parseDataLayer("name")=="Small Business Lending Online Application"||s_parseDataLayer("name")=="Small Business Lending Broker Online Application"){var quoteId=s_parseDataLayer("quote_id");if(typeof quoteId=="string"&&quoteId!="unknown quote_id"&&quoteId!="")return quoteId;else return""}else return""}catch(err){return""}}.call(this);s.eVar87=function anon(){if(s_parseDataLayer("productOffer")!="unknown productOffer")return s_parseDataLayer("productOffer")}.call(this);
s.eVar28=function anon(){if(s_parseDataLayer("experienceVersion")!="unknown experienceVersion")return s_parseDataLayer("experienceVersion")}.call(this);s.linkTrackVars="pageName,eVar20,eVar23,events,prop66,list3,eVar72,eVar24,products,eVar65,eVar86,eVar87,eVar28";s.linkTrackEvents=function anon(){try{var uniqueReference="";uniqueReference=s_parseDataLayer("uniqueReference");var eventString="";if(uniqueReference!="unknown uniqueReference"&&uniqueReference!==""&&/(Home|Home Loan|Car|Landlord|Caravan Trailer) Insurance Application|Travel Insurance/i.test(s_parseDataLayer("name"))){uniqueReference=
uniqueReference.replace(/\-/g,"");eventString="event1,event12:"+uniqueReference}else eventString="event1,event12";return eventString}catch(err){return"event1,event12"}}.call(this).replace(/(=.*?,|=.*?$)/g,",").replace(/,+$/,"");s.t()})},3804639,374267,55);
Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.ensEvent.add("ensEvent - virtual-assistant-offered",function(){var _linkTrackVars=s.linkTrackVars&&s.linkTrackVars!=="None"?s.linkTrackVars+",":"";var _linkTrackEvents=s.linkTrackEvents&&s.linkTrackEvents!=="None"?s.linkTrackEvents+",":"";var _events="";_linkTrackVars+="events,eVar22,prop22,eVar9,prop9,prop65,eVar65,eVar72,prop11,eVar11";_linkTrackEvents+="event22";
_events+="event22";var tempObject={};tempObject.linkTrackVars=_linkTrackVars;tempObject.linkTrackEvents=_linkTrackEvents;tempObject.events=_events;tempObject.eVar22=function anon(){return s.parseDataLayer("traceId")}.call(this);tempObject.prop22="D\x3dv22";tempObject.eVar9=function anon(){if(typeof digitalData!="undefined"&&typeof digitalData.page!="undefined"&&typeof digitalData.page.pageInfo!="undefined")if(digitalData.page.pageInfo.pageName!="undefined")return digitalData.page.pageInfo.pageName;
else return"";else return""}.call(this);tempObject.prop9="D\x3dv9";tempObject.prop65=function anon(){var prop65=s_parseDataLayer("action")+":Chatbot";return prop65.trim()}.call(this);tempObject.eVar65="D\x3dc65";tempObject.eVar72=function anon(){var widget_type=s.parseDataLayer("participantType");return"widget type: "+widget_type}.call(this);tempObject.prop11="D\x3dg";tempObject.eVar11="D\x3dg";s.tl(this,"o","virtual-assistant-offered",tempObject)})},3783960,533843,55);