!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["nab-aem-frontend"]=t():e["nab-aem-frontend"]=t()}(self,(()=>(()=>{"use strict";var e,t={1716:(e,t,n)=>{n.d(t,{k:()=>i});class i{}i.ARIA_EXPANDED="aria-expanded",i.ARIA_LABEL="aria-label",i.ARIA_LABELLEDBY="aria-labelledby",i.ARIA_HIDDEN="aria-hidden",i.ARIA_SELECTED="aria-selected",i.ARIA_ACTIVEDESCENDANT="aria-activedescendant",i.ARIA_DISABLED="aria-disabled",i.TAB_INDEX="tabindex",i.ALLOW_IN_TAB_ORDER_FOCUS="0",i.ALLOW_SCRIPT_ONLY_FOCUS="-1",i.ARIA_LIVE_DIV_SELECTOR=".nab-accessibility-aria-live",i.ARIA_DESCRIBEDBY="aria-describedby",i.ARIA_CURRENT="aria-current"},4288:(e,t,n)=>{n.d(t,{YM:()=>E});var i=n(6974),s=n(398);const o=10;let a;const r=document.getElementsByTagName("nab-search-config")[0];r&&(a=r.dataset.searchurl),s.Q;class E{}E.GRID_CONTENT_WIDTH=parseInt(i.Ar,o),E.LG_BREAKPOINT_MAX=parseInt(i.Vx,o),E.LG_BREAKPOINT_MIN=parseInt(i.nV,o),E.MD_BREAKPOINT_MAX=parseInt(i.Rf,o),E.MD_BREAKPOINT_MIN=parseInt(i.zv,o),E.SM_BREAKPOINT_MAX=parseInt(i.WS,o),E.SM_BREAKPOINT_MIN=parseInt(i.Ac,o),E.XS_BREAKPOINT_MAX=parseInt(i.tv,o),E.XS_BREAKPOINT_MIN=parseInt(i.L3,o),E.RADIX={BIN:2,DEC:o,HEX:16,OCT:8},E.FRAMERATE={30:33,60:16},E.TYPES={BIGINT:"bigint",BOOLEAN:"boolean",FUNCTION:"function",NUMBER:"number",OBJECT:"object",STRING:"string",SYMBOL:"symbol",UNDEFINED:"undefined"},E.MOBILE_OS_TYPES={ANDROID_DEVICE:"Android",IOS_DEVICE:"iOS",UNKNOWN:"unknown"}},5236:(e,t,n)=>{n.d(t,{$:()=>i,M:()=>r});var i,s=n(1716),o=n(4288),a=n(9790);!function(e){e[e.XS=0]="XS",e[e.SM=1]="SM",e[e.MD=2]="MD",e[e.LG=3]="LG"}(i||(i={}));class r{static isAuthorMode(){return!!window.Granite||!!window.CQ}static isTouchDevice(){return"ontouchstart"in window}static isSafari(){const e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("safari")&&-1===e.indexOf("chrome")&&-1===e.indexOf("android")||/iphone|ipad|ipod/.test(e)&&-1===e.indexOf("chrome")}static resolvePositiveInt(e,t=0){const n=Math.abs("number"==typeof e?e:parseInt(e,10));return"number"==typeof n&&n>=0?n:t}static hide(...e){e.forEach((e=>{e&&(e.classList.add(a.k.HIDDEN_CLASS),e.setAttribute(s.k.ARIA_HIDDEN,"true"))}))}static show(...e){e.forEach((e=>{e&&(e.classList.remove(a.k.HIDDEN_CLASS),e.setAttribute(s.k.ARIA_HIDDEN,"false"))}))}static getKeyCode(e){return e.key||e.which}static getMobileOSNameFromUserAgent(){const e=navigator.userAgent;return e.includes("Windows Phone")?"Windows Phone":e.includes("Android")?o.YM.MOBILE_OS_TYPES.ANDROID_DEVICE:e.includes("iPhone")?o.YM.MOBILE_OS_TYPES.IOS_DEVICE:o.YM.MOBILE_OS_TYPES.UNKNOWN}static getWindowSize(){return window.innerWidth>o.YM.MD_BREAKPOINT_MAX?i.LG:window.innerWidth>o.YM.SM_BREAKPOINT_MAX?i.MD:window.innerWidth>o.YM.XS_BREAKPOINT_MAX?i.SM:i.XS}}r.extendQueryString=(e,t)=>{const[n,i]=e.split("?");let s=Object.fromEntries(new URLSearchParams(i));return s=Object.assign(Object.assign({},s),t),`${n}?${new URLSearchParams(s).toString()}`},r.isOutOfViewport=e=>{const t=e>o.YM.GRID_CONTENT_WIDTH,n=e>window.innerWidth||e>document.documentElement.clientWidth;return t||n},r.getFocusableElements=e=>{const t=["a[href]","area[href]","input:not([disabled])",'input[type="radio"]',"select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]","*[tabindex]"].join(",");return Array.from(e.querySelectorAll(t)).filter((e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility}))}},9790:(e,t,n)=>{n.d(t,{k:()=>i});class i{}i.MAIN_ELEMENT="main",i.OPEN_CLASS="open",i.ACTIVE_CLASS="active",i.HIDDEN_CLASS="hidden",i.HEADER_ID="header-container",i.MENU_SELECTOR="#menu",i.MAIN_NAVIGATION_SELECTOR="#main-navigation",i.SHOW_MAIN_NAVIGATION_CLASS="show-main-nav",i.FOCUS_ELEMENT_WHEN_OPENED_SELECTOR_NAV="#navigation a",i.ARIA_LABEL_MENU_WHEN_OPEN="Close menu",i.ARIA_LABEL_MENU_WHEN_CLOSED="Open menu",i.LEGACY_WRAPPER_SELECTOR="#wrapper",i.NAVIGATION_DRAWER_OPENED_EVENT="navigation-drawer-opened-event",i.NAVIGATION_DRAWER_CLOSED_EVENT="navigation-drawer-closed-event",i.ID_SELECTOR="#"},398:(e,t,n)=>{n.d(t,{Q:()=>l});var i=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function a(e){try{E(i.next(e))}catch(e){o(e)}}function r(e){try{E(i.throw(e))}catch(e){o(e)}}function E(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}E((i=i.apply(e,t||[])).next())}))};let s,o,a;const r=document.getElementsByTagName("nab-search-config")[0];r&&(s=r.dataset.tokenurl,o=r.dataset.clientid,a=r.dataset.scope);const E={Accept:"application/json","Content-Type":"application/json"};let d;const l=()=>i(void 0,void 0,void 0,(function*(){if(!d||Date.now()+2e3>=d.expires){const e=yield c(),t=yield h(e),n=Date.now()+1e3*t.expires_in;d={tokenValue:t.access_token,expires:n}}return d})),c=()=>i(void 0,void 0,void 0,(function*(){if(!o||!a||!s)throw new Error("Missing configuration for token retrieval");const e={client_id:o,grant_type:"nab:anonymous",scope:a},t=yield fetch(s,{method:"POST",body:JSON.stringify(e),headers:E});if(!t.ok)throw new Error("Failed to retrieve anonymous token");return yield t.json()})),h=e=>i(void 0,void 0,void 0,(function*(){if(!o||!a||!s)throw new Error("Missing configuration for token retrieval");const t={client_id:o,scope:a,actor_token:e.access_token,actor_token_type:"urn:ietf:params:oauth:token-type:access_token",grant_type:"urn:ietf:params:oauth:grant-type:token-exchange",requested_token_type:"urn:ietf:params:oauth:token-type:access_token",subject_token:o,subject_token_type:"nab:oauth:token-type:client_id"},n=yield fetch(s,{method:"POST",body:JSON.stringify(t),headers:E});if(!n.ok)throw new Error("Failed to upgrade DAF token");return yield n.json()}))},8390:(e,t,n)=>{var i=n(4022),s=n(4288),o=n(5236),a=n(9790);class r{constructor(e){this.callback=e,window.addEventListener("resize",(0,i.A)(this.onChange.bind(this),250))}onChange(){const e=o.M.getWindowSize();e!==this.currentSize&&(this.callback(this.currentSize,e),this.currentSize=e)}}const E="#login-desktop",d=`${E} .current-dropdown-item`,l="quick-login",c=`#${l}`,h="nav.login-options-desktop",_=`${h} li`,A=`${_} > a`,u="nav.login-options",N=`${u} a`;class O{}O.ARIA_LABEL="Login to a NAB service",O.STORAGE_KEY="nab-default-login",O.MOBILE={FOCUS_ELEMENT_WHEN_OPENED_SELECTOR:N,LOGIN_OPTIONS_SELECTOR:u,LOGIN_SELECTOR:"#login",MAIN_LOGIN_SELECTOR:"#main-login",SHOW_MAIN_LOGIN_CLASS:"show-main-login"},O.DESKTOP={ARIA_LABEL_QUICK_LOGIN_PARAM:"Login to ",CLOSE_NAV_AREA_SELECTOR:"main, #menu-logo-container, #header-quick-links",CURRENT_DROPDOWN_ITEM_SELECTOR:d,DESKTOP_LOGIN_LINK_ATTRIBUTE:"data-loginlink-desktop",DROPDOWN_BUTTON_SELECTOR:E,DROPDOWN_ITEM_POSTITION_DATA_ATTR:"data-loginlist-position",NAV_CONTAINER_SELECTOR:h,OPTIONS_ANCHOR_SELECTOR:A,OPTIONS_LIST_ITEM_SELECTOR:_,QUICK_LOGIN_BUTTON_ID:l,QUICK_LOGIN_BUTTON_SELECTOR:c,GDPR_LOCATED_USER:"GDPR-located-user"};var L,I=n(927);class S{}S.HEADER_HEIGHT_UPDATE_EVENT="set-header-height-update-rate",S.HEADER_MENU_OR_LOGO_FOCUS_EVENT="header-menu-or-logo-focus-event",S.HEADER_BAR_SELECTOR=".nab-header-bar",S.HEADER_BAR_LOGO_SELECTOR=".nab-header-bar__logo > a",S.HEADER_BAR_INNER_SELECTOR=".nab-header-bar--inner",function(e){e[e.null=0]="null",e[e.passive=1]="passive",e[e.aggressive=2]="aggressive"}(L||(L={}));class m{get height(){return this.heightValue}set height(e){typeof e===s.YM.TYPES.NUMBER?(this.heightValue=e,this.component.style.height=`${e}px`):null===e&&(this.heightValue=e,this.component.removeAttribute("style"))}get heightUpdateRate(){return this.heightUpdateRateValue}set heightUpdateRate(e){e in L&&(this.heightUpdateRateValue=e,e>L.null?(this.throttledAdjustHeight(),window.addEventListener("resize",this.throttledAdjustHeight)):(window.removeEventListener("resize",this.throttledAdjustHeight),this.height=null))}constructor(e){this.throttledAdjustHeight=(0,i.A)((()=>{this.heightUpdateRate>L.null&&(this.adjustHeight(),this.heightUpdateRate>L.passive&&this.throttledAdjustHeight())}),s.YM.FRAMERATE[60]),this.heightUpdateRateValue=L.null,this.component=e,this.rightDrawer=new I.NavigationDrawer(O.MOBILE.LOGIN_SELECTOR,O.MOBILE.MAIN_LOGIN_SELECTOR,O.MOBILE.SHOW_MAIN_LOGIN_CLASS,O.MOBILE.FOCUS_ELEMENT_WHEN_OPENED_SELECTOR,O.ARIA_LABEL,O.ARIA_LABEL),this.leftDrawer=new I.NavigationDrawer(a.k.MENU_SELECTOR,a.k.MAIN_NAVIGATION_SELECTOR,a.k.SHOW_MAIN_NAVIGATION_CLASS,a.k.FOCUS_ELEMENT_WHEN_OPENED_SELECTOR_NAV,a.k.ARIA_LABEL_MENU_WHEN_OPEN,a.k.ARIA_LABEL_MENU_WHEN_CLOSED),this.component&&(this.headerElement=this.component.querySelector(S.HEADER_BAR_INNER_SELECTOR),this.headerElement&&(this.resizeWatcher=new r(this.setFocusElement.bind(this)),this.setFocusElement(void 0,o.M.getWindowSize()),this.component.addEventListener(S.HEADER_HEIGHT_UPDATE_EVENT,(e=>{this.heightUpdateRate=e.detail.rate})),this.component.addEventListener(S.HEADER_MENU_OR_LOGO_FOCUS_EVENT,(()=>this.setFocusOnMenuOrLogo()))),this.component.dispatchEvent(new Event("HeaderBarInitialised",{bubbles:!0})))}adjustHeight(){const e=this.headerElement.clientHeight;e!==this.height&&(this.height=e,document.documentElement.style.setProperty("--header-bar-height",`${e}px`))}setFocusElement(e,t){const n=document.querySelectorAll(a.k.MENU_SELECTOR)[0],i=document.querySelectorAll(S.HEADER_BAR_LOGO_SELECTOR)[0];t===o.$.XS?this.focusElement=n:this.focusElement=i}setFocusOnMenuOrLogo(){var e;null===(e=this.focusElement)||void 0===e||e.focus()}}document.querySelectorAll(S.HEADER_BAR_SELECTOR).forEach((e=>{new m(e)}))},927:(e,t,n)=>{n.d(t,{NavigationDrawer:()=>h});var i=n(4755),s=n(1716),o=n(5236);class a{constructor(e,t){this.code=e,this.codeIE=t}}new a("ArrowDown","Down"),new a("Enter");const r=new a("Escape","Esc"),E=(new a("ArrowLeft","Left"),new a("ArrowRight","Right"),new a(" ","Spacebar"),new a("Tab"));new a("ArrowUp","Up"),new a("Home"),new a("End");var d=n(9790);const l=".skip-links a",c="#header-container a";class h{constructor(e,t,n,i,s,o){this.closeEvents=["focus","click"],this.boundEvents={transitionEndFunction:null,wrapperClick:null};const a=document.querySelector(e);a&&(this.rootElementId=e,this.rootElement=a,this.parentElement=a.parentNode,this.mainElement=document.querySelector(d.k.MAIN_ELEMENT),this.mainIdElement=document.querySelector("#main"),this.mainNavigationElement=document.querySelector(t),this.mainNavigationElementId=t,this.showMainNavigationString=n,this.wrapperElement=document.querySelector("#wrapper"),this.focusElementOpenSelectorString=i,this.ariaLabelOpenString=s,this.ariaLabelCloseString=o,this.closeMobileLoginElement=document.querySelector("#close-mobile-login"),this.setMenuHeight=this.setMenuHeight.bind(this),this.rootElement.addEventListener("click",(e=>{e.preventDefault(),this.mainNavigationElement&&this.showMainNavigationString&&this.rootElement&&(this.boundEvents.wrapperClick=this.animateNav(this.mainNavigationElement,this.showMainNavigationString,document.querySelectorAll(i)[0],this.rootElement))})))}static init(e,t,n,i,s,o){return new h(e,t,n,i,s,o)}hasClass(e,t){return e.classList.contains(t)}animateNav(e,t,n,i){const s=n=>{n.target.closest(this.mainNavigationElementId)||this.closeNav(e,t,i)};return this.hasClass(this.mainIdElement,t)?this.closeNav(e,t,i):this.openNav(e,t,n,i,s),s}setAriaExpanded(e){this.rootElement.setAttribute(s.k.ARIA_EXPANDED,e.toString())}setAriaLabel(e){this.rootElement.setAttribute(s.k.ARIA_LABEL,e)}setAriaHidden(e){this.mainNavigationElement.setAttribute(s.k.ARIA_HIDDEN,e.toString())}setTabIndex(e,t){e.forEach((e=>{Array.prototype.slice.call(document.querySelectorAll(e)).forEach((e=>{e.setAttribute(s.k.TAB_INDEX,t)}))}))}openNav(e,t,n,a,h){const _=new Event(d.k.NAVIGATION_DRAWER_OPENED_EVENT);window.dispatchEvent(_);const A=()=>{const i=()=>this.closeNav(e,t,a);this.setAriaExpanded(!0),this.setAriaLabel(this.ariaLabelOpenString),this.setAriaHidden(!1),this.setTabIndex([c,l],s.k.ALLOW_SCRIPT_ONLY_FOCUS),this.setTabIndex([this.focusElementOpenSelectorString,this.rootElementId],s.k.ALLOW_IN_TAB_ORDER_FOCUS),this.parentElement.classList.add(d.k.OPEN_CLASS),n.focus(),window.addEventListener("resize",this.setMenuHeight),this.isLoginNav()&&this.closeEvents.forEach((e=>this.closeMobileLoginElement.addEventListener(e,i))),this.rootElement.addEventListener("keydown",(e=>{const t=this.isLoginNav()&&e.shiftKey&&o.M.getKeyCode(e)===E.code,n=!this.isLoginNav()&&!e.shiftKey&&o.M.getKeyCode(e)===E.code;(t||n)&&i()})),this.mainNavigationElement.addEventListener("keydown",(e=>{(o.M.getKeyCode(e)===r.code||o.M.getKeyCode(e)===r.codeIE)&&i()})),this.wrapperElement.removeEventListener("transitionend",A),this.mainElement.addEventListener("click",h)};this.setMenuHeight(),this.transitionEnd(this.wrapperElement,A),this.mainIdElement.classList.add(t),this.mainNavigationElement.classList.remove(d.k.HIDDEN_CLASS),(0,i.disableBodyScroll)(this.mainNavigationElement)}isLoginNav(){return this.hasClass(this.rootElement,"login-select")}closeNav(e,t,n){const o=new Event(d.k.NAVIGATION_DRAWER_CLOSED_EVENT);window.dispatchEvent(o),n.focus(),window.removeEventListener("resize",this.setMenuHeight),this.mainElement.removeEventListener("click",this.boundEvents.wrapperClick),this.transitionEnd(this.wrapperElement,(()=>{this.setAriaExpanded(!1),this.setAriaLabel(this.ariaLabelCloseString),this.setAriaHidden(!0),this.setTabIndex([c,l],s.k.ALLOW_IN_TAB_ORDER_FOCUS),this.setTabIndex([this.focusElementOpenSelectorString],s.k.ALLOW_SCRIPT_ONLY_FOCUS),this.mainNavigationElement.classList.add(d.k.HIDDEN_CLASS),this.parentElement.classList.remove(d.k.OPEN_CLASS)})),this.mainIdElement.classList.remove(t),(0,i.enableBodyScroll)(this.mainNavigationElement)}setMenuHeight(){const e=document.querySelector(this.mainNavigationElementId);requestAnimationFrame((()=>{e.style.setProperty("height",`${window.innerHeight.toString()}px`)}))}transitionEnd(e,t){const n=i=>{i.target===e&&(t.call(this,i),e.removeEventListener("transitionend",n))};this.boundEvents.transitionEndFunction&&e.removeEventListener("transitionend",this.boundEvents.transitionEndFunction),e.addEventListener("transitionend",n),this.boundEvents.transitionEndFunction=n}}}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,s,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,s,o]=e[l],r=!0,E=0;E<n.length;E++)(!1&o||a>=o)&&Object.keys(i.O).every((e=>i.O[e](n[E])))?n.splice(E--,1):(r=!1,o<a&&(a=o));if(r){e.splice(l--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,s,o]},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.j=663,(()=>{var e={663:0,862:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,o,[a,r,E]=n,d=0;if(a.some((t=>0!==e[t]))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(E)var l=E(i)}for(t&&t(n);d<a.length;d++)o=a[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(l)},n=self.wpJsonpNabAemFrontend=self.wpJsonpNabAemFrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[96],(()=>i(8390)));return i.O(s)})()));