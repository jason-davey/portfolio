"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_lib_flipbook_db_ts";
exports.ids = ["_rsc_lib_flipbook_db_ts"];
exports.modules = {

/***/ "(rsc)/./lib/flipbook/db.ts":
/*!****************************!*\
  !*** ./lib/flipbook/db.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDocument: () => (/* binding */ createDocument),\n/* harmony export */   deleteDocument: () => (/* binding */ deleteDocument),\n/* harmony export */   generateSlug: () => (/* binding */ generateSlug),\n/* harmony export */   generateUniqueSlug: () => (/* binding */ generateUniqueSlug),\n/* harmony export */   getDocumentById: () => (/* binding */ getDocumentById),\n/* harmony export */   getDocumentBySlug: () => (/* binding */ getDocumentBySlug),\n/* harmony export */   insertPages: () => (/* binding */ insertPages),\n/* harmony export */   isSlugAvailable: () => (/* binding */ isSlugAvailable),\n/* harmony export */   listDocuments: () => (/* binding */ listDocuments),\n/* harmony export */   markDocumentError: () => (/* binding */ markDocumentError),\n/* harmony export */   publishDocument: () => (/* binding */ publishDocument),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateDocumentProgress: () => (/* binding */ updateDocumentProgress)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\n * Database operations for Flipbook system\n * Using Supabase client for PostgreSQL operations\n */ \nconst supabaseUrl = \"https://xdzaqafffixglhjfwqsy.supabase.co\";\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY// Use service role for admin operations\n;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n/**\n * Create a new document record\n */ async function createDocument(data) {\n    const { data: document, error } = await supabase.from(\"flipbook_documents\").insert([\n        {\n            title: data.title,\n            slug: data.slug,\n            description: data.description || null,\n            original_file_url: data.original_file_url,\n            file_size: data.file_size || null,\n            project_id: data.project_id || null,\n            status: \"processing\",\n            processing_progress: 0\n        }\n    ]).select().single();\n    if (error) throw new Error(`Failed to create document: ${error.message}`);\n    return document;\n}\n/**\n * Update document processing progress\n */ async function updateDocumentProgress(documentId, progress) {\n    const { error } = await supabase.from(\"flipbook_documents\").update({\n        processing_progress: progress\n    }).eq(\"id\", documentId);\n    if (error) throw new Error(`Failed to update progress: ${error.message}`);\n}\n/**\n * Mark document as completed (published)\n */ async function publishDocument(documentId, totalPages, thumbnailUrl) {\n    const { error } = await supabase.from(\"flipbook_documents\").update({\n        status: \"published\",\n        processing_progress: 100,\n        total_pages: totalPages,\n        thumbnail_url: thumbnailUrl,\n        published_at: new Date().toISOString()\n    }).eq(\"id\", documentId);\n    if (error) throw new Error(`Failed to publish document: ${error.message}`);\n}\n/**\n * Mark document as failed\n */ async function markDocumentError(documentId, errorMessage) {\n    const { error } = await supabase.from(\"flipbook_documents\").update({\n        status: \"error\",\n        error_message: errorMessage\n    }).eq(\"id\", documentId);\n    if (error) throw new Error(`Failed to mark error: ${error.message}`);\n}\n/**\n * Insert page records for a document\n */ async function insertPages(documentId, pages) {\n    const pageData = pages.map((page)=>({\n            document_id: documentId,\n            ...page\n        }));\n    const { error } = await supabase.from(\"flipbook_pages\").insert(pageData);\n    if (error) throw new Error(`Failed to insert pages: ${error.message}`);\n}\n/**\n * Get a single document with its pages by slug\n */ async function getDocumentBySlug(slug) {\n    const { data: document, error: docError } = await supabase.from(\"flipbook_documents\").select(\"*\").eq(\"slug\", slug).eq(\"status\", \"published\").single();\n    if (docError || !document) return null;\n    const { data: pages, error: pagesError } = await supabase.from(\"flipbook_pages\").select(\"*\").eq(\"document_id\", document.id).order(\"page_number\", {\n        ascending: true\n    });\n    if (pagesError) throw new Error(`Failed to fetch pages: ${pagesError.message}`);\n    return {\n        ...document,\n        pages: pages || []\n    };\n}\n/**\n * Get a single document by ID (admin access)\n */ async function getDocumentById(id) {\n    const { data: document, error: docError } = await supabase.from(\"flipbook_documents\").select(\"*\").eq(\"id\", id).single();\n    if (docError || !document) return null;\n    const { data: pages, error: pagesError } = await supabase.from(\"flipbook_pages\").select(\"*\").eq(\"document_id\", document.id).order(\"page_number\", {\n        ascending: true\n    });\n    if (pagesError) return {\n        ...document,\n        pages: []\n    };\n    return {\n        ...document,\n        pages: pages || []\n    };\n}\n/**\n * List all documents (admin)\n */ async function listDocuments(options) {\n    let query = supabase.from(\"flipbook_documents\").select(\"*\").order(\"created_at\", {\n        ascending: false\n    });\n    if (options?.status) {\n        query = query.eq(\"status\", options.status);\n    }\n    if (options?.limit) {\n        query = query.limit(options.limit);\n    }\n    if (options?.offset) {\n        query = query.range(options.offset, options.offset + (options.limit || 10) - 1);\n    }\n    const { data, error } = await query;\n    if (error) throw new Error(`Failed to list documents: ${error.message}`);\n    return data || [];\n}\n/**\n * Delete a document and all its pages\n */ async function deleteDocument(id) {\n    // Pages will be deleted automatically due to CASCADE\n    const { error } = await supabase.from(\"flipbook_documents\").delete().eq(\"id\", id);\n    if (error) throw new Error(`Failed to delete document: ${error.message}`);\n}\n/**\n * Generate a unique slug from title\n */ function generateSlug(title) {\n    return title.toLowerCase().replace(/[^a-z0-9]+/g, \"-\").replace(/(^-|-$)/g, \"\");\n}\n/**\n * Check if slug is available\n */ async function isSlugAvailable(slug, excludeId) {\n    let query = supabase.from(\"flipbook_documents\").select(\"id\").eq(\"slug\", slug);\n    if (excludeId) {\n        query = query.neq(\"id\", excludeId);\n    }\n    const { data, error } = await query;\n    if (error) return false;\n    return !data || data.length === 0;\n}\n/**\n * Generate unique slug by adding number suffix if needed\n */ async function generateUniqueSlug(title, excludeId) {\n    let slug = generateSlug(title);\n    let counter = 1;\n    while(!await isSlugAvailable(slug, excludeId)){\n        slug = `${generateSlug(title)}-${counter}`;\n        counter++;\n    }\n    return slug;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDWEMsT0FBTyxDQUFDLGVBQWUsS0FDdkJBLE9BQU8sQ0FBQyxZQUFZO0FBQ3pCO0FBRUE7O0NBRUMsR0FDTSxlQUFlQyxnQkFBZ0JuRCxJQUFZLEVBQUVvRCxTQUFrQjtJQUNwRSxJQUFJVixRQUFRbEQsU0FDVEssSUFBSSxDQUFDLHNCQUNMVSxNQUFNLENBQUMsTUFDUFEsRUFBRSxDQUFDLFFBQVFmO0lBRWQsSUFBSW9ELFdBQVc7UUFDYlYsUUFBUUEsTUFBTVcsR0FBRyxDQUFDLE1BQU1EO0lBQzFCO0lBRUEsTUFBTSxFQUFFMUQsSUFBSSxFQUFFRSxLQUFLLEVBQUUsR0FBRyxNQUFNOEM7SUFFOUIsSUFBSTlDLE9BQU8sT0FBTztJQUNsQixPQUFPLENBQUNGLFFBQVFBLEtBQUs0RCxNQUFNLEtBQUs7QUFDbEM7QUFFQTs7Q0FFQyxHQUNNLGVBQWVDLG1CQUFtQnhELEtBQWEsRUFBRXFELFNBQWtCO0lBQ3hFLElBQUlwRCxPQUFPZ0QsYUFBYWpEO0lBQ3hCLElBQUl5RCxVQUFVO0lBRWQsTUFBTyxDQUFFLE1BQU1MLGdCQUFnQm5ELE1BQU1vRCxXQUFhO1FBQ2hEcEQsT0FBTyxDQUFDLEVBQUVnRCxhQUFhakQsT0FBTyxDQUFDLEVBQUV5RCxRQUFRLENBQUM7UUFDMUNBO0lBQ0Y7SUFFQSxPQUFPeEQ7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby1hcHAvLi9saWIvZmxpcGJvb2svZGIudHM/NzI5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhdGFiYXNlIG9wZXJhdGlvbnMgZm9yIEZsaXBib29rIHN5c3RlbVxuICogVXNpbmcgU3VwYWJhc2UgY2xpZW50IGZvciBQb3N0Z3JlU1FMIG9wZXJhdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIVxuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZISAvLyBVc2Ugc2VydmljZSByb2xlIGZvciBhZG1pbiBvcGVyYXRpb25zXG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpXG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcGJvb2tEb2N1bWVudCB7XG4gIGlkOiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICBzbHVnOiBzdHJpbmdcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGxcbiAgb3JpZ2luYWxfZmlsZV91cmw6IHN0cmluZ1xuICB0aHVtYm5haWxfdXJsOiBzdHJpbmcgfCBudWxsXG4gIHRvdGFsX3BhZ2VzOiBudW1iZXJcbiAgZmlsZV9zaXplOiBudW1iZXIgfCBudWxsXG4gIHN0YXR1czogJ3Byb2Nlc3NpbmcnIHwgJ3B1Ymxpc2hlZCcgfCAnZHJhZnQnIHwgJ2Vycm9yJ1xuICBwcm9jZXNzaW5nX3Byb2dyZXNzOiBudW1iZXJcbiAgZXJyb3JfbWVzc2FnZTogc3RyaW5nIHwgbnVsbFxuICBwcm9qZWN0X2lkOiBzdHJpbmcgfCBudWxsXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICB1cGRhdGVkX2F0OiBzdHJpbmdcbiAgcHVibGlzaGVkX2F0OiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmxpcGJvb2tQYWdlIHtcbiAgaWQ6IHN0cmluZ1xuICBkb2N1bWVudF9pZDogc3RyaW5nXG4gIHBhZ2VfbnVtYmVyOiBudW1iZXJcbiAgaW1hZ2VfdXJsOiBzdHJpbmdcbiAgd2lkdGg6IG51bWJlclxuICBoZWlnaHQ6IG51bWJlclxuICBleHRyYWN0ZWRfdGV4dDogc3RyaW5nIHwgbnVsbFxuICBjcmVhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudFdpdGhQYWdlcyBleHRlbmRzIEZsaXBib29rRG9jdW1lbnQge1xuICBwYWdlczogRmxpcGJvb2tQYWdlW11cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZG9jdW1lbnQgcmVjb3JkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudChkYXRhOiB7XG4gIHRpdGxlOiBzdHJpbmdcbiAgc2x1Zzogc3RyaW5nXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gIG9yaWdpbmFsX2ZpbGVfdXJsOiBzdHJpbmdcbiAgZmlsZV9zaXplPzogbnVtYmVyXG4gIHByb2plY3RfaWQ/OiBzdHJpbmdcbn0pOiBQcm9taXNlPEZsaXBib29rRG9jdW1lbnQ+IHtcbiAgY29uc3QgeyBkYXRhOiBkb2N1bWVudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2ZsaXBib29rX2RvY3VtZW50cycpXG4gICAgLmluc2VydChbe1xuICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICBzbHVnOiBkYXRhLnNsdWcsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgb3JpZ2luYWxfZmlsZV91cmw6IGRhdGEub3JpZ2luYWxfZmlsZV91cmwsXG4gICAgICBmaWxlX3NpemU6IGRhdGEuZmlsZV9zaXplIHx8IG51bGwsXG4gICAgICBwcm9qZWN0X2lkOiBkYXRhLnByb2plY3RfaWQgfHwgbnVsbCxcbiAgICAgIHN0YXR1czogJ3Byb2Nlc3NpbmcnLFxuICAgICAgcHJvY2Vzc2luZ19wcm9ncmVzczogMCxcbiAgICB9XSlcbiAgICAuc2VsZWN0KClcbiAgICAuc2luZ2xlKClcblxuICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBkb2N1bWVudDogJHtlcnJvci5tZXNzYWdlfWApXG4gIHJldHVybiBkb2N1bWVudFxufVxuXG4vKipcbiAqIFVwZGF0ZSBkb2N1bWVudCBwcm9jZXNzaW5nIHByb2dyZXNzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudFByb2dyZXNzKFxuICBkb2N1bWVudElkOiBzdHJpbmcsXG4gIHByb2dyZXNzOiBudW1iZXJcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdmbGlwYm9va19kb2N1bWVudHMnKVxuICAgIC51cGRhdGUoeyBwcm9jZXNzaW5nX3Byb2dyZXNzOiBwcm9ncmVzcyB9KVxuICAgIC5lcSgnaWQnLCBkb2N1bWVudElkKVxuXG4gIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHByb2dyZXNzOiAke2Vycm9yLm1lc3NhZ2V9YClcbn1cblxuLyoqXG4gKiBNYXJrIGRvY3VtZW50IGFzIGNvbXBsZXRlZCAocHVibGlzaGVkKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVibGlzaERvY3VtZW50KFxuICBkb2N1bWVudElkOiBzdHJpbmcsXG4gIHRvdGFsUGFnZXM6IG51bWJlcixcbiAgdGh1bWJuYWlsVXJsOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdmbGlwYm9va19kb2N1bWVudHMnKVxuICAgIC51cGRhdGUoe1xuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJyxcbiAgICAgIHByb2Nlc3NpbmdfcHJvZ3Jlc3M6IDEwMCxcbiAgICAgIHRvdGFsX3BhZ2VzOiB0b3RhbFBhZ2VzLFxuICAgICAgdGh1bWJuYWlsX3VybDogdGh1bWJuYWlsVXJsLFxuICAgICAgcHVibGlzaGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfSlcbiAgICAuZXEoJ2lkJywgZG9jdW1lbnRJZClcblxuICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHB1Ymxpc2ggZG9jdW1lbnQ6ICR7ZXJyb3IubWVzc2FnZX1gKVxufVxuXG4vKipcbiAqIE1hcmsgZG9jdW1lbnQgYXMgZmFpbGVkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrRG9jdW1lbnRFcnJvcihcbiAgZG9jdW1lbnRJZDogc3RyaW5nLFxuICBlcnJvck1lc3NhZ2U6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2ZsaXBib29rX2RvY3VtZW50cycpXG4gICAgLnVwZGF0ZSh7XG4gICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICBlcnJvcl9tZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfSlcbiAgICAuZXEoJ2lkJywgZG9jdW1lbnRJZClcblxuICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIG1hcmsgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKVxufVxuXG4vKipcbiAqIEluc2VydCBwYWdlIHJlY29yZHMgZm9yIGEgZG9jdW1lbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydFBhZ2VzKFxuICBkb2N1bWVudElkOiBzdHJpbmcsXG4gIHBhZ2VzOiBBcnJheTx7XG4gICAgcGFnZV9udW1iZXI6IG51bWJlclxuICAgIGltYWdlX3VybDogc3RyaW5nXG4gICAgd2lkdGg6IG51bWJlclxuICAgIGhlaWdodDogbnVtYmVyXG4gIH0+XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgcGFnZURhdGEgPSBwYWdlcy5tYXAocGFnZSA9PiAoe1xuICAgIGRvY3VtZW50X2lkOiBkb2N1bWVudElkLFxuICAgIC4uLnBhZ2UsXG4gIH0pKVxuXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2ZsaXBib29rX3BhZ2VzJylcbiAgICAuaW5zZXJ0KHBhZ2VEYXRhKVxuXG4gIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IHBhZ2VzOiAke2Vycm9yLm1lc3NhZ2V9YClcbn1cblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgZG9jdW1lbnQgd2l0aCBpdHMgcGFnZXMgYnkgc2x1Z1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRCeVNsdWcoc2x1Zzogc3RyaW5nKTogUHJvbWlzZTxEb2N1bWVudFdpdGhQYWdlcyB8IG51bGw+IHtcbiAgY29uc3QgeyBkYXRhOiBkb2N1bWVudCwgZXJyb3I6IGRvY0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdmbGlwYm9va19kb2N1bWVudHMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgnc2x1ZycsIHNsdWcpXG4gICAgLmVxKCdzdGF0dXMnLCAncHVibGlzaGVkJylcbiAgICAuc2luZ2xlKClcblxuICBpZiAoZG9jRXJyb3IgfHwgIWRvY3VtZW50KSByZXR1cm4gbnVsbFxuXG4gIGNvbnN0IHsgZGF0YTogcGFnZXMsIGVycm9yOiBwYWdlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdmbGlwYm9va19wYWdlcycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdkb2N1bWVudF9pZCcsIGRvY3VtZW50LmlkKVxuICAgIC5vcmRlcigncGFnZV9udW1iZXInLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuXG4gIGlmIChwYWdlc0Vycm9yKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBwYWdlczogJHtwYWdlc0Vycm9yLm1lc3NhZ2V9YClcblxuICByZXR1cm4ge1xuICAgIC4uLmRvY3VtZW50LFxuICAgIHBhZ2VzOiBwYWdlcyB8fCBbXSxcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHNpbmdsZSBkb2N1bWVudCBieSBJRCAoYWRtaW4gYWNjZXNzKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPERvY3VtZW50V2l0aFBhZ2VzIHwgbnVsbD4ge1xuICBjb25zdCB7IGRhdGE6IGRvY3VtZW50LCBlcnJvcjogZG9jRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2ZsaXBib29rX2RvY3VtZW50cycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpZCcsIGlkKVxuICAgIC5zaW5nbGUoKVxuXG4gIGlmIChkb2NFcnJvciB8fCAhZG9jdW1lbnQpIHJldHVybiBudWxsXG5cbiAgY29uc3QgeyBkYXRhOiBwYWdlcywgZXJyb3I6IHBhZ2VzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2ZsaXBib29rX3BhZ2VzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ2RvY3VtZW50X2lkJywgZG9jdW1lbnQuaWQpXG4gICAgLm9yZGVyKCdwYWdlX251bWJlcicsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG5cbiAgaWYgKHBhZ2VzRXJyb3IpIHJldHVybiB7IC4uLmRvY3VtZW50LCBwYWdlczogW10gfVxuXG4gIHJldHVybiB7XG4gICAgLi4uZG9jdW1lbnQsXG4gICAgcGFnZXM6IHBhZ2VzIHx8IFtdLFxuICB9XG59XG5cbi8qKlxuICogTGlzdCBhbGwgZG9jdW1lbnRzIChhZG1pbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3REb2N1bWVudHMob3B0aW9ucz86IHtcbiAgc3RhdHVzPzogRmxpcGJvb2tEb2N1bWVudFsnc3RhdHVzJ11cbiAgbGltaXQ/OiBudW1iZXJcbiAgb2Zmc2V0PzogbnVtYmVyXG59KTogUHJvbWlzZTxGbGlwYm9va0RvY3VtZW50W10+IHtcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnZmxpcGJvb2tfZG9jdW1lbnRzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICBpZiAob3B0aW9ucz8uc3RhdHVzKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgb3B0aW9ucy5zdGF0dXMpXG4gIH1cblxuICBpZiAob3B0aW9ucz8ubGltaXQpIHtcbiAgICBxdWVyeSA9IHF1ZXJ5LmxpbWl0KG9wdGlvbnMubGltaXQpXG4gIH1cblxuICBpZiAob3B0aW9ucz8ub2Zmc2V0KSB7XG4gICAgcXVlcnkgPSBxdWVyeS5yYW5nZShvcHRpb25zLm9mZnNldCwgb3B0aW9ucy5vZmZzZXQgKyAob3B0aW9ucy5saW1pdCB8fCAxMCkgLSAxKVxuICB9XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnlcblxuICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgZG9jdW1lbnRzOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgcmV0dXJuIGRhdGEgfHwgW11cbn1cblxuLyoqXG4gKiBEZWxldGUgYSBkb2N1bWVudCBhbmQgYWxsIGl0cyBwYWdlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRG9jdW1lbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBQYWdlcyB3aWxsIGJlIGRlbGV0ZWQgYXV0b21hdGljYWxseSBkdWUgdG8gQ0FTQ0FERVxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdmbGlwYm9va19kb2N1bWVudHMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgnaWQnLCBpZClcblxuICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBkb2N1bWVudDogJHtlcnJvci5tZXNzYWdlfWApXG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSB1bmlxdWUgc2x1ZyBmcm9tIHRpdGxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNsdWcodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0aXRsZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKVxuICAgIC5yZXBsYWNlKC8oXi18LSQpL2csICcnKVxufVxuXG4vKipcbiAqIENoZWNrIGlmIHNsdWcgaXMgYXZhaWxhYmxlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc1NsdWdBdmFpbGFibGUoc2x1Zzogc3RyaW5nLCBleGNsdWRlSWQ/OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnZmxpcGJvb2tfZG9jdW1lbnRzJylcbiAgICAuc2VsZWN0KCdpZCcpXG4gICAgLmVxKCdzbHVnJywgc2x1ZylcblxuICBpZiAoZXhjbHVkZUlkKSB7XG4gICAgcXVlcnkgPSBxdWVyeS5uZXEoJ2lkJywgZXhjbHVkZUlkKVxuICB9XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnlcblxuICBpZiAoZXJyb3IpIHJldHVybiBmYWxzZVxuICByZXR1cm4gIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDBcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB1bmlxdWUgc2x1ZyBieSBhZGRpbmcgbnVtYmVyIHN1ZmZpeCBpZiBuZWVkZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlU2x1Zyh0aXRsZTogc3RyaW5nLCBleGNsdWRlSWQ/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBsZXQgc2x1ZyA9IGdlbmVyYXRlU2x1Zyh0aXRsZSlcbiAgbGV0IGNvdW50ZXIgPSAxXG5cbiAgd2hpbGUgKCEoYXdhaXQgaXNTbHVnQXZhaWxhYmxlKHNsdWcsIGV4Y2x1ZGVJZCkpKSB7XG4gICAgc2x1ZyA9IGAke2dlbmVyYXRlU2x1Zyh0aXRsZSl9LSR7Y291bnRlcn1gXG4gICAgY291bnRlcisrXG4gIH1cblxuICByZXR1cm4gc2x1Z1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInN1cGFiYXNlIiwiY3JlYXRlRG9jdW1lbnQiLCJkYXRhIiwiZG9jdW1lbnQiLCJlcnJvciIsImZyb20iLCJpbnNlcnQiLCJ0aXRsZSIsInNsdWciLCJkZXNjcmlwdGlvbiIsIm9yaWdpbmFsX2ZpbGVfdXJsIiwiZmlsZV9zaXplIiwicHJvamVjdF9pZCIsInN0YXR1cyIsInByb2Nlc3NpbmdfcHJvZ3Jlc3MiLCJzZWxlY3QiLCJzaW5nbGUiLCJFcnJvciIsIm1lc3NhZ2UiLCJ1cGRhdGVEb2N1bWVudFByb2dyZXNzIiwiZG9jdW1lbnRJZCIsInByb2dyZXNzIiwidXBkYXRlIiwiZXEiLCJwdWJsaXNoRG9jdW1lbnQiLCJ0b3RhbFBhZ2VzIiwidGh1bWJuYWlsVXJsIiwidG90YWxfcGFnZXMiLCJ0aHVtYm5haWxfdXJsIiwicHVibGlzaGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWFya0RvY3VtZW50RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvcl9tZXNzYWdlIiwiaW5zZXJ0UGFnZXMiLCJwYWdlcyIsInBhZ2VEYXRhIiwibWFwIiwicGFnZSIsImRvY3VtZW50X2lkIiwiZ2V0RG9jdW1lbnRCeVNsdWciLCJkb2NFcnJvciIsInBhZ2VzRXJyb3IiLCJpZCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ2V0RG9jdW1lbnRCeUlkIiwibGlzdERvY3VtZW50cyIsIm9wdGlvbnMiLCJxdWVyeSIsImxpbWl0Iiwib2Zmc2V0IiwicmFuZ2UiLCJkZWxldGVEb2N1bWVudCIsImRlbGV0ZSIsImdlbmVyYXRlU2x1ZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsImlzU2x1Z0F2YWlsYWJsZSIsImV4Y2x1ZGVJZCIsIm5lcSIsImxlbmd0aCIsImdlbmVyYXRlVW5pcXVlU2x1ZyIsImNvdW50ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/flipbook/db.ts\n");

/***/ })

};
;